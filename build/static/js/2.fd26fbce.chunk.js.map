{"version":3,"sources":["../node_modules/react/index.js","../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/tiny-invariant/dist/tiny-invariant.esm.js","../node_modules/resolve-pathname/index.js","../node_modules/value-equal/index.js","../node_modules/history/esm/history.js","../node_modules/react-router-dom/esm/react-router-dom.js","../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/mini-create-react-context/dist/esm/index.js","../node_modules/react-router/esm/react-router.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/prop-types/index.js","../node_modules/tslib/tslib.es6.js","../../index.ts","../../src/constants.ts","../../src/assert.ts","../../src/crypt.ts","../../src/deepCopy.ts","../../src/deferred.ts","../../src/environment.ts","../../src/errors.ts","../../src/json.ts","../../src/jwt.ts","../../src/sha1.ts","../../src/subscribe.ts","../../src/validation.ts","../../src/obj.ts","../../src/query.ts","../../src/utf8.ts","../node_modules/@babel/runtime/helpers/inheritsLoose.js","../node_modules/react-router/node_modules/path-to-regexp/index.js","../node_modules/object-assign/index.js","../node_modules/webpack/buildin/global.js","../node_modules/react-is/index.js","../../src/logger.ts","../../src/firebaseApp.ts","../../src/firebaseNamespace.ts","../../src/firebaseNamespaceCore.ts","../../src/platformLoggerService.ts","../../src/registerCoreComponents.ts","../../src/component.ts","../../src/provider.ts","../../src/component_container.ts","../node_modules/react-dom/index.js","../node_modules/gud/index.js","../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/scheduler/index.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/react-router/node_modules/isarray/index.js","../node_modules/react-is/cjs/react-is.production.min.js","../../src/core/storage/DOMStorageWrapper.ts","../../src/core/storage/MemoryStorage.ts","../../src/core/storage/storage.ts","../../src/core/util/util.ts","../../src/core/util/Path.ts","../../src/core/RepoInfo.ts","../../src/realtime/Constants.ts","../../src/core/util/libs/parser.ts","../../src/core/snap/indexes/KeyIndex.ts","../../src/core/snap/snap.ts","../../src/core/util/validation.ts","../../src/api/onDisconnect.ts","../../src/api/TransactionResult.ts","../../src/core/util/NextPushId.ts","../../src/core/snap/Node.ts","../../src/core/snap/indexes/Index.ts","../../src/core/snap/LeafNode.ts","../../src/core/snap/indexes/PriorityIndex.ts","../../src/core/snap/IndexMap.ts","../../src/core/snap/ChildrenNode.ts","../../src/core/util/SortedMap.ts","../../src/core/snap/childSet.ts","../../src/core/snap/comparators.ts","../../src/core/snap/nodeFromJSON.ts","../../src/core/snap/indexes/ValueIndex.ts","../../src/api/Query.ts","../../src/core/operation/Operation.ts","../../src/core/snap/indexes/PathIndex.ts","../../src/api/DataSnapshot.ts","../../src/core/view/Event.ts","../../src/core/view/EventRegistration.ts","../../src/core/SparseSnapshotTree.ts","../../src/core/util/ServerValues.ts","../../src/core/util/ImmutableTree.ts","../../src/core/SyncPoint.ts","../../src/core/operation/AckUserWrite.ts","../../src/core/operation/ListenComplete.ts","../../src/core/operation/Overwrite.ts","../../src/core/operation/Merge.ts","../../src/core/view/CacheNode.ts","../../src/core/view/ViewCache.ts","../../src/core/view/Change.ts","../../src/core/view/filter/IndexedFilter.ts","../../src/core/view/ChildChangeAccumulator.ts","../../src/core/view/CompleteChildSource.ts","../../src/core/view/ViewProcessor.ts","../../src/core/view/EventGenerator.ts","../../src/core/view/View.ts","../../src/core/CompoundWrite.ts","../../src/core/WriteTree.ts","../../src/core/SyncTree.ts","../../src/core/SnapshotHolder.ts","../../src/core/AuthTokenProvider.ts","../../src/core/stats/StatsCollection.ts","../../src/core/stats/StatsManager.ts","../../src/core/stats/StatsListener.ts","../../src/core/stats/StatsReporter.ts","../../src/core/view/EventQueue.ts","../../src/core/util/EventEmitter.ts","../../src/core/util/VisibilityMonitor.ts","../../src/core/util/OnlineMonitor.ts","../../src/realtime/polling/PacketReceiver.ts","../../src/realtime/BrowserPollConnection.ts","../../src/core/version.ts","../../src/realtime/WebSocketConnection.ts","../../src/realtime/TransportManager.ts","../../src/realtime/Connection.ts","../../src/core/ServerActions.ts","../../src/core/PersistentConnection.ts","../../src/core/ReadonlyRestClient.ts","../../src/core/Repo.ts","../../src/core/view/filter/RangedFilter.ts","../../src/core/view/filter/LimitedFilter.ts","../../src/core/view/QueryParams.ts","../../src/api/Reference.ts","../../src/core/util/Tree.ts","../../src/core/Repo_transaction.ts","../../src/core/RepoManager.ts","../../src/api/Database.ts","../../src/api/internal.ts","../../src/api/test_access.ts","../node_modules/process/browser.js"],"names":["module","exports","require","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","invariant","condition","message","Error","isAbsolute","pathname","charAt","spliceOne","list","index","k","n","pop","resolvePathname","to","from","undefined","toParts","split","fromParts","isToAbs","isFromAbs","mustEndAbs","concat","hasTrailingSlash","last","up","part","unshift","result","join","substr","_typeof","Symbol","iterator","obj","constructor","valueEqual","a","b","Array","isArray","every","item","aType","aValue","valueOf","bValue","aKeys","keys","bKeys","addLeadingSlash","path","stripLeadingSlash","stripBasename","prefix","RegExp","test","hasBasename","stripTrailingSlash","slice","createPath","location","search","hash","createLocation","state","currentLocation","hashIndex","indexOf","searchIndex","parsePath","decodeURI","e","URIError","locationsAreEqual","createTransitionManager","prompt","listeners","setPrompt","nextPrompt","confirmTransitionTo","action","getUserConfirmation","callback","appendListener","fn","isActive","listener","push","filter","notifyListeners","_len","args","_key","forEach","canUseDOM","window","document","createElement","getConfirmation","confirm","getHistoryState","history","createBrowserHistory","props","globalHistory","canUseHistory","ua","navigator","userAgent","supportsHistory","needsHashChangeListener","_props","_props$forceRefresh","forceRefresh","_props$getUserConfirm","_props$keyLength","keyLength","basename","getDOMLocation","historyState","_ref","_window$location","createKey","Math","random","toString","transitionManager","setState","nextState","handlePopState","event","isExtraneousPopstateEvent","handlePop","handleHashChange","forceNextPop","ok","fromLocation","toLocation","toIndex","allKeys","fromIndex","delta","go","revertPop","initialLocation","createHref","listenerCount","checkDOMListeners","addEventListener","removeEventListener","isBlocked","href","pushState","prevIndex","nextKeys","replace","replaceState","goBack","goForward","block","unblock","listen","unlisten","HashPathCoders","hashbang","encodePath","decodePath","noslash","slash","getHashPath","substring","replaceHashPath","createHashHistory","_props$hashType","hashType","_HashPathCoders$hashT","ignorePath","encodedPath","prevLocation","allPaths","lastIndexOf","pushHashPath","nextPaths","clamp","lowerBound","upperBound","min","max","createMemoryHistory","_props$initialEntries","initialEntries","_props$initialIndex","initialIndex","entries","map","entry","nextIndex","nextEntries","splice","canGo","BrowserRouter","_React$Component","_this","_inheritsLoose","render","React","Router","children","Component","Link","_proto","handleClick","onClick","ex","preventDefault","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey","isModifiedEvent","_this$props","innerRef","rest","_objectWithoutPropertiesLoose","__RouterContext","Consumer","context","ref","subClass","superClass","create","__proto__","_slicedToArray","arr","_arr","_n","_d","_e","_s","_i","next","done","value","err","TypeError","createEventEmitter","handlers","on","handler","off","h","get","set","newValue","changedBits","createContext","defaultValue","calculateChangedBits","_Provider$childContex","_Consumer$contextType","contextProp","gud","Provider","_Component","emitter","getChildContext","componentWillReceiveProps","nextProps","oldValue","x","y","childContextTypes","PropTypes","object","isRequired","_Component2","_this2","getValue","onUpdate","observedBits","_proto2","componentDidMount","componentWillUnmount","contextTypes","name","displayName","createNamedContext","_isMounted","_pendingLocation","staticContext","computeRootMatch","url","params","isExact","match","Lifecycle","onMount","componentDidUpdate","prevProps","onUnmount","cache","cacheCount","generatePath","generator","pathToRegexp","compile","compilePath","pretty","Redirect","computedMatch","_ref$push","context$$1","method","self","cache$1","cacheCount$1","matchPath","options","_options","_options$exact","exact","_options$strict","strict","_options$sensitive","sensitive","reduce","matched","_compilePath","cacheKey","end","pathCache","regexp","compilePath$1","exec","values","memo","Route","component","Children","count","isEmptyChildren","base","createURL","staticHandler","methodName","noop","Switch","element","child","isValidElement","cloneElement","excluded","sourceKeys","extendStatics","d","setPrototypeOf","p","__extends","__","__assign","t","s","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","Promise","resolve","reject","fulfilled","step","rejected","then","__generator","body","f","g","_","label","sent","trys","ops","verb","v","op","__exportStar","m","__values","o","__read","ar","error","__spread","__spreadArrays","il","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","default","__importDefault","assert","assertion","assertionError","CONSTANTS","SDK_VERSION","stringToByteArray","str","out","charCodeAt","base64","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","HAS_NATIVE_SUPPORT","atob","encodeByteArray","input","webSafe","init_","byteToCharMap","output","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","encodeString","btoa","decodeString","bytes","pos","c1","String","fromCharCode","c2","u","c3","byteArrayToString","decodeStringToByteArray","charToByteMap","byte4","ENCODED_VALS","ENCODED_VALS_WEBSAFE","base64Decode","console","deepExtend","Date","getTime","prop","promise","wrapCallback","catch","getUA","jsonEval","JSON","parse","decode","token","header","claims","data","signature","parts","chain_","buf_","W_","pad_","inbuf_","total_","blockSize","reset","compress_","buf","offset","W","update","lengthMinusBlock","inbuf","digest","totalBits","executor","onNoObservers","observers","unsubscribes","observerCount","task","finalized","forEachObserver","observer","close","complete","subscribe","nextOrObserver","methods","implementsAnyMethods","unsub","unsubscribeOne","bind","finalError","sendOne","errorPrefix","fnName","argumentNumber","optional","argName","onError","utf8Bytes","proxy","ObserverProxy","global","process","NODE_CLIENT","NODE_ADMIN","now","floor","validSince","validUntil","contextObj","res","querystringParams","arrayVal","encodeURIComponent","querystring","high","stringify","minCount","maxCount","argCount","argError","namespace","isarray","tokensToFunction","tokensToRegExp","PATH_REGEXP","tokens","defaultDelimiter","delimiter","escaped","capture","group","modifier","asterisk","partial","repeat","pattern","escapeGroup","escapeString","encodeURIComponentPretty","encodeURI","toUpperCase","matches","opts","encode","segment","attachKeys","re","flags","route","endsWithDelimiter","groups","regexpToRegexp","arrayToRegexp","stringToRegexp","propIsEnumerable","toObject","val","test1","getOwnPropertyNames","test2","test3","letter","shouldUseNative","symbols","Function","ERRORS","ERROR_FACTORY","ErrorFactory","_a","appName","Logger","config","firebase_","isDeleted_","name_","automaticDataCollectionEnabled_","automaticDataCollectionEnabled","options_","deepCopy","container","ComponentContainer","_addComponent","INTERNAL","components","checkDestroyed_","delete","removeApp","all","getProviders","provider","_getService","instanceIdentifier","getProvider","getImmediate","identifier","_removeServiceInstance","clearInstance","addComponent","logger","debug","_addOrOverwriteComponent","addOrOverwriteComponent","FirebaseAppImpl","log","firebase","createFirebaseNamespace","firebaseAppImpl","apps","Map","initializeApp","rawConfig","contains","app","registerVersion","libraryKeyOrName","version","variant","library","PLATFORM_LOG_STRING","libraryMismatch","versionMismatch","warning","warn","registerComponent","useAsService","componentName","has","type","serviceNamespace","appArg","serviceProps","serviceFxn","multipleInstances","createFirebaseNamespaceCore","extendNamespace","createSubscribe","getPlatformInfoString","getComponent","isVersionServiceProvider","service","logString","isBrowser","firebaseNamespace","isNode","PlatformLoggerService","instanceFactory","instantiationMode","setInstantiationMode","mode","setMultipleInstances","setServiceProps","instances","instancesDeferred","normalizedIdentifier","normalizeInstanceIdentifier","deferred","Deferred","instance","getOrInitializeService","setComponent","isComponentEager","instanceDeferred","services","isComponentSet","normalizeIdentifierForFactory","providers","LogLevel","defaultLogLevel","INFO","defaultLogHandler","logType","logLevel","toISOString","DEBUG","VERBOSE","info","WARN","ERROR","_logLevel","_logHandler","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","ReactIs","REACT_STATICS","contextType","defaultProps","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","KNOWN_STATICS","caller","callee","arity","MEMO_STATICS","compare","TYPE_STATICS","getStatics","isMemo","ForwardRef","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","descriptor","_taggedTemplateLiteral","strings","freeze","defineProperties","for","w","aa","ba","ca","z","A","B","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","C","D","refs","updater","E","F","isReactComponent","forceUpdate","G","isPureReactComponent","H","current","I","suspense","J","K","L","__self","__source","M","l","$$typeof","_owner","N","O","Q","keyPrefix","func","R","U","S","T","escape","ea","fa","V","da","X","toArray","only","createRef","PureComponent","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","_context","forwardRef","lazy","_ctor","_status","_result","useCallback","useContext","useEffect","useImperativeHandle","useDebugValue","useLayoutEffect","useMemo","useReducer","useRef","useState","Fragment","Profiler","StrictMode","Suspense","unstable_SuspenseList","createFactory","unstable_withSuspenseConfig","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentDispatcher","ReactCurrentBatchConfig","ReactCurrentOwner","IsSomeRendererActing","Y","Z","extractEvents","eventTypes","phasedRegistrationNames","ha","registrationName","ia","ja","dependencies","ka","la","ma","na","oa","pa","qa","sa","ta","va","wa","currentTarget","ra","xa","ya","za","Aa","_dispatchListeners","_dispatchInstances","isPropagationStopped","isPersistent","release","Ba","Ca","injectEventPluginOrder","injectEventPluginsByName","Da","stateNode","disabled","Ea","Fa","Ga","Ha","parentNode","tag","Ia","Ja","Ka","La","return","Ma","dispatchConfig","Na","_targetInst","Oa","Pa","Qa","Ra","Sa","toLowerCase","Ta","animationend","animationiteration","animationstart","transitionend","Ua","Va","Wa","style","animation","transition","Xa","Ya","Za","ab","bb","cb","db","eb","fb","textContent","gb","hb","nativeEvent","Interface","isDefaultPrevented","returnValue","jb","eventPool","kb","destructor","ib","getPooled","stopPropagation","cancelBubble","persist","eventPhase","bubbles","cancelable","timeStamp","isTrusted","extend","lb","mb","nb","ob","pb","documentMode","qb","sb","tb","ub","beforeInput","bubbled","captured","compositionEnd","compositionStart","compositionUpdate","vb","wb","keyCode","xb","detail","yb","Cb","locale","which","Ab","char","Bb","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","Ob","Pb","color","date","datetime","email","month","number","password","range","tel","text","time","week","Qb","nodeName","Rb","srcElement","correspondingUseElement","nodeType","Sb","setAttribute","Tb","Vb","_valueTracker","configurable","enumerable","setValue","stopTracking","Ub","Wb","checked","Xb","Yb","Zb","$b","ac","bc","cc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","oc","pc","_debugOwner","_debugSource","fileName","lineNumber","qc","rc","sc","tc","acceptsBooleans","attributeName","attributeNamespace","mustUseProperty","propertyName","sanitizeURL","xc","yc","zc","vc","isNaN","wc","uc","removeAttribute","setAttributeNS","Ac","Bc","defaultChecked","_wrapperState","initialChecked","Cc","initialValue","controlled","Dc","Ec","Fc","Gc","ownerDocument","activeElement","xlinkHref","Hc","change","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","detachEvent","Qc","Rc","attachEvent","Sc","Tc","Uc","Vc","_isInputEventSupported","Wc","view","Xc","Alt","Control","Meta","Shift","Yc","getModifierState","Zc","$c","ad","bd","cd","dd","screenX","screenY","clientX","clientY","pageX","pageY","buttons","relatedTarget","fromElement","toElement","movementX","movementY","ed","pointerId","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","fd","mouseEnter","mouseLeave","pointerEnter","pointerLeave","gd","defaultView","parentWindow","alternate","hd","id","jd","kd","responder","ld","effectTag","od","qd","sibling","pd","Set","rd","animationName","elapsedTime","pseudoElement","sd","clipboardData","td","ud","charCode","vd","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","wd","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","xd","yd","dataTransfer","zd","touches","targetTouches","changedTouches","Ad","Bd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","Cd","Dd","Ed","Fd","Gd","Hd","Id","Jd","Kd","Ld","eventPriority","Md","getEventPriority","Nd","Od","Pd","targetInst","ancestors","containerInfo","topLevelType","Qd","Rd","Sd","Td","Ud","Vd","WeakMap","Wd","Xd","Yd","firstChild","Zd","node","nextSibling","ae","HTMLIFrameElement","contentWindow","be","contentEditable","ce","de","select","ee","fe","ge","he","ie","start","selectionStart","selectionEnd","anchorNode","getSelection","anchorOffset","focusNode","focusOffset","je","onSelect","le","ke","me","selected","defaultSelected","ne","dangerouslySetInnerHTML","oe","pe","qe","SimpleEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin","se","te","ue","ve","MSApp","execUnsafeLocalFunction","namespaceURI","innerHTML","removeChild","appendChild","we","lastChild","nodeValue","xe","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","ye","ze","trim","Ae","setProperty","Ce","menuitem","area","br","col","embed","hr","img","keygen","link","meta","param","track","wbr","De","Ee","is","Fe","add","Ge","He","Ie","Je","autoFocus","Ke","__html","Le","setTimeout","Me","clearTimeout","Ne","Oe","Pe","Qe","Re","Se","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Te","Ue","Ve","We","Xe","__reactInternalMemoizedMergedChildContext","Ye","Ze","unstable_runWithPriority","$e","unstable_scheduleCallback","af","unstable_cancelCallback","bf","unstable_shouldYield","cf","unstable_requestPaint","df","unstable_now","ef","unstable_getCurrentPriorityLevel","ff","unstable_ImmediatePriority","hf","unstable_UserBlockingPriority","jf","unstable_NormalPriority","kf","unstable_LowPriority","lf","unstable_IdlePriority","mf","nf","of","pf","qf","rf","sf","tf","uf","vf","wf","xf","yf","zf","Af","Cf","Df","Ef","Ff","Gf","Hf","If","Jf","childExpirationTime","Kf","firstContext","expirationTime","Lf","Mf","responders","Nf","Of","baseState","firstUpdate","lastUpdate","firstCapturedUpdate","lastCapturedUpdate","firstEffect","lastEffect","firstCapturedEffect","lastCapturedEffect","Pf","Qf","suspenseConfig","payload","nextEffect","Rf","Sf","updateQueue","memoizedState","Tf","Uf","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","fg","_reactInternalFiber","cg","dg","eg","gg","shouldComponentUpdate","hg","ig","UNSAFE_componentWillReceiveProps","jg","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","kg","lg","_stringRef","mg","ng","og","pg","elementType","qg","implementation","rg","sg","rb","Be","tg","ug","vg","wg","xg","yg","zg","Ag","documentElement","tagName","Bg","Cg","Dg","Hg","memoizedProps","revealOrder","Qg","Rg","Sg","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","hh","ih","jh","queue","baseUpdate","kh","lh","mh","lastRenderedReducer","dispatch","lastRenderedState","eagerReducer","eagerState","nh","destroy","deps","oh","ph","qh","rh","sh","readContext","useResponder","Pg","Kg","th","uh","vh","wh","xh","yh","pendingProps","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","UNSAFE_componentWillUpdate","componentWillUpdate","Mh","Nh","pendingContext","Oh","Ph","fallback","unstable_avoidThisFallback","Qh","isBackwards","rendering","tail","tailExpiration","tailMode","Rh","Sh","Th","Vh","Wh","$h","ai","bi","stack","onclick","ci","WeakSet","di","gi","fi","hi","ii","ji","ei","ki","li","mi","ni","insertBefore","_reactRootContainer","oi","wasMultiple","multiple","pi","display","qi","ri","si","ti","ui","vi","wi","componentDidCatch","xi","componentStack","yi","ceil","zi","Ai","Ji","Ki","Li","Mi","Ni","Pi","Qi","Ri","Si","Ti","Ui","Vi","Wi","timeoutMs","Xi","Yi","pingTime","Zi","firstPendingTime","lastPendingTime","callbackExpirationTime","callbackNode","$i","timeout","aj","bj","cj","ej","fj","gj","hj","finishedWork","finishedExpirationTime","timeoutHandle","ij","jj","pingCache","kj","lj","firstBatch","_defer","_expirationTime","_onComplete","dj","busyMinDurationMs","busyDelayMs","mj","size","createElementNS","createTextNode","nj","rangeCount","zb","focusedElem","selectionRange","gh","oj","__reactInternalSnapshotBeforeUpdate","$d","compareDocumentPosition","createRange","setStart","removeAllRanges","addRange","setEnd","left","scrollLeft","top","scrollTop","focus","$a","nc","md","Fj","Xh","Yh","Gj","nd","Zh","gf","pj","qj","rj","hidden","Bf","sj","hydrate","unstable_observedBits","uj","pendingChildren","vj","wj","xj","yj","zj","Aj","Bj","_root","_callbacks","_next","_hasChildren","_didComplete","_children","Cj","_didCommit","_onCommit","Dj","_internalRoot","Ej","Hj","Jj","hasAttribute","Ij","Kj","querySelectorAll","form","commit","unmount","createBatch","Nj","createPortal","findDOMNode","unstable_renderSubtreeIntoContainer","unmountComponentAtNode","unstable_createPortal","unstable_batchedUpdates","unstable_interactiveUpdates","unstable_discreteUpdates","unstable_flushDiscreteUpdates","flushSync","unstable_createRoot","unstable_createSyncRoot","unstable_flushControlled","Events","findFiberByHostInstance","isDisabled","supportsFiber","inject","onCommitFiberRoot","onCommitFiberUnmount","tj","overrideHookState","overrideProps","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","bundleType","rendererPackageName","Oj","Pj","unstable_forceFrameRate","MessageChannel","performance","requestAnimationFrame","cancelAnimationFrame","postMessage","port2","port1","onmessage","previous","priorityLevel","startTime","unstable_next","delay","unstable_wrapCallback","unstable_continueExecution","unstable_pauseExecution","unstable_getFirstCallbackNode","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","propFullName","secret","getShim","ReactPropTypes","array","bool","string","symbol","any","arrayOf","instanceOf","objectOf","oneOf","oneOfType","shape","checkPropTypes","typeOf","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","Lazy","Memo","Portal","isValidElementType","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isPortal","isProfiler","isStrictMode","isSuspense","domStorage_","prefix_","removeItem","prefixedName_","setItem","storedVal","getItem","remove","cache_","isInMemoryStorage","createStoragefor","domStorageName","domStorage","DOMStorageWrapper","MemoryStorage","PersistentStorage","SessionStorage","logClient","LUIDGenerator","sha1","Sha1","sha1Bytes","buildLogMessage_","varArgs","arg","firstLog_","enableLogging","logger_","persistent","logWrapper","fatal","isInvalidJSONNumber","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","MIN_NAME","MAX_NAME","nameCompare","aAsInt","tryParseInt","bAsInt","stringCompare","requireKey","ObjectToUniqueKey","sort","splitStringBySize","segsize","len","dataSegs","each","doubleToIEEE754String","ln","Infinity","abs","pow","LN2","round","bits","reverse","hexByteString","hexByte","parseInt","INTEGER_REGEXP_","intVal","exceptionGuard","setTimeoutNonBlocking","pathOrString","pieceNum","pieces_","copyTo","pieceNum_","Path","getFront","getLength","popFront","getBack","pathString","toUrlEncodedString","begin","parent","pieces","childPathObj","childPieces","isEmpty","relativePath","outerPath","innerPath","outer","inner","comparePaths","right","leftKeys","rightKeys","cmp","equals","other","errorPrefix_","parts_","byteLength_","stringLength","checkValid_","ValidationPath","MAX_PATH_LENGTH_BYTES","MAX_PATH_DEPTH","toErrorString","host","secure","webSocketOnly","persistenceKey","includeNamespaceInQueryParams","domain","internalHost","needsQueryParam","isCustomHost","isCacheableHost","isDemoHost","updateHost","newHost","connectionURL","connURL","pairs","toURLString","__EMPTY_NODE","MAX_NODE","parseRepoInfo","dataURL","parsedUrl","parseDatabaseURL","protocol","scheme","repoInfo","RepoInfo","subdomain","port","colonInd","slashInd","questionMarkInd","pathStringDecoded","piece","decodeURIComponent","queryParams","queryString","results","kv","decodeQuery","INVALID_KEY_REGEX_","INVALID_PATH_REGEX_","isValidKey","isValidPathString","isValidPriority","priority","validateFirebaseDataArg","validateFirebaseData","errorPrefixFxn","path_","validateFirebaseMergeDataArg","mergePaths","curPath","prevPath","validateFirebaseMergePaths","validatePriority","validateEventType","eventType","validateKey","validatePathString","validateRootPathString","validateWritablePath","validateUrl","isValidRootPathString","validateBoolean","repo_","cancel","onComplete","validateArgCount","validateCallback","onDisconnectCancel","onDisconnectSet","setWithPriority","onDisconnectSetWithPriority","objectToMerge","newObjectToMerge","onDisconnectUpdate","committed","snapshot","toJSON","nextPushId","PUSH_CHARS","lastPushTime","lastRandChars","duplicateTime","timeStampChars","Wrap","NamedNode","getCompare","indexedValueChanged","oldNode","newNode","oldWrapped","newWrapped","minPost","MIN","isDefinedOn","maxPost","makePost","indexValue","Index","KEY_INDEX","KeyIndex","__childrenNodeConstructor","nodeFromJSON","priorityHashText","validatePriorityNode","priorityNode","isLeafNode","getPriority","value_","priorityNode_","LeafNode","EMPTY_NODE","lazyHash_","updatePriority","newPriorityNode","getImmediateChild","childName","getChild","hasChild","getPredecessorChildName","childNode","updateImmediateChild","newChildNode","updateChild","front","numChildren","forEachChild","exportFormat","toHash","compareTo","compareToLeafNode_","otherLeaf","otherLeafType","thisLeafType","otherIndex","VALUE_TYPE_ORDER","thisIndex","withIndex","isIndexed","_defaultIndexMap","PRIORITY_INDEX","aPriority","bPriority","indexCmp","startKey","comparator","isReverse_","resultGenerator_","nodeStack_","getNext","hasNext","peek","LLRBNode","RED","SortedMap","copy","inorderTraversal","reverseTraversal","min_","minKey","maxKey","insert","fixUp_","removeMin_","isRed_","moveRedLeft_","smallest","rotateRight_","moveRedRight_","rotateLeft_","colorFlip_","nl","nr","checkMaxDepth_","blackDepth","check_","BLACK","comparator_","root_","getPredecessorKey","rightParent","getIterator","resultGenerator","SortedMapIterator","getIteratorFrom","getReverseIteratorFrom","getReverseIterator","LLRBEmptyNode","LOG_2","num","current_","mask","bits_","nextBitIsOne","buildChildSet","childList","keyFn","mapSortFn","root","base12","buildPennant","chunkSize","low","childTree","buildBalancedTree","namedNode","middle","attachPennant","pennant","isOne","buildFrom12Array","Base12Num","fallbackObject","indexes_","indexSet_","IndexMap","indexKey","sortedMap","safeGet","hasIndex","indexDefinition","addIndex","existingChildren","newIndex","sawIndexedValue","iter","indexName","newIndexSet","newIndexes","addToIndexes","indexedChildren","existingSnap","newChildren","removeFromIndexes","NAME_ONLY_COMPARATOR","NAME_COMPARATOR","children_","indexMap_","ChildrenNode","Default","newIndexMap","newPriority","newImmediateChild","numKeys","allIntegerKeys","childHash","idx","resolveIndex_","predecessor","getFirstChildName","getFirstChild","getLastChildName","getLastChild","wrappedNode","startPost","endPost","otherChildrenNode","thisIter","otherIter","thisCurrent","otherCurrent","MAX","setPriorityMaxNode","json","childData","childSet","sortedChildSet","setNodeFromJSON","__referenceConstructor","OperationType","VALUE_INDEX","valueNode","indexPath_","extractChild","snap","aChild","bChild","node_","ref_","index_","exportVal","exists","childPathString","childPath","childRef","DataSnapshot","childrenNode","hasChildren","getKey","getRef","eventRegistration","prevName","getPath","getParent","getEventType","getEventRunner","callback_","cancelCallback_","context_","respondsTo","createEvent","query","getQueryParams","getIndex","DataEvent","snapshotNode","eventData","ctx","createCancelEvent","CancelEvent","ValueEventRegistration","hasAnyCallback","callbacks_","eventToCheck","ChildEventRegistration","otherKeys","thisKeys","otherCount","otherKey","thisKey","repo","queryParams_","orderByCalled_","validateQueryEndpoints_","startNode","endNode","hasStart","getIndexStartValue","hasEnd","getIndexEndValue","tooManyArgsError","wrongArgTypeError","getIndexStartName","getIndexEndName","PathIndex","validateLimit_","hasLimit","hasAnchoredLimit","validateNoPreviousOrderByCall_","Query","cancelCallbackOrContext","ret","getCancelAndContextArgs_","onValueEvent","callbacks","onChildEvent","cancelCallback","addEventCallbackForQuery","validateContextObject","valueCallback","removeEventCallbackForQuery","once","userCallback","failureCallbackOrContext","firstCall","onceCallback","limitToFirst","limit","limitToLast","orderByChild","parsedPath","newParams","orderBy","orderByKey","orderByPriority","orderByValue","startAt","endAt","equalTo","queryObject","getQueryObject","queryIdentifier","isEqual","sameRepo","samePath","sameQueryIdentifier","cancelOrContext","find","childKey","remember","clear","SparseSnapshotTree","forget","tree","forEachTree","prefixPath","resolveDeferredValue","serverValues","resolveDeferredValueSnapshot","rawPri","leafNode","emptyChildrenSingleton","fromUser","fromServer","queryId","tagged","User","OperationSource","Server","forServerTaggedQuery","affectedTree","revert","ACK_USER_WRITE","operationForChild","subtree","AckUserWrite","Empty","fromObject","ImmutableTree","childSnap","findRootMostMatchingPathAndValue","predicate","childExistingPathAndValue","findRootMostValueAndPath","toSet","newChild","setTree","newTree","fold","fold_","pathSoFar","accum","findOnPath","findOnPath_","pathToFollow","nextChild","foreachOnPath","foreachOnPath_","currentRelativePath","foreach","foreach_","foreachChild","LISTEN_COMPLETE","ListenComplete","OVERWRITE","Overwrite","MERGE","Merge","fullyInitialized_","filtered_","isFullyInitialized","isFiltered","isCompleteForPath","isCompleteForChild","getNode","eventCache_","serverCache_","updateEventSnap","eventSnap","filtered","ViewCache","CacheNode","updateServerSnap","serverSnap","getEventCache","getCompleteEventSnap","getServerCache","getCompleteServerSnap","oldSnap","valueChange","Change","VALUE","childAddedChange","CHILD_ADDED","childRemovedChange","CHILD_REMOVED","childChangedChange","newSnapshot","oldSnapshot","CHILD_CHANGED","childMovedChange","CHILD_MOVED","affectedPath","optChangeAccumulator","oldChild","trackChildChange","updateFullNode","newSnap","filtersNodes","getIndexedFilter","changeMap","oldChange","oldType","getChanges","NO_COMPLETE_CHILD_SOURCE","getCompleteChild","getChildAfterChild","writes_","viewCache_","optCompleteServerCache_","serverNode","calcCompleteChild","completeServerData","nodes","calcIndexedSlice","viewCache","changes","filter_","assertIndexed","applyOperation","oldViewCache","operation","writesCache","completeCache","newViewCache","filterServerNode","accumulator","ChildChangeAccumulator","overwrite","applyUserOverwrite_","applyServerOverwrite_","merge","applyUserMerge_","applyServerMerge_","ackUserWrite","revertUserWrite_","ackUserWrite_","listenComplete_","ViewProcessor","maybeAddValueEvent_","ProcessorResult","isLeafOrEmpty","oldCompleteSnap","generateEventCacheAfterServerEvent_","changePath","oldEventSnap","shadowingWrite","newEventCache","serverCache","completeChildren","completeEventChildren","calcCompleteEventChildren","completeNode","calcCompleteEventCache","oldEventNode","updatedPriority","calcEventCacheAfterServerOverwrite","childChangePath","newEventChild","eventChildUpdate","changedSnap","newServerCache","oldServerSnap","serverFilter","newServerNode","WriteTreeCompleteChildSource","newEventSnap","cacheHasChild_","changedChildren","curViewCache","writePath","applyMerge_","viewMergeTree","serverChild","childMergeTree","isUnknownDeepMerge","ackPath","mergePath","serverCachePath","oldServerNode","completeServerCache","oldEventCache","serverChildren","query_","generateEventsForChanges","eventCache","eventRegistrations","events","moves","generateEventsForType_","registrations","filteredChanges","compareChanges_","materializedChange","materializeSingleChange_","registration","aWrapped","bWrapped","initialViewCache","eventRegistrations_","indexFilter","IndexedFilter","getNodeFilter","processor_","initialServerCache","initialEventCache","eventGenerator_","EventGenerator","getQuery","getCompleteServerCache","loadsAllData","addEventRegistration","removeEventRegistration","cancelError","cancelEvents","maybeEvent","remaining","existing","generateEventsForChanges_","getInitialEvents","initialChanges","views","optCompleteServerCache","serverCacheComplete","eventCacheComplete","View","removed","hadCompleteView","hasCompleteView","viewQueryId","SyncPoint","getQueryViews","viewForQuery","getCompleteView","viewExistsForQuery","writeTree_","addWrite","CompoundWrite","rootmost","rootMostPath","addWrites","updates","newWrite","removeWrite","hasCompleteWrite","getCompleteNode","getCompleteChildren","childCompoundWrite","shadowingNode","applySubtreeWrite","writeTree","visibleWrites_","allWrites_","lastWriteId_","childWrites","WriteTreeRef","addOverwrite","writeId","visible","addMerge","getWrite","record","findIndex","writeToRemove","removedWriteWasVisible","removedWriteOverlapsWithOtherWrites","currentWrite","recordContainsPath_","resetTree_","getCompleteWriteData","treePath","writeIdsToExclude","includeHiddenWrites","mergeAtPath","WriteTree","layerTree_","write","layeredCache","subMerge","completeServerChildren","topLevelSet","existingEventSnap","existingServerSnap","childMerge","toIterate","writeRecord","DefaultFilter_","writes","treeRoot","compoundWrite","deepNode","treePath_","existingServerCache","listenProvider_","syncPointTree_","pendingWriteTree_","tagToQueryMap","queryToTagMap","applyUserOverwrite","newData","applyOperationToSyncPoints_","applyUserMerge","changeTree","applyServerOverwrite","applyServerMerge","applyListenComplete","applyTaggedQueryOverwrite","queryKey","queryKeyForTag_","SyncTree","parseQueryKey_","queryPath","applyTaggedOperation_","applyTaggedQueryMerge","applyTaggedListenComplete","foundAncestorDefaultView","pathToSyncPoint","sp","syncPoint","childSyncPoint","viewAlreadyExists","makeQueryKey_","getNextQueryTag_","setupListener_","maybeSyncPoint","removedAndEvents","removingDefault","covered","parentSyncPoint","newViews","collectDistinctViewsForSubTree_","newQuery","createListenerForView_","startListening","queryForListening_","tagForQuery_","hashFn","stopListening","queryToRemove","tagToRemove","removeTags_","maybeChildSyncPoint","childMap","childViews","queries","removedQuery","removedQueryKey","removedQueryTag","isDefault","queriesToStop","childQueries","queryToStop","status","code","reason","errorForServerCode","splitIndex","nextQueryTag_","applyOperationHelper_","syncPointTree","applyOperationDescendantsHelper_","childOperation","childServerCache","childWritesCache","rootNode_","updateSnapshot","newSnapshotNode","app_","authProvider_","auth_","auth","getToken","addTokenChangeListener","addAuthTokenListener","removeTokenChangeListener","removeAuthTokenListener","notifyForInvalidToken","errorMessage","counters_","incrementCounter","amount","getCollection","hashString","collections_","StatsCollection","getOrCreateReporter","creatorFunction","reporters_","collection_","last_","newStats","stat","collection","server_","statsToReport_","statsListener_","StatsListener","reportStats_","includeStat","stats","reportedStats","haveStatsToReport","reportStats","eventLists_","recursionDepth_","queueEvents","eventDataList","currList","eventPath","EventList","raiseEventsAtPath","raiseQueuedEventsMatchingPredicate_","raiseEventsForChangedPath","changedPath","sentAll","eventList","raise","events_","eventFn","allowedEvents_","listeners_","trigger","validateEventType_","getInitialEvent","et","visibilityChange","visible_","getInstance","VisibilityMonitor","EventEmitter","online_","isMobileCordova","OnlineMonitor","currentlyOnline","onMessage_","pendingResponses","currentResponseNum","closeAfterResponse","onClose","closeAfter","responseNum","handleResponse","requestNum","toProcess","connId","transportSessionId","lastSessionId","bytesSent","bytesReceived","everConnected_","log_","stats_","StatsManager","urlFn","open","onMessage","onDisconnect","curSegmentNum","onDisconnect_","myPacketOrderer","PacketReceiver","isClosed_","connectTimeoutTimer_","onClosed_","isNodeSdk","readyState","executeWhenDOMReady","scriptTagHolder","FirebaseIFrameScriptHolder","command","arg1","arg2","incrementIncomingBytes_","sendNewPolls","pN","urlParams","uniqueCallbackIdentifier","connectURL","addTag","startLongPoll","addDisconnectPingFrame","forceAllow","BrowserPollConnection","forceAllow_","forceDisallow","forceDisallow_","isAvailable","Windows","UI","markConnectionHealthy","shutdown_","myDisconnFrame","send","dataStr","base64data","base64Encode","MAX_URL_DATA_SIZE","enqueueSegment","pw","src","commandCB","onMessageCB","outstandingRequests","pendingSegs","currentSerial","myIFrame","createIFrame_","script","iframeContents","doc","iframe","contentDocument","alive","myID","myPW","newRequest_","theURL","curDataString","theSeg","seg","ts","addLongPollTag_","segnum","totalsegs","serial","doNewRequest","keepaliveTimeout","loadCB","doNodeLongPoll","async","onload","onreadystatechange","rstate","onerror","WebSocketImpl","MozWebSocket","WebSocket","keepaliveTimer","frames","totalFrames","WebSocketConnection","connectionURL_","device","ENV_CONSTANTS","headers","platform","env","origin","mySock","onopen","onclose","handleIncomingFrame","isOldAndroid","oldAndroidMatch","parseFloat","previouslyFailed","appendFrame_","fullMess","jsonMess","handleNewFrameCount_","frameCount","extractFrameCount_","mess","resetKeepAlive","remainingData","sendString_","clearInterval","setInterval","responsesRequiredToBeHealthy","healthyTimeout","initTransports_","isWebSocketsAvailable","isSkipPollConnection","transports_","transports","TransportManager","ALL_TRANSPORTS","transport","initialTransport","upgradeTransport","repoInfo_","onReady_","onKill_","connectionCount","pendingDataMessages","state_","transportManager_","start_","conn","conn_","nextTransportId_","primaryResponsesRequired_","onMessageReceived","connReceiver_","onConnectionLost","disconnReceiver_","tx_","rx_","secondaryConn_","isHealthy_","healthyTimeoutMS","healthyTimeout_","everConnected","onConnectionLost_","onSecondaryConnectionLost_","onPrimaryMessageReceived_","onSecondaryMessageReceived_","sendRequest","dataMsg","msg","sendData_","tryCleanupConnection","onSecondaryControl_","controlData","cmd","upgradeIfSecondaryHealthy_","secondaryResponsesRequired_","parsedData","layer","proceedWithUpgrade_","onControl_","onDataMessage_","onPrimaryResponse_","onHandshake_","onConnectionShutdown_","onReset_","sendPingOnPrimaryIfNecessary_","handshake","timestamp","sessionId","onConnectionEstablished_","tryStartUpgrade_","startUpgrade_","closeConnections_","put","refreshAuthToken","onDisconnectPut","onDisconnectMerge","onDataUpdate_","onConnectStatus_","onServerInfoUpdate_","authTokenProvider_","authOverride_","PersistentConnection","nextPersistentConnectionId_","interruptReasons_","listens","outstandingPuts_","outstandingPutCount_","onDisconnectRequestQueue_","connected_","reconnectDelay_","maxReconnectDelay_","securityDebugCallback_","establishConnectionTimer_","requestCBHash_","requestNumber_","realtime_","authToken_","forceTokenRefresh_","invalidAuthTokenCount_","firstConnection_","lastConnectionAttemptTime_","lastConnectionEstablishedTime_","scheduleConnect_","onVisible_","onOnline_","onResponse","curReqNum","currentHashFn","listenSpec","sendListen_","req","warnOnListenWarnings_","removeListen_","warnings","indexSpec","indexPath","tryAuth","reduceReconnectDelayIfAdminCredential_","credential","isAdmin","authMethod","isValidFormat","requestData","cred","onAuthRevoked_","sendUnlisten_","queryObj","sendOnDisconnect_","request","response","putInternal","sendPut_","queued","errorReason","reqNum","onDataPush_","onListenRevoked_","onSecurityDebugPacket_","handleTimestamp_","sendConnectStats_","restoreState_","establishConnection_","online","onRealtimeDisconnect_","cancelSentTransactions_","shouldReconnect_","timeSinceLastConnectAttempt","reconnectDelay","nextConnectionId_","accessToken","Connection","interrupt","serverTimeOffset","normalizedPathString","statusCode","explanation","clientName","isReactNative","ServerActions","listens_","getListenId_","listenId","ReadonlyRestClient","thisListen","queryStringParameters","toRestQueryStringParameters","restRequest_","authTokenData","authToken","xhr","XMLHttpRequest","responseText","forceRestClient","authProvider","dataUpdateCount","eventQueue_","EventQueue","nextWriteId_","interceptServerDataCallback_","persistentConnection_","authTokenProvider","AuthTokenProvider","authOverride","statsReporter_","StatsReporter","transactionsInit_","infoData_","SnapshotHolder","infoSyncTree_","infoEvents","updateInfo_","serverSyncTree_","serverTime","generateServerValues","isMerge","taggedChildren","taggedSnap","rerunTransactions_","interceptServerData_","connectStatus","runOnDisconnectEvents_","getNextWriteId_","newVal","newNodeUnresolved","success","clearEvents","callOnCompleteCallback","abortTransactions_","childrenToMerge","empty","changedKey","changedValue","resolvedOnDisconnectTree","resolvedTree","resolveDeferredValueTree","showDelta","longestName","previousValue","currentValue","paddedStat","statsIncrementCounter","metric","__database","Database","indexedFilter_","startPost_","RangedFilter","getStartPost_","endPost_","getEndPost_","getStartPost","getEndPost","startName","endName","rangedFilter_","limit_","getLimit","reverse_","isViewFromLeft","fullLimitUpdateChild_","foundStartPost","changeAccumulator","newChildNamedNode","windowBoundary","inRange","oldChildSnap","compareNext","limitSet_","startSet_","startNameSet_","endSet_","endNameSet_","viewFrom_","indexStartValue_","indexStartName_","indexEndValue_","indexEndName_","QueryParams","WIRE_PROTOCOL_CONSTANTS_","VIEW_FROM_LEFT","copy_","newLimit","VIEW_FROM_RIGHT","WIRE_PROTOCOL_CONSTANTS","INDEX_START_VALUE","INDEX_START_NAME","INDEX_END_VALUE","INDEX_END_NAME","LIMIT","viewFrom","VIEW_FROM","INDEX","LimitedFilter","REST_CONSTANTS","REST_QUERY_CONSTANTS_","qs","ORDER_BY","START_AT","END_AT","LIMIT_TO_FIRST","LIMIT_TO_LAST","DEFAULT","Repo","Reference","parentPath","getRoot","databaseProp","database","transaction","transactionUpdate","applyLocally","promiseComplete","TransactionResult","startTransaction","setPriority","thennablePushRef","pushRef","OnDisconnect","TransactionStatus","childCount","parent_","TreeNode","subTree","pathObj","Tree","updateParents_","forEachDescendant","includeSelf","childrenFirst","forEachAncestor","forEachImmediateDescendantWithValue","updateChild_","childEmpty","childExists","MAX_TRANSACTION_RETRIES_","transactionQueueTree_","watchRef","retryCount","unwatcher","abortReason","currentWriteId","currentInputSnapshot","currentOutputSnapshotRaw","currentOutputSnapshotResolved","currentState","getLatestState_","RUN","queueNode","nodeQueue","priorityForNode","sendReadyTransactions_","excludeSets","pruneCompletedTransactionsBelowNode_","buildTransactionQueue_","sendTransactionQueue_","setsToIgnore","txn","latestState","snapToSend","latestHash","SENT","dataToSend","pathToSend","COMPLETED","SENT_NEEDS_ABORT","NEEDS_ABORT","rootMostTransactionNode","getAncestorTransactionNode_","rerunTransactionQueue_","abortTransaction","currentNode","newDataNode","oldWriteId","newNodeResolved","lastInput","transactionNode","transactionQueue","aggregateTransactionQueuesForNode_","abortTransactionsOnNode_","lastSent","_staticInstance","repos_","useRestClient_","RepoManager","dbUrl","databaseFromApp","dbEmulatorHost","createRepo","deleteRepo","appRepos","DatabaseInternals","checkDeleted_","refFromURL","apiName","parsedURL","goOffline","goOnline","ServerValue","TIMESTAMP","DataConnection","simpleListen","echo","onEcho","RealTimeConnection","ConnectionTarget","newHash","oldPut","registerDatabase","setSDKVersion","TEST_ACCESS","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","nextTick","title","browser","argv","versions","addListener","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask"],"mappings":"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","file":"static/js/2.fd26fbce.chunk.js","sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction) {\n    throw new Error(prefix);\n  } else {\n    throw new Error(prefix + \": \" + (message || ''));\n  }\n}\n\nexport default invariant;\n","function isAbsolute(pathname) {\n  return pathname.charAt(0) === '/';\n}\n\n// About 1.5x faster than the two-arg version of Array#splice()\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1) {\n    list[i] = list[k];\n  }\n\n  list.pop();\n}\n\n// This implementation is based heavily on node's url.parse\nfunction resolvePathname(to) {\n  var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  var toParts = to && to.split('/') || [];\n  var fromParts = from && from.split('/') || [];\n\n  var isToAbs = to && isAbsolute(to);\n  var isFromAbs = from && isAbsolute(from);\n  var mustEndAbs = isToAbs || isFromAbs;\n\n  if (to && isAbsolute(to)) {\n    // to is absolute\n    fromParts = toParts;\n  } else if (toParts.length) {\n    // to is relative, drop the filename\n    fromParts.pop();\n    fromParts = fromParts.concat(toParts);\n  }\n\n  if (!fromParts.length) return '/';\n\n  var hasTrailingSlash = void 0;\n  if (fromParts.length) {\n    var last = fromParts[fromParts.length - 1];\n    hasTrailingSlash = last === '.' || last === '..' || last === '';\n  } else {\n    hasTrailingSlash = false;\n  }\n\n  var up = 0;\n  for (var i = fromParts.length; i >= 0; i--) {\n    var part = fromParts[i];\n\n    if (part === '.') {\n      spliceOne(fromParts, i);\n    } else if (part === '..') {\n      spliceOne(fromParts, i);\n      up++;\n    } else if (up) {\n      spliceOne(fromParts, i);\n      up--;\n    }\n  }\n\n  if (!mustEndAbs) for (; up--; up) {\n    fromParts.unshift('..');\n  }if (mustEndAbs && fromParts[0] !== '' && (!fromParts[0] || !isAbsolute(fromParts[0]))) fromParts.unshift('');\n\n  var result = fromParts.join('/');\n\n  if (hasTrailingSlash && result.substr(-1) !== '/') result += '/';\n\n  return result;\n}\n\nexport default resolvePathname;","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction valueEqual(a, b) {\n  if (a === b) return true;\n\n  if (a == null || b == null) return false;\n\n  if (Array.isArray(a)) {\n    return Array.isArray(b) && a.length === b.length && a.every(function (item, index) {\n      return valueEqual(item, b[index]);\n    });\n  }\n\n  var aType = typeof a === 'undefined' ? 'undefined' : _typeof(a);\n  var bType = typeof b === 'undefined' ? 'undefined' : _typeof(b);\n\n  if (aType !== bType) return false;\n\n  if (aType === 'object') {\n    var aValue = a.valueOf();\n    var bValue = b.valueOf();\n\n    if (aValue !== a || bValue !== b) return valueEqual(aValue, bValue);\n\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n\n    if (aKeys.length !== bKeys.length) return false;\n\n    return aKeys.every(function (key) {\n      return valueEqual(a[key], b[key]);\n    });\n  }\n\n  return false;\n}\n\nexport default valueEqual;","import _extends from '@babel/runtime/helpers/esm/extends';\nimport resolvePathname from 'resolve-pathname';\nimport valueEqual from 'value-equal';\nimport warning from 'tiny-warning';\nimport invariant from 'tiny-invariant';\n\nfunction addLeadingSlash(path) {\n  return path.charAt(0) === '/' ? path : '/' + path;\n}\nfunction stripLeadingSlash(path) {\n  return path.charAt(0) === '/' ? path.substr(1) : path;\n}\nfunction hasBasename(path, prefix) {\n  return new RegExp('^' + prefix + '(\\\\/|\\\\?|#|$)', 'i').test(path);\n}\nfunction stripBasename(path, prefix) {\n  return hasBasename(path, prefix) ? path.substr(prefix.length) : path;\n}\nfunction stripTrailingSlash(path) {\n  return path.charAt(path.length - 1) === '/' ? path.slice(0, -1) : path;\n}\nfunction parsePath(path) {\n  var pathname = path || '/';\n  var search = '';\n  var hash = '';\n  var hashIndex = pathname.indexOf('#');\n\n  if (hashIndex !== -1) {\n    hash = pathname.substr(hashIndex);\n    pathname = pathname.substr(0, hashIndex);\n  }\n\n  var searchIndex = pathname.indexOf('?');\n\n  if (searchIndex !== -1) {\n    search = pathname.substr(searchIndex);\n    pathname = pathname.substr(0, searchIndex);\n  }\n\n  return {\n    pathname: pathname,\n    search: search === '?' ? '' : search,\n    hash: hash === '#' ? '' : hash\n  };\n}\nfunction createPath(location) {\n  var pathname = location.pathname,\n      search = location.search,\n      hash = location.hash;\n  var path = pathname || '/';\n  if (search && search !== '?') path += search.charAt(0) === '?' ? search : \"?\" + search;\n  if (hash && hash !== '#') path += hash.charAt(0) === '#' ? hash : \"#\" + hash;\n  return path;\n}\n\nfunction createLocation(path, state, key, currentLocation) {\n  var location;\n\n  if (typeof path === 'string') {\n    // Two-arg form: push(path, state)\n    location = parsePath(path);\n    location.state = state;\n  } else {\n    // One-arg form: push(location)\n    location = _extends({}, path);\n    if (location.pathname === undefined) location.pathname = '';\n\n    if (location.search) {\n      if (location.search.charAt(0) !== '?') location.search = '?' + location.search;\n    } else {\n      location.search = '';\n    }\n\n    if (location.hash) {\n      if (location.hash.charAt(0) !== '#') location.hash = '#' + location.hash;\n    } else {\n      location.hash = '';\n    }\n\n    if (state !== undefined && location.state === undefined) location.state = state;\n  }\n\n  try {\n    location.pathname = decodeURI(location.pathname);\n  } catch (e) {\n    if (e instanceof URIError) {\n      throw new URIError('Pathname \"' + location.pathname + '\" could not be decoded. ' + 'This is likely caused by an invalid percent-encoding.');\n    } else {\n      throw e;\n    }\n  }\n\n  if (key) location.key = key;\n\n  if (currentLocation) {\n    // Resolve incomplete/relative pathname relative to current location.\n    if (!location.pathname) {\n      location.pathname = currentLocation.pathname;\n    } else if (location.pathname.charAt(0) !== '/') {\n      location.pathname = resolvePathname(location.pathname, currentLocation.pathname);\n    }\n  } else {\n    // When there is no prior location and pathname is empty, set it to /\n    if (!location.pathname) {\n      location.pathname = '/';\n    }\n  }\n\n  return location;\n}\nfunction locationsAreEqual(a, b) {\n  return a.pathname === b.pathname && a.search === b.search && a.hash === b.hash && a.key === b.key && valueEqual(a.state, b.state);\n}\n\nfunction createTransitionManager() {\n  var prompt = null;\n\n  function setPrompt(nextPrompt) {\n    process.env.NODE_ENV !== \"production\" ? warning(prompt == null, 'A history supports only one prompt at a time') : void 0;\n    prompt = nextPrompt;\n    return function () {\n      if (prompt === nextPrompt) prompt = null;\n    };\n  }\n\n  function confirmTransitionTo(location, action, getUserConfirmation, callback) {\n    // TODO: If another transition starts while we're still confirming\n    // the previous one, we may end up in a weird state. Figure out the\n    // best way to handle this.\n    if (prompt != null) {\n      var result = typeof prompt === 'function' ? prompt(location, action) : prompt;\n\n      if (typeof result === 'string') {\n        if (typeof getUserConfirmation === 'function') {\n          getUserConfirmation(result, callback);\n        } else {\n          process.env.NODE_ENV !== \"production\" ? warning(false, 'A history needs a getUserConfirmation function in order to use a prompt message') : void 0;\n          callback(true);\n        }\n      } else {\n        // Return false from a transition hook to cancel the transition.\n        callback(result !== false);\n      }\n    } else {\n      callback(true);\n    }\n  }\n\n  var listeners = [];\n\n  function appendListener(fn) {\n    var isActive = true;\n\n    function listener() {\n      if (isActive) fn.apply(void 0, arguments);\n    }\n\n    listeners.push(listener);\n    return function () {\n      isActive = false;\n      listeners = listeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  }\n\n  function notifyListeners() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    listeners.forEach(function (listener) {\n      return listener.apply(void 0, args);\n    });\n  }\n\n  return {\n    setPrompt: setPrompt,\n    confirmTransitionTo: confirmTransitionTo,\n    appendListener: appendListener,\n    notifyListeners: notifyListeners\n  };\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nfunction getConfirmation(message, callback) {\n  callback(window.confirm(message)); // eslint-disable-line no-alert\n}\n/**\n * Returns true if the HTML5 history API is supported. Taken from Modernizr.\n *\n * https://github.com/Modernizr/Modernizr/blob/master/LICENSE\n * https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js\n * changed to avoid false negatives for Windows Phones: https://github.com/reactjs/react-router/issues/586\n */\n\nfunction supportsHistory() {\n  var ua = window.navigator.userAgent;\n  if ((ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) && ua.indexOf('Mobile Safari') !== -1 && ua.indexOf('Chrome') === -1 && ua.indexOf('Windows Phone') === -1) return false;\n  return window.history && 'pushState' in window.history;\n}\n/**\n * Returns true if browser fires popstate on hash change.\n * IE10 and IE11 do not.\n */\n\nfunction supportsPopStateOnHashChange() {\n  return window.navigator.userAgent.indexOf('Trident') === -1;\n}\n/**\n * Returns false if using go(n) with hash history causes a full page reload.\n */\n\nfunction supportsGoWithoutReloadUsingHash() {\n  return window.navigator.userAgent.indexOf('Firefox') === -1;\n}\n/**\n * Returns true if a given popstate event is an extraneous WebKit event.\n * Accounts for the fact that Chrome on iOS fires real popstate events\n * containing undefined state when pressing the back button.\n */\n\nfunction isExtraneousPopstateEvent(event) {\n  event.state === undefined && navigator.userAgent.indexOf('CriOS') === -1;\n}\n\nvar PopStateEvent = 'popstate';\nvar HashChangeEvent = 'hashchange';\n\nfunction getHistoryState() {\n  try {\n    return window.history.state || {};\n  } catch (e) {\n    // IE 11 sometimes throws when accessing window.history.state\n    // See https://github.com/ReactTraining/history/pull/289\n    return {};\n  }\n}\n/**\n * Creates a history object that uses the HTML5 history API including\n * pushState, replaceState, and the popstate event.\n */\n\n\nfunction createBrowserHistory(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  !canUseDOM ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Browser history needs a DOM') : invariant(false) : void 0;\n  var globalHistory = window.history;\n  var canUseHistory = supportsHistory();\n  var needsHashChangeListener = !supportsPopStateOnHashChange();\n  var _props = props,\n      _props$forceRefresh = _props.forceRefresh,\n      forceRefresh = _props$forceRefresh === void 0 ? false : _props$forceRefresh,\n      _props$getUserConfirm = _props.getUserConfirmation,\n      getUserConfirmation = _props$getUserConfirm === void 0 ? getConfirmation : _props$getUserConfirm,\n      _props$keyLength = _props.keyLength,\n      keyLength = _props$keyLength === void 0 ? 6 : _props$keyLength;\n  var basename = props.basename ? stripTrailingSlash(addLeadingSlash(props.basename)) : '';\n\n  function getDOMLocation(historyState) {\n    var _ref = historyState || {},\n        key = _ref.key,\n        state = _ref.state;\n\n    var _window$location = window.location,\n        pathname = _window$location.pathname,\n        search = _window$location.search,\n        hash = _window$location.hash;\n    var path = pathname + search + hash;\n    process.env.NODE_ENV !== \"production\" ? warning(!basename || hasBasename(path, basename), 'You are attempting to use a basename on a page whose URL path does not begin ' + 'with the basename. Expected path \"' + path + '\" to begin with \"' + basename + '\".') : void 0;\n    if (basename) path = stripBasename(path, basename);\n    return createLocation(path, state, key);\n  }\n\n  function createKey() {\n    return Math.random().toString(36).substr(2, keyLength);\n  }\n\n  var transitionManager = createTransitionManager();\n\n  function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = globalHistory.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  }\n\n  function handlePopState(event) {\n    // Ignore extraneous popstate events in WebKit.\n    if (isExtraneousPopstateEvent(event)) return;\n    handlePop(getDOMLocation(event.state));\n  }\n\n  function handleHashChange() {\n    handlePop(getDOMLocation(getHistoryState()));\n  }\n\n  var forceNextPop = false;\n\n  function handlePop(location) {\n    if (forceNextPop) {\n      forceNextPop = false;\n      setState();\n    } else {\n      var action = 'POP';\n      transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n        if (ok) {\n          setState({\n            action: action,\n            location: location\n          });\n        } else {\n          revertPop(location);\n        }\n      });\n    }\n  }\n\n  function revertPop(fromLocation) {\n    var toLocation = history.location; // TODO: We could probably make this more reliable by\n    // keeping a list of keys we've seen in sessionStorage.\n    // Instead, we just default to 0 for keys we don't know.\n\n    var toIndex = allKeys.indexOf(toLocation.key);\n    if (toIndex === -1) toIndex = 0;\n    var fromIndex = allKeys.indexOf(fromLocation.key);\n    if (fromIndex === -1) fromIndex = 0;\n    var delta = toIndex - fromIndex;\n\n    if (delta) {\n      forceNextPop = true;\n      go(delta);\n    }\n  }\n\n  var initialLocation = getDOMLocation(getHistoryState());\n  var allKeys = [initialLocation.key]; // Public interface\n\n  function createHref(location) {\n    return basename + createPath(location);\n  }\n\n  function push(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to push when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'PUSH';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var href = createHref(location);\n      var key = location.key,\n          state = location.state;\n\n      if (canUseHistory) {\n        globalHistory.pushState({\n          key: key,\n          state: state\n        }, null, href);\n\n        if (forceRefresh) {\n          window.location.href = href;\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          var nextKeys = allKeys.slice(0, prevIndex === -1 ? 0 : prevIndex + 1);\n          nextKeys.push(location.key);\n          allKeys = nextKeys;\n          setState({\n            action: action,\n            location: location\n          });\n        }\n      } else {\n        process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Browser history cannot push state in browsers that do not support HTML5 history') : void 0;\n        window.location.href = href;\n      }\n    });\n  }\n\n  function replace(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to replace when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'REPLACE';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var href = createHref(location);\n      var key = location.key,\n          state = location.state;\n\n      if (canUseHistory) {\n        globalHistory.replaceState({\n          key: key,\n          state: state\n        }, null, href);\n\n        if (forceRefresh) {\n          window.location.replace(href);\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          if (prevIndex !== -1) allKeys[prevIndex] = location.key;\n          setState({\n            action: action,\n            location: location\n          });\n        }\n      } else {\n        process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Browser history cannot replace state in browsers that do not support HTML5 history') : void 0;\n        window.location.replace(href);\n      }\n    });\n  }\n\n  function go(n) {\n    globalHistory.go(n);\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  var listenerCount = 0;\n\n  function checkDOMListeners(delta) {\n    listenerCount += delta;\n\n    if (listenerCount === 1 && delta === 1) {\n      window.addEventListener(PopStateEvent, handlePopState);\n      if (needsHashChangeListener) window.addEventListener(HashChangeEvent, handleHashChange);\n    } else if (listenerCount === 0) {\n      window.removeEventListener(PopStateEvent, handlePopState);\n      if (needsHashChangeListener) window.removeEventListener(HashChangeEvent, handleHashChange);\n    }\n  }\n\n  var isBlocked = false;\n\n  function block(prompt) {\n    if (prompt === void 0) {\n      prompt = false;\n    }\n\n    var unblock = transitionManager.setPrompt(prompt);\n\n    if (!isBlocked) {\n      checkDOMListeners(1);\n      isBlocked = true;\n    }\n\n    return function () {\n      if (isBlocked) {\n        isBlocked = false;\n        checkDOMListeners(-1);\n      }\n\n      return unblock();\n    };\n  }\n\n  function listen(listener) {\n    var unlisten = transitionManager.appendListener(listener);\n    checkDOMListeners(1);\n    return function () {\n      checkDOMListeners(-1);\n      unlisten();\n    };\n  }\n\n  var history = {\n    length: globalHistory.length,\n    action: 'POP',\n    location: initialLocation,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    block: block,\n    listen: listen\n  };\n  return history;\n}\n\nvar HashChangeEvent$1 = 'hashchange';\nvar HashPathCoders = {\n  hashbang: {\n    encodePath: function encodePath(path) {\n      return path.charAt(0) === '!' ? path : '!/' + stripLeadingSlash(path);\n    },\n    decodePath: function decodePath(path) {\n      return path.charAt(0) === '!' ? path.substr(1) : path;\n    }\n  },\n  noslash: {\n    encodePath: stripLeadingSlash,\n    decodePath: addLeadingSlash\n  },\n  slash: {\n    encodePath: addLeadingSlash,\n    decodePath: addLeadingSlash\n  }\n};\n\nfunction getHashPath() {\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  var href = window.location.href;\n  var hashIndex = href.indexOf('#');\n  return hashIndex === -1 ? '' : href.substring(hashIndex + 1);\n}\n\nfunction pushHashPath(path) {\n  window.location.hash = path;\n}\n\nfunction replaceHashPath(path) {\n  var hashIndex = window.location.href.indexOf('#');\n  window.location.replace(window.location.href.slice(0, hashIndex >= 0 ? hashIndex : 0) + '#' + path);\n}\n\nfunction createHashHistory(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  !canUseDOM ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Hash history needs a DOM') : invariant(false) : void 0;\n  var globalHistory = window.history;\n  var canGoWithoutReload = supportsGoWithoutReloadUsingHash();\n  var _props = props,\n      _props$getUserConfirm = _props.getUserConfirmation,\n      getUserConfirmation = _props$getUserConfirm === void 0 ? getConfirmation : _props$getUserConfirm,\n      _props$hashType = _props.hashType,\n      hashType = _props$hashType === void 0 ? 'slash' : _props$hashType;\n  var basename = props.basename ? stripTrailingSlash(addLeadingSlash(props.basename)) : '';\n  var _HashPathCoders$hashT = HashPathCoders[hashType],\n      encodePath = _HashPathCoders$hashT.encodePath,\n      decodePath = _HashPathCoders$hashT.decodePath;\n\n  function getDOMLocation() {\n    var path = decodePath(getHashPath());\n    process.env.NODE_ENV !== \"production\" ? warning(!basename || hasBasename(path, basename), 'You are attempting to use a basename on a page whose URL path does not begin ' + 'with the basename. Expected path \"' + path + '\" to begin with \"' + basename + '\".') : void 0;\n    if (basename) path = stripBasename(path, basename);\n    return createLocation(path);\n  }\n\n  var transitionManager = createTransitionManager();\n\n  function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = globalHistory.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  }\n\n  var forceNextPop = false;\n  var ignorePath = null;\n\n  function handleHashChange() {\n    var path = getHashPath();\n    var encodedPath = encodePath(path);\n\n    if (path !== encodedPath) {\n      // Ensure we always have a properly-encoded hash.\n      replaceHashPath(encodedPath);\n    } else {\n      var location = getDOMLocation();\n      var prevLocation = history.location;\n      if (!forceNextPop && locationsAreEqual(prevLocation, location)) return; // A hashchange doesn't always == location change.\n\n      if (ignorePath === createPath(location)) return; // Ignore this change; we already setState in push/replace.\n\n      ignorePath = null;\n      handlePop(location);\n    }\n  }\n\n  function handlePop(location) {\n    if (forceNextPop) {\n      forceNextPop = false;\n      setState();\n    } else {\n      var action = 'POP';\n      transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n        if (ok) {\n          setState({\n            action: action,\n            location: location\n          });\n        } else {\n          revertPop(location);\n        }\n      });\n    }\n  }\n\n  function revertPop(fromLocation) {\n    var toLocation = history.location; // TODO: We could probably make this more reliable by\n    // keeping a list of paths we've seen in sessionStorage.\n    // Instead, we just default to 0 for paths we don't know.\n\n    var toIndex = allPaths.lastIndexOf(createPath(toLocation));\n    if (toIndex === -1) toIndex = 0;\n    var fromIndex = allPaths.lastIndexOf(createPath(fromLocation));\n    if (fromIndex === -1) fromIndex = 0;\n    var delta = toIndex - fromIndex;\n\n    if (delta) {\n      forceNextPop = true;\n      go(delta);\n    }\n  } // Ensure the hash is encoded properly before doing anything else.\n\n\n  var path = getHashPath();\n  var encodedPath = encodePath(path);\n  if (path !== encodedPath) replaceHashPath(encodedPath);\n  var initialLocation = getDOMLocation();\n  var allPaths = [createPath(initialLocation)]; // Public interface\n\n  function createHref(location) {\n    return '#' + encodePath(basename + createPath(location));\n  }\n\n  function push(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Hash history cannot push state; it is ignored') : void 0;\n    var action = 'PUSH';\n    var location = createLocation(path, undefined, undefined, history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var path = createPath(location);\n      var encodedPath = encodePath(basename + path);\n      var hashChanged = getHashPath() !== encodedPath;\n\n      if (hashChanged) {\n        // We cannot tell if a hashchange was caused by a PUSH, so we'd\n        // rather setState here and ignore the hashchange. The caveat here\n        // is that other hash histories in the page will consider it a POP.\n        ignorePath = path;\n        pushHashPath(encodedPath);\n        var prevIndex = allPaths.lastIndexOf(createPath(history.location));\n        var nextPaths = allPaths.slice(0, prevIndex === -1 ? 0 : prevIndex + 1);\n        nextPaths.push(path);\n        allPaths = nextPaths;\n        setState({\n          action: action,\n          location: location\n        });\n      } else {\n        process.env.NODE_ENV !== \"production\" ? warning(false, 'Hash history cannot PUSH the same path; a new entry will not be added to the history stack') : void 0;\n        setState();\n      }\n    });\n  }\n\n  function replace(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Hash history cannot replace state; it is ignored') : void 0;\n    var action = 'REPLACE';\n    var location = createLocation(path, undefined, undefined, history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var path = createPath(location);\n      var encodedPath = encodePath(basename + path);\n      var hashChanged = getHashPath() !== encodedPath;\n\n      if (hashChanged) {\n        // We cannot tell if a hashchange was caused by a REPLACE, so we'd\n        // rather setState here and ignore the hashchange. The caveat here\n        // is that other hash histories in the page will consider it a POP.\n        ignorePath = path;\n        replaceHashPath(encodedPath);\n      }\n\n      var prevIndex = allPaths.indexOf(createPath(history.location));\n      if (prevIndex !== -1) allPaths[prevIndex] = path;\n      setState({\n        action: action,\n        location: location\n      });\n    });\n  }\n\n  function go(n) {\n    process.env.NODE_ENV !== \"production\" ? warning(canGoWithoutReload, 'Hash history go(n) causes a full page reload in this browser') : void 0;\n    globalHistory.go(n);\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  var listenerCount = 0;\n\n  function checkDOMListeners(delta) {\n    listenerCount += delta;\n\n    if (listenerCount === 1 && delta === 1) {\n      window.addEventListener(HashChangeEvent$1, handleHashChange);\n    } else if (listenerCount === 0) {\n      window.removeEventListener(HashChangeEvent$1, handleHashChange);\n    }\n  }\n\n  var isBlocked = false;\n\n  function block(prompt) {\n    if (prompt === void 0) {\n      prompt = false;\n    }\n\n    var unblock = transitionManager.setPrompt(prompt);\n\n    if (!isBlocked) {\n      checkDOMListeners(1);\n      isBlocked = true;\n    }\n\n    return function () {\n      if (isBlocked) {\n        isBlocked = false;\n        checkDOMListeners(-1);\n      }\n\n      return unblock();\n    };\n  }\n\n  function listen(listener) {\n    var unlisten = transitionManager.appendListener(listener);\n    checkDOMListeners(1);\n    return function () {\n      checkDOMListeners(-1);\n      unlisten();\n    };\n  }\n\n  var history = {\n    length: globalHistory.length,\n    action: 'POP',\n    location: initialLocation,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    block: block,\n    listen: listen\n  };\n  return history;\n}\n\nfunction clamp(n, lowerBound, upperBound) {\n  return Math.min(Math.max(n, lowerBound), upperBound);\n}\n/**\n * Creates a history object that stores locations in memory.\n */\n\n\nfunction createMemoryHistory(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var _props = props,\n      getUserConfirmation = _props.getUserConfirmation,\n      _props$initialEntries = _props.initialEntries,\n      initialEntries = _props$initialEntries === void 0 ? ['/'] : _props$initialEntries,\n      _props$initialIndex = _props.initialIndex,\n      initialIndex = _props$initialIndex === void 0 ? 0 : _props$initialIndex,\n      _props$keyLength = _props.keyLength,\n      keyLength = _props$keyLength === void 0 ? 6 : _props$keyLength;\n  var transitionManager = createTransitionManager();\n\n  function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = history.entries.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  }\n\n  function createKey() {\n    return Math.random().toString(36).substr(2, keyLength);\n  }\n\n  var index = clamp(initialIndex, 0, initialEntries.length - 1);\n  var entries = initialEntries.map(function (entry) {\n    return typeof entry === 'string' ? createLocation(entry, undefined, createKey()) : createLocation(entry, undefined, entry.key || createKey());\n  }); // Public interface\n\n  var createHref = createPath;\n\n  function push(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to push when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'PUSH';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var prevIndex = history.index;\n      var nextIndex = prevIndex + 1;\n      var nextEntries = history.entries.slice(0);\n\n      if (nextEntries.length > nextIndex) {\n        nextEntries.splice(nextIndex, nextEntries.length - nextIndex, location);\n      } else {\n        nextEntries.push(location);\n      }\n\n      setState({\n        action: action,\n        location: location,\n        index: nextIndex,\n        entries: nextEntries\n      });\n    });\n  }\n\n  function replace(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to replace when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'REPLACE';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      history.entries[history.index] = location;\n      setState({\n        action: action,\n        location: location\n      });\n    });\n  }\n\n  function go(n) {\n    var nextIndex = clamp(history.index + n, 0, history.entries.length - 1);\n    var action = 'POP';\n    var location = history.entries[nextIndex];\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (ok) {\n        setState({\n          action: action,\n          location: location,\n          index: nextIndex\n        });\n      } else {\n        // Mimic the behavior of DOM histories by\n        // causing a render after a cancelled POP.\n        setState();\n      }\n    });\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  function canGo(n) {\n    var nextIndex = history.index + n;\n    return nextIndex >= 0 && nextIndex < history.entries.length;\n  }\n\n  function block(prompt) {\n    if (prompt === void 0) {\n      prompt = false;\n    }\n\n    return transitionManager.setPrompt(prompt);\n  }\n\n  function listen(listener) {\n    return transitionManager.appendListener(listener);\n  }\n\n  var history = {\n    length: entries.length,\n    action: 'POP',\n    location: entries[index],\n    index: index,\n    entries: entries,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    canGo: canGo,\n    block: block,\n    listen: listen\n  };\n  return history;\n}\n\nexport { createBrowserHistory, createHashHistory, createMemoryHistory, createLocation, locationsAreEqual, parsePath, createPath };\n","import _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport React from 'react';\nimport { Router, __RouterContext, matchPath } from 'react-router';\nexport * from 'react-router';\nimport { createBrowserHistory, createHashHistory, createLocation } from 'history';\nimport PropTypes from 'prop-types';\nimport warning from 'tiny-warning';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport invariant from 'tiny-invariant';\n\n/**\n * The public API for a <Router> that uses HTML5 history.\n */\n\nvar BrowserRouter =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(BrowserRouter, _React$Component);\n\n  function BrowserRouter() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.history = createBrowserHistory(_this.props);\n    return _this;\n  }\n\n  var _proto = BrowserRouter.prototype;\n\n  _proto.render = function render() {\n    return React.createElement(Router, {\n      history: this.history,\n      children: this.props.children\n    });\n  };\n\n  return BrowserRouter;\n}(React.Component);\n\nif (process.env.NODE_ENV !== \"production\") {\n  BrowserRouter.propTypes = {\n    basename: PropTypes.string,\n    children: PropTypes.node,\n    forceRefresh: PropTypes.bool,\n    getUserConfirmation: PropTypes.func,\n    keyLength: PropTypes.number\n  };\n\n  BrowserRouter.prototype.componentDidMount = function () {\n    process.env.NODE_ENV !== \"production\" ? warning(!this.props.history, \"<BrowserRouter> ignores the history prop. To use a custom history, \" + \"use `import { Router }` instead of `import { BrowserRouter as Router }`.\") : void 0;\n  };\n}\n\n/**\n * The public API for a <Router> that uses window.location.hash.\n */\n\nvar HashRouter =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(HashRouter, _React$Component);\n\n  function HashRouter() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.history = createHashHistory(_this.props);\n    return _this;\n  }\n\n  var _proto = HashRouter.prototype;\n\n  _proto.render = function render() {\n    return React.createElement(Router, {\n      history: this.history,\n      children: this.props.children\n    });\n  };\n\n  return HashRouter;\n}(React.Component);\n\nif (process.env.NODE_ENV !== \"production\") {\n  HashRouter.propTypes = {\n    basename: PropTypes.string,\n    children: PropTypes.node,\n    getUserConfirmation: PropTypes.func,\n    hashType: PropTypes.oneOf([\"hashbang\", \"noslash\", \"slash\"])\n  };\n\n  HashRouter.prototype.componentDidMount = function () {\n    process.env.NODE_ENV !== \"production\" ? warning(!this.props.history, \"<HashRouter> ignores the history prop. To use a custom history, \" + \"use `import { Router }` instead of `import { HashRouter as Router }`.\") : void 0;\n  };\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n/**\n * The public API for rendering a history-aware <a>.\n */\n\n\nvar Link =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Link, _React$Component);\n\n  function Link() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Link.prototype;\n\n  _proto.handleClick = function handleClick(event, history) {\n    try {\n      if (this.props.onClick) this.props.onClick(event);\n    } catch (ex) {\n      event.preventDefault();\n      throw ex;\n    }\n\n    if (!event.defaultPrevented && // onClick prevented default\n    event.button === 0 && ( // ignore everything but left clicks\n    !this.props.target || this.props.target === \"_self\") && // let browser handle \"target=_blank\" etc.\n    !isModifiedEvent(event) // ignore clicks with modifier keys\n    ) {\n        event.preventDefault();\n        var method = this.props.replace ? history.replace : history.push;\n        method(this.props.to);\n      }\n  };\n\n  _proto.render = function render() {\n    var _this = this;\n\n    var _this$props = this.props,\n        innerRef = _this$props.innerRef,\n        replace = _this$props.replace,\n        to = _this$props.to,\n        rest = _objectWithoutPropertiesLoose(_this$props, [\"innerRef\", \"replace\", \"to\"]); // eslint-disable-line no-unused-vars\n\n\n    return React.createElement(__RouterContext.Consumer, null, function (context) {\n      !context ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"You should not use <Link> outside a <Router>\") : invariant(false) : void 0;\n      var location = typeof to === \"string\" ? createLocation(to, null, null, context.location) : to;\n      var href = location ? context.history.createHref(location) : \"\";\n      return React.createElement(\"a\", _extends({}, rest, {\n        onClick: function onClick(event) {\n          return _this.handleClick(event, context.history);\n        },\n        href: href,\n        ref: innerRef\n      }));\n    });\n  };\n\n  return Link;\n}(React.Component);\n\nif (process.env.NODE_ENV !== \"production\") {\n  var toType = PropTypes.oneOfType([PropTypes.string, PropTypes.object]);\n  var innerRefType = PropTypes.oneOfType([PropTypes.string, PropTypes.func, PropTypes.shape({\n    current: PropTypes.any\n  })]);\n  Link.propTypes = {\n    innerRef: innerRefType,\n    onClick: PropTypes.func,\n    replace: PropTypes.bool,\n    target: PropTypes.string,\n    to: toType.isRequired\n  };\n}\n\nfunction joinClassnames() {\n  for (var _len = arguments.length, classnames = new Array(_len), _key = 0; _key < _len; _key++) {\n    classnames[_key] = arguments[_key];\n  }\n\n  return classnames.filter(function (i) {\n    return i;\n  }).join(\" \");\n}\n/**\n * A <Link> wrapper that knows if it's \"active\" or not.\n */\n\n\nfunction NavLink(_ref) {\n  var _ref$ariaCurrent = _ref[\"aria-current\"],\n      ariaCurrent = _ref$ariaCurrent === void 0 ? \"page\" : _ref$ariaCurrent,\n      _ref$activeClassName = _ref.activeClassName,\n      activeClassName = _ref$activeClassName === void 0 ? \"active\" : _ref$activeClassName,\n      activeStyle = _ref.activeStyle,\n      classNameProp = _ref.className,\n      exact = _ref.exact,\n      isActiveProp = _ref.isActive,\n      locationProp = _ref.location,\n      strict = _ref.strict,\n      styleProp = _ref.style,\n      to = _ref.to,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"aria-current\", \"activeClassName\", \"activeStyle\", \"className\", \"exact\", \"isActive\", \"location\", \"strict\", \"style\", \"to\"]);\n\n  var path = typeof to === \"object\" ? to.pathname : to; // Regex taken from: https://github.com/pillarjs/path-to-regexp/blob/master/index.js#L202\n\n  var escapedPath = path && path.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n  return React.createElement(__RouterContext.Consumer, null, function (context) {\n    !context ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"You should not use <NavLink> outside a <Router>\") : invariant(false) : void 0;\n    var pathToMatch = locationProp ? locationProp.pathname : context.location.pathname;\n    var match = escapedPath ? matchPath(pathToMatch, {\n      path: escapedPath,\n      exact: exact,\n      strict: strict\n    }) : null;\n    var isActive = !!(isActiveProp ? isActiveProp(match, context.location) : match);\n    var className = isActive ? joinClassnames(classNameProp, activeClassName) : classNameProp;\n    var style = isActive ? _extends({}, styleProp, activeStyle) : styleProp;\n    return React.createElement(Link, _extends({\n      \"aria-current\": isActive && ariaCurrent || null,\n      className: className,\n      style: style,\n      to: to\n    }, rest));\n  });\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  var ariaCurrentType = PropTypes.oneOf([\"page\", \"step\", \"location\", \"date\", \"time\", \"true\"]);\n  NavLink.propTypes = _extends({}, Link.propTypes, {\n    \"aria-current\": ariaCurrentType,\n    activeClassName: PropTypes.string,\n    activeStyle: PropTypes.object,\n    className: PropTypes.string,\n    exact: PropTypes.bool,\n    isActive: PropTypes.func,\n    location: PropTypes.object,\n    strict: PropTypes.bool,\n    style: PropTypes.object\n  });\n}\n\nexport { BrowserRouter, HashRouter, Link, NavLink };\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import React, { Component } from 'react';\nimport _inheritsLoose from '@babel/runtime/helpers/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport gud from 'gud';\nimport warning from 'tiny-warning';\n\nvar MAX_SIGNED_31_BIT_INT = 1073741823;\n\nfunction objectIs(x, y) {\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\n\nfunction createEventEmitter(value) {\n  var handlers = [];\n  return {\n    on: function on(handler) {\n      handlers.push(handler);\n    },\n    off: function off(handler) {\n      handlers = handlers.filter(function (h) {\n        return h !== handler;\n      });\n    },\n    get: function get() {\n      return value;\n    },\n    set: function set(newValue, changedBits) {\n      value = newValue;\n      handlers.forEach(function (handler) {\n        return handler(value, changedBits);\n      });\n    }\n  };\n}\n\nfunction onlyChild(children) {\n  return Array.isArray(children) ? children[0] : children;\n}\n\nfunction createReactContext(defaultValue, calculateChangedBits) {\n  var _Provider$childContex, _Consumer$contextType;\n\n  var contextProp = '__create-react-context-' + gud() + '__';\n\n  var Provider =\n  /*#__PURE__*/\n  function (_Component) {\n    _inheritsLoose(Provider, _Component);\n\n    function Provider() {\n      var _this;\n\n      _this = _Component.apply(this, arguments) || this;\n      _this.emitter = createEventEmitter(_this.props.value);\n      return _this;\n    }\n\n    var _proto = Provider.prototype;\n\n    _proto.getChildContext = function getChildContext() {\n      var _ref;\n\n      return _ref = {}, _ref[contextProp] = this.emitter, _ref;\n    };\n\n    _proto.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n      if (this.props.value !== nextProps.value) {\n        var oldValue = this.props.value;\n        var newValue = nextProps.value;\n        var changedBits;\n\n        if (objectIs(oldValue, newValue)) {\n          changedBits = 0;\n        } else {\n          changedBits = typeof calculateChangedBits === 'function' ? calculateChangedBits(oldValue, newValue) : MAX_SIGNED_31_BIT_INT;\n\n          if (process.env.NODE_ENV !== 'production') {\n            warning((changedBits & MAX_SIGNED_31_BIT_INT) === changedBits, 'calculateChangedBits: Expected the return value to be a ' + '31-bit integer. Instead received: ' + changedBits);\n          }\n\n          changedBits |= 0;\n\n          if (changedBits !== 0) {\n            this.emitter.set(nextProps.value, changedBits);\n          }\n        }\n      }\n    };\n\n    _proto.render = function render() {\n      return this.props.children;\n    };\n\n    return Provider;\n  }(Component);\n\n  Provider.childContextTypes = (_Provider$childContex = {}, _Provider$childContex[contextProp] = PropTypes.object.isRequired, _Provider$childContex);\n\n  var Consumer =\n  /*#__PURE__*/\n  function (_Component2) {\n    _inheritsLoose(Consumer, _Component2);\n\n    function Consumer() {\n      var _this2;\n\n      _this2 = _Component2.apply(this, arguments) || this;\n      _this2.state = {\n        value: _this2.getValue()\n      };\n\n      _this2.onUpdate = function (newValue, changedBits) {\n        var observedBits = _this2.observedBits | 0;\n\n        if ((observedBits & changedBits) !== 0) {\n          _this2.setState({\n            value: _this2.getValue()\n          });\n        }\n      };\n\n      return _this2;\n    }\n\n    var _proto2 = Consumer.prototype;\n\n    _proto2.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n      var observedBits = nextProps.observedBits;\n      this.observedBits = observedBits === undefined || observedBits === null ? MAX_SIGNED_31_BIT_INT : observedBits;\n    };\n\n    _proto2.componentDidMount = function componentDidMount() {\n      if (this.context[contextProp]) {\n        this.context[contextProp].on(this.onUpdate);\n      }\n\n      var observedBits = this.props.observedBits;\n      this.observedBits = observedBits === undefined || observedBits === null ? MAX_SIGNED_31_BIT_INT : observedBits;\n    };\n\n    _proto2.componentWillUnmount = function componentWillUnmount() {\n      if (this.context[contextProp]) {\n        this.context[contextProp].off(this.onUpdate);\n      }\n    };\n\n    _proto2.getValue = function getValue() {\n      if (this.context[contextProp]) {\n        return this.context[contextProp].get();\n      } else {\n        return defaultValue;\n      }\n    };\n\n    _proto2.render = function render() {\n      return onlyChild(this.props.children)(this.state.value);\n    };\n\n    return Consumer;\n  }(Component);\n\n  Consumer.contextTypes = (_Consumer$contextType = {}, _Consumer$contextType[contextProp] = PropTypes.object, _Consumer$contextType);\n  return {\n    Provider: Provider,\n    Consumer: Consumer\n  };\n}\n\nvar index = React.createContext || createReactContext;\n\nexport default index;\n","import createContext from 'mini-create-react-context';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport warning from 'tiny-warning';\nimport { createMemoryHistory, createLocation, locationsAreEqual, createPath } from 'history';\nimport invariant from 'tiny-invariant';\nimport pathToRegexp from 'path-to-regexp';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { isValidElementType } from 'react-is';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport hoistStatics from 'hoist-non-react-statics';\n\n// TODO: Replace with React.createContext once we can assume React 16+\n\nvar createNamedContext = function createNamedContext(name) {\n  var context = createContext();\n  context.displayName = name;\n  return context;\n};\n\nvar context =\n/*#__PURE__*/\ncreateNamedContext(\"Router\");\n\n/**\n * The public API for putting history on context.\n */\n\nvar Router =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Router, _React$Component);\n\n  Router.computeRootMatch = function computeRootMatch(pathname) {\n    return {\n      path: \"/\",\n      url: \"/\",\n      params: {},\n      isExact: pathname === \"/\"\n    };\n  };\n\n  function Router(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.state = {\n      location: props.history.location\n    }; // This is a bit of a hack. We have to start listening for location\n    // changes here in the constructor in case there are any <Redirect>s\n    // on the initial render. If there are, they will replace/push when\n    // they mount and since cDM fires in children before parents, we may\n    // get a new location before the <Router> is mounted.\n\n    _this._isMounted = false;\n    _this._pendingLocation = null;\n\n    if (!props.staticContext) {\n      _this.unlisten = props.history.listen(function (location) {\n        if (_this._isMounted) {\n          _this.setState({\n            location: location\n          });\n        } else {\n          _this._pendingLocation = location;\n        }\n      });\n    }\n\n    return _this;\n  }\n\n  var _proto = Router.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this._isMounted = true;\n\n    if (this._pendingLocation) {\n      this.setState({\n        location: this._pendingLocation\n      });\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.unlisten) this.unlisten();\n  };\n\n  _proto.render = function render() {\n    return React.createElement(context.Provider, {\n      children: this.props.children || null,\n      value: {\n        history: this.props.history,\n        location: this.state.location,\n        match: Router.computeRootMatch(this.state.location.pathname),\n        staticContext: this.props.staticContext\n      }\n    });\n  };\n\n  return Router;\n}(React.Component);\n\nif (process.env.NODE_ENV !== \"production\") {\n  Router.propTypes = {\n    children: PropTypes.node,\n    history: PropTypes.object.isRequired,\n    staticContext: PropTypes.object\n  };\n\n  Router.prototype.componentDidUpdate = function (prevProps) {\n    process.env.NODE_ENV !== \"production\" ? warning(prevProps.history === this.props.history, \"You cannot change <Router history>\") : void 0;\n  };\n}\n\n/**\n * The public API for a <Router> that stores location in memory.\n */\n\nvar MemoryRouter =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(MemoryRouter, _React$Component);\n\n  function MemoryRouter() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.history = createMemoryHistory(_this.props);\n    return _this;\n  }\n\n  var _proto = MemoryRouter.prototype;\n\n  _proto.render = function render() {\n    return React.createElement(Router, {\n      history: this.history,\n      children: this.props.children\n    });\n  };\n\n  return MemoryRouter;\n}(React.Component);\n\nif (process.env.NODE_ENV !== \"production\") {\n  MemoryRouter.propTypes = {\n    initialEntries: PropTypes.array,\n    initialIndex: PropTypes.number,\n    getUserConfirmation: PropTypes.func,\n    keyLength: PropTypes.number,\n    children: PropTypes.node\n  };\n\n  MemoryRouter.prototype.componentDidMount = function () {\n    process.env.NODE_ENV !== \"production\" ? warning(!this.props.history, \"<MemoryRouter> ignores the history prop. To use a custom history, \" + \"use `import { Router }` instead of `import { MemoryRouter as Router }`.\") : void 0;\n  };\n}\n\nvar Lifecycle =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Lifecycle, _React$Component);\n\n  function Lifecycle() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Lifecycle.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.props.onMount) this.props.onMount.call(this, this);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.props.onUpdate) this.props.onUpdate.call(this, this, prevProps);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.props.onUnmount) this.props.onUnmount.call(this, this);\n  };\n\n  _proto.render = function render() {\n    return null;\n  };\n\n  return Lifecycle;\n}(React.Component);\n\n/**\n * The public API for prompting the user before navigating away from a screen.\n */\n\nfunction Prompt(_ref) {\n  var message = _ref.message,\n      _ref$when = _ref.when,\n      when = _ref$when === void 0 ? true : _ref$when;\n  return React.createElement(context.Consumer, null, function (context$$1) {\n    !context$$1 ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"You should not use <Prompt> outside a <Router>\") : invariant(false) : void 0;\n    if (!when || context$$1.staticContext) return null;\n    var method = context$$1.history.block;\n    return React.createElement(Lifecycle, {\n      onMount: function onMount(self) {\n        self.release = method(message);\n      },\n      onUpdate: function onUpdate(self, prevProps) {\n        if (prevProps.message !== message) {\n          self.release();\n          self.release = method(message);\n        }\n      },\n      onUnmount: function onUnmount(self) {\n        self.release();\n      },\n      message: message\n    });\n  });\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  var messageType = PropTypes.oneOfType([PropTypes.func, PropTypes.string]);\n  Prompt.propTypes = {\n    when: PropTypes.bool,\n    message: messageType.isRequired\n  };\n}\n\nvar cache = {};\nvar cacheLimit = 10000;\nvar cacheCount = 0;\n\nfunction compilePath(path) {\n  if (cache[path]) return cache[path];\n  var generator = pathToRegexp.compile(path);\n\n  if (cacheCount < cacheLimit) {\n    cache[path] = generator;\n    cacheCount++;\n  }\n\n  return generator;\n}\n/**\n * Public API for generating a URL pathname from a path and parameters.\n */\n\n\nfunction generatePath(path, params) {\n  if (path === void 0) {\n    path = \"/\";\n  }\n\n  if (params === void 0) {\n    params = {};\n  }\n\n  return path === \"/\" ? path : compilePath(path)(params, {\n    pretty: true\n  });\n}\n\n/**\n * The public API for navigating programmatically with a component.\n */\n\nfunction Redirect(_ref) {\n  var computedMatch = _ref.computedMatch,\n      to = _ref.to,\n      _ref$push = _ref.push,\n      push = _ref$push === void 0 ? false : _ref$push;\n  return React.createElement(context.Consumer, null, function (context$$1) {\n    !context$$1 ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"You should not use <Redirect> outside a <Router>\") : invariant(false) : void 0;\n    var history = context$$1.history,\n        staticContext = context$$1.staticContext;\n    var method = push ? history.push : history.replace;\n    var location = createLocation(computedMatch ? typeof to === \"string\" ? generatePath(to, computedMatch.params) : _extends({}, to, {\n      pathname: generatePath(to.pathname, computedMatch.params)\n    }) : to); // When rendering in a static context,\n    // set the new location immediately.\n\n    if (staticContext) {\n      method(location);\n      return null;\n    }\n\n    return React.createElement(Lifecycle, {\n      onMount: function onMount() {\n        method(location);\n      },\n      onUpdate: function onUpdate(self, prevProps) {\n        var prevLocation = createLocation(prevProps.to);\n\n        if (!locationsAreEqual(prevLocation, _extends({}, location, {\n          key: prevLocation.key\n        }))) {\n          method(location);\n        }\n      },\n      to: to\n    });\n  });\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  Redirect.propTypes = {\n    push: PropTypes.bool,\n    from: PropTypes.string,\n    to: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired\n  };\n}\n\nvar cache$1 = {};\nvar cacheLimit$1 = 10000;\nvar cacheCount$1 = 0;\n\nfunction compilePath$1(path, options) {\n  var cacheKey = \"\" + options.end + options.strict + options.sensitive;\n  var pathCache = cache$1[cacheKey] || (cache$1[cacheKey] = {});\n  if (pathCache[path]) return pathCache[path];\n  var keys = [];\n  var regexp = pathToRegexp(path, keys, options);\n  var result = {\n    regexp: regexp,\n    keys: keys\n  };\n\n  if (cacheCount$1 < cacheLimit$1) {\n    pathCache[path] = result;\n    cacheCount$1++;\n  }\n\n  return result;\n}\n/**\n * Public API for matching a URL pathname to a path.\n */\n\n\nfunction matchPath(pathname, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (typeof options === \"string\") options = {\n    path: options\n  };\n  var _options = options,\n      path = _options.path,\n      _options$exact = _options.exact,\n      exact = _options$exact === void 0 ? false : _options$exact,\n      _options$strict = _options.strict,\n      strict = _options$strict === void 0 ? false : _options$strict,\n      _options$sensitive = _options.sensitive,\n      sensitive = _options$sensitive === void 0 ? false : _options$sensitive;\n  var paths = [].concat(path);\n  return paths.reduce(function (matched, path) {\n    if (!path) return null;\n    if (matched) return matched;\n\n    var _compilePath = compilePath$1(path, {\n      end: exact,\n      strict: strict,\n      sensitive: sensitive\n    }),\n        regexp = _compilePath.regexp,\n        keys = _compilePath.keys;\n\n    var match = regexp.exec(pathname);\n    if (!match) return null;\n    var url = match[0],\n        values = match.slice(1);\n    var isExact = pathname === url;\n    if (exact && !isExact) return null;\n    return {\n      path: path,\n      // the path used to match\n      url: path === \"/\" && url === \"\" ? \"/\" : url,\n      // the matched portion of the URL\n      isExact: isExact,\n      // whether or not we matched exactly\n      params: keys.reduce(function (memo, key, index) {\n        memo[key.name] = values[index];\n        return memo;\n      }, {})\n    };\n  }, null);\n}\n\nfunction isEmptyChildren(children) {\n  return React.Children.count(children) === 0;\n}\n/**\n * The public API for matching a single path and rendering.\n */\n\n\nvar Route =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Route, _React$Component);\n\n  function Route() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Route.prototype;\n\n  _proto.render = function render() {\n    var _this = this;\n\n    return React.createElement(context.Consumer, null, function (context$$1) {\n      !context$$1 ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"You should not use <Route> outside a <Router>\") : invariant(false) : void 0;\n      var location = _this.props.location || context$$1.location;\n      var match = _this.props.computedMatch ? _this.props.computedMatch // <Switch> already computed the match for us\n      : _this.props.path ? matchPath(location.pathname, _this.props) : context$$1.match;\n\n      var props = _extends({}, context$$1, {\n        location: location,\n        match: match\n      });\n\n      var _this$props = _this.props,\n          children = _this$props.children,\n          component = _this$props.component,\n          render = _this$props.render; // Preact uses an empty array as children by\n      // default, so use null if that's the case.\n\n      if (Array.isArray(children) && children.length === 0) {\n        children = null;\n      }\n\n      if (typeof children === \"function\") {\n        children = children(props);\n\n        if (children === undefined) {\n          if (process.env.NODE_ENV !== \"production\") {\n            var path = _this.props.path;\n            process.env.NODE_ENV !== \"production\" ? warning(false, \"You returned `undefined` from the `children` function of \" + (\"<Route\" + (path ? \" path=\\\"\" + path + \"\\\"\" : \"\") + \">, but you \") + \"should have returned a React element or `null`\") : void 0;\n          }\n\n          children = null;\n        }\n      }\n\n      return React.createElement(context.Provider, {\n        value: props\n      }, children && !isEmptyChildren(children) ? children : props.match ? component ? React.createElement(component, props) : render ? render(props) : null : null);\n    });\n  };\n\n  return Route;\n}(React.Component);\n\nif (process.env.NODE_ENV !== \"production\") {\n  Route.propTypes = {\n    children: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n    component: function component(props, propName) {\n      if (props[propName] && !isValidElementType(props[propName])) {\n        return new Error(\"Invalid prop 'component' supplied to 'Route': the prop is not a valid React component\");\n      }\n    },\n    exact: PropTypes.bool,\n    location: PropTypes.object,\n    path: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n    render: PropTypes.func,\n    sensitive: PropTypes.bool,\n    strict: PropTypes.bool\n  };\n\n  Route.prototype.componentDidMount = function () {\n    process.env.NODE_ENV !== \"production\" ? warning(!(this.props.children && !isEmptyChildren(this.props.children) && this.props.component), \"You should not use <Route component> and <Route children> in the same route; <Route component> will be ignored\") : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(!(this.props.children && !isEmptyChildren(this.props.children) && this.props.render), \"You should not use <Route render> and <Route children> in the same route; <Route render> will be ignored\") : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(!(this.props.component && this.props.render), \"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored\") : void 0;\n  };\n\n  Route.prototype.componentDidUpdate = function (prevProps) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(this.props.location && !prevProps.location), '<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no \"location\" prop and then provided one on a subsequent render.') : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(!(!this.props.location && prevProps.location), '<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a \"location\" prop initially but omitted it on a subsequent render.') : void 0;\n  };\n}\n\nfunction addLeadingSlash(path) {\n  return path.charAt(0) === \"/\" ? path : \"/\" + path;\n}\n\nfunction addBasename(basename, location) {\n  if (!basename) return location;\n  return _extends({}, location, {\n    pathname: addLeadingSlash(basename) + location.pathname\n  });\n}\n\nfunction stripBasename(basename, location) {\n  if (!basename) return location;\n  var base = addLeadingSlash(basename);\n  if (location.pathname.indexOf(base) !== 0) return location;\n  return _extends({}, location, {\n    pathname: location.pathname.substr(base.length)\n  });\n}\n\nfunction createURL(location) {\n  return typeof location === \"string\" ? location : createPath(location);\n}\n\nfunction staticHandler(methodName) {\n  return function () {\n    process.env.NODE_ENV !== \"production\" ? invariant(false, \"You cannot %s with <StaticRouter>\", methodName) : invariant(false);\n  };\n}\n\nfunction noop() {}\n/**\n * The public top-level API for a \"static\" <Router>, so-called because it\n * can't actually change the current location. Instead, it just records\n * location changes in a context object. Useful mainly in testing and\n * server-rendering scenarios.\n */\n\n\nvar StaticRouter =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(StaticRouter, _React$Component);\n\n  function StaticRouter() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _this.handlePush = function (location) {\n      return _this.navigateTo(location, \"PUSH\");\n    };\n\n    _this.handleReplace = function (location) {\n      return _this.navigateTo(location, \"REPLACE\");\n    };\n\n    _this.handleListen = function () {\n      return noop;\n    };\n\n    _this.handleBlock = function () {\n      return noop;\n    };\n\n    return _this;\n  }\n\n  var _proto = StaticRouter.prototype;\n\n  _proto.navigateTo = function navigateTo(location, action) {\n    var _this$props = this.props,\n        _this$props$basename = _this$props.basename,\n        basename = _this$props$basename === void 0 ? \"\" : _this$props$basename,\n        _this$props$context = _this$props.context,\n        context = _this$props$context === void 0 ? {} : _this$props$context;\n    context.action = action;\n    context.location = addBasename(basename, createLocation(location));\n    context.url = createURL(context.location);\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        _this$props2$basename = _this$props2.basename,\n        basename = _this$props2$basename === void 0 ? \"\" : _this$props2$basename,\n        _this$props2$context = _this$props2.context,\n        context = _this$props2$context === void 0 ? {} : _this$props2$context,\n        _this$props2$location = _this$props2.location,\n        location = _this$props2$location === void 0 ? \"/\" : _this$props2$location,\n        rest = _objectWithoutPropertiesLoose(_this$props2, [\"basename\", \"context\", \"location\"]);\n\n    var history = {\n      createHref: function createHref(path) {\n        return addLeadingSlash(basename + createURL(path));\n      },\n      action: \"POP\",\n      location: stripBasename(basename, createLocation(location)),\n      push: this.handlePush,\n      replace: this.handleReplace,\n      go: staticHandler(\"go\"),\n      goBack: staticHandler(\"goBack\"),\n      goForward: staticHandler(\"goForward\"),\n      listen: this.handleListen,\n      block: this.handleBlock\n    };\n    return React.createElement(Router, _extends({}, rest, {\n      history: history,\n      staticContext: context\n    }));\n  };\n\n  return StaticRouter;\n}(React.Component);\n\nif (process.env.NODE_ENV !== \"production\") {\n  StaticRouter.propTypes = {\n    basename: PropTypes.string,\n    context: PropTypes.object,\n    location: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n  };\n\n  StaticRouter.prototype.componentDidMount = function () {\n    process.env.NODE_ENV !== \"production\" ? warning(!this.props.history, \"<StaticRouter> ignores the history prop. To use a custom history, \" + \"use `import { Router }` instead of `import { StaticRouter as Router }`.\") : void 0;\n  };\n}\n\n/**\n * The public API for rendering the first <Route> that matches.\n */\n\nvar Switch =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Switch, _React$Component);\n\n  function Switch() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Switch.prototype;\n\n  _proto.render = function render() {\n    var _this = this;\n\n    return React.createElement(context.Consumer, null, function (context$$1) {\n      !context$$1 ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"You should not use <Switch> outside a <Router>\") : invariant(false) : void 0;\n      var location = _this.props.location || context$$1.location;\n      var element, match; // We use React.Children.forEach instead of React.Children.toArray().find()\n      // here because toArray adds keys to all child elements and we do not want\n      // to trigger an unmount/remount for two <Route>s that render the same\n      // component at different URLs.\n\n      React.Children.forEach(_this.props.children, function (child) {\n        if (match == null && React.isValidElement(child)) {\n          element = child;\n          var path = child.props.path || child.props.from;\n          match = path ? matchPath(location.pathname, _extends({}, child.props, {\n            path: path\n          })) : context$$1.match;\n        }\n      });\n      return match ? React.cloneElement(element, {\n        location: location,\n        computedMatch: match\n      }) : null;\n    });\n  };\n\n  return Switch;\n}(React.Component);\n\nif (process.env.NODE_ENV !== \"production\") {\n  Switch.propTypes = {\n    children: PropTypes.node,\n    location: PropTypes.object\n  };\n\n  Switch.prototype.componentDidUpdate = function (prevProps) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(this.props.location && !prevProps.location), '<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no \"location\" prop and then provided one on a subsequent render.') : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(!(!this.props.location && prevProps.location), '<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a \"location\" prop initially but omitted it on a subsequent render.') : void 0;\n  };\n}\n\n/**\n * A public higher-order component to access the imperative API\n */\n\nfunction withRouter(Component) {\n  var displayName = \"withRouter(\" + (Component.displayName || Component.name) + \")\";\n\n  var C = function C(props) {\n    var wrappedComponentRef = props.wrappedComponentRef,\n        remainingProps = _objectWithoutPropertiesLoose(props, [\"wrappedComponentRef\"]);\n\n    return React.createElement(context.Consumer, null, function (context$$1) {\n      !context$$1 ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"You should not use <\" + displayName + \" /> outside a <Router>\") : invariant(false) : void 0;\n      return React.createElement(Component, _extends({}, remainingProps, context$$1, {\n        ref: wrappedComponentRef\n      }));\n    });\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    C.propTypes = {\n      wrappedComponentRef: PropTypes.oneOfType([PropTypes.string, PropTypes.func, PropTypes.object])\n    };\n  }\n\n  return hoistStatics(C, Component);\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  if (typeof window !== \"undefined\") {\n    var global = window;\n    var key = \"__react_router_build__\";\n    var buildNames = {\n      cjs: \"CommonJS\",\n      esm: \"ES modules\",\n      umd: \"UMD\"\n    };\n\n    if (global[key] && global[key] !== \"esm\") {\n      var initialBuildName = buildNames[global[key]];\n      var secondaryBuildName = buildNames[\"esm\"]; // TODO: Add link to article that explains in detail how to avoid\n      // loading 2 different builds.\n\n      throw new Error(\"You are loading the \" + secondaryBuildName + \" build of React Router \" + (\"on a page that is already running the \" + initialBuildName + \" \") + \"build, so things won't work right.\");\n    }\n\n    global[key] = \"esm\";\n  }\n}\n\nexport { MemoryRouter, Prompt, Redirect, Route, Router, StaticRouter, Switch, generatePath, matchPath, withRouter, context as __RouterContext };\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport firebase from '@firebase/app';\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseNamespace } from '@firebase/app-types/private';\nimport { Database } from './src/api/Database';\nimport { DataSnapshot } from './src/api/DataSnapshot';\nimport { Query } from './src/api/Query';\nimport { Reference } from './src/api/Reference';\nimport { enableLogging } from './src/core/util/util';\nimport { RepoManager } from './src/core/RepoManager';\nimport * as INTERNAL from './src/api/internal';\nimport * as TEST_ACCESS from './src/api/test_access';\nimport { isNodeSdk } from '@firebase/util';\nimport * as types from '@firebase/database-types';\nimport { setSDKVersion } from './src/core/version';\nimport { Component, ComponentType } from '@firebase/component';\n\nimport { name, version } from './package.json';\n\nconst ServerValue = Database.ServerValue;\n\nexport function registerDatabase(instance: FirebaseNamespace) {\n  // set SDK_VERSION\n  setSDKVersion(instance.SDK_VERSION);\n\n  // Register the Database Service with the 'firebase' namespace.\n  const namespace = (instance as _FirebaseNamespace).INTERNAL.registerComponent(\n    new Component(\n      'database',\n      (container, url) => {\n        /* Dependencies */\n        // getImmediate for FirebaseApp will always succeed\n        const app = container.getProvider('app').getImmediate();\n        const authProvider = container.getProvider('auth-internal');\n\n        return RepoManager.getInstance().databaseFromApp(\n          app,\n          authProvider,\n          url\n        );\n      },\n      ComponentType.PUBLIC\n    )\n      .setServiceProps(\n        // firebase.database namespace properties\n        {\n          Reference,\n          Query,\n          Database,\n          DataSnapshot,\n          enableLogging,\n          INTERNAL,\n          ServerValue,\n          TEST_ACCESS\n        }\n      )\n      .setMultipleInstances(true)\n  );\n\n  instance.registerVersion(name, version);\n\n  if (isNodeSdk()) {\n    module.exports = namespace;\n  }\n}\n\nregisterDatabase(firebase);\n\n// Types to export for the admin SDK\nexport { Database, Query, Reference, enableLogging, ServerValue };\n\nexport { DataSnapshot } from './src/api/DataSnapshot';\nexport { OnDisconnect } from './src/api/onDisconnect';\n\ndeclare module '@firebase/app-types' {\n  interface FirebaseNamespace {\n    database?: {\n      (app?: FirebaseApp): types.FirebaseDatabase;\n      enableLogging: typeof types.enableLogging;\n      ServerValue: types.ServerValue;\n      Database: typeof types.FirebaseDatabase;\n    };\n  }\n  interface FirebaseApp {\n    database?(databaseURL?: string): types.FirebaseDatabase;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Throws an error if the provided assertion is falsy\n */\nexport const assert = function(assertion: unknown, message: string): void {\n  if (!assertion) {\n    throw assertionError(message);\n  }\n};\n\n/**\n * Returns an Error object suitable for throwing.\n */\nexport const assertionError = function(message: string): Error {\n  return new Error(\n    'Firebase Database (' +\n      CONSTANTS.SDK_VERSION +\n      ') INTERNAL ASSERT FAILED: ' +\n      message\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function(str: string): number[] {\n  // TODO(user): Use native implementations if/when available\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) === 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function(bytes: number[]): string {\n  // TODO(user): Use native implementations if/when available\n  const out: string[] = [];\n  let pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    const c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      const c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      const c4 = bytes[pos++];\n      const u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\ninterface Base64 {\n  byteToCharMap_: { [key: number]: string } | null;\n  charToByteMap_: { [key: string]: number } | null;\n  byteToCharMapWebSafe_: { [key: number]: string } | null;\n  charToByteMapWebSafe_: { [key: string]: number } | null;\n  ENCODED_VALS_BASE: string;\n  readonly ENCODED_VALS: string;\n  readonly ENCODED_VALS_WEBSAFE: string;\n  HAS_NATIVE_SUPPORT: boolean;\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string;\n  encodeString(input: string, webSafe?: boolean): string;\n  decodeString(input: string, webSafe: boolean): string;\n  decodeStringToByteArray(input: string, webSafe: boolean): number[];\n  init_(): void;\n}\n\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\nexport const base64: Base64 = {\n  /**\n   * Maps bytes to characters.\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    const byteToCharMap = webSafe\n      ? this.byteToCharMapWebSafe_!\n      : this.byteToCharMap_!;\n\n    const output = [];\n\n    for (let i = 0; i < input.length; i += 3) {\n      const byte1 = input[i];\n      const haveByte2 = i + 1 < input.length;\n      const byte2 = haveByte2 ? input[i + 1] : 0;\n      const haveByte3 = i + 2 < input.length;\n      const byte3 = haveByte3 ? input[i + 2] : 0;\n\n      const outByte1 = byte1 >> 2;\n      const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      let outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param input A string to encode.\n   * @param webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeString(input: string, webSafe?: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param input to decode.\n   * @param webSafe True if we should use the\n   *     alternative alphabet.\n   * @return string representing the decoded value.\n   */\n  decodeString(input: string, webSafe: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param input Input to decode.\n   * @param webSafe True if we should use the web-safe alphabet.\n   * @return bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input: string, webSafe: boolean): number[] {\n    this.init_();\n\n    const charToByteMap = webSafe\n      ? this.charToByteMapWebSafe_!\n      : this.charToByteMap_!;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; ) {\n      const byte1 = charToByteMap[input.charAt(i++)];\n\n      const haveByte2 = i < input.length;\n      const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      const haveByte3 = i < input.length;\n      const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      const haveByte4 = i < input.length;\n      const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw Error();\n      }\n\n      const outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * URL-safe base64 encoding\n */\nexport const base64Encode = function(str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nexport const base64Decode = function(str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\nexport function deepCopy<T>(value: T): T {\n  return deepExtend(undefined, value) as T;\n}\n\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n */\nexport function deepExtend(target: unknown, source: unknown): unknown {\n  if (!(source instanceof Object)) {\n    return source;\n  }\n\n  switch (source.constructor) {\n    case Date:\n      // Treat Dates like scalars; if the target date object had any child\n      // properties - they will be lost!\n      const dateValue = source as Date;\n      return new Date(dateValue.getTime());\n\n    case Object:\n      if (target === undefined) {\n        target = {};\n      }\n      break;\n    case Array:\n      // Always copy the array source and overwrite the target.\n      target = [];\n      break;\n\n    default:\n      // Not a plain Object - treat it as a scalar.\n      return source;\n  }\n\n  for (const prop in source) {\n    if (!source.hasOwnProperty(prop)) {\n      continue;\n    }\n    (target as { [key: string]: unknown })[prop] = deepExtend(\n      (target as { [key: string]: unknown })[prop],\n      (source as { [key: string]: unknown })[prop]\n    );\n  }\n\n  return target;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject: (value?: unknown) => void = () => {};\n  resolve: (value?: unknown) => void = () => {};\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve as (value?: unknown) => void;\n      this.reject = reject as (value?: unknown) => void;\n    });\n  }\n\n  /**\n   * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   */\n  wrapCallback(\n    callback?: (error?: unknown, value?: unknown) => void\n  ): (error: unknown, value?: unknown) => void {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nexport function getUA(): string {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nexport function isMobileCordova(): boolean {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-ignore Setting up an broadly applicable index signature for Window\n    // just to deal with this case would probably be a bad idea.\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n}\n\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nexport function isNode(): boolean {\n  try {\n    return (\n      Object.prototype.toString.call(global.process) === '[object process]'\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Detect Browser Environment\n */\nexport function isBrowser(): boolean {\n  return typeof self === 'object' && self.self === self;\n}\n\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nexport function isReactNative(): boolean {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n}\n\n/** Detects Electron apps. */\nexport function isElectron(): boolean {\n  return getUA().indexOf('Electron/') >= 0;\n}\n\n/** Detects Internet Explorer. */\nexport function isIE(): boolean {\n  const ua = getUA();\n  return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\n}\n\n/** Detects Universal Windows Platform apps. */\nexport function isUWP(): boolean {\n  return getUA().indexOf('MSAppHost/') >= 0;\n}\n\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nexport function isNodeSdk(): boolean {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AppError {\n  NO_APP = 'no-app',\n  BAD_APP_NAME = 'bad-app-name',\n  DUPLICATE_APP = 'duplicate-app',\n  APP_DELETED = 'app-deleted',\n  INVALID_APP_ARGUMENT = 'invalid-app-argument'\n}\n\nconst ERRORS: ErrorMap<AppError> = {\n  [AppError.NO_APP]:\n    \"No Firebase App '{$appName}' has been created - \" +\n    'call Firebase App.initializeApp()',\n  [AppError.BAD_APP_NAME]: \"Illegal App name: '{$appName}\",\n  [AppError.DUPLICATE_APP]: \"Firebase App named '{$appName}' already exists\",\n  [AppError.APP_DELETED]: \"Firebase App named '{$appName}' already deleted\",\n  [AppError.INVALID_APP_ARGUMENT]:\n    'firebase.{$appName}() takes either no argument or a ' +\n    'Firebase App instance.'\n};\n\ntype ErrorParams = { [key in AppError]: { appName: string } };\n\nexport const ERROR_FACTORY = new ErrorFactory<AppError, ErrorParams>(\n  'app',\n  'Firebase',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Evaluates a JSON string into a javascript object.\n *\n * @param {string} str A string containing JSON.\n * @return {*} The javascript object representing the specified JSON.\n */\nexport function jsonEval(str: string): unknown {\n  return JSON.parse(str);\n}\n\n/**\n * Returns JSON representing a javascript object.\n * @param {*} data Javascript object to be stringified.\n * @return {string} The JSON contents of the object.\n */\nexport function stringify(data: unknown): string {\n  return JSON.stringify(data);\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { jsonEval } from './json';\n\ninterface Claims {\n  [key: string]: {};\n}\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token into constituent parts.\n *\n * Notes:\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const decode = function(token: string): DecodedToken {\n  let header = {},\n    claims: Claims = {},\n    data = {},\n    signature = '';\n\n  try {\n    const parts = token.split('.');\n    header = jsonEval(base64Decode(parts[0]) || '') as object;\n    claims = jsonEval(base64Decode(parts[1]) || '') as Claims;\n    signature = parts[2];\n    data = claims['d'] || {};\n    delete claims['d'];\n  } catch (e) {}\n\n  return {\n    header,\n    claims,\n    data,\n    signature\n  };\n};\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidTimestamp = function(token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  const now: number = Math.floor(new Date().getTime() / 1000);\n  let validSince: number = 0,\n    validUntil: number = 0;\n\n  if (typeof claims === 'object') {\n    if (claims.hasOwnProperty('nbf')) {\n      validSince = claims['nbf'] as number;\n    } else if (claims.hasOwnProperty('iat')) {\n      validSince = claims['iat'] as number;\n    }\n\n    if (claims.hasOwnProperty('exp')) {\n      validUntil = claims['exp'] as number;\n    } else {\n      // token will expire after 24h by default\n      validUntil = validSince + 86400;\n    }\n  }\n\n  return (\n    !!now &&\n    !!validSince &&\n    !!validUntil &&\n    now >= validSince &&\n    now <= validUntil\n  );\n};\n\n/**\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\n *\n * Notes:\n * - May return null if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const issuedAtTime = function(token: string): number | null {\n  const claims: Claims = decode(token).claims;\n  if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\n    return claims['iat'] as number;\n  }\n  return null;\n};\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidFormat = function(token: string): boolean {\n  const decoded = decode(token),\n    claims = decoded.claims;\n\n  return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\n};\n\n/**\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isAdmin = function(token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  return typeof claims === 'object' && claims['admin'] === true;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview SHA-1 cryptographic hash.\n * Variable names follow the notation in FIPS PUB 180-3:\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\n *\n * Usage:\n *   var sha1 = new sha1();\n *   sha1.update(bytes);\n *   var hash = sha1.digest();\n *\n * Performance:\n *   Chrome 23:   ~400 Mbit/s\n *   Firefox 16:  ~250 Mbit/s\n *\n */\n\n/**\n * SHA-1 cryptographic hash constructor.\n *\n * The properties declared here are discussed in the above algorithm document.\n * @constructor\n * @final\n * @struct\n */\nexport class Sha1 {\n  /**\n   * Holds the previous values of accumulated variables a-e in the compress_\n   * function.\n   * @private\n   */\n  private chain_: number[] = [];\n\n  /**\n   * A buffer holding the partially computed hash result.\n   * @private\n   */\n  private buf_: number[] = [];\n\n  /**\n   * An array of 80 bytes, each a part of the message to be hashed.  Referred to\n   * as the message schedule in the docs.\n   * @private\n   */\n  private W_: number[] = [];\n\n  /**\n   * Contains data needed to pad messages less than 64 bytes.\n   * @private\n   */\n  private pad_: number[] = [];\n\n  /**\n   * @private {number}\n   */\n  private inbuf_: number = 0;\n\n  /**\n   * @private {number}\n   */\n  private total_: number = 0;\n\n  blockSize: number;\n\n  constructor() {\n    this.blockSize = 512 / 8;\n\n    this.pad_[0] = 128;\n    for (let i = 1; i < this.blockSize; ++i) {\n      this.pad_[i] = 0;\n    }\n\n    this.reset();\n  }\n\n  reset(): void {\n    this.chain_[0] = 0x67452301;\n    this.chain_[1] = 0xefcdab89;\n    this.chain_[2] = 0x98badcfe;\n    this.chain_[3] = 0x10325476;\n    this.chain_[4] = 0xc3d2e1f0;\n\n    this.inbuf_ = 0;\n    this.total_ = 0;\n  }\n\n  /**\n   * Internal compress helper function.\n   * @param buf Block to compress.\n   * @param offset Offset of the block in the buffer.\n   * @private\n   */\n  compress_(buf: number[] | Uint8Array | string, offset?: number): void {\n    if (!offset) {\n      offset = 0;\n    }\n\n    const W = this.W_;\n\n    // get 16 big endian words\n    if (typeof buf === 'string') {\n      for (let i = 0; i < 16; i++) {\n        // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\n        // have a bug that turns the post-increment ++ operator into pre-increment\n        // during JIT compilation.  We have code that depends heavily on SHA-1 for\n        // correctness and which is affected by this bug, so I've removed all uses\n        // of post-increment ++ in which the result value is used.  We can revert\n        // this change once the Safari bug\n        // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\n        // most clients have been updated.\n        W[i] =\n          (buf.charCodeAt(offset) << 24) |\n          (buf.charCodeAt(offset + 1) << 16) |\n          (buf.charCodeAt(offset + 2) << 8) |\n          buf.charCodeAt(offset + 3);\n        offset += 4;\n      }\n    } else {\n      for (let i = 0; i < 16; i++) {\n        W[i] =\n          (buf[offset] << 24) |\n          (buf[offset + 1] << 16) |\n          (buf[offset + 2] << 8) |\n          buf[offset + 3];\n        offset += 4;\n      }\n    }\n\n    // expand to 80 words\n    for (let i = 16; i < 80; i++) {\n      const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n      W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\n    }\n\n    let a = this.chain_[0];\n    let b = this.chain_[1];\n    let c = this.chain_[2];\n    let d = this.chain_[3];\n    let e = this.chain_[4];\n    let f, k;\n\n    // TODO(user): Try to unroll this loop to speed up the computation.\n    for (let i = 0; i < 80; i++) {\n      if (i < 40) {\n        if (i < 20) {\n          f = d ^ (b & (c ^ d));\n          k = 0x5a827999;\n        } else {\n          f = b ^ c ^ d;\n          k = 0x6ed9eba1;\n        }\n      } else {\n        if (i < 60) {\n          f = (b & c) | (d & (b | c));\n          k = 0x8f1bbcdc;\n        } else {\n          f = b ^ c ^ d;\n          k = 0xca62c1d6;\n        }\n      }\n\n      const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\n      e = d;\n      d = c;\n      c = ((b << 30) | (b >>> 2)) & 0xffffffff;\n      b = a;\n      a = t;\n    }\n\n    this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\n    this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\n    this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\n    this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\n    this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\n  }\n\n  update(bytes?: number[] | Uint8Array | string, length?: number): void {\n    // TODO(johnlenz): tighten the function signature and remove this check\n    if (bytes == null) {\n      return;\n    }\n\n    if (length === undefined) {\n      length = bytes.length;\n    }\n\n    const lengthMinusBlock = length - this.blockSize;\n    let n = 0;\n    // Using local instead of member variables gives ~5% speedup on Firefox 16.\n    const buf = this.buf_;\n    let inbuf = this.inbuf_;\n\n    // The outer while loop should execute at most twice.\n    while (n < length) {\n      // When we have no data in the block to top up, we can directly process the\n      // input buffer (assuming it contains sufficient data). This gives ~25%\n      // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\n      // the data is provided in large chunks (or in multiples of 64 bytes).\n      if (inbuf === 0) {\n        while (n <= lengthMinusBlock) {\n          this.compress_(bytes, n);\n          n += this.blockSize;\n        }\n      }\n\n      if (typeof bytes === 'string') {\n        while (n < length) {\n          buf[inbuf] = bytes.charCodeAt(n);\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      } else {\n        while (n < length) {\n          buf[inbuf] = bytes[n];\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      }\n    }\n\n    this.inbuf_ = inbuf;\n    this.total_ += length;\n  }\n\n  /** @override */\n  digest(): number[] {\n    const digest: number[] = [];\n    let totalBits = this.total_ * 8;\n\n    // Add pad 0x80 0x00*.\n    if (this.inbuf_ < 56) {\n      this.update(this.pad_, 56 - this.inbuf_);\n    } else {\n      this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n    }\n\n    // Add # bits.\n    for (let i = this.blockSize - 1; i >= 56; i--) {\n      this.buf_[i] = totalBits & 255;\n      totalBits /= 256; // Don't use bit-shifting here!\n    }\n\n    this.compress_(this.buf_);\n\n    let n = 0;\n    for (let i = 0; i < 5; i++) {\n      for (let j = 24; j >= 0; j -= 8) {\n        digest[n] = (this.chain_[i] >> j) & 255;\n        ++n;\n      }\n    }\n    return digest;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport type NextFn<T> = (value: T) => void;\nexport type ErrorFn = (error: Error) => void;\nexport type CompleteFn = () => void;\n\nexport interface Observer<T> {\n  // Called once for each value in a stream of values.\n  next: NextFn<T>;\n\n  // A stream terminates by a single call to EITHER error() or complete().\n  error: ErrorFn;\n\n  // No events will be sent to next() once complete() is called.\n  complete: CompleteFn;\n}\n\nexport type PartialObserver<T> = Partial<Observer<T>>;\n\n// TODO: Support also Unsubscribe.unsubscribe?\nexport type Unsubscribe = () => void;\n\n/**\n * The Subscribe interface has two forms - passing the inline function\n * callbacks, or a object interface with callback properties.\n */\nexport interface Subscribe<T> {\n  (next?: NextFn<T>, error?: ErrorFn, complete?: CompleteFn): Unsubscribe;\n  (observer: PartialObserver<T>): Unsubscribe;\n}\n\nexport interface Observable<T> {\n  // Subscribe method\n  subscribe: Subscribe<T>;\n}\n\nexport type Executor<T> = (observer: Observer<T>) => void;\n\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nexport function createSubscribe<T>(\n  executor: Executor<T>,\n  onNoObservers?: Executor<T>\n): Subscribe<T> {\n  const proxy = new ObserverProxy<T>(executor, onNoObservers);\n  return proxy.subscribe.bind(proxy);\n}\n\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\nclass ObserverProxy<T> implements Observer<T> {\n  private observers: Array<Observer<T>> | undefined = [];\n  private unsubscribes: Unsubscribe[] = [];\n  private onNoObservers: Executor<T> | undefined;\n  private observerCount = 0;\n  // Micro-task scheduling by calling task.then().\n  private task = Promise.resolve();\n  private finalized = false;\n  private finalError?: Error;\n\n  /**\n   * @param executor Function which can make calls to a single Observer\n   *     as a proxy.\n   * @param onNoObservers Callback when count of Observers goes to zero.\n   */\n  constructor(executor: Executor<T>, onNoObservers?: Executor<T>) {\n    this.onNoObservers = onNoObservers;\n    // Call the executor asynchronously so subscribers that are called\n    // synchronously after the creation of the subscribe function\n    // can still receive the very first value generated in the executor.\n    this.task\n      .then(() => {\n        executor(this);\n      })\n      .catch(e => {\n        this.error(e);\n      });\n  }\n\n  next(value: T): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.next(value);\n    });\n  }\n\n  error(error: Error): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.error(error);\n    });\n    this.close(error);\n  }\n\n  complete(): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.complete();\n    });\n    this.close();\n  }\n\n  /**\n   * Subscribe function that can be used to add an Observer to the fan-out list.\n   *\n   * - We require that no event is sent to a subscriber sychronously to their\n   *   call to subscribe().\n   */\n  subscribe(\n    nextOrObserver?: PartialObserver<T> | Function,\n    error?: ErrorFn,\n    complete?: CompleteFn\n  ): Unsubscribe {\n    let observer: Observer<T>;\n\n    if (\n      nextOrObserver === undefined &&\n      error === undefined &&\n      complete === undefined\n    ) {\n      throw new Error('Missing Observer.');\n    }\n\n    // Assemble an Observer object when passed as callback functions.\n    if (\n      implementsAnyMethods(nextOrObserver as { [key: string]: unknown }, [\n        'next',\n        'error',\n        'complete'\n      ])\n    ) {\n      observer = nextOrObserver as Observer<T>;\n    } else {\n      observer = {\n        next: nextOrObserver as NextFn<T>,\n        error,\n        complete\n      } as Observer<T>;\n    }\n\n    if (observer.next === undefined) {\n      observer.next = noop as NextFn<T>;\n    }\n    if (observer.error === undefined) {\n      observer.error = noop as ErrorFn;\n    }\n    if (observer.complete === undefined) {\n      observer.complete = noop as CompleteFn;\n    }\n\n    const unsub = this.unsubscribeOne.bind(this, this.observers!.length);\n\n    // Attempt to subscribe to a terminated Observable - we\n    // just respond to the Observer with the final error or complete\n    // event.\n    if (this.finalized) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      this.task.then(() => {\n        try {\n          if (this.finalError) {\n            observer.error(this.finalError);\n          } else {\n            observer.complete();\n          }\n        } catch (e) {\n          // nothing\n        }\n        return;\n      });\n    }\n\n    this.observers!.push(observer as Observer<T>);\n\n    return unsub;\n  }\n\n  // Unsubscribe is synchronous - we guarantee that no events are sent to\n  // any unsubscribed Observer.\n  private unsubscribeOne(i: number): void {\n    if (this.observers === undefined || this.observers[i] === undefined) {\n      return;\n    }\n\n    delete this.observers[i];\n\n    this.observerCount -= 1;\n    if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n      this.onNoObservers(this);\n    }\n  }\n\n  private forEachObserver(fn: (observer: Observer<T>) => void): void {\n    if (this.finalized) {\n      // Already closed by previous event....just eat the additional values.\n      return;\n    }\n\n    // Since sendOne calls asynchronously - there is no chance that\n    // this.observers will become undefined.\n    for (let i = 0; i < this.observers!.length; i++) {\n      this.sendOne(i, fn);\n    }\n  }\n\n  // Call the Observer via one of it's callback function. We are careful to\n  // confirm that the observe has not been unsubscribed since this asynchronous\n  // function had been queued.\n  private sendOne(i: number, fn: (observer: Observer<T>) => void): void {\n    // Execute the callback asynchronously\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      if (this.observers !== undefined && this.observers[i] !== undefined) {\n        try {\n          fn(this.observers[i]);\n        } catch (e) {\n          // Ignore exceptions raised in Observers or missing methods of an\n          // Observer.\n          // Log error to console. b/31404806\n          if (typeof console !== 'undefined' && console.error) {\n            console.error(e);\n          }\n        }\n      }\n    });\n  }\n\n  private close(err?: Error): void {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    if (err !== undefined) {\n      this.finalError = err;\n    }\n    // Proxy is no longer needed - garbage collect references\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      this.observers = undefined;\n      this.onNoObservers = undefined;\n    });\n  }\n}\n\n/** Turn synchronous function into one called asynchronously. */\nexport function async(fn: Function, onError?: ErrorFn): Function {\n  return (...args: unknown[]) => {\n    Promise.resolve(true)\n      .then(() => {\n        fn(...args);\n      })\n      .catch((error: Error) => {\n        if (onError) {\n          onError(error);\n        }\n      });\n  };\n}\n\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(\n  obj: { [key: string]: unknown },\n  methods: string[]\n): boolean {\n  if (typeof obj !== 'object' || obj === null) {\n    return false;\n  }\n\n  for (const method of methods) {\n    if (method in obj && typeof obj[method] === 'function') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction noop(): void {\n  // do nothing\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Check to make sure the appropriate number of arguments are provided for a public function.\n * Throws an error if it fails.\n *\n * @param fnName The function name\n * @param minCount The minimum number of arguments to allow for the function call\n * @param maxCount The maximum number of argument to allow for the function call\n * @param argCount The actual number of arguments provided.\n */\nexport const validateArgCount = function(\n  fnName: string,\n  minCount: number,\n  maxCount: number,\n  argCount: number\n): void {\n  let argError;\n  if (argCount < minCount) {\n    argError = 'at least ' + minCount;\n  } else if (argCount > maxCount) {\n    argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\n  }\n  if (argError) {\n    const error =\n      fnName +\n      ' failed: Was called with ' +\n      argCount +\n      (argCount === 1 ? ' argument.' : ' arguments.') +\n      ' Expects ' +\n      argError +\n      '.';\n    throw new Error(error);\n  }\n};\n\n/**\n * Generates a string to prefix an error message about failed argument validation\n *\n * @param fnName The function name\n * @param argumentNumber The index of the argument\n * @param optional Whether or not the argument is optional\n * @return The prefix to add to the error thrown for validation.\n */\nexport function errorPrefix(\n  fnName: string,\n  argumentNumber: number,\n  optional: boolean\n): string {\n  let argName = '';\n  switch (argumentNumber) {\n    case 1:\n      argName = optional ? 'first' : 'First';\n      break;\n    case 2:\n      argName = optional ? 'second' : 'Second';\n      break;\n    case 3:\n      argName = optional ? 'third' : 'Third';\n      break;\n    case 4:\n      argName = optional ? 'fourth' : 'Fourth';\n      break;\n    default:\n      throw new Error(\n        'errorPrefix called with argumentNumber > 4.  Need to update it?'\n      );\n  }\n\n  let error = fnName + ' failed: ';\n\n  error += argName + ' argument ';\n  return error;\n}\n\n/**\n * @param fnName\n * @param argumentNumber\n * @param namespace\n * @param optional\n */\nexport function validateNamespace(\n  fnName: string,\n  argumentNumber: number,\n  namespace: string,\n  optional: boolean\n): void {\n  if (optional && !namespace) {\n    return;\n  }\n  if (typeof namespace !== 'string') {\n    //TODO: I should do more validation here. We only allow certain chars in namespaces.\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid firebase namespace.'\n    );\n  }\n}\n\nexport function validateCallback(\n  fnName: string,\n  argumentNumber: number,\n  callback: Function,\n  optional: boolean\n): void {\n  if (optional && !callback) {\n    return;\n  }\n  if (typeof callback !== 'function') {\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid function.'\n    );\n  }\n}\n\nexport function validateContextObject(\n  fnName: string,\n  argumentNumber: number,\n  context: unknown,\n  optional: boolean\n): void {\n  if (optional && !context) {\n    return;\n  }\n  if (typeof context !== 'object' || context === null) {\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid context object.'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function contains<T extends object>(obj: T, key: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function safeGet<T extends object, K extends keyof T>(\n  obj: T,\n  key: K\n): T[K] | undefined {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\nexport function isEmpty(obj: object): obj is {} {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function map<K extends string, V, U>(\n  obj: { [key in K]: V },\n  fn: (value: V, key: K, obj: { [key in K]: V }) => U,\n  contextObj?: unknown\n): { [key in K]: U } {\n  const res: Partial<{ [key in K]: U }> = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      res[key] = fn.call(contextObj, obj[key], key, obj);\n    }\n  }\n  return res as { [key in K]: U };\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\n * params object (e.g. {arg: 'val', arg2: 'val2'})\n * Note: You must prepend it with ? when adding it to a URL.\n */\nexport function querystring(querystringParams: {\n  [key: string]: string | number;\n}): string {\n  const params = [];\n  for (const [key, value] of Object.entries(querystringParams)) {\n    if (Array.isArray(value)) {\n      value.forEach(arrayVal => {\n        params.push(\n          encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal)\n        );\n      });\n    } else {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    }\n  }\n  return params.length ? '&' + params.join('&') : '';\n}\n\n/**\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\n * (e.g. {arg: 'val', arg2: 'val2'})\n */\nexport function querystringDecode(querystring: string): object {\n  const obj: { [key: string]: unknown } = {};\n  const tokens = querystring.replace(/^\\?/, '').split('&');\n\n  tokens.forEach(token => {\n    if (token) {\n      const key = token.split('=');\n      obj[key[0]] = key[1];\n    }\n  });\n  return obj;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from './assert';\n\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\n// so it's been modified.\n\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\n// pair).\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\n\n/**\n * @param {string} str\n * @return {Array}\n */\nexport const stringToByteArray = function(str: string): number[] {\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n\n    // Is this the lead surrogate in a surrogate pair?\n    if (c >= 0xd800 && c <= 0xdbff) {\n      const high = c - 0xd800; // the high 10 bits.\n      i++;\n      assert(i < str.length, 'Surrogate pair missing trail surrogate.');\n      const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\n      c = 0x10000 + (high << 10) + low;\n    }\n\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (c < 65536) {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Calculate length without actually converting; useful for doing cheaper validation.\n * @param {string} str\n * @return {number}\n */\nexport const stringLength = function(str: string): number {\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    const c = str.charCodeAt(i);\n    if (c < 128) {\n      p++;\n    } else if (c < 2048) {\n      p += 2;\n    } else if (c >= 0xd800 && c <= 0xdbff) {\n      // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\n      p += 4;\n      i++; // skip trail surrogate.\n    } else {\n      p += 3;\n    }\n  }\n  return p;\n};\n","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","var isarray = require('isarray')\n\n/**\n * Expose `pathToRegexp`.\n */\nmodule.exports = pathToRegexp\nmodule.exports.parse = parse\nmodule.exports.compile = compile\nmodule.exports.tokensToFunction = tokensToFunction\nmodule.exports.tokensToRegExp = tokensToRegExp\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g')\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {string}  str\n * @param  {Object=} options\n * @return {!Array}\n */\nfunction parse (str, options) {\n  var tokens = []\n  var key = 0\n  var index = 0\n  var path = ''\n  var defaultDelimiter = options && options.delimiter || '/'\n  var res\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0]\n    var escaped = res[1]\n    var offset = res.index\n    path += str.slice(index, offset)\n    index = offset + m.length\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1]\n      continue\n    }\n\n    var next = str[index]\n    var prefix = res[2]\n    var name = res[3]\n    var capture = res[4]\n    var group = res[5]\n    var modifier = res[6]\n    var asterisk = res[7]\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path)\n      path = ''\n    }\n\n    var partial = prefix != null && next != null && next !== prefix\n    var repeat = modifier === '+' || modifier === '*'\n    var optional = modifier === '?' || modifier === '*'\n    var delimiter = res[2] || defaultDelimiter\n    var pattern = capture || group\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      partial: partial,\n      asterisk: !!asterisk,\n      pattern: pattern ? escapeGroup(pattern) : (asterisk ? '.*' : '[^' + escapeString(delimiter) + ']+?')\n    })\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index)\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path)\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {string}             str\n * @param  {Object=}            options\n * @return {!function(Object=, Object=)}\n */\nfunction compile (str, options) {\n  return tokensToFunction(parse(str, options))\n}\n\n/**\n * Prettier encoding of URI path segments.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeURIComponentPretty (str) {\n  return encodeURI(str).replace(/[\\/?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Encode the asterisk parameter. Similar to `pretty`, but allows slashes.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeAsterisk (str) {\n  return encodeURI(str).replace(/[?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length)\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$')\n    }\n  }\n\n  return function (obj, opts) {\n    var path = ''\n    var data = obj || {}\n    var options = opts || {}\n    var encode = options.pretty ? encodeURIComponentPretty : encodeURIComponent\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i]\n\n      if (typeof token === 'string') {\n        path += token\n\n        continue\n      }\n\n      var value = data[token.name]\n      var segment\n\n      if (value == null) {\n        if (token.optional) {\n          // Prepend partial segment prefixes.\n          if (token.partial) {\n            path += token.prefix\n          }\n\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received `' + JSON.stringify(value) + '`')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encode(value[j])\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received `' + JSON.stringify(segment) + '`')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment\n        }\n\n        continue\n      }\n\n      segment = token.asterisk ? encodeAsterisk(value) : encode(value)\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {string} str\n * @return {string}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/\\\\])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {string} group\n * @return {string}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {!RegExp} re\n * @param  {Array}   keys\n * @return {!RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {string}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {!RegExp} path\n * @param  {!Array}  keys\n * @return {!RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g)\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        partial: false,\n        asterisk: false,\n        pattern: null\n      })\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {!Array}  path\n * @param  {Array}   keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = []\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source)\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options))\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {string}  path\n * @param  {!Array}  keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  return tokensToRegExp(parse(path, options), keys, options)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {!Array}          tokens\n * @param  {(Array|Object)=} keys\n * @param  {Object=}         options\n * @return {!RegExp}\n */\nfunction tokensToRegExp (tokens, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options)\n    keys = []\n  }\n\n  options = options || {}\n\n  var strict = options.strict\n  var end = options.end !== false\n  var route = ''\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i]\n\n    if (typeof token === 'string') {\n      route += escapeString(token)\n    } else {\n      var prefix = escapeString(token.prefix)\n      var capture = '(?:' + token.pattern + ')'\n\n      keys.push(token)\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*'\n      }\n\n      if (token.optional) {\n        if (!token.partial) {\n          capture = '(?:' + prefix + '(' + capture + '))?'\n        } else {\n          capture = prefix + '(' + capture + ')?'\n        }\n      } else {\n        capture = prefix + '(' + capture + ')'\n      }\n\n      route += capture\n    }\n  }\n\n  var delimiter = escapeString(options.delimiter || '/')\n  var endsWithDelimiter = route.slice(-delimiter.length) === delimiter\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithDelimiter ? route.slice(0, -delimiter.length) : route) + '(?:' + delimiter + '(?=$))?'\n  }\n\n  if (end) {\n    route += '$'\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithDelimiter ? '' : '(?=' + delimiter + '|$)'\n  }\n\n  return attachKeys(new RegExp('^' + route, flags(options)), keys)\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(string|RegExp|Array)} path\n * @param  {(Array|Object)=}       keys\n * @param  {Object=}               options\n * @return {!RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options)\n    keys = []\n  }\n\n  options = options || {}\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, /** @type {!Array} */ (keys))\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(/** @type {!Array} */ (path), /** @type {!Array} */ (keys), options)\n  }\n\n  return stringToRegexp(/** @type {string} */ (path), /** @type {!Array} */ (keys), options)\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A container for all of the Logger instances\n */\nexport const instances: Logger[] = [];\n\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nexport enum LogLevel {\n  DEBUG,\n  VERBOSE,\n  INFO,\n  WARN,\n  ERROR,\n  SILENT\n}\n\n/**\n * The default log level\n */\nconst defaultLogLevel: LogLevel = LogLevel.INFO;\n\n/**\n * We allow users the ability to pass their own log handler. We will pass the\n * type of log, the current log level, and any other arguments passed (i.e. the\n * messages that the user wants to log) to this function.\n */\nexport type LogHandler = (\n  loggerInstance: Logger,\n  logType: LogLevel,\n  ...args: unknown[]\n) => void;\n\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler: LogHandler = (instance, logType, ...args): void => {\n  if (logType < instance.logLevel) {\n    return;\n  }\n  const now = new Date().toISOString();\n  switch (logType) {\n    /**\n     * By default, `console.debug` is not displayed in the developer console (in\n     * chrome). To avoid forcing users to have to opt-in to these logs twice\n     * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n     * logs to the `console.log` function.\n     */\n    case LogLevel.DEBUG:\n      console.log(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.VERBOSE:\n      console.log(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.INFO:\n      console.info(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.WARN:\n      console.warn(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.ERROR:\n      console.error(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    default:\n      throw new Error(\n        `Attempted to log a message with an invalid logType (value: ${logType})`\n      );\n  }\n};\n\nexport class Logger {\n  /**\n   * Gives you an instance of a Logger to capture messages according to\n   * Firebase's logging scheme.\n   *\n   * @param name The name that the logs will be associated with\n   */\n  constructor(public name: string) {\n    /**\n     * Capture the current instance for later use\n     */\n    instances.push(this);\n  }\n\n  /**\n   * The log level of the given Logger instance.\n   */\n  private _logLevel = defaultLogLevel;\n  get logLevel(): LogLevel {\n    return this._logLevel;\n  }\n  set logLevel(val: LogLevel) {\n    if (!(val in LogLevel)) {\n      throw new TypeError('Invalid value assigned to `logLevel`');\n    }\n    this._logLevel = val;\n  }\n\n  /**\n   * The log handler for the Logger instance.\n   */\n  private _logHandler: LogHandler = defaultLogHandler;\n  get logHandler(): LogHandler {\n    return this._logHandler;\n  }\n  set logHandler(val: LogHandler) {\n    if (typeof val !== 'function') {\n      throw new TypeError('Value assigned to `logHandler` must be a function');\n    }\n    this._logHandler = val;\n  }\n\n  /**\n   * The functions below are all based on the `console` interface\n   */\n\n  debug(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.DEBUG, ...args);\n  }\n  log(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.VERBOSE, ...args);\n  }\n  info(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.INFO, ...args);\n  }\n  warn(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.WARN, ...args);\n  }\n  error(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.ERROR, ...args);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService\n} from '@firebase/app-types/private';\nimport { deepCopy } from '@firebase/util';\nimport {\n  ComponentContainer,\n  Component,\n  ComponentType,\n  Name\n} from '@firebase/component';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { logger } from './logger';\n\n/**\n * Global context object for a collection of services using\n * a shared authentication state.\n */\nexport class FirebaseAppImpl implements FirebaseApp {\n  private readonly options_: FirebaseOptions;\n  private readonly name_: string;\n  private isDeleted_ = false;\n  private automaticDataCollectionEnabled_: boolean;\n  private container: ComponentContainer;\n\n  constructor(\n    options: FirebaseOptions,\n    config: FirebaseAppConfig,\n    private readonly firebase_: _FirebaseNamespace\n  ) {\n    this.name_ = config.name!;\n    this.automaticDataCollectionEnabled_ =\n      config.automaticDataCollectionEnabled || false;\n    this.options_ = deepCopy<FirebaseOptions>(options);\n    this.container = new ComponentContainer(config.name!);\n\n    // add itself to container\n    this._addComponent(new Component('app', () => this, ComponentType.PUBLIC));\n    // populate ComponentContainer with existing components\n    for (const component of this.firebase_.INTERNAL.components.values()) {\n      this._addComponent(component);\n    }\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed_();\n    return this.automaticDataCollectionEnabled_;\n  }\n\n  set automaticDataCollectionEnabled(val) {\n    this.checkDestroyed_();\n    this.automaticDataCollectionEnabled_ = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed_();\n    return this.name_;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed_();\n    return this.options_;\n  }\n\n  delete(): Promise<void> {\n    return new Promise(resolve => {\n      this.checkDestroyed_();\n      resolve();\n    })\n      .then(() => {\n        this.firebase_.INTERNAL.removeApp(this.name_);\n\n        return Promise.all(\n          this.container.getProviders().map(provider => provider.delete())\n        );\n      })\n      .then((): void => {\n        this.isDeleted_ = true;\n      });\n  }\n\n  /**\n   * Return a service instance associated with this app (creating it\n   * on demand), identified by the passed instanceIdentifier.\n   *\n   * NOTE: Currently storage and functions are the only ones that are leveraging this\n   * functionality. They invoke it by calling:\n   *\n   * ```javascript\n   * firebase.app().storage('STORAGE BUCKET ID')\n   * ```\n   *\n   * The service name is passed to this already\n   * @internal\n   */\n  _getService(\n    name: string,\n    instanceIdentifier: string = DEFAULT_ENTRY_NAME\n  ): FirebaseService {\n    this.checkDestroyed_();\n\n    // getImmediate will always succeed because _getService is only called for registered components.\n    return (this.container.getProvider(name as Name).getImmediate({\n      identifier: instanceIdentifier\n    }) as unknown) as FirebaseService;\n  }\n  /**\n   * Remove a service instance from the cache, so we will create a new instance for this service\n   * when people try to get this service again.\n   *\n   * NOTE: currently only firestore is using this functionality to support firestore shutdown.\n   *\n   * @param name The service name\n   * @param instanceIdentifier instance identifier in case multiple instances are allowed\n   * @internal\n   */\n  _removeServiceInstance(\n    name: string,\n    instanceIdentifier: string = DEFAULT_ENTRY_NAME\n  ): void {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.container.getProvider(name as any).clearInstance(instanceIdentifier);\n  }\n\n  /**\n   * @param component the component being added to this app's container\n   */\n  _addComponent(component: Component): void {\n    try {\n      this.container.addComponent(component);\n    } catch (e) {\n      logger.debug(\n        `Component ${component.name} failed to register with FirebaseApp ${this.name}`,\n        e\n      );\n    }\n  }\n\n  _addOrOverwriteComponent(component: Component): void {\n    this.container.addOrOverwriteComponent(component);\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  private checkDestroyed_(): void {\n    if (this.isDeleted_) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { appName: this.name_ });\n    }\n  }\n}\n\n// Prevent dead-code elimination of these methods w/o invalid property\n// copying.\n(FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||\n  FirebaseAppImpl.prototype.delete ||\n  console.log('dc');\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseApp, _FirebaseNamespace } from '@firebase/app-types/private';\nimport { createSubscribe, deepExtend, ErrorFactory } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { createFirebaseNamespaceCore } from './firebaseNamespaceCore';\n\n/**\n * Return a firebase namespace object.\n *\n * In production, this will be called exactly once and the result\n * assigned to the 'firebase' global.  It may be called multiple times\n * in unit tests.\n */\nexport function createFirebaseNamespace(): FirebaseNamespace {\n  const namespace = createFirebaseNamespaceCore(FirebaseAppImpl);\n  (namespace as _FirebaseNamespace).INTERNAL = {\n    ...(namespace as _FirebaseNamespace).INTERNAL,\n    createFirebaseNamespace,\n    extendNamespace,\n    createSubscribe,\n    ErrorFactory,\n    deepExtend\n  };\n\n  /**\n   * Patch the top-level firebase namespace with additional properties.\n   *\n   * firebase.INTERNAL.extendNamespace()\n   */\n  function extendNamespace(props: { [prop: string]: unknown }): void {\n    deepExtend(namespace, props);\n  }\n\n  return namespace;\n}\n\nexport const firebase = createFirebaseNamespace();\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseNamespace,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService,\n  FirebaseServiceNamespace\n} from '@firebase/app-types/private';\nimport { deepExtend, contains } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport { FirebaseAppLiteImpl } from './lite/firebaseAppLite';\nimport { DEFAULT_ENTRY_NAME, PLATFORM_LOG_STRING } from './constants';\nimport { version } from '../../firebase/package.json';\nimport { logger } from './logger';\nimport { Component, ComponentType, Name } from '@firebase/component';\n\n/**\n * Because auth can't share code with other components, we attach the utility functions\n * in an internal namespace to share code.\n * This function return a firebase namespace object without\n * any utility functions, so it can be shared between the regular firebaseNamespace and\n * the lite version.\n */\nexport function createFirebaseNamespaceCore(\n  firebaseAppImpl: typeof FirebaseAppImpl | typeof FirebaseAppLiteImpl\n): FirebaseNamespace {\n  const apps: { [name: string]: FirebaseApp } = {};\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const components = new Map<string, Component<any>>();\n\n  // A namespace is a plain JavaScript Object.\n  const namespace: FirebaseNamespace = {\n    // Hack to prevent Babel from modifying the object returned\n    // as the firebase namespace.\n    // @ts-ignore\n    __esModule: true,\n    initializeApp,\n    // @ts-ignore\n    app,\n    registerVersion,\n    // @ts-ignore\n    apps: null,\n    SDK_VERSION: version,\n    INTERNAL: {\n      registerComponent,\n      removeApp,\n      components,\n      useAsService\n    }\n  };\n\n  // Inject a circular default export to allow Babel users who were previously\n  // using:\n  //\n  //   import firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase').default;\n  //\n  // instead of\n  //\n  //   import * as firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase');\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (namespace as any)['default'] = namespace;\n\n  // firebase.apps is a read-only getter.\n  Object.defineProperty(namespace, 'apps', {\n    get: getApps\n  });\n\n  /**\n   * Called by App.delete() - but before any services associated with the App\n   * are deleted.\n   */\n  function removeApp(name: string): void {\n    delete apps[name];\n  }\n\n  /**\n   * Get the App object for a given name (or DEFAULT).\n   */\n  function app(name?: string): FirebaseApp {\n    name = name || DEFAULT_ENTRY_NAME;\n    if (!contains(apps, name)) {\n      throw ERROR_FACTORY.create(AppError.NO_APP, { appName: name });\n    }\n    return apps[name];\n  }\n\n  // @ts-ignore\n  app['App'] = firebaseAppImpl;\n  /**\n   * Create a new App instance (name must be unique).\n   */\n  function initializeApp(\n    options: FirebaseOptions,\n    config?: FirebaseAppConfig\n  ): FirebaseApp;\n  function initializeApp(options: FirebaseOptions, name?: string): FirebaseApp;\n  function initializeApp(\n    options: FirebaseOptions,\n    rawConfig = {}\n  ): FirebaseApp {\n    if (typeof rawConfig !== 'object' || rawConfig === null) {\n      const name = rawConfig;\n      rawConfig = { name };\n    }\n\n    const config = rawConfig as FirebaseAppConfig;\n\n    if (config.name === undefined) {\n      config.name = DEFAULT_ENTRY_NAME;\n    }\n\n    const { name } = config;\n\n    if (typeof name !== 'string' || !name) {\n      throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, {\n        appName: String(name)\n      });\n    }\n\n    if (contains(apps, name)) {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { appName: name });\n    }\n\n    const app = new firebaseAppImpl(\n      options,\n      config,\n      namespace as _FirebaseNamespace\n    );\n\n    apps[name] = app;\n\n    return app;\n  }\n\n  /*\n   * Return an array of all the non-deleted FirebaseApps.\n   */\n  function getApps(): FirebaseApp[] {\n    // Make a copy so caller cannot mutate the apps list.\n    return Object.keys(apps).map(name => apps[name]);\n  }\n\n  function registerComponent(\n    component: Component\n  ): FirebaseServiceNamespace<FirebaseService> | null {\n    const componentName = component.name;\n    if (components.has(componentName)) {\n      logger.debug(\n        `There were multiple attempts to register component ${componentName}.`\n      );\n\n      return component.type === ComponentType.PUBLIC\n        ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (namespace as any)[componentName]\n        : null;\n    }\n\n    components.set(componentName, component);\n\n    // create service namespace for public components\n    if (component.type === ComponentType.PUBLIC) {\n      // The Service namespace is an accessor function ...\n      const serviceNamespace = (\n        appArg: FirebaseApp = app()\n      ): FirebaseService => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (typeof (appArg as any)[componentName] !== 'function') {\n          // Invalid argument.\n          // This happens in the following case: firebase.storage('gs:/')\n          throw ERROR_FACTORY.create(AppError.INVALID_APP_ARGUMENT, {\n            appName: componentName\n          });\n        }\n\n        // Forward service instance lookup to the FirebaseApp.\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return (appArg as any)[componentName]();\n      };\n\n      // ... and a container for service-level properties.\n      if (component.serviceProps !== undefined) {\n        deepExtend(serviceNamespace, component.serviceProps);\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (namespace as any)[componentName] = serviceNamespace;\n\n      // Patch the FirebaseAppImpl prototype\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (firebaseAppImpl.prototype as any)[componentName] =\n        // TODO: The eslint disable can be removed and the 'ignoreRestArgs'\n        // option added to the no-explicit-any rule when ESlint releases it.\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function(...args: any) {\n          const serviceFxn = this._getService.bind(this, componentName);\n          return serviceFxn.apply(\n            this,\n            component.multipleInstances ? args : []\n          );\n        };\n    }\n\n    // add the component to existing app instances\n    for (const appName of Object.keys(apps)) {\n      (apps[appName] as _FirebaseApp)._addComponent(component);\n    }\n\n    return component.type === ComponentType.PUBLIC\n      ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (namespace as any)[componentName]\n      : null;\n  }\n\n  function registerVersion(\n    libraryKeyOrName: string,\n    version: string,\n    variant?: string\n  ): void {\n    // TODO: We can use this check to whitelist strings when/if we set up\n    // a good whitelist system.\n    let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;\n    if (variant) {\n      library += `-${variant}`;\n    }\n    const libraryMismatch = library.match(/\\s|\\//);\n    const versionMismatch = version.match(/\\s|\\//);\n    if (libraryMismatch || versionMismatch) {\n      const warning = [\n        `Unable to register library \"${library}\" with version \"${version}\":`\n      ];\n      if (libraryMismatch) {\n        warning.push(\n          `library name \"${library}\" contains illegal characters (whitespace or \"/\")`\n        );\n      }\n      if (libraryMismatch && versionMismatch) {\n        warning.push('and');\n      }\n      if (versionMismatch) {\n        warning.push(\n          `version name \"${version}\" contains illegal characters (whitespace or \"/\")`\n        );\n      }\n      logger.warn(warning.join(' '));\n      return;\n    }\n    registerComponent(\n      new Component(\n        `${library}-version` as Name,\n        () => ({ library, version }),\n        ComponentType.VERSION\n      )\n    );\n  }\n\n  // Map the requested service to a registered service name\n  // (used to map auth to serverAuth service when needed).\n  function useAsService(app: FirebaseApp, name: string): string | null {\n    if (name === 'serverAuth') {\n      return null;\n    }\n\n    const useService = name;\n\n    return useService;\n  }\n\n  return namespace;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ComponentContainer,\n  ComponentType,\n  Provider,\n  Name\n} from '@firebase/component';\n\nexport class PlatformLoggerService {\n  constructor(private readonly container: ComponentContainer) {}\n  // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n  getPlatformInfoString(): string {\n    const providers = this.container.getProviders();\n    // Loop through providers and get library/version pairs from any that are\n    // version components.\n    return providers\n      .map(provider => {\n        if (isVersionServiceProvider(provider)) {\n          const service = provider.getImmediate();\n          return `${service.library}/${service.version}`;\n        } else {\n          return null;\n        }\n      })\n      .filter(logString => logString)\n      .join(' ');\n  }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(\n  provider: Provider<Name>\n): provider is Provider<'app-version'> {\n  const component = provider.getComponent();\n  return component?.type === ComponentType.VERSION;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseNamespace } from '@firebase/app-types/private';\nimport { Component, ComponentType } from '@firebase/component';\nimport { PlatformLoggerService } from './platformLoggerService';\nimport { name, version } from '../package.json';\n\nexport function registerCoreComponents(\n  firebase: FirebaseNamespace,\n  variant?: string\n): void {\n  (firebase as _FirebaseNamespace).INTERNAL.registerComponent(\n    new Component(\n      'platform-logger',\n      container => new PlatformLoggerService(container),\n      ComponentType.PRIVATE\n    )\n  );\n  // Register `app` package.\n  firebase.registerVersion(name, version, variant);\n  // Register platform SDK identifier (no version).\n  firebase.registerVersion('fire-js', '');\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  InstantiationMode,\n  InstanceFactory,\n  ComponentType,\n  Dictionary,\n  Name\n} from './types';\n\n/**\n * Component for service name T, e.g. `auth`, `auth-internal`\n */\nexport class Component<T extends Name = Name> {\n  multipleInstances = false;\n  /**\n   * Properties to be added to the service namespace\n   */\n  serviceProps: Dictionary = {};\n\n  instantiationMode = InstantiationMode.LAZY;\n\n  /**\n   *\n   * @param name The public service name, e.g. app, auth, firestore, database\n   * @param instanceFactory Service factory responsible for creating the public interface\n   * @param type whehter the service provided by the component is public or private\n   */\n  constructor(\n    readonly name: T,\n    readonly instanceFactory: InstanceFactory<T>,\n    readonly type: ComponentType\n  ) {}\n\n  setInstantiationMode(mode: InstantiationMode): this {\n    this.instantiationMode = mode;\n    return this;\n  }\n\n  setMultipleInstances(multipleInstances: boolean): this {\n    this.multipleInstances = multipleInstances;\n    return this;\n  }\n\n  setServiceProps(props: Dictionary): this {\n    this.serviceProps = props;\n    return this;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from '@firebase/util';\nimport { ComponentContainer } from './component_container';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { InstantiationMode, Name, NameServiceMapping } from './types';\nimport { Component } from './component';\n\n/**\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\n * NameServiceMapping[T] is an alias for the type of the instance\n */\nexport class Provider<T extends Name> {\n  private component: Component<T> | null = null;\n  private readonly instances: Map<string, NameServiceMapping[T]> = new Map();\n  private readonly instancesDeferred: Map<\n    string,\n    Deferred<NameServiceMapping[T]>\n  > = new Map();\n\n  constructor(\n    private readonly name: T,\n    private readonly container: ComponentContainer\n  ) {}\n\n  /**\n   * @param identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   */\n  get(identifier: string = DEFAULT_ENTRY_NAME): Promise<NameServiceMapping[T]> {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n\n    if (!this.instancesDeferred.has(normalizedIdentifier)) {\n      const deferred = new Deferred<NameServiceMapping[T]>();\n      this.instancesDeferred.set(normalizedIdentifier, deferred);\n      // If the service instance is available, resolve the promise with it immediately\n      try {\n        const instance = this.getOrInitializeService(normalizedIdentifier);\n        if (instance) {\n          deferred.resolve(instance);\n        }\n      } catch (e) {\n        // when the instance factory throws an exception during get(), it should not cause\n        // a fatal error. We just return the unresolved promise in this case.\n      }\n    }\n\n    return this.instancesDeferred.get(normalizedIdentifier)!.promise;\n  }\n\n  /**\n   *\n   * @param options.identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   * @param options.optional If optional is false or not provided, the method throws an error when\n   * the service is not immediately available.\n   * If optional is true, the method returns null if the service is not immediately available.\n   */\n  getImmediate(options: {\n    identifier?: string;\n    optional: true;\n  }): NameServiceMapping[T] | null;\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: false;\n  }): NameServiceMapping[T];\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: boolean;\n  }): NameServiceMapping[T] | null {\n    const { identifier, optional } = {\n      identifier: DEFAULT_ENTRY_NAME,\n      optional: false,\n      ...options\n    };\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n    try {\n      const instance = this.getOrInitializeService(normalizedIdentifier);\n\n      if (!instance) {\n        if (optional) {\n          return null;\n        }\n        throw Error(`Service ${this.name} is not available`);\n      }\n      return instance;\n    } catch (e) {\n      if (optional) {\n        return null;\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  getComponent(): Component<T> | null {\n    return this.component;\n  }\n\n  setComponent(component: Component<T>): void {\n    if (component.name !== this.name) {\n      throw Error(\n        `Mismatching Component ${component.name} for Provider ${this.name}.`\n      );\n    }\n\n    if (this.component) {\n      throw Error(`Component for ${this.name} has already been provided`);\n    }\n\n    this.component = component;\n    // if the service is eager, initialize the default instance\n    if (isComponentEager(component)) {\n      try {\n        this.getOrInitializeService(DEFAULT_ENTRY_NAME);\n      } catch (e) {\n        // when the instance factory for an eager Component throws an exception during the eager\n        // initialization, it should not cause a fatal error.\n        // TODO: Investigate if we need to make it configurable, because some component may want to cause\n        // a fatal error in this case?\n      }\n    }\n\n    // Create service instances for the pending promises and resolve them\n    // NOTE: if this.multipleInstances is false, only the default instance will be created\n    // and all promises with resolve with it regardless of the identifier.\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedIdentifier = this.normalizeInstanceIdentifier(\n        instanceIdentifier\n      );\n\n      try {\n        // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n        const instance = this.getOrInitializeService(normalizedIdentifier)!;\n        instanceDeferred.resolve(instance);\n      } catch (e) {\n        // when the instance factory throws an exception, it should not cause\n        // a fatal error. We just leave the promise unresolved.\n      }\n    }\n  }\n\n  clearInstance(identifier: string = DEFAULT_ENTRY_NAME): void {\n    this.instancesDeferred.delete(identifier);\n    this.instances.delete(identifier);\n  }\n\n  // app.delete() will call this method on every provider to delete the services\n  // TODO: should we mark the provider as deleted?\n  async delete(): Promise<void> {\n    const services = Array.from(this.instances.values());\n\n    await Promise.all(\n      services\n        .filter(service => 'INTERNAL' in service)\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any).INTERNAL!.delete())\n    );\n  }\n\n  isComponentSet(): boolean {\n    return this.component != null;\n  }\n\n  private getOrInitializeService(\n    identifier: string\n  ): NameServiceMapping[T] | null {\n    let instance = this.instances.get(identifier);\n    if (!instance && this.component) {\n      instance = this.component.instanceFactory(\n        this.container,\n        normalizeIdentifierForFactory(identifier)\n      ) as NameServiceMapping[T];\n      this.instances.set(identifier, instance);\n    }\n\n    return instance || null;\n  }\n\n  private normalizeInstanceIdentifier(identifier: string): string {\n    if (this.component) {\n      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n    } else {\n      return identifier; // assume multiple instances are supported before the component is provided.\n    }\n  }\n}\n\n// undefined should be passed to the service factory for the default instance\nfunction normalizeIdentifierForFactory(identifier: string): string | undefined {\n  return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\n\nfunction isComponentEager(component: Component<Name>): boolean {\n  return component.instantiationMode === InstantiationMode.EAGER;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Provider } from './provider';\nimport { Component } from './component';\nimport { Name } from './types';\n\n/**\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\n */\nexport class ComponentContainer {\n  private readonly providers = new Map<string, Provider<Name>>();\n\n  constructor(private readonly name: string) {}\n\n  /**\n   *\n   * @param component Component being added\n   * @param overwrite When a component with the same name has already been registered,\n   * if overwrite is true: overwrite the existing component with the new component and create a new\n   * provider with the new component. It can be useful in tests where you want to use different mocks\n   * for different tests.\n   * if overwrite is false: throw an exception\n   */\n  addComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      throw new Error(\n        `Component ${component.name} has already been registered with ${this.name}`\n      );\n    }\n\n    provider.setComponent(component);\n  }\n\n  addOrOverwriteComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      // delete the existing provider from the container, so we can register the new component\n      this.providers.delete(component.name);\n    }\n\n    this.addComponent(component);\n  }\n\n  /**\n   * getProvider provides a type safe interface where it can only be called with a field name\n   * present in NameServiceMapping interface.\n   *\n   * Firebase SDKs providing services should extend NameServiceMapping interface to register\n   * themselves.\n   */\n  getProvider<T extends Name>(name: T): Provider<T> {\n    if (this.providers.has(name)) {\n      return this.providers.get(name) as Provider<T>;\n    }\n\n    // create a Provider for a service that hasn't registered with Firebase\n    const provider = new Provider<T>(name, this);\n    this.providers.set(name, provider);\n\n    return provider as Provider<T>;\n  }\n\n  getProviders(): Array<Provider<Name>> {\n    return Array.from(this.providers.values());\n  }\n}\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","// @flow\n'use strict';\n\nvar key = '__global_unique_id__';\n\nmodule.exports = function() {\n  return global[key] = (global[key] || 0) + 1;\n};\n","'use strict';\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar ReactIs = require('react-is');\nvar REACT_STATICS = {\n    childContextTypes: true,\n    contextType: true,\n    contextTypes: true,\n    defaultProps: true,\n    displayName: true,\n    getDefaultProps: true,\n    getDerivedStateFromError: true,\n    getDerivedStateFromProps: true,\n    mixins: true,\n    propTypes: true,\n    type: true\n};\n\nvar KNOWN_STATICS = {\n    name: true,\n    length: true,\n    prototype: true,\n    caller: true,\n    callee: true,\n    arguments: true,\n    arity: true\n};\n\nvar FORWARD_REF_STATICS = {\n    '$$typeof': true,\n    render: true,\n    defaultProps: true,\n    displayName: true,\n    propTypes: true\n};\n\nvar MEMO_STATICS = {\n    '$$typeof': true,\n    compare: true,\n    defaultProps: true,\n    displayName: true,\n    propTypes: true,\n    type: true\n};\n\nvar TYPE_STATICS = {};\nTYPE_STATICS[ReactIs.ForwardRef] = FORWARD_REF_STATICS;\n\nfunction getStatics(component) {\n    if (ReactIs.isMemo(component)) {\n        return MEMO_STATICS;\n    }\n    return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n    if (typeof sourceComponent !== 'string') {\n        // don't hoist over string (html) components\n\n        if (objectPrototype) {\n            var inheritedComponent = getPrototypeOf(sourceComponent);\n            if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n            }\n        }\n\n        var keys = getOwnPropertyNames(sourceComponent);\n\n        if (getOwnPropertySymbols) {\n            keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n        }\n\n        var targetStatics = getStatics(targetComponent);\n        var sourceStatics = getStatics(sourceComponent);\n\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n                var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                try {\n                    // Avoid failures from read-only properties\n                    defineProperty(targetComponent, key, descriptor);\n                } catch (e) {}\n            }\n        }\n\n        return targetComponent;\n    }\n\n    return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","/** @license React v16.9.0\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var h=require(\"object-assign\"),n=\"function\"===typeof Symbol&&Symbol.for,p=n?Symbol.for(\"react.element\"):60103,q=n?Symbol.for(\"react.portal\"):60106,r=n?Symbol.for(\"react.fragment\"):60107,t=n?Symbol.for(\"react.strict_mode\"):60108,u=n?Symbol.for(\"react.profiler\"):60114,v=n?Symbol.for(\"react.provider\"):60109,w=n?Symbol.for(\"react.context\"):60110,x=n?Symbol.for(\"react.forward_ref\"):60112,y=n?Symbol.for(\"react.suspense\"):60113,aa=n?Symbol.for(\"react.suspense_list\"):60120,ba=n?Symbol.for(\"react.memo\"):\n60115,ca=n?Symbol.for(\"react.lazy\"):60116;n&&Symbol.for(\"react.fundamental\");n&&Symbol.for(\"react.responder\");var z=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction A(a){for(var b=a.message,d=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+b,c=1;c<arguments.length;c++)d+=\"&args[]=\"+encodeURIComponent(arguments[c]);a.message=\"Minified React error #\"+b+\"; visit \"+d+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \";return a}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C={};\nfunction D(a,b,d){this.props=a;this.context=b;this.refs=C;this.updater=d||B}D.prototype.isReactComponent={};D.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw A(Error(85));this.updater.enqueueSetState(this,a,b,\"setState\")};D.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function E(){}E.prototype=D.prototype;function F(a,b,d){this.props=a;this.context=b;this.refs=C;this.updater=d||B}var G=F.prototype=new E;\nG.constructor=F;h(G,D.prototype);G.isPureReactComponent=!0;var H={current:null},I={suspense:null},J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,d){var c=void 0,e={},g=null,k=null;if(null!=b)for(c in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=b[c]);var f=arguments.length-2;if(1===f)e.children=d;else if(1<f){for(var l=Array(f),m=0;m<f;m++)l[m]=arguments[m+2];e.children=l}if(a&&a.defaultProps)for(c in f=a.defaultProps,f)void 0===e[c]&&(e[c]=f[c]);return{$$typeof:p,type:a,key:g,ref:k,props:e,_owner:J.current}}\nfunction da(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===p}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var O=/\\/+/g,P=[];function Q(a,b,d,c){if(P.length){var e=P.pop();e.result=a;e.keyPrefix=b;e.func=d;e.context=c;e.count=0;return e}return{result:a,keyPrefix:b,func:d,context:c,count:0}}\nfunction R(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>P.length&&P.push(a)}\nfunction S(a,b,d,c){var e=typeof a;if(\"undefined\"===e||\"boolean\"===e)a=null;var g=!1;if(null===a)g=!0;else switch(e){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case p:case q:g=!0}}if(g)return d(c,a,\"\"===b?\".\"+T(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var k=0;k<a.length;k++){e=a[k];var f=b+T(e,k);g+=S(e,f,d,c)}else if(null===a||\"object\"!==typeof a?f=null:(f=z&&a[z]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),k=\n0;!(e=a.next()).done;)e=e.value,f=b+T(e,k++),g+=S(e,f,d,c);else if(\"object\"===e)throw d=\"\"+a,A(Error(31),\"[object Object]\"===d?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":d,\"\");return g}function U(a,b,d){return null==a?0:S(a,\"\",b,d)}function T(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function ea(a,b){a.func.call(a.context,b,a.count++)}\nfunction fa(a,b,d){var c=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?V(a,c,d,function(a){return a}):null!=a&&(N(a)&&(a=da(a,e+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(O,\"$&/\")+\"/\")+d)),c.push(a))}function V(a,b,d,c,e){var g=\"\";null!=d&&(g=(\"\"+d).replace(O,\"$&/\")+\"/\");b=Q(b,g,c,e);U(a,fa,b);R(b)}function W(){var a=H.current;if(null===a)throw A(Error(321));return a}\nvar X={Children:{map:function(a,b,d){if(null==a)return a;var c=[];V(a,c,null,b,d);return c},forEach:function(a,b,d){if(null==a)return a;b=Q(null,null,b,d);U(a,ea,b);R(b)},count:function(a){return U(a,function(){return null},null)},toArray:function(a){var b=[];V(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw A(Error(143));return a}},createRef:function(){return{current:null}},Component:D,PureComponent:F,createContext:function(a,b){void 0===b&&(b=null);a={$$typeof:w,_calculateChangedBits:b,\n_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:v,_context:a};return a.Consumer=a},forwardRef:function(a){return{$$typeof:x,render:a}},lazy:function(a){return{$$typeof:ca,_ctor:a,_status:-1,_result:null}},memo:function(a,b){return{$$typeof:ba,type:a,compare:void 0===b?null:b}},useCallback:function(a,b){return W().useCallback(a,b)},useContext:function(a,b){return W().useContext(a,b)},useEffect:function(a,b){return W().useEffect(a,b)},useImperativeHandle:function(a,\nb,d){return W().useImperativeHandle(a,b,d)},useDebugValue:function(){},useLayoutEffect:function(a,b){return W().useLayoutEffect(a,b)},useMemo:function(a,b){return W().useMemo(a,b)},useReducer:function(a,b,d){return W().useReducer(a,b,d)},useRef:function(a){return W().useRef(a)},useState:function(a){return W().useState(a)},Fragment:r,Profiler:u,StrictMode:t,Suspense:y,unstable_SuspenseList:aa,createElement:M,cloneElement:function(a,b,d){if(null===a||void 0===a)throw A(Error(267),a);var c=void 0,e=\nh({},a.props),g=a.key,k=a.ref,f=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,f=J.current);void 0!==b.key&&(g=\"\"+b.key);var l=void 0;a.type&&a.type.defaultProps&&(l=a.type.defaultProps);for(c in b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}c=arguments.length-2;if(1===c)e.children=d;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];e.children=l}return{$$typeof:p,type:a.type,key:g,ref:k,props:e,_owner:f}},createFactory:function(a){var b=M.bind(null,a);\nb.type=a;return b},isValidElement:N,version:\"16.9.0\",unstable_withSuspenseConfig:function(a,b){var d=I.suspense;I.suspense=void 0===b?null:b;try{a()}finally{I.suspense=d}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:H,ReactCurrentBatchConfig:I,ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:h}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default||Z;\n","/** @license React v16.9.0\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),m=require(\"object-assign\"),q=require(\"scheduler\");function t(a){for(var b=a.message,c=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+b,d=1;d<arguments.length;d++)c+=\"&args[]=\"+encodeURIComponent(arguments[d]);a.message=\"Minified React error #\"+b+\"; visit \"+c+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \";return a}if(!aa)throw t(Error(227));var ba=null,ca={};\nfunction da(){if(ba)for(var a in ca){var b=ca[a],c=ba.indexOf(a);if(!(-1<c))throw t(Error(96),a);if(!ea[c]){if(!b.extractEvents)throw t(Error(97),a);ea[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],h=b,g=d;if(fa.hasOwnProperty(g))throw t(Error(99),g);fa[g]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&ha(k[e],h,g);e=!0}else f.registrationName?(ha(f.registrationName,h,g),e=!0):e=!1;if(!e)throw t(Error(98),d,a);}}}}\nfunction ha(a,b,c){if(ia[a])throw t(Error(100),a);ia[a]=b;ja[a]=b.eventTypes[c].dependencies}var ea=[],fa={},ia={},ja={};function ka(a,b,c,d,e,f,h,g,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var la=!1,ma=null,na=!1,oa=null,pa={onError:function(a){la=!0;ma=a}};function qa(a,b,c,d,e,f,h,g,k){la=!1;ma=null;ka.apply(pa,arguments)}\nfunction ra(a,b,c,d,e,f,h,g,k){qa.apply(this,arguments);if(la){if(la){var l=ma;la=!1;ma=null}else throw t(Error(198));na||(na=!0,oa=l)}}var sa=null,ta=null,va=null;function wa(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=va(c);ra(d,b,void 0,a);a.currentTarget=null}function xa(a,b){if(null==b)throw t(Error(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}\nfunction ya(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var za=null;function Aa(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)wa(a,b[d],c[d]);else b&&wa(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}}function Ba(a){null!==a&&(za=xa(za,a));a=za;za=null;if(a){ya(a,Aa);if(za)throw t(Error(95));if(na)throw a=oa,na=!1,oa=null,a;}}\nvar Ca={injectEventPluginOrder:function(a){if(ba)throw t(Error(101));ba=Array.prototype.slice.call(a);da()},injectEventPluginsByName:function(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!ca.hasOwnProperty(c)||ca[c]!==d){if(ca[c])throw t(Error(102),c);ca[c]=d;b=!0}}b&&da()}};\nfunction Da(a,b){var c=a.stateNode;if(!c)return null;var d=sa(c);if(!d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==typeof c)throw t(Error(231),b,typeof c);\nreturn c}var Ea=Math.random().toString(36).slice(2),Fa=\"__reactInternalInstance$\"+Ea,Ga=\"__reactEventHandlers$\"+Ea;function Ha(a){if(a[Fa])return a[Fa];for(;!a[Fa];)if(a.parentNode)a=a.parentNode;else return null;a=a[Fa];return 5===a.tag||6===a.tag?a:null}function Ia(a){a=a[Fa];return!a||5!==a.tag&&6!==a.tag?null:a}function Ja(a){if(5===a.tag||6===a.tag)return a.stateNode;throw t(Error(33));}function Ka(a){return a[Ga]||null}function La(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction Ma(a,b,c){if(b=Da(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a)}function Na(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=La(b);for(b=c.length;0<b--;)Ma(c[b],\"captured\",a);for(b=0;b<c.length;b++)Ma(c[b],\"bubbled\",a)}}\nfunction Oa(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Da(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a))}function Pa(a){a&&a.dispatchConfig.registrationName&&Oa(a._targetInst,null,a)}function Qa(a){ya(a,Na)}var Ra=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement);\nfunction Sa(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ta={animationend:Sa(\"Animation\",\"AnimationEnd\"),animationiteration:Sa(\"Animation\",\"AnimationIteration\"),animationstart:Sa(\"Animation\",\"AnimationStart\"),transitionend:Sa(\"Transition\",\"TransitionEnd\")},Ua={},Va={};\nRa&&(Va=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),\"TransitionEvent\"in window||delete Ta.transitionend.transition);function Wa(a){if(Ua[a])return Ua[a];if(!Ta[a])return a;var b=Ta[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Va)return Ua[a]=b[c];return a}\nvar Xa=Wa(\"animationend\"),Ya=Wa(\"animationiteration\"),Za=Wa(\"animationstart\"),ab=Wa(\"transitionend\"),bb=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),cb=null,db=null,eb=null;\nfunction fb(){if(eb)return eb;var a,b=db,c=b.length,d,e=\"value\"in cb?cb.value:cb.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var h=c-a;for(d=1;d<=h&&b[c-d]===e[f-d];d++);return eb=e.slice(a,1<d?1-d:void 0)}function gb(){return!0}function hb(){return!1}\nfunction y(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):\"target\"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?gb:hb;this.isPropagationStopped=hb;return this}\nm(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=gb)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=gb)},persist:function(){this.isPersistent=gb},isPersistent:hb,destructor:function(){var a=this.constructor.Interface,\nb;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=hb;this._dispatchInstances=this._dispatchListeners=null}});y.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};\ny.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;m(e,c.prototype);c.prototype=e;c.prototype.constructor=c;c.Interface=m({},d.Interface,a);c.extend=d.extend;ib(c);return c};ib(y);function jb(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}\nfunction kb(a){if(!(a instanceof this))throw t(Error(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function ib(a){a.eventPool=[];a.getPooled=jb;a.release=kb}var lb=y.extend({data:null}),mb=y.extend({data:null}),nb=[9,13,27,32],ob=Ra&&\"CompositionEvent\"in window,pb=null;Ra&&\"documentMode\"in document&&(pb=document.documentMode);\nvar qb=Ra&&\"TextEvent\"in window&&!pb,sb=Ra&&(!ob||pb&&8<pb&&11>=pb),tb=String.fromCharCode(32),ub={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"blur compositionend keydown keypress keyup mousedown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",\ncaptured:\"onCompositionStartCapture\"},dependencies:\"blur compositionstart keydown keypress keyup mousedown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"blur compositionupdate keydown keypress keyup mousedown\".split(\" \")}},vb=!1;\nfunction wb(a,b){switch(a){case \"keyup\":return-1!==nb.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"blur\":return!0;default:return!1}}function xb(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var yb=!1;function Ab(a,b){switch(a){case \"compositionend\":return xb(b);case \"keypress\":if(32!==b.which)return null;vb=!0;return tb;case \"textInput\":return a=b.data,a===tb&&vb?null:a;default:return null}}\nfunction Bb(a,b){if(yb)return\"compositionend\"===a||!ob&&wb(a,b)?(a=fb(),eb=db=cb=null,yb=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return sb&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar Cb={eventTypes:ub,extractEvents:function(a,b,c,d){var e=void 0;var f=void 0;if(ob)b:{switch(a){case \"compositionstart\":e=ub.compositionStart;break b;case \"compositionend\":e=ub.compositionEnd;break b;case \"compositionupdate\":e=ub.compositionUpdate;break b}e=void 0}else yb?wb(a,c)&&(e=ub.compositionEnd):\"keydown\"===a&&229===c.keyCode&&(e=ub.compositionStart);e?(sb&&\"ko\"!==c.locale&&(yb||e!==ub.compositionStart?e===ub.compositionEnd&&yb&&(f=fb()):(cb=d,db=\"value\"in cb?cb.value:cb.textContent,yb=\n!0)),e=lb.getPooled(e,b,c,d),f?e.data=f:(f=xb(c),null!==f&&(e.data=f)),Qa(e),f=e):f=null;(a=qb?Ab(a,c):Bb(a,c))?(b=mb.getPooled(ub.beforeInput,b,c,d),b.data=a,Qa(b)):b=null;return null===f?b:null===b?f:[f,b]}},Db=null,Eb=null,Fb=null;function Gb(a){if(a=ta(a)){if(\"function\"!==typeof Db)throw t(Error(280));var b=sa(a.stateNode);Db(a.stateNode,a.type,b)}}function Hb(a){Eb?Fb?Fb.push(a):Fb=[a]:Eb=a}function Ib(){if(Eb){var a=Eb,b=Fb;Fb=Eb=null;Gb(a);if(b)for(a=0;a<b.length;a++)Gb(b[a])}}\nfunction Jb(a,b){return a(b)}function Kb(a,b,c,d){return a(b,c,d)}function Lb(){}var Mb=Jb,Nb=!1;function Ob(){if(null!==Eb||null!==Fb)Lb(),Ib()}var Pb={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qb(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!Pb[a.type]:\"textarea\"===b?!0:!1}\nfunction Rb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}function Sb(a){if(!Ra)return!1;a=\"on\"+a;var b=a in document;b||(b=document.createElement(\"div\"),b.setAttribute(a,\"return;\"),b=\"function\"===typeof b[a]);return b}function Tb(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ub(a){var b=Tb(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Vb(a){a._valueTracker||(a._valueTracker=Ub(a))}function Wb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Tb(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}var Xb=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Xb.hasOwnProperty(\"ReactCurrentDispatcher\")||(Xb.ReactCurrentDispatcher={current:null});Xb.hasOwnProperty(\"ReactCurrentBatchConfig\")||(Xb.ReactCurrentBatchConfig={suspense:null});\nvar Yb=/^(.*)[\\\\\\/]/,B=\"function\"===typeof Symbol&&Symbol.for,Zb=B?Symbol.for(\"react.element\"):60103,$b=B?Symbol.for(\"react.portal\"):60106,ac=B?Symbol.for(\"react.fragment\"):60107,bc=B?Symbol.for(\"react.strict_mode\"):60108,cc=B?Symbol.for(\"react.profiler\"):60114,dc=B?Symbol.for(\"react.provider\"):60109,ec=B?Symbol.for(\"react.context\"):60110,fc=B?Symbol.for(\"react.concurrent_mode\"):60111,gc=B?Symbol.for(\"react.forward_ref\"):60112,hc=B?Symbol.for(\"react.suspense\"):60113,ic=B?Symbol.for(\"react.suspense_list\"):\n60120,jc=B?Symbol.for(\"react.memo\"):60115,kc=B?Symbol.for(\"react.lazy\"):60116;B&&Symbol.for(\"react.fundamental\");B&&Symbol.for(\"react.responder\");var lc=\"function\"===typeof Symbol&&Symbol.iterator;function mc(a){if(null===a||\"object\"!==typeof a)return null;a=lc&&a[lc]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nfunction oc(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ac:return\"Fragment\";case $b:return\"Portal\";case cc:return\"Profiler\";case bc:return\"StrictMode\";case hc:return\"Suspense\";case ic:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case ec:return\"Context.Consumer\";case dc:return\"Context.Provider\";case gc:var b=a.render;b=b.displayName||b.name||\"\";return a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\n\"ForwardRef\");case jc:return oc(a.type);case kc:if(a=1===a._status?a._result:null)return oc(a)}return null}function pc(a){var b=\"\";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c=\"\";break a;default:var d=a._debugOwner,e=a._debugSource,f=oc(a.type);c=null;d&&(c=oc(d.type));d=f;f=\"\";e?f=\" (at \"+e.fileName.replace(Yb,\"\")+\":\"+e.lineNumber+\")\":c&&(f=\" (created by \"+c+\")\");c=\"\\n    in \"+(d||\"Unknown\")+f}b+=c;a=a.return}while(a);return b}\nvar qc=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,rc=Object.prototype.hasOwnProperty,sc={},tc={};\nfunction uc(a){if(rc.call(tc,a))return!0;if(rc.call(sc,a))return!1;if(qc.test(a))return tc[a]=!0;sc[a]=!0;return!1}function vc(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction wc(a,b,c,d){if(null===b||\"undefined\"===typeof b||vc(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function D(a,b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}var F={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){F[a]=new D(a,0,!1,a,null,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];F[b]=new D(b,1,!1,a[1],null,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){F[a]=new D(a,2,!1,a.toLowerCase(),null,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){F[a]=new D(a,2,!1,a,null,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){F[a]=new D(a,3,!1,a.toLowerCase(),null,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){F[a]=new D(a,3,!0,a,null,!1)});[\"capture\",\"download\"].forEach(function(a){F[a]=new D(a,4,!1,a,null,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){F[a]=new D(a,6,!1,a,null,!1)});[\"rowSpan\",\"start\"].forEach(function(a){F[a]=new D(a,5,!1,a.toLowerCase(),null,!1)});var xc=/[\\-:]([a-z])/g;function yc(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(xc,\nyc);F[b]=new D(b,1,!1,a,null,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(xc,yc);F[b]=new D(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(xc,yc);F[b]=new D(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){F[a]=new D(a,1,!1,a.toLowerCase(),null,!1)});\nF.xlinkHref=new D(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){F[a]=new D(a,1,!1,a.toLowerCase(),null,!0)});\nfunction zc(a,b,c,d){var e=F.hasOwnProperty(b)?F[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(wc(b,c,e,d)&&(c=null),d||null===e?uc(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nfunction Ac(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Bc(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}\nfunction Cc(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Ac(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function Dc(a,b){b=b.checked;null!=b&&zc(a,\"checked\",b,!1)}\nfunction Ec(a,b){Dc(a,b);var c=Ac(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?Fc(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&Fc(a,b.type,Ac(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction Gc(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!a.defaultChecked;a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction Fc(a,b,c){if(\"number\"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var Hc={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"blur change click focus input keydown keyup selectionchange\".split(\" \")}};function Ic(a,b,c){a=y.getPooled(Hc.change,a,b,c);a.type=\"change\";Hb(c);Qa(a);return a}var Jc=null,Kc=null;function Lc(a){Ba(a)}\nfunction Mc(a){var b=Ja(a);if(Wb(b))return a}function Nc(a,b){if(\"change\"===a)return b}var Oc=!1;Ra&&(Oc=Sb(\"input\")&&(!document.documentMode||9<document.documentMode));function Pc(){Jc&&(Jc.detachEvent(\"onpropertychange\",Qc),Kc=Jc=null)}function Qc(a){if(\"value\"===a.propertyName&&Mc(Kc))if(a=Ic(Kc,a,Rb(a)),Nb)Ba(a);else{Nb=!0;try{Jb(Lc,a)}finally{Nb=!1,Ob()}}}function Rc(a,b,c){\"focus\"===a?(Pc(),Jc=b,Kc=c,Jc.attachEvent(\"onpropertychange\",Qc)):\"blur\"===a&&Pc()}\nfunction Sc(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return Mc(Kc)}function Tc(a,b){if(\"click\"===a)return Mc(b)}function Uc(a,b){if(\"input\"===a||\"change\"===a)return Mc(b)}\nvar Vc={eventTypes:Hc,_isInputEventSupported:Oc,extractEvents:function(a,b,c,d){var e=b?Ja(b):window,f=void 0,h=void 0,g=e.nodeName&&e.nodeName.toLowerCase();\"select\"===g||\"input\"===g&&\"file\"===e.type?f=Nc:Qb(e)?Oc?f=Uc:(f=Sc,h=Rc):(g=e.nodeName)&&\"input\"===g.toLowerCase()&&(\"checkbox\"===e.type||\"radio\"===e.type)&&(f=Tc);if(f&&(f=f(a,b)))return Ic(f,c,d);h&&h(a,e,b);\"blur\"===a&&(a=e._wrapperState)&&a.controlled&&\"number\"===e.type&&Fc(e,\"number\",e.value)}},Wc=y.extend({view:null,detail:null}),Xc={Alt:\"altKey\",\nControl:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Yc(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Xc[a])?!!b[a]:!1}function Zc(){return Yc}\nvar $c=0,ad=0,bd=!1,cd=!1,dd=Wc.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Zc,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if(\"movementX\"in a)return a.movementX;var b=$c;$c=a.screenX;return bd?\"mousemove\"===a.type?a.screenX-b:0:(bd=!0,0)},movementY:function(a){if(\"movementY\"in a)return a.movementY;\nvar b=ad;ad=a.screenY;return cd?\"mousemove\"===a.type?a.screenY-b:0:(cd=!0,0)}}),ed=dd.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fd={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"mouseout\",\"mouseover\"]},mouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"mouseout\",\"mouseover\"]},pointerEnter:{registrationName:\"onPointerEnter\",dependencies:[\"pointerout\",\"pointerover\"]},pointerLeave:{registrationName:\"onPointerLeave\",\ndependencies:[\"pointerout\",\"pointerover\"]}},gd={eventTypes:fd,extractEvents:function(a,b,c,d){var e=\"mouseover\"===a||\"pointerover\"===a,f=\"mouseout\"===a||\"pointerout\"===a;if(e&&(c.relatedTarget||c.fromElement)||!f&&!e)return null;e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window;f?(f=b,b=(b=c.relatedTarget||c.toElement)?Ha(b):null):f=null;if(f===b)return null;var h=void 0,g=void 0,k=void 0,l=void 0;if(\"mouseout\"===a||\"mouseover\"===a)h=dd,g=fd.mouseLeave,k=fd.mouseEnter,l=\"mouse\";\nelse if(\"pointerout\"===a||\"pointerover\"===a)h=ed,g=fd.pointerLeave,k=fd.pointerEnter,l=\"pointer\";var n=null==f?e:Ja(f);e=null==b?e:Ja(b);a=h.getPooled(g,f,c,d);a.type=l+\"leave\";a.target=n;a.relatedTarget=e;c=h.getPooled(k,b,c,d);c.type=l+\"enter\";c.target=e;c.relatedTarget=n;d=b;if(f&&d)a:{b=f;e=d;l=0;for(h=b;h;h=La(h))l++;h=0;for(k=e;k;k=La(k))h++;for(;0<l-h;)b=La(b),l--;for(;0<h-l;)e=La(e),h--;for(;l--;){if(b===e||b===e.alternate)break a;b=La(b);e=La(e)}b=null}else b=null;e=b;for(b=[];f&&f!==e;){l=\nf.alternate;if(null!==l&&l===e)break;b.push(f);f=La(f)}for(f=[];d&&d!==e;){l=d.alternate;if(null!==l&&l===e)break;f.push(d);d=La(d)}for(d=0;d<b.length;d++)Oa(b[d],\"bubbled\",a);for(d=f.length;0<d--;)Oa(f[d],\"captured\",c);return[a,c]}};function hd(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var id=Object.prototype.hasOwnProperty;\nfunction jd(a,b){if(hd(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!id.call(b,c[d])||!hd(a[c[d]],b[c[d]]))return!1;return!0}function kd(a,b){return{responder:a,props:b}}new Map;new Map;new Set;new Map;\nfunction ld(a){var b=a;if(a.alternate)for(;b.return;)b=b.return;else{if(0!==(b.effectTag&2))return 1;for(;b.return;)if(b=b.return,0!==(b.effectTag&2))return 1}return 3===b.tag?2:3}function od(a){if(2!==ld(a))throw t(Error(188));}\nfunction pd(a){var b=a.alternate;if(!b){b=ld(a);if(3===b)throw t(Error(188));return 1===b?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return od(e),a;if(f===d)return od(e),b;f=f.sibling}throw t(Error(188));}if(c.return!==d.return)c=e,d=f;else{for(var h=!1,g=e.child;g;){if(g===c){h=!0;c=e;d=f;break}if(g===d){h=!0;d=e;c=f;break}g=g.sibling}if(!h){for(g=f.child;g;){if(g===\nc){h=!0;c=f;d=e;break}if(g===d){h=!0;d=f;c=e;break}g=g.sibling}if(!h)throw t(Error(189));}}if(c.alternate!==d)throw t(Error(190));}if(3!==c.tag)throw t(Error(188));return c.stateNode.current===c?a:b}function qd(a){a=pd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nvar rd=y.extend({animationName:null,elapsedTime:null,pseudoElement:null}),sd=y.extend({clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),td=Wc.extend({relatedTarget:null});function ud(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}\nvar vd={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},wd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",\n116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},xd=Wc.extend({key:function(a){if(a.key){var b=vd[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=ud(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?wd[a.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Zc,charCode:function(a){return\"keypress\"===\na.type?ud(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===a.type?ud(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),yd=dd.extend({dataTransfer:null}),zd=Wc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Zc}),Ad=y.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Bd=dd.extend({deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in\na?-a.wheelDeltaX:0},deltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),Cd=[[\"blur\",\"blur\",0],[\"cancel\",\"cancel\",0],[\"click\",\"click\",0],[\"close\",\"close\",0],[\"contextmenu\",\"contextMenu\",0],[\"copy\",\"copy\",0],[\"cut\",\"cut\",0],[\"auxclick\",\"auxClick\",0],[\"dblclick\",\"doubleClick\",0],[\"dragend\",\"dragEnd\",0],[\"dragstart\",\"dragStart\",0],[\"drop\",\"drop\",0],[\"focus\",\"focus\",0],[\"input\",\"input\",0],[\"invalid\",\"invalid\",0],\n[\"keydown\",\"keyDown\",0],[\"keypress\",\"keyPress\",0],[\"keyup\",\"keyUp\",0],[\"mousedown\",\"mouseDown\",0],[\"mouseup\",\"mouseUp\",0],[\"paste\",\"paste\",0],[\"pause\",\"pause\",0],[\"play\",\"play\",0],[\"pointercancel\",\"pointerCancel\",0],[\"pointerdown\",\"pointerDown\",0],[\"pointerup\",\"pointerUp\",0],[\"ratechange\",\"rateChange\",0],[\"reset\",\"reset\",0],[\"seeked\",\"seeked\",0],[\"submit\",\"submit\",0],[\"touchcancel\",\"touchCancel\",0],[\"touchend\",\"touchEnd\",0],[\"touchstart\",\"touchStart\",0],[\"volumechange\",\"volumeChange\",0],[\"drag\",\"drag\",\n1],[\"dragenter\",\"dragEnter\",1],[\"dragexit\",\"dragExit\",1],[\"dragleave\",\"dragLeave\",1],[\"dragover\",\"dragOver\",1],[\"mousemove\",\"mouseMove\",1],[\"mouseout\",\"mouseOut\",1],[\"mouseover\",\"mouseOver\",1],[\"pointermove\",\"pointerMove\",1],[\"pointerout\",\"pointerOut\",1],[\"pointerover\",\"pointerOver\",1],[\"scroll\",\"scroll\",1],[\"toggle\",\"toggle\",1],[\"touchmove\",\"touchMove\",1],[\"wheel\",\"wheel\",1],[\"abort\",\"abort\",2],[Xa,\"animationEnd\",2],[Ya,\"animationIteration\",2],[Za,\"animationStart\",2],[\"canplay\",\"canPlay\",2],[\"canplaythrough\",\n\"canPlayThrough\",2],[\"durationchange\",\"durationChange\",2],[\"emptied\",\"emptied\",2],[\"encrypted\",\"encrypted\",2],[\"ended\",\"ended\",2],[\"error\",\"error\",2],[\"gotpointercapture\",\"gotPointerCapture\",2],[\"load\",\"load\",2],[\"loadeddata\",\"loadedData\",2],[\"loadedmetadata\",\"loadedMetadata\",2],[\"loadstart\",\"loadStart\",2],[\"lostpointercapture\",\"lostPointerCapture\",2],[\"playing\",\"playing\",2],[\"progress\",\"progress\",2],[\"seeking\",\"seeking\",2],[\"stalled\",\"stalled\",2],[\"suspend\",\"suspend\",2],[\"timeupdate\",\"timeUpdate\",\n2],[ab,\"transitionEnd\",2],[\"waiting\",\"waiting\",2]],Dd={},Ed={},Fd=0;for(;Fd<Cd.length;Fd++){var Gd=Cd[Fd],Hd=Gd[0],Id=Gd[1],Jd=Gd[2],Kd=\"on\"+(Id[0].toUpperCase()+Id.slice(1)),Ld={phasedRegistrationNames:{bubbled:Kd,captured:Kd+\"Capture\"},dependencies:[Hd],eventPriority:Jd};Dd[Id]=Ld;Ed[Hd]=Ld}\nvar Md={eventTypes:Dd,getEventPriority:function(a){a=Ed[a];return void 0!==a?a.eventPriority:2},extractEvents:function(a,b,c,d){var e=Ed[a];if(!e)return null;switch(a){case \"keypress\":if(0===ud(c))return null;case \"keydown\":case \"keyup\":a=xd;break;case \"blur\":case \"focus\":a=td;break;case \"click\":if(2===c.button)return null;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":a=dd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":a=\nyd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":a=zd;break;case Xa:case Ya:case Za:a=rd;break;case ab:a=Ad;break;case \"scroll\":a=Wc;break;case \"wheel\":a=Bd;break;case \"copy\":case \"cut\":case \"paste\":a=sd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":a=ed;break;default:a=y}b=a.getPooled(e,b,c,d);Qa(b);return b}},Nd=Md.getEventPriority,Od=[];\nfunction Pd(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d;for(d=c;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo;if(!d)break;a.ancestors.push(c);c=Ha(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Rb(a.nativeEvent);d=a.topLevelType;for(var f=a.nativeEvent,h=null,g=0;g<ea.length;g++){var k=ea[g];k&&(k=k.extractEvents(d,b,f,e))&&(h=xa(h,k))}Ba(h)}}var Qd=!0;function G(a,b){Rd(b,a,!1)}\nfunction Rd(a,b,c){switch(Nd(b)){case 0:var d=Sd.bind(null,b,1);break;case 1:d=Td.bind(null,b,1);break;default:d=Ud.bind(null,b,1)}c?a.addEventListener(b,d,!0):a.addEventListener(b,d,!1)}function Sd(a,b,c){Nb||Lb();var d=Ud,e=Nb;Nb=!0;try{Kb(d,a,b,c)}finally{(Nb=e)||Ob()}}function Td(a,b,c){Ud(a,b,c)}\nfunction Ud(a,b,c){if(Qd){b=Rb(c);b=Ha(b);null===b||\"number\"!==typeof b.tag||2===ld(b)||(b=null);if(Od.length){var d=Od.pop();d.topLevelType=a;d.nativeEvent=c;d.targetInst=b;a=d}else a={topLevelType:a,nativeEvent:c,targetInst:b,ancestors:[]};try{if(c=a,Nb)Pd(c,void 0);else{Nb=!0;try{Mb(Pd,c,void 0)}finally{Nb=!1,Ob()}}}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>Od.length&&Od.push(a)}}}var Vd=new (\"function\"===typeof WeakMap?WeakMap:Map);\nfunction Wd(a){var b=Vd.get(a);void 0===b&&(b=new Set,Vd.set(a,b));return b}function Xd(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function Yd(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Zd(a,b){var c=Yd(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Yd(c)}}function $d(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?$d(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction ae(){for(var a=window,b=Xd();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xd(a.document)}return b}function be(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar ce=Ra&&\"documentMode\"in document&&11>=document.documentMode,de={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange\".split(\" \")}},ee=null,fe=null,ge=null,he=!1;\nfunction ie(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(he||null==ee||ee!==Xd(c))return null;c=ee;\"selectionStart\"in c&&be(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return ge&&jd(ge,c)?null:(ge=c,a=y.getPooled(de.select,fe,a,b),a.type=\"select\",a.target=ee,Qa(a),a)}\nvar je={eventTypes:de,extractEvents:function(a,b,c,d){var e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument,f;if(!(f=!e)){a:{e=Wd(e);f=ja.onSelect;for(var h=0;h<f.length;h++)if(!e.has(f[h])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Ja(b):window;switch(a){case \"focus\":if(Qb(e)||\"true\"===e.contentEditable)ee=e,fe=b,ge=null;break;case \"blur\":ge=fe=ee=null;break;case \"mousedown\":he=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":return he=!1,ie(c,d);case \"selectionchange\":if(ce)break;\ncase \"keydown\":case \"keyup\":return ie(c,d)}return null}};Ca.injectEventPluginOrder(\"ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \"));sa=Ka;ta=Ia;va=Ja;Ca.injectEventPluginsByName({SimpleEventPlugin:Md,EnterLeaveEventPlugin:gd,ChangeEventPlugin:Vc,SelectEventPlugin:je,BeforeInputEventPlugin:Cb});function ke(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}\nfunction le(a,b){a=m({children:void 0},b);if(b=ke(b.children))a.children=b;return a}function me(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Ac(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction ne(a,b){if(null!=b.dangerouslySetInnerHTML)throw t(Error(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function oe(a,b){var c=b.value;if(null==c){c=b.defaultValue;b=b.children;if(null!=b){if(null!=c)throw t(Error(92));if(Array.isArray(b)){if(!(1>=b.length))throw t(Error(93));b=b[0]}c=b}null==c&&(c=\"\")}a._wrapperState={initialValue:Ac(c)}}\nfunction pe(a,b){var c=Ac(b.value),d=Ac(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function qe(a){var b=a.textContent;b===a._wrapperState.initialValue&&(a.value=b)}var re={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction se(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function te(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?se(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar ue=void 0,ve=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==re.svg||\"innerHTML\"in a)a.innerHTML=b;else{ue=ue||document.createElement(\"div\");ue.innerHTML=\"<svg>\"+b+\"</svg>\";for(b=ue.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction we(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar xe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ye=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(xe).forEach(function(a){ye.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);xe[b]=xe[a]})});function ze(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||xe.hasOwnProperty(a)&&xe[a]?(\"\"+b).trim():b+\"px\"}\nfunction Ae(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=ze(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var Ce=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction De(a,b){if(b){if(Ce[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw t(Error(137),a,\"\");if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw t(Error(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw t(Error(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw t(Error(62),\"\");}}\nfunction Ee(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}\nfunction Fe(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Wd(a);b=ja[b];for(var d=0;d<b.length;d++){var e=b[d];if(!c.has(e)){switch(e){case \"scroll\":Rd(a,\"scroll\",!0);break;case \"focus\":case \"blur\":Rd(a,\"focus\",!0);Rd(a,\"blur\",!0);c.add(\"blur\");c.add(\"focus\");break;case \"cancel\":case \"close\":Sb(e)&&Rd(a,e,!0);break;case \"invalid\":case \"submit\":case \"reset\":break;default:-1===bb.indexOf(e)&&G(e,a)}c.add(e)}}}function Ge(){}var He=null,Ie=null;\nfunction Je(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}function Ke(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var Le=\"function\"===typeof setTimeout?setTimeout:void 0,Me=\"function\"===typeof clearTimeout?clearTimeout:void 0;\nfunction Ne(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}new Set;var Oe=[],Pe=-1;function H(a){0>Pe||(a.current=Oe[Pe],Oe[Pe]=null,Pe--)}function J(a,b){Pe++;Oe[Pe]=a.current;a.current=b}var Qe={},L={current:Qe},M={current:!1},Re=Qe;\nfunction Se(a,b){var c=a.type.contextTypes;if(!c)return Qe;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Te(a){H(M,a);H(L,a)}function Ue(a){H(M,a);H(L,a)}\nfunction Ve(a,b,c){if(L.current!==Qe)throw t(Error(168));J(L,b,a);J(M,c,a)}function We(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw t(Error(108),oc(b)||\"Unknown\",e);return m({},c,d)}function Xe(a){var b=a.stateNode;b=b&&b.__reactInternalMemoizedMergedChildContext||Qe;Re=L.current;J(L,b,a);J(M,M.current,a);return!0}\nfunction Ye(a,b,c){var d=a.stateNode;if(!d)throw t(Error(169));c?(b=We(a,b,Re),d.__reactInternalMemoizedMergedChildContext=b,H(M,a),H(L,a),J(L,b,a)):H(M,a);J(M,c,a)}\nvar Ze=q.unstable_runWithPriority,$e=q.unstable_scheduleCallback,af=q.unstable_cancelCallback,bf=q.unstable_shouldYield,cf=q.unstable_requestPaint,df=q.unstable_now,ef=q.unstable_getCurrentPriorityLevel,ff=q.unstable_ImmediatePriority,hf=q.unstable_UserBlockingPriority,jf=q.unstable_NormalPriority,kf=q.unstable_LowPriority,lf=q.unstable_IdlePriority,mf={},nf=void 0!==cf?cf:function(){},of=null,pf=null,qf=!1,rf=df(),sf=1E4>rf?df:function(){return df()-rf};\nfunction tf(){switch(ef()){case ff:return 99;case hf:return 98;case jf:return 97;case kf:return 96;case lf:return 95;default:throw t(Error(332));}}function uf(a){switch(a){case 99:return ff;case 98:return hf;case 97:return jf;case 96:return kf;case 95:return lf;default:throw t(Error(332));}}function vf(a,b){a=uf(a);return Ze(a,b)}function wf(a,b,c){a=uf(a);return $e(a,b,c)}function xf(a){null===of?(of=[a],pf=$e(ff,yf)):of.push(a);return mf}function O(){null!==pf&&af(pf);yf()}\nfunction yf(){if(!qf&&null!==of){qf=!0;var a=0;try{var b=of;vf(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});of=null}catch(c){throw null!==of&&(of=of.slice(a+1)),$e(ff,O),c;}finally{qf=!1}}}function zf(a,b){if(1073741823===b)return 99;if(1===b)return 95;a=10*(1073741821-b)-10*(1073741821-a);return 0>=a?99:250>=a?98:5250>=a?97:95}function Af(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}\nfunction Bf(a){var b=a._result;switch(a._status){case 1:return b;case 2:throw b;case 0:throw b;default:a._status=0;b=a._ctor;b=b();b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)});switch(a._status){case 1:return a._result;case 2:throw a._result;}a._result=b;throw b;}}var Cf={current:null},Df=null,Ef=null,Ff=null;function Gf(){Ff=Ef=Df=null}\nfunction Hf(a,b){var c=a.type._context;J(Cf,c._currentValue,a);c._currentValue=b}function If(a){var b=Cf.current;H(Cf,a);a.type._context._currentValue=b}function Jf(a,b){for(;null!==a;){var c=a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}\nfunction Kf(a,b){Df=a;Ff=Ef=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(Lf=!0),a.firstContext=null)}function Mf(a,b){if(Ff!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)Ff=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===Ef){if(null===Df)throw t(Error(308));Ef=b;Df.dependencies={expirationTime:0,firstContext:b,responders:null}}else Ef=Ef.next=b}return a._currentValue}var Nf=!1;\nfunction Of(a){return{baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Pf(a){return{baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}\nfunction Qf(a,b){return{expirationTime:a,suspenseConfig:b,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Rf(a,b){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b)}\nfunction Sf(a,b){var c=a.alternate;if(null===c){var d=a.updateQueue;var e=null;null===d&&(d=a.updateQueue=Of(a.memoizedState))}else d=a.updateQueue,e=c.updateQueue,null===d?null===e?(d=a.updateQueue=Of(a.memoizedState),e=c.updateQueue=Of(c.memoizedState)):d=a.updateQueue=Pf(e):null===e&&(e=c.updateQueue=Pf(d));null===e||d===e?Rf(d,b):null===d.lastUpdate||null===e.lastUpdate?(Rf(d,b),Rf(e,b)):(Rf(d,b),e.lastUpdate=b)}\nfunction Tf(a,b){var c=a.updateQueue;c=null===c?a.updateQueue=Of(a.memoizedState):Uf(a,c);null===c.lastCapturedUpdate?c.firstCapturedUpdate=c.lastCapturedUpdate=b:(c.lastCapturedUpdate.next=b,c.lastCapturedUpdate=b)}function Uf(a,b){var c=a.alternate;null!==c&&b===c.updateQueue&&(b=a.updateQueue=Pf(b));return b}\nfunction Vf(a,b,c,d,e,f){switch(c.tag){case 1:return a=c.payload,\"function\"===typeof a?a.call(f,d,e):a;case 3:a.effectTag=a.effectTag&-2049|64;case 0:a=c.payload;e=\"function\"===typeof a?a.call(f,d,e):a;if(null===e||void 0===e)break;return m({},d,e);case 2:Nf=!0}return d}\nfunction Wf(a,b,c,d,e){Nf=!1;b=Uf(a,b);for(var f=b.baseState,h=null,g=0,k=b.firstUpdate,l=f;null!==k;){var n=k.expirationTime;n<e?(null===h&&(h=k,f=l),g<n&&(g=n)):(Xf(n,k.suspenseConfig),l=Vf(a,b,k,l,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=k:(b.lastEffect.nextEffect=k,b.lastEffect=k)));k=k.next}n=null;for(k=b.firstCapturedUpdate;null!==k;){var z=k.expirationTime;z<e?(null===n&&(n=k,null===h&&(f=l)),g<z&&(g=z)):(l=Vf(a,b,k,l,c,d),null!==\nk.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=k:(b.lastCapturedEffect.nextEffect=k,b.lastCapturedEffect=k)));k=k.next}null===h&&(b.lastUpdate=null);null===n?b.lastCapturedUpdate=null:a.effectTag|=32;null===h&&null===n&&(f=l);b.baseState=f;b.firstUpdate=h;b.firstCapturedUpdate=n;a.expirationTime=g;a.memoizedState=l}\nfunction Yf(a,b,c){null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null);Zf(b.firstEffect,c);b.firstEffect=b.lastEffect=null;Zf(b.firstCapturedEffect,c);b.firstCapturedEffect=b.lastCapturedEffect=null}function Zf(a,b){for(;null!==a;){var c=a.callback;if(null!==c){a.callback=null;var d=b;if(\"function\"!==typeof c)throw t(Error(191),c);c.call(d)}a=a.nextEffect}}\nvar $f=Xb.ReactCurrentBatchConfig,ag=(new aa.Component).refs;function bg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;d=a.updateQueue;null!==d&&0===a.expirationTime&&(d.baseState=c)}\nvar fg={isMounted:function(a){return(a=a._reactInternalFiber)?2===ld(a):!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=cg(),e=$f.suspense;d=dg(d,a,e);e=Qf(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Sf(a,e);eg(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=cg(),e=$f.suspense;d=dg(d,a,e);e=Qf(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Sf(a,e);eg(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=cg(),d=$f.suspense;\nc=dg(c,a,d);d=Qf(c,d);d.tag=2;void 0!==b&&null!==b&&(d.callback=b);Sf(a,d);eg(a,c)}};function gg(a,b,c,d,e,f,h){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,h):b.prototype&&b.prototype.isPureReactComponent?!jd(c,d)||!jd(e,f):!0}\nfunction hg(a,b,c){var d=!1,e=Qe;var f=b.contextType;\"object\"===typeof f&&null!==f?f=Mf(f):(e=N(b)?Re:L.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Se(a,e):Qe);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=fg;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction ig(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&fg.enqueueReplaceState(b,b.state,null)}\nfunction jg(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=ag;var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=Mf(f):(f=N(b)?Re:L.current,e.context=Se(a,f));f=a.updateQueue;null!==f&&(Wf(a,f,c,e,d),e.state=a.memoizedState);f=b.getDerivedStateFromProps;\"function\"===typeof f&&(bg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==\ntypeof e.componentWillMount||(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&fg.enqueueReplaceState(e,e.state,null),f=a.updateQueue,null!==f&&(Wf(a,f,c,e,d),e.state=a.memoizedState));\"function\"===typeof e.componentDidMount&&(a.effectTag|=4)}var kg=Array.isArray;\nfunction lg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;var d=void 0;if(c){if(1!==c.tag)throw t(Error(309));d=c.stateNode}if(!d)throw t(Error(147),a);var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===ag&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw t(Error(284));if(!c._owner)throw t(Error(290),a);}return a}\nfunction mg(a,b){if(\"textarea\"!==a.type)throw t(Error(31),\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b,\"\");}\nfunction ng(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){a=og(a,b,c);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=\n2,c):d;b.effectTag=2;return c}function h(b){a&&null===b.alternate&&(b.effectTag=2);return b}function g(a,b,c,d){if(null===b||6!==b.tag)return b=pg(c,a.mode,d),b.return=a,b;b=e(b,c,d);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props,d),d.ref=lg(a,b,c),d.return=a,d;d=qg(c.type,c.key,c.props,null,a.mode,d);d.ref=lg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==\nc.implementation)return b=rg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[],d);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=sg(c,a.mode,d,f),b.return=a,b;b=e(b,c,d);b.return=a;return b}function z(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=pg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case Zb:return c=qg(b.type,b.key,b.props,null,a.mode,c),c.ref=lg(a,null,b),c.return=a,c;case $b:return b=rg(b,a.mode,c),b.return=a,b}if(kg(b)||\nmc(b))return b=sg(b,a.mode,c,null),b.return=a,b;mg(a,b)}return null}function x(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:g(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case Zb:return c.key===e?c.type===ac?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case $b:return c.key===e?l(a,b,c,d):null}if(kg(c)||mc(c))return null!==e?null:n(a,b,c,d,null);mg(a,c)}return null}function v(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=\na.get(c)||null,g(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case Zb:return a=a.get(null===d.key?c:d.key)||null,d.type===ac?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case $b:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(kg(d)||mc(d))return a=a.get(c)||null,n(b,a,d,e,null);mg(b,d)}return null}function rb(e,h,g,k){for(var l=null,u=null,n=h,w=h=0,C=null;null!==n&&w<g.length;w++){n.index>w?(C=n,n=null):C=n.sibling;var p=x(e,n,g[w],k);if(null===p){null===n&&(n=C);break}a&&\nn&&null===p.alternate&&b(e,n);h=f(p,h,w);null===u?l=p:u.sibling=p;u=p;n=C}if(w===g.length)return c(e,n),l;if(null===n){for(;w<g.length;w++)n=z(e,g[w],k),null!==n&&(h=f(n,h,w),null===u?l=n:u.sibling=n,u=n);return l}for(n=d(e,n);w<g.length;w++)C=v(n,e,w,g[w],k),null!==C&&(a&&null!==C.alternate&&n.delete(null===C.key?w:C.key),h=f(C,h,w),null===u?l=C:u.sibling=C,u=C);a&&n.forEach(function(a){return b(e,a)});return l}function Be(e,h,g,k){var l=mc(g);if(\"function\"!==typeof l)throw t(Error(150));g=l.call(g);\nif(null==g)throw t(Error(151));for(var n=l=null,u=h,w=h=0,C=null,p=g.next();null!==u&&!p.done;w++,p=g.next()){u.index>w?(C=u,u=null):C=u.sibling;var r=x(e,u,p.value,k);if(null===r){null===u&&(u=C);break}a&&u&&null===r.alternate&&b(e,u);h=f(r,h,w);null===n?l=r:n.sibling=r;n=r;u=C}if(p.done)return c(e,u),l;if(null===u){for(;!p.done;w++,p=g.next())p=z(e,p.value,k),null!==p&&(h=f(p,h,w),null===n?l=p:n.sibling=p,n=p);return l}for(u=d(e,u);!p.done;w++,p=g.next())p=v(u,e,w,p.value,k),null!==p&&(a&&null!==\np.alternate&&u.delete(null===p.key?w:p.key),h=f(p,h,w),null===n?l=p:n.sibling=p,n=p);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,g){var k=\"object\"===typeof f&&null!==f&&f.type===ac&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case Zb:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){if(7===k.tag?f.type===ac:k.elementType===f.type){c(a,k.sibling);d=e(k,f.type===ac?f.props.children:f.props,g);d.ref=lg(a,k,f);d.return=a;a=d;break a}c(a,\nk);break}else b(a,k);k=k.sibling}f.type===ac?(d=sg(f.props.children,a.mode,g,f.key),d.return=a,a=d):(g=qg(f.type,f.key,f.props,null,a.mode,g),g.ref=lg(a,d,f),g.return=a,a=g)}return h(a);case $b:a:{for(k=f.key;null!==d;){if(d.key===k){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[],g);d.return=a;a=d;break a}c(a,d);break}else b(a,d);d=d.sibling}d=rg(f,a.mode,g);d.return=a;a=d}return h(a)}if(\"string\"===typeof f||\n\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f,g),d.return=a,a=d):(c(a,d),d=pg(f,a.mode,g),d.return=a,a=d),h(a);if(kg(f))return rb(a,d,f,g);if(mc(f))return Be(a,d,f,g);l&&mg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 0:throw a=a.type,t(Error(152),a.displayName||a.name||\"Component\");}return c(a,d)}}var tg=ng(!0),ug=ng(!1),vg={},wg={current:vg},xg={current:vg},yg={current:vg};function zg(a){if(a===vg)throw t(Error(174));return a}\nfunction Ag(a,b){J(yg,b,a);J(xg,a,a);J(wg,vg,a);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:te(null,\"\");break;default:c=8===c?b.parentNode:b,b=c.namespaceURI||null,c=c.tagName,b=te(b,c)}H(wg,a);J(wg,b,a)}function Bg(a){H(wg,a);H(xg,a);H(yg,a)}function Cg(a){zg(yg.current);var b=zg(wg.current);var c=te(b,a.type);b!==c&&(J(xg,a,a),J(wg,c,a))}function Dg(a){xg.current===a&&(H(wg,a),H(xg,a))}var Eg=1,Fg=1,Gg=2,P={current:0};\nfunction Hg(a){for(var b=a;null!==b;){if(13===b.tag){if(null!==b.memoizedState)return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}\nvar Ig=0,Jg=2,Kg=4,Lg=8,Mg=16,Ng=32,Og=64,Pg=128,Qg=Xb.ReactCurrentDispatcher,Rg=0,Sg=null,Q=null,Tg=null,Ug=null,R=null,Vg=null,Wg=0,Xg=null,Yg=0,Zg=!1,$g=null,ah=0;function bh(){throw t(Error(321));}function ch(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!hd(a[c],b[c]))return!1;return!0}\nfunction dh(a,b,c,d,e,f){Rg=f;Sg=b;Tg=null!==a?a.memoizedState:null;Qg.current=null===Tg?eh:fh;b=c(d,e);if(Zg){do Zg=!1,ah+=1,Tg=null!==a?a.memoizedState:null,Vg=Ug,Xg=R=Q=null,Qg.current=fh,b=c(d,e);while(Zg);$g=null;ah=0}Qg.current=hh;a=Sg;a.memoizedState=Ug;a.expirationTime=Wg;a.updateQueue=Xg;a.effectTag|=Yg;a=null!==Q&&null!==Q.next;Rg=0;Vg=R=Ug=Tg=Q=Sg=null;Wg=0;Xg=null;Yg=0;if(a)throw t(Error(300));return b}\nfunction ih(){Qg.current=hh;Rg=0;Vg=R=Ug=Tg=Q=Sg=null;Wg=0;Xg=null;Yg=0;Zg=!1;$g=null;ah=0}function jh(){var a={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};null===R?Ug=R=a:R=R.next=a;return R}function kh(){if(null!==Vg)R=Vg,Vg=R.next,Q=Tg,Tg=null!==Q?Q.next:null;else{if(null===Tg)throw t(Error(310));Q=Tg;var a={memoizedState:Q.memoizedState,baseState:Q.baseState,queue:Q.queue,baseUpdate:Q.baseUpdate,next:null};R=null===R?Ug=a:R.next=a;Tg=Q.next}return R}\nfunction lh(a,b){return\"function\"===typeof b?b(a):b}\nfunction mh(a){var b=kh(),c=b.queue;if(null===c)throw t(Error(311));c.lastRenderedReducer=a;if(0<ah){var d=c.dispatch;if(null!==$g){var e=$g.get(c);if(void 0!==e){$g.delete(c);var f=b.memoizedState;do f=a(f,e.action),e=e.next;while(null!==e);hd(f,b.memoizedState)||(Lf=!0);b.memoizedState=f;b.baseUpdate===c.last&&(b.baseState=f);c.lastRenderedState=f;return[f,d]}}return[b.memoizedState,d]}d=c.last;var h=b.baseUpdate;f=b.baseState;null!==h?(null!==d&&(d.next=null),d=h.next):d=null!==d?d.next:null;if(null!==\nd){var g=e=null,k=d,l=!1;do{var n=k.expirationTime;n<Rg?(l||(l=!0,g=h,e=f),n>Wg&&(Wg=n)):(Xf(n,k.suspenseConfig),f=k.eagerReducer===a?k.eagerState:a(f,k.action));h=k;k=k.next}while(null!==k&&k!==d);l||(g=h,e=f);hd(f,b.memoizedState)||(Lf=!0);b.memoizedState=f;b.baseUpdate=g;b.baseState=e;c.lastRenderedState=f}return[b.memoizedState,c.dispatch]}\nfunction nh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};null===Xg?(Xg={lastEffect:null},Xg.lastEffect=a.next=a):(b=Xg.lastEffect,null===b?Xg.lastEffect=a.next=a:(c=b.next,b.next=a,a.next=c,Xg.lastEffect=a));return a}function oh(a,b,c,d){var e=jh();Yg|=a;e.memoizedState=nh(b,c,void 0,void 0===d?null:d)}\nfunction ph(a,b,c,d){var e=kh();d=void 0===d?null:d;var f=void 0;if(null!==Q){var h=Q.memoizedState;f=h.destroy;if(null!==d&&ch(d,h.deps)){nh(Ig,c,f,d);return}}Yg|=a;e.memoizedState=nh(b,c,f,d)}function qh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function rh(){}\nfunction sh(a,b,c){if(!(25>ah))throw t(Error(301));var d=a.alternate;if(a===Sg||null!==d&&d===Sg)if(Zg=!0,a={expirationTime:Rg,suspenseConfig:null,action:c,eagerReducer:null,eagerState:null,next:null},null===$g&&($g=new Map),c=$g.get(b),void 0===c)$g.set(b,a);else{for(b=c;null!==b.next;)b=b.next;b.next=a}else{var e=cg(),f=$f.suspense;e=dg(e,a,f);f={expirationTime:e,suspenseConfig:f,action:c,eagerReducer:null,eagerState:null,next:null};var h=b.last;if(null===h)f.next=f;else{var g=h.next;null!==g&&\n(f.next=g);h.next=f}b.last=f;if(0===a.expirationTime&&(null===d||0===d.expirationTime)&&(d=b.lastRenderedReducer,null!==d))try{var k=b.lastRenderedState,l=d(k,c);f.eagerReducer=d;f.eagerState=l;if(hd(l,k))return}catch(n){}finally{}eg(a,e)}}\nvar hh={readContext:Mf,useCallback:bh,useContext:bh,useEffect:bh,useImperativeHandle:bh,useLayoutEffect:bh,useMemo:bh,useReducer:bh,useRef:bh,useState:bh,useDebugValue:bh,useResponder:bh},eh={readContext:Mf,useCallback:function(a,b){jh().memoizedState=[a,void 0===b?null:b];return a},useContext:Mf,useEffect:function(a,b){return oh(516,Pg|Og,a,b)},useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return oh(4,Kg|Ng,qh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return oh(4,\nKg|Ng,a,b)},useMemo:function(a,b){var c=jh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=jh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={last:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=sh.bind(null,Sg,a);return[d.memoizedState,a]},useRef:function(a){var b=jh();a={current:a};return b.memoizedState=a},useState:function(a){var b=jh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue=\n{last:null,dispatch:null,lastRenderedReducer:lh,lastRenderedState:a};a=a.dispatch=sh.bind(null,Sg,a);return[b.memoizedState,a]},useDebugValue:rh,useResponder:kd},fh={readContext:Mf,useCallback:function(a,b){var c=kh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ch(b,d[1]))return d[0];c.memoizedState=[a,b];return a},useContext:Mf,useEffect:function(a,b){return ph(516,Pg|Og,a,b)},useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ph(4,Kg|Ng,qh.bind(null,\nb,a),c)},useLayoutEffect:function(a,b){return ph(4,Kg|Ng,a,b)},useMemo:function(a,b){var c=kh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ch(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a},useReducer:mh,useRef:function(){return kh().memoizedState},useState:function(a){return mh(lh,a)},useDebugValue:rh,useResponder:kd},th=null,uh=null,vh=!1;\nfunction wh(a,b){var c=xh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function yh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction zh(a){if(vh){var b=uh;if(b){var c=b;if(!yh(a,b)){b=Ne(c.nextSibling);if(!b||!yh(a,b)){a.effectTag|=2;vh=!1;th=a;return}wh(th,c)}th=a;uh=Ne(b.firstChild)}else a.effectTag|=2,vh=!1,th=a}}function Ah(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&18!==a.tag;)a=a.return;th=a}\nfunction Bh(a){if(a!==th)return!1;if(!vh)return Ah(a),vh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!Ke(b,a.memoizedProps))for(b=uh;b;)wh(a,b),b=Ne(b.nextSibling);Ah(a);uh=th?Ne(a.stateNode.nextSibling):null;return!0}function Ch(){uh=th=null;vh=!1}var Dh=Xb.ReactCurrentOwner,Lf=!1;function S(a,b,c,d){b.child=null===a?ug(b,null,c,d):tg(b,a.child,c,d)}\nfunction Eh(a,b,c,d,e){c=c.render;var f=b.ref;Kf(b,e);d=dh(a,b,c,d,f,e);if(null!==a&&!Lf)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),Fh(a,b,e);b.effectTag|=1;S(a,b,d,e);return b.child}\nfunction Gh(a,b,c,d,e,f){if(null===a){var h=c.type;if(\"function\"===typeof h&&!Hh(h)&&void 0===h.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=h,Ih(a,b,h,d,e,f);a=qg(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}h=a.child;if(e<f&&(e=h.memoizedProps,c=c.compare,c=null!==c?c:jd,c(e,d)&&a.ref===b.ref))return Fh(a,b,f);b.effectTag|=1;a=og(h,d,f);a.ref=b.ref;a.return=b;return b.child=a}\nfunction Ih(a,b,c,d,e,f){return null!==a&&jd(a.memoizedProps,d)&&a.ref===b.ref&&(Lf=!1,e<f)?Fh(a,b,f):Jh(a,b,c,d,f)}function Kh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function Jh(a,b,c,d,e){var f=N(c)?Re:L.current;f=Se(b,f);Kf(b,e);c=dh(a,b,c,d,f,e);if(null!==a&&!Lf)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),Fh(a,b,e);b.effectTag|=1;S(a,b,c,e);return b.child}\nfunction Lh(a,b,c,d,e){if(N(c)){var f=!0;Xe(b)}else f=!1;Kf(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),hg(b,c,d,e),jg(b,c,d,e),d=!0;else if(null===a){var h=b.stateNode,g=b.memoizedProps;h.props=g;var k=h.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=Mf(l):(l=N(c)?Re:L.current,l=Se(b,l));var n=c.getDerivedStateFromProps,z=\"function\"===typeof n||\"function\"===typeof h.getSnapshotBeforeUpdate;z||\"function\"!==typeof h.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof h.componentWillReceiveProps||(g!==d||k!==l)&&ig(b,h,d,l);Nf=!1;var x=b.memoizedState;k=h.state=x;var v=b.updateQueue;null!==v&&(Wf(b,v,d,h,e),k=b.memoizedState);g!==d||x!==k||M.current||Nf?(\"function\"===typeof n&&(bg(b,c,n,d),k=b.memoizedState),(g=Nf||gg(b,c,g,d,x,k,l))?(z||\"function\"!==typeof h.UNSAFE_componentWillMount&&\"function\"!==typeof h.componentWillMount||(\"function\"===typeof h.componentWillMount&&h.componentWillMount(),\"function\"===typeof h.UNSAFE_componentWillMount&&\nh.UNSAFE_componentWillMount()),\"function\"===typeof h.componentDidMount&&(b.effectTag|=4)):(\"function\"===typeof h.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=k),h.props=d,h.state=k,h.context=l,d=g):(\"function\"===typeof h.componentDidMount&&(b.effectTag|=4),d=!1)}else h=b.stateNode,g=b.memoizedProps,h.props=b.type===b.elementType?g:Af(b.type,g),k=h.context,l=c.contextType,\"object\"===typeof l&&null!==l?l=Mf(l):(l=N(c)?Re:L.current,l=Se(b,l)),n=c.getDerivedStateFromProps,(z=\n\"function\"===typeof n||\"function\"===typeof h.getSnapshotBeforeUpdate)||\"function\"!==typeof h.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof h.componentWillReceiveProps||(g!==d||k!==l)&&ig(b,h,d,l),Nf=!1,k=b.memoizedState,x=h.state=k,v=b.updateQueue,null!==v&&(Wf(b,v,d,h,e),x=b.memoizedState),g!==d||k!==x||M.current||Nf?(\"function\"===typeof n&&(bg(b,c,n,d),x=b.memoizedState),(n=Nf||gg(b,c,g,d,k,x,l))?(z||\"function\"!==typeof h.UNSAFE_componentWillUpdate&&\"function\"!==typeof h.componentWillUpdate||\n(\"function\"===typeof h.componentWillUpdate&&h.componentWillUpdate(d,x,l),\"function\"===typeof h.UNSAFE_componentWillUpdate&&h.UNSAFE_componentWillUpdate(d,x,l)),\"function\"===typeof h.componentDidUpdate&&(b.effectTag|=4),\"function\"===typeof h.getSnapshotBeforeUpdate&&(b.effectTag|=256)):(\"function\"!==typeof h.componentDidUpdate||g===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof h.getSnapshotBeforeUpdate||g===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),b.memoizedProps=\nd,b.memoizedState=x),h.props=d,h.state=x,h.context=l,d=n):(\"function\"!==typeof h.componentDidUpdate||g===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof h.getSnapshotBeforeUpdate||g===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),d=!1);return Mh(a,b,c,d,f,e)}\nfunction Mh(a,b,c,d,e,f){Kh(a,b);var h=0!==(b.effectTag&64);if(!d&&!h)return e&&Ye(b,c,!1),Fh(a,b,f);d=b.stateNode;Dh.current=b;var g=h&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.effectTag|=1;null!==a&&h?(b.child=tg(b,a.child,null,f),b.child=tg(b,null,g,f)):S(a,b,g,f);b.memoizedState=d.state;e&&Ye(b,c,!0);return b.child}function Nh(a){var b=a.stateNode;b.pendingContext?Ve(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Ve(a,b.context,!1);Ag(a,b.containerInfo)}\nvar Oh={};\nfunction Ph(a,b,c){var d=b.mode,e=b.pendingProps,f=P.current,h=null,g=!1,k;(k=0!==(b.effectTag&64))||(k=0!==(f&Gg)&&(null===a||null!==a.memoizedState));k?(h=Oh,g=!0,b.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=Fg);f&=Eg;J(P,f,b);if(null===a)if(g){e=e.fallback;a=sg(null,d,0,null);a.return=b;if(0===(b.mode&2))for(g=null!==b.memoizedState?b.child.child:b.child,a.child=g;null!==g;)g.return=a,g=g.sibling;c=sg(e,d,c,null);c.return=b;a.sibling=\nc;d=a}else d=c=ug(b,null,e.children,c);else{if(null!==a.memoizedState)if(f=a.child,d=f.sibling,g){e=e.fallback;c=og(f,f.pendingProps,0);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==f.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;e=og(d,e,d.expirationTime);e.return=b;c.sibling=e;d=c;c.childExpirationTime=0;c=e}else d=c=tg(b,f.child,e.children,c);else if(f=a.child,g){g=e.fallback;e=sg(null,d,0,null);e.return=b;e.child=f;null!==f&&(f.return=e);if(0===(b.mode&\n2))for(f=null!==b.memoizedState?b.child.child:b.child,e.child=f;null!==f;)f.return=e,f=f.sibling;c=sg(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;d=e;e.childExpirationTime=0}else c=d=tg(b,f,e.children,c);b.stateNode=a.stateNode}b.memoizedState=h;b.child=d;return c}function Qh(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,last:d,tail:c,tailExpiration:0,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.last=d,f.tail=c,f.tailExpiration=0,f.tailMode=e)}\nfunction Rh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;S(a,b,d.children,c);d=P.current;if(0!==(d&Gg))d=d&Eg|Gg,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag){if(null!==a.memoizedState){a.expirationTime<c&&(a.expirationTime=c);var h=a.alternate;null!==h&&h.expirationTime<c&&(h.expirationTime=c);Jf(a.return,c)}}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===\nb)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=Eg}J(P,d,b);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)d=c.alternate,null!==d&&null===Hg(d)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Qh(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){d=e.alternate;if(null!==d&&null===Hg(d)){b.child=e;break}d=e.sibling;e.sibling=c;c=e;e=d}Qh(b,!0,c,null,f);break;case \"together\":Qh(b,\n!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function Fh(a,b,c){null!==a&&(b.dependencies=a.dependencies);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw t(Error(153));if(null!==b.child){a=b.child;c=og(a,a.pendingProps,a.expirationTime);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=og(a,a.pendingProps,a.expirationTime),c.return=b;c.sibling=null}return b.child}function Sh(a){a.effectTag|=4}\nvar Th=void 0,Uh=void 0,Vh=void 0,Wh=void 0;Th=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(20===c.tag)a.appendChild(c.stateNode.instance);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Uh=function(){};\nVh=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var h=b.stateNode;zg(wg.current);a=null;switch(c){case \"input\":f=Bc(h,f);d=Bc(h,d);a=[];break;case \"option\":f=le(h,f);d=le(h,d);a=[];break;case \"select\":f=m({},f,{value:void 0});d=m({},d,{value:void 0});a=[];break;case \"textarea\":f=ne(h,f);d=ne(h,d);a=[];break;default:\"function\"!==typeof f.onClick&&\"function\"===typeof d.onClick&&(h.onclick=Ge)}De(c,d);h=c=void 0;var g=null;for(c in f)if(!d.hasOwnProperty(c)&&f.hasOwnProperty(c)&&null!=f[c])if(\"style\"===\nc){var k=f[c];for(h in k)k.hasOwnProperty(h)&&(g||(g={}),g[h]=\"\")}else\"dangerouslySetInnerHTML\"!==c&&\"children\"!==c&&\"suppressContentEditableWarning\"!==c&&\"suppressHydrationWarning\"!==c&&\"autoFocus\"!==c&&(ia.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in d){var l=d[c];k=null!=f?f[c]:void 0;if(d.hasOwnProperty(c)&&l!==k&&(null!=l||null!=k))if(\"style\"===c)if(k){for(h in k)!k.hasOwnProperty(h)||l&&l.hasOwnProperty(h)||(g||(g={}),g[h]=\"\");for(h in l)l.hasOwnProperty(h)&&k[h]!==l[h]&&(g||\n(g={}),g[h]=l[h])}else g||(a||(a=[]),a.push(c,g)),g=l;else\"dangerouslySetInnerHTML\"===c?(l=l?l.__html:void 0,k=k?k.__html:void 0,null!=l&&k!==l&&(a=a||[]).push(c,\"\"+l)):\"children\"===c?k===l||\"string\"!==typeof l&&\"number\"!==typeof l||(a=a||[]).push(c,\"\"+l):\"suppressContentEditableWarning\"!==c&&\"suppressHydrationWarning\"!==c&&(ia.hasOwnProperty(c)?(null!=l&&Fe(e,c),a||k===l||(a=[])):(a=a||[]).push(c,l))}g&&(a=a||[]).push(\"style\",g);e=a;(b.updateQueue=e)&&Sh(b)}};Wh=function(a,b,c,d){c!==d&&Sh(b)};\nfunction $h(a,b){switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction ai(a){switch(a.tag){case 1:N(a.type)&&Te(a);var b=a.effectTag;return b&2048?(a.effectTag=b&-2049|64,a):null;case 3:Bg(a);Ue(a);b=a.effectTag;if(0!==(b&64))throw t(Error(285));a.effectTag=b&-2049|64;return a;case 5:return Dg(a),null;case 13:return H(P,a),b=a.effectTag,b&2048?(a.effectTag=b&-2049|64,a):null;case 18:return null;case 19:return H(P,a),null;case 4:return Bg(a),null;case 10:return If(a),null;default:return null}}function bi(a,b){return{value:a,source:b,stack:pc(b)}}\nvar ci=\"function\"===typeof WeakSet?WeakSet:Set;function di(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=pc(c));null!==c&&oc(c.type);b=b.value;null!==a&&1===a.tag&&oc(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function ei(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){fi(a,c)}}function gi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){fi(a,c)}else b.current=null}\nfunction hi(a,b,c){c=c.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do{if((d.tag&a)!==Ig){var e=d.destroy;d.destroy=void 0;void 0!==e&&e()}(d.tag&b)!==Ig&&(e=d.create,d.destroy=e());d=d.next}while(d!==c)}}\nfunction ii(a,b){\"function\"===typeof ji&&ji(a);switch(a.tag){case 0:case 11:case 14:case 15:var c=a.updateQueue;if(null!==c&&(c=c.lastEffect,null!==c)){var d=c.next;vf(97<b?97:b,function(){var b=d;do{var c=b.destroy;if(void 0!==c){var h=a;try{c()}catch(g){fi(h,g)}}b=b.next}while(b!==d)})}break;case 1:gi(a);b=a.stateNode;\"function\"===typeof b.componentWillUnmount&&ei(a,b);break;case 5:gi(a);break;case 4:ki(a,b)}}\nfunction li(a,b){for(var c=a;;)if(ii(c,b),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}function mi(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction ni(a){a:{for(var b=a.return;null!==b;){if(mi(b)){var c=b;break a}b=b.return}throw t(Error(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw t(Error(161));}c.effectTag&16&&(we(b,\"\"),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||mi(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;\nif(null===c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}for(var e=a;;){var f=5===e.tag||6===e.tag;if(f||20===e.tag){var h=f?e.stateNode:e.stateNode.instance;if(c)if(d){f=b;var g=h;h=c;8===f.nodeType?f.parentNode.insertBefore(g,h):f.insertBefore(g,h)}else b.insertBefore(h,c);else d?(g=b,8===g.nodeType?(f=g.parentNode,f.insertBefore(h,g)):(f=g,f.appendChild(h)),g=g._reactRootContainer,null!==g&&void 0!==g||null!==f.onclick||(f.onclick=Ge)):\nb.appendChild(h)}else if(4!==e.tag&&null!==e.child){e.child.return=e;e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return;e=e.sibling}}\nfunction ki(a,b){for(var c=a,d=!1,e=void 0,f=void 0;;){if(!d){d=c.return;a:for(;;){if(null===d)throw t(Error(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag)if(li(c,b),f){var h=e,g=c.stateNode;8===h.nodeType?h.parentNode.removeChild(g):h.removeChild(g)}else e.removeChild(c.stateNode);else if(20===c.tag)g=c.stateNode.instance,li(c,b),f?(h=e,8===h.nodeType?h.parentNode.removeChild(g):\nh.removeChild(g)):e.removeChild(g);else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(ii(c,b),null!==c.child){c.child.return=c;c=c.child;continue}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\nfunction oi(a,b){switch(b.tag){case 0:case 11:case 14:case 15:hi(Kg,Lg,b);break;case 1:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[Ga]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&Dc(c,d);Ee(a,e);b=Ee(a,d);for(e=0;e<f.length;e+=2){var h=f[e],g=f[e+1];\"style\"===h?Ae(c,g):\"dangerouslySetInnerHTML\"===h?ve(c,g):\"children\"===h?we(c,g):zc(c,h,g,b)}switch(a){case \"input\":Ec(c,d);break;case \"textarea\":pe(c,\nd);break;case \"select\":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?me(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?me(c,!!d.multiple,d.defaultValue,!0):me(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}break;case 6:if(null===b.stateNode)throw t(Error(162));b.stateNode.nodeValue=b.memoizedProps;break;case 3:break;case 12:break;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,pi=sf());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=\nf.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null,f.style.display=ze(\"display\",e));else if(6===a.tag)a.stateNode.nodeValue=d?\"\":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break a;for(;null===a.sibling;){if(null===\na.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}qi(b);break;case 19:qi(b);break;case 17:break;case 20:break;default:throw t(Error(163));}}function qi(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new ci);b.forEach(function(b){var d=ri.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}var si=\"function\"===typeof WeakMap?WeakMap:Map;\nfunction ti(a,b,c){c=Qf(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){ui||(ui=!0,vi=d);di(a,b)};return c}\nfunction wi(a,b,c){c=Qf(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){di(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===xi?xi=new Set([this]):xi.add(this),di(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nvar yi=Math.ceil,zi=Xb.ReactCurrentDispatcher,Ai=Xb.ReactCurrentOwner,T=0,Bi=8,Ci=16,Di=32,Ei=0,Fi=1,Gi=2,Hi=3,Ii=4,U=T,Ji=null,V=null,W=0,X=Ei,Ki=1073741823,Li=1073741823,Mi=null,Ni=!1,pi=0,Oi=500,Y=null,ui=!1,vi=null,xi=null,Pi=!1,Qi=null,Ri=90,Si=0,Ti=null,Ui=0,Vi=null,Wi=0;function cg(){return(U&(Ci|Di))!==T?1073741821-(sf()/10|0):0!==Wi?Wi:Wi=1073741821-(sf()/10|0)}\nfunction dg(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=tf();if(0===(b&4))return 99===d?1073741823:1073741822;if((U&Ci)!==T)return W;if(null!==c)a=1073741821-25*(((1073741821-a+(c.timeoutMs|0||5E3)/10)/25|0)+1);else switch(d){case 99:a=1073741823;break;case 98:a=1073741821-10*(((1073741821-a+15)/10|0)+1);break;case 97:case 96:a=1073741821-25*(((1073741821-a+500)/25|0)+1);break;case 95:a=1;break;default:throw t(Error(326));}null!==Ji&&a===W&&--a;return a}var Xi=0;\nfunction eg(a,b){if(50<Ui)throw Ui=0,Vi=null,t(Error(185));a=Yi(a,b);if(null!==a){a.pingTime=0;var c=tf();if(1073741823===b)if((U&Bi)!==T&&(U&(Ci|Di))===T)for(var d=Z(a,1073741823,!0);null!==d;)d=d(!0);else Zi(a,99,1073741823),U===T&&O();else Zi(a,c,b);(U&4)===T||98!==c&&99!==c||(null===Ti?Ti=new Map([[a,b]]):(c=Ti.get(a),(void 0===c||c>b)&&Ti.set(a,b)))}}\nfunction Yi(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&(b>e.firstPendingTime&&(e.firstPendingTime=b),a=e.lastPendingTime,0===a||b<a)&&(e.lastPendingTime=\nb);return e}function Zi(a,b,c){if(a.callbackExpirationTime<c){var d=a.callbackNode;null!==d&&d!==mf&&af(d);a.callbackExpirationTime=c;1073741823===c?a.callbackNode=xf($i.bind(null,a,Z.bind(null,a,c))):(d=null,1!==c&&(d={timeout:10*(1073741821-c)-sf()}),a.callbackNode=wf(b,$i.bind(null,a,Z.bind(null,a,c)),d))}}function $i(a,b,c){var d=a.callbackNode,e=null;try{return e=b(c),null!==e?$i.bind(null,a,e):null}finally{null===e&&d===a.callbackNode&&(a.callbackNode=null,a.callbackExpirationTime=0)}}\nfunction aj(){(U&(1|Ci|Di))===T&&(bj(),cj())}function dj(a,b){var c=a.firstBatch;return null!==c&&c._defer&&c._expirationTime>=b?(wf(97,function(){c._onComplete();return null}),!0):!1}function bj(){if(null!==Ti){var a=Ti;Ti=null;a.forEach(function(a,c){xf(Z.bind(null,c,a))});O()}}function ej(a,b){var c=U;U|=1;try{return a(b)}finally{U=c,U===T&&O()}}function fj(a,b,c,d){var e=U;U|=4;try{return vf(98,a.bind(null,b,c,d))}finally{U=e,U===T&&O()}}\nfunction gj(a,b){var c=U;U&=-2;U|=Bi;try{return a(b)}finally{U=c,U===T&&O()}}\nfunction hj(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Me(c));if(null!==V)for(c=V.return;null!==c;){var d=c;switch(d.tag){case 1:var e=d.type.childContextTypes;null!==e&&void 0!==e&&Te(d);break;case 3:Bg(d);Ue(d);break;case 5:Dg(d);break;case 4:Bg(d);break;case 13:H(P,d);break;case 19:H(P,d);break;case 10:If(d)}c=c.return}Ji=a;V=og(a.current,null,b);W=b;X=Ei;Li=Ki=1073741823;Mi=null;Ni=!1}\nfunction Z(a,b,c){if((U&(Ci|Di))!==T)throw t(Error(327));if(a.firstPendingTime<b)return null;if(c&&a.finishedExpirationTime===b)return ij.bind(null,a);cj();if(a!==Ji||b!==W)hj(a,b);else if(X===Hi)if(Ni)hj(a,b);else{var d=a.lastPendingTime;if(d<b)return Z.bind(null,a,d)}if(null!==V){d=U;U|=Ci;var e=zi.current;null===e&&(e=hh);zi.current=hh;if(c){if(1073741823!==b){var f=cg();if(f<b)return U=d,Gf(),zi.current=e,Z.bind(null,a,f)}}else Wi=0;do try{if(c)for(;null!==V;)V=jj(V);else for(;null!==V&&!bf();)V=\njj(V);break}catch(rb){Gf();ih();f=V;if(null===f||null===f.return)throw hj(a,b),U=d,rb;a:{var h=a,g=f.return,k=f,l=rb,n=W;k.effectTag|=1024;k.firstEffect=k.lastEffect=null;if(null!==l&&\"object\"===typeof l&&\"function\"===typeof l.then){var z=l,x=0!==(P.current&Fg);l=g;do{var v;if(v=13===l.tag)null!==l.memoizedState?v=!1:(v=l.memoizedProps,v=void 0===v.fallback?!1:!0!==v.unstable_avoidThisFallback?!0:x?!1:!0);if(v){g=l.updateQueue;null===g?(g=new Set,g.add(z),l.updateQueue=g):g.add(z);if(0===(l.mode&\n2)){l.effectTag|=64;k.effectTag&=-1957;1===k.tag&&(null===k.alternate?k.tag=17:(n=Qf(1073741823,null),n.tag=2,Sf(k,n)));k.expirationTime=1073741823;break a}k=h;h=n;x=k.pingCache;null===x?(x=k.pingCache=new si,g=new Set,x.set(z,g)):(g=x.get(z),void 0===g&&(g=new Set,x.set(z,g)));g.has(h)||(g.add(h),k=kj.bind(null,k,z,h),z.then(k,k));l.effectTag|=2048;l.expirationTime=n;break a}l=l.return}while(null!==l);l=Error((oc(k.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\"+\npc(k))}X!==Ii&&(X=Fi);l=bi(l,k);k=g;do{switch(k.tag){case 3:k.effectTag|=2048;k.expirationTime=n;n=ti(k,l,n);Tf(k,n);break a;case 1:if(z=l,h=k.type,g=k.stateNode,0===(k.effectTag&64)&&(\"function\"===typeof h.getDerivedStateFromError||null!==g&&\"function\"===typeof g.componentDidCatch&&(null===xi||!xi.has(g)))){k.effectTag|=2048;k.expirationTime=n;n=wi(k,z,n);Tf(k,n);break a}}k=k.return}while(null!==k)}V=lj(f)}while(1);U=d;Gf();zi.current=e;if(null!==V)return Z.bind(null,a,b)}a.finishedWork=a.current.alternate;\na.finishedExpirationTime=b;if(dj(a,b))return null;Ji=null;switch(X){case Ei:throw t(Error(328));case Fi:return d=a.lastPendingTime,d<b?Z.bind(null,a,d):c?ij.bind(null,a):(hj(a,b),xf(Z.bind(null,a,b)),null);case Gi:if(1073741823===Ki&&!c&&(c=pi+Oi-sf(),10<c)){if(Ni)return hj(a,b),Z.bind(null,a,b);d=a.lastPendingTime;if(d<b)return Z.bind(null,a,d);a.timeoutHandle=Le(ij.bind(null,a),c);return null}return ij.bind(null,a);case Hi:if(!c){if(Ni)return hj(a,b),Z.bind(null,a,b);c=a.lastPendingTime;if(c<b)return Z.bind(null,\na,c);1073741823!==Li?c=10*(1073741821-Li)-sf():1073741823===Ki?c=0:(c=10*(1073741821-Ki)-5E3,d=sf(),b=10*(1073741821-b)-d,c=d-c,0>c&&(c=0),c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>c?4320:1960*yi(c/1960))-c,b<c&&(c=b));if(10<c)return a.timeoutHandle=Le(ij.bind(null,a),c),null}return ij.bind(null,a);case Ii:return!c&&1073741823!==Ki&&null!==Mi&&(d=Ki,e=Mi,b=e.busyMinDurationMs|0,0>=b?b=0:(c=e.busyDelayMs|0,d=sf()-(10*(1073741821-d)-(e.timeoutMs|0||5E3)),b=d<=c?0:c+b-d),10<b)?(a.timeoutHandle=\nLe(ij.bind(null,a),b),null):ij.bind(null,a);default:throw t(Error(329));}}function Xf(a,b){a<Ki&&1<a&&(Ki=a);null!==b&&a<Li&&1<a&&(Li=a,Mi=b)}function jj(a){var b=mj(a.alternate,a,W);a.memoizedProps=a.pendingProps;null===b&&(b=lj(a));Ai.current=null;return b}\nfunction lj(a){V=a;do{var b=V.alternate;a=V.return;if(0===(V.effectTag&1024)){a:{var c=b;b=V;var d=W,e=b.pendingProps;switch(b.tag){case 2:break;case 16:break;case 15:case 0:break;case 1:N(b.type)&&Te(b);break;case 3:Bg(b);Ue(b);d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===c||null===c.child)Bh(b),b.effectTag&=-3;Uh(b);break;case 5:Dg(b);d=zg(yg.current);var f=b.type;if(null!==c&&null!=b.stateNode)Vh(c,b,f,e,d),c.ref!==b.ref&&(b.effectTag|=128);else if(e){var h=\nzg(wg.current);if(Bh(b)){c=b;e=void 0;f=c.stateNode;var g=c.type,k=c.memoizedProps;f[Fa]=c;f[Ga]=k;switch(g){case \"iframe\":case \"object\":case \"embed\":G(\"load\",f);break;case \"video\":case \"audio\":for(var l=0;l<bb.length;l++)G(bb[l],f);break;case \"source\":G(\"error\",f);break;case \"img\":case \"image\":case \"link\":G(\"error\",f);G(\"load\",f);break;case \"form\":G(\"reset\",f);G(\"submit\",f);break;case \"details\":G(\"toggle\",f);break;case \"input\":Cc(f,k);G(\"invalid\",f);Fe(d,\"onChange\");break;case \"select\":f._wrapperState=\n{wasMultiple:!!k.multiple};G(\"invalid\",f);Fe(d,\"onChange\");break;case \"textarea\":oe(f,k),G(\"invalid\",f),Fe(d,\"onChange\")}De(g,k);l=null;for(e in k)k.hasOwnProperty(e)&&(h=k[e],\"children\"===e?\"string\"===typeof h?f.textContent!==h&&(l=[\"children\",h]):\"number\"===typeof h&&f.textContent!==\"\"+h&&(l=[\"children\",\"\"+h]):ia.hasOwnProperty(e)&&null!=h&&Fe(d,e));switch(g){case \"input\":Vb(f);Gc(f,k,!0);break;case \"textarea\":Vb(f);qe(f,k);break;case \"select\":case \"option\":break;default:\"function\"===typeof k.onClick&&\n(f.onclick=Ge)}d=l;c.updateQueue=d;null!==d&&Sh(b)}else{k=f;c=e;g=b;l=9===d.nodeType?d:d.ownerDocument;h===re.html&&(h=se(k));h===re.html?\"script\"===k?(k=l.createElement(\"div\"),k.innerHTML=\"<script>\\x3c/script>\",l=k.removeChild(k.firstChild)):\"string\"===typeof c.is?l=l.createElement(k,{is:c.is}):(l=l.createElement(k),\"select\"===k&&(k=l,c.multiple?k.multiple=!0:c.size&&(k.size=c.size))):l=l.createElementNS(h,k);k=l;k[Fa]=g;k[Ga]=c;c=k;Th(c,b,!1,!1);g=c;var n=d,z=Ee(f,e);switch(f){case \"iframe\":case \"object\":case \"embed\":G(\"load\",\ng);d=e;break;case \"video\":case \"audio\":for(d=0;d<bb.length;d++)G(bb[d],g);d=e;break;case \"source\":G(\"error\",g);d=e;break;case \"img\":case \"image\":case \"link\":G(\"error\",g);G(\"load\",g);d=e;break;case \"form\":G(\"reset\",g);G(\"submit\",g);d=e;break;case \"details\":G(\"toggle\",g);d=e;break;case \"input\":Cc(g,e);d=Bc(g,e);G(\"invalid\",g);Fe(n,\"onChange\");break;case \"option\":d=le(g,e);break;case \"select\":g._wrapperState={wasMultiple:!!e.multiple};d=m({},e,{value:void 0});G(\"invalid\",g);Fe(n,\"onChange\");break;case \"textarea\":oe(g,\ne);d=ne(g,e);G(\"invalid\",g);Fe(n,\"onChange\");break;default:d=e}De(f,d);k=void 0;l=f;h=g;var x=d;for(k in x)if(x.hasOwnProperty(k)){var v=x[k];\"style\"===k?Ae(h,v):\"dangerouslySetInnerHTML\"===k?(v=v?v.__html:void 0,null!=v&&ve(h,v)):\"children\"===k?\"string\"===typeof v?(\"textarea\"!==l||\"\"!==v)&&we(h,v):\"number\"===typeof v&&we(h,\"\"+v):\"suppressContentEditableWarning\"!==k&&\"suppressHydrationWarning\"!==k&&\"autoFocus\"!==k&&(ia.hasOwnProperty(k)?null!=v&&Fe(n,k):null!=v&&zc(h,k,v,z))}switch(f){case \"input\":Vb(g);\nGc(g,e,!1);break;case \"textarea\":Vb(g);qe(g,e);break;case \"option\":null!=e.value&&g.setAttribute(\"value\",\"\"+Ac(e.value));break;case \"select\":d=g;g=e;d.multiple=!!g.multiple;k=g.value;null!=k?me(d,!!g.multiple,k,!1):null!=g.defaultValue&&me(d,!!g.multiple,g.defaultValue,!0);break;default:\"function\"===typeof d.onClick&&(g.onclick=Ge)}Je(f,e)&&Sh(b);b.stateNode=c}null!==b.ref&&(b.effectTag|=128)}else if(null===b.stateNode)throw t(Error(166));break;case 6:if(c&&null!=b.stateNode)Wh(c,b,c.memoizedProps,\ne);else{if(\"string\"!==typeof e&&null===b.stateNode)throw t(Error(166));c=zg(yg.current);zg(wg.current);Bh(b)?(d=b.stateNode,c=b.memoizedProps,d[Fa]=b,d.nodeValue!==c&&Sh(b)):(d=b,c=(9===c.nodeType?c:c.ownerDocument).createTextNode(e),c[Fa]=b,d.stateNode=c)}break;case 11:break;case 13:H(P,b);e=b.memoizedState;if(0!==(b.effectTag&64)){b.expirationTime=d;break a}d=null!==e;e=!1;null===c?Bh(b):(f=c.memoizedState,e=null!==f,d||null===f||(f=c.child.sibling,null!==f&&(g=b.firstEffect,null!==g?(b.firstEffect=\nf,f.nextEffect=g):(b.firstEffect=b.lastEffect=f,f.nextEffect=null),f.effectTag=8)));if(d&&!e&&0!==(b.mode&2))if(null===c&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&Fg))X===Ei&&(X=Gi);else if(X===Ei||X===Gi)X=Hi;if(d||e)b.effectTag|=4;break;case 7:break;case 8:break;case 12:break;case 4:Bg(b);Uh(b);break;case 10:If(b);break;case 9:break;case 14:break;case 17:N(b.type)&&Te(b);break;case 18:break;case 19:H(P,b);e=b.memoizedState;if(null===e)break;f=0!==(b.effectTag&64);g=e.rendering;\nif(null===g)if(f)$h(e,!1);else{if(X!==Ei||null!==c&&0!==(c.effectTag&64))for(c=b.child;null!==c;){g=Hg(c);if(null!==g){b.effectTag|=64;$h(e,!1);c=g.updateQueue;null!==c&&(b.updateQueue=c,b.effectTag|=4);b.firstEffect=b.lastEffect=null;for(c=b.child;null!==c;)e=c,f=d,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,g=e.alternate,null===g?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=\ng.childExpirationTime,e.expirationTime=g.expirationTime,e.child=g.child,e.memoizedProps=g.memoizedProps,e.memoizedState=g.memoizedState,e.updateQueue=g.updateQueue,f=g.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),c=c.sibling;J(P,P.current&Eg|Gg,b);b=b.child;break a}c=c.sibling}}else{if(!f)if(c=Hg(g),null!==c){if(b.effectTag|=64,f=!0,$h(e,!0),null===e.tail&&\"hidden\"===e.tailMode){d=c.updateQueue;null!==d&&(b.updateQueue=\nd,b.effectTag|=4);b=b.lastEffect=e.lastEffect;null!==b&&(b.nextEffect=null);break}}else sf()>e.tailExpiration&&1<d&&(b.effectTag|=64,f=!0,$h(e,!1),b.expirationTime=b.childExpirationTime=d-1);e.isBackwards?(g.sibling=b.child,b.child=g):(d=e.last,null!==d?d.sibling=g:b.child=g,e.last=g)}if(null!==e.tail){0===e.tailExpiration&&(e.tailExpiration=sf()+500);d=e.tail;e.rendering=d;e.tail=d.sibling;e.lastEffect=b.lastEffect;d.sibling=null;c=P.current;c=f?c&Eg|Gg:c&Eg;J(P,c,b);b=d;break a}break;case 20:break;\ndefault:throw t(Error(156));}b=null}d=V;if(1===W||1!==d.childExpirationTime){c=0;for(e=d.child;null!==e;)f=e.expirationTime,g=e.childExpirationTime,f>c&&(c=f),g>c&&(c=g),e=e.sibling;d.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&1024)&&(null===a.firstEffect&&(a.firstEffect=V.firstEffect),null!==V.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=V.firstEffect),a.lastEffect=V.lastEffect),1<V.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=V:a.firstEffect=V,\na.lastEffect=V))}else{b=ai(V,W);if(null!==b)return b.effectTag&=1023,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=1024)}b=V.sibling;if(null!==b)return b;V=a}while(null!==V);X===Ei&&(X=Ii);return null}function ij(a){var b=tf();vf(99,nj.bind(null,a,b));null!==Qi&&wf(97,function(){cj();return null});return null}\nfunction nj(a,b){cj();if((U&(Ci|Di))!==T)throw t(Error(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw t(Error(177));a.callbackNode=null;a.callbackExpirationTime=0;var e=c.expirationTime,f=c.childExpirationTime;e=f>e?f:e;a.firstPendingTime=e;e<a.lastPendingTime&&(a.lastPendingTime=e);a===Ji&&(V=Ji=null,W=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;\nif(null!==e){f=U;U|=Di;Ai.current=null;He=Qd;var h=ae();if(be(h)){if(\"selectionStart\"in h)var g={start:h.selectionStart,end:h.selectionEnd};else a:{g=(g=h.ownerDocument)&&g.defaultView||window;var k=g.getSelection&&g.getSelection();if(k&&0!==k.rangeCount){g=k.anchorNode;var l=k.anchorOffset,n=k.focusNode;k=k.focusOffset;try{g.nodeType,n.nodeType}catch(zb){g=null;break a}var z=0,x=-1,v=-1,rb=0,Be=0,u=h,w=null;b:for(;;){for(var C;;){u!==g||0!==l&&3!==u.nodeType||(x=z+l);u!==n||0!==k&&3!==u.nodeType||\n(v=z+k);3===u.nodeType&&(z+=u.nodeValue.length);if(null===(C=u.firstChild))break;w=u;u=C}for(;;){if(u===h)break b;w===g&&++rb===l&&(x=z);w===n&&++Be===k&&(v=z);if(null!==(C=u.nextSibling))break;u=w;w=u.parentNode}u=C}g=-1===x||-1===v?null:{start:x,end:v}}else g=null}g=g||{start:0,end:0}}else g=null;Ie={focusedElem:h,selectionRange:g};Qd=!1;Y=e;do try{for(;null!==Y;){if(0!==(Y.effectTag&256)){var I=Y.alternate;h=Y;switch(h.tag){case 0:case 11:case 15:hi(Jg,Ig,h);break;case 1:if(h.effectTag&256&&null!==\nI){var E=I.memoizedProps,ua=I.memoizedState,gh=h.stateNode,oj=gh.getSnapshotBeforeUpdate(h.elementType===h.type?E:Af(h.type,E),ua);gh.__reactInternalSnapshotBeforeUpdate=oj}break;case 3:case 5:case 6:case 4:case 17:break;default:throw t(Error(163));}}Y=Y.nextEffect}}catch(zb){if(null===Y)throw t(Error(330));fi(Y,zb);Y=Y.nextEffect}while(null!==Y);Y=e;do try{for(I=b;null!==Y;){var A=Y.effectTag;A&16&&we(Y.stateNode,\"\");if(A&128){var p=Y.alternate;if(null!==p){var r=p.ref;null!==r&&(\"function\"===typeof r?\nr(null):r.current=null)}}switch(A&14){case 2:ni(Y);Y.effectTag&=-3;break;case 6:ni(Y);Y.effectTag&=-3;oi(Y.alternate,Y);break;case 4:oi(Y.alternate,Y);break;case 8:E=Y;ki(E,I);E.return=null;E.child=null;E.memoizedState=null;E.updateQueue=null;E.dependencies=null;var K=E.alternate;null!==K&&(K.return=null,K.child=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null)}Y=Y.nextEffect}}catch(zb){if(null===Y)throw t(Error(330));fi(Y,zb);Y=Y.nextEffect}while(null!==Y);r=Ie;p=ae();A=r.focusedElem;\nI=r.selectionRange;if(p!==A&&A&&A.ownerDocument&&$d(A.ownerDocument.documentElement,A)){null!==I&&be(A)&&(p=I.start,r=I.end,void 0===r&&(r=p),\"selectionStart\"in A?(A.selectionStart=p,A.selectionEnd=Math.min(r,A.value.length)):(r=(p=A.ownerDocument||document)&&p.defaultView||window,r.getSelection&&(r=r.getSelection(),E=A.textContent.length,K=Math.min(I.start,E),I=void 0===I.end?K:Math.min(I.end,E),!r.extend&&K>I&&(E=I,I=K,K=E),E=Zd(A,K),ua=Zd(A,I),E&&ua&&(1!==r.rangeCount||r.anchorNode!==E.node||r.anchorOffset!==\nE.offset||r.focusNode!==ua.node||r.focusOffset!==ua.offset)&&(p=p.createRange(),p.setStart(E.node,E.offset),r.removeAllRanges(),K>I?(r.addRange(p),r.extend(ua.node,ua.offset)):(p.setEnd(ua.node,ua.offset),r.addRange(p))))));p=[];for(r=A;r=r.parentNode;)1===r.nodeType&&p.push({element:r,left:r.scrollLeft,top:r.scrollTop});\"function\"===typeof A.focus&&A.focus();for(A=0;A<p.length;A++)r=p[A],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}Ie=null;Qd=!!He;He=null;a.current=c;Y=e;do try{for(A=d;null!==\nY;){var $a=Y.effectTag;if($a&36){var nc=Y.alternate;p=Y;r=A;switch(p.tag){case 0:case 11:case 15:hi(Mg,Ng,p);break;case 1:var md=p.stateNode;if(p.effectTag&4)if(null===nc)md.componentDidMount();else{var Fj=p.elementType===p.type?nc.memoizedProps:Af(p.type,nc.memoizedProps);md.componentDidUpdate(Fj,nc.memoizedState,md.__reactInternalSnapshotBeforeUpdate)}var Xh=p.updateQueue;null!==Xh&&Yf(p,Xh,md,r);break;case 3:var Yh=p.updateQueue;if(null!==Yh){K=null;if(null!==p.child)switch(p.child.tag){case 5:K=\np.child.stateNode;break;case 1:K=p.child.stateNode}Yf(p,Yh,K,r)}break;case 5:var Gj=p.stateNode;null===nc&&p.effectTag&4&&(r=Gj,Je(p.type,p.memoizedProps)&&r.focus());break;case 6:break;case 4:break;case 12:break;case 13:case 19:case 17:case 20:break;default:throw t(Error(163));}}if($a&128){var nd=Y.ref;if(null!==nd){var Zh=Y.stateNode;switch(Y.tag){case 5:var gf=Zh;break;default:gf=Zh}\"function\"===typeof nd?nd(gf):nd.current=gf}}$a&512&&(Pi=!0);Y=Y.nextEffect}}catch(zb){if(null===Y)throw t(Error(330));\nfi(Y,zb);Y=Y.nextEffect}while(null!==Y);Y=null;nf();U=f}else a.current=c;if(Pi)Pi=!1,Qi=a,Si=d,Ri=b;else for(Y=e;null!==Y;)b=Y.nextEffect,Y.nextEffect=null,Y=b;b=a.firstPendingTime;0!==b?($a=cg(),$a=zf($a,b),Zi(a,$a,b)):xi=null;\"function\"===typeof pj&&pj(c.stateNode,d);1073741823===b?a===Vi?Ui++:(Ui=0,Vi=a):Ui=0;if(ui)throw ui=!1,a=vi,vi=null,a;if((U&Bi)!==T)return null;O();return null}\nfunction cj(){if(null===Qi)return!1;var a=Qi,b=Si,c=Ri;Qi=null;Si=0;Ri=90;return vf(97<c?97:c,qj.bind(null,a,b))}function qj(a){if((U&(Ci|Di))!==T)throw t(Error(331));var b=U;U|=Di;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:hi(Pg,Ig,c),hi(Ig,Og,c)}}catch(d){if(null===a)throw t(Error(330));fi(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}U=b;O();return!0}\nfunction rj(a,b,c){b=bi(c,b);b=ti(a,b,1073741823);Sf(a,b);a=Yi(a,1073741823);null!==a&&Zi(a,99,1073741823)}function fi(a,b){if(3===a.tag)rj(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){rj(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===xi||!xi.has(d))){a=bi(b,a);a=wi(c,a,1073741823);Sf(c,a);c=Yi(c,1073741823);null!==c&&Zi(c,99,1073741823);break}}c=c.return}}\nfunction kj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);Ji===a&&W===c?X===Hi||X===Gi&&1073741823===Ki&&sf()-pi<Oi?hj(a,W):Ni=!0:a.lastPendingTime<c||(b=a.pingTime,0!==b&&b<c||(a.pingTime=c,a.finishedExpirationTime===c&&(a.finishedExpirationTime=0,a.finishedWork=null),b=cg(),b=zf(b,c),Zi(a,b,c)))}function ri(a,b){var c=a.stateNode;null!==c&&c.delete(b);c=cg();b=dg(c,a,null);c=zf(c,b);a=Yi(a,b);null!==a&&Zi(a,c,b)}var mj=void 0;\nmj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||M.current)Lf=!0;else if(d<c){Lf=!1;switch(b.tag){case 3:Nh(b);Ch();break;case 5:Cg(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Xe(b);break;case 4:Ag(b,b.stateNode.containerInfo);break;case 10:Hf(b,b.memoizedProps.value);break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;if(0!==d&&d>=c)return Ph(a,b,c);J(P,P.current&\nEg,b);b=Fh(a,b,c);return null!==b?b.sibling:null}J(P,P.current&Eg,b);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return Rh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);J(P,P.current,b);if(!d)return null}return Fh(a,b,c)}}else Lf=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=Se(b,L.current);Kf(b,c);e=dh(null,b,d,a,e,c);b.effectTag|=1;if(\"object\"===typeof e&&\nnull!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;ih();if(N(d)){var f=!0;Xe(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;var h=d.getDerivedStateFromProps;\"function\"===typeof h&&bg(b,d,h,a);e.updater=fg;b.stateNode=e;e._reactInternalFiber=b;jg(b,d,a,c);b=Mh(null,b,d,!0,f,c)}else b.tag=0,S(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=Bf(e);b.type=e;f=b.tag=sj(e);\na=Af(e,a);switch(f){case 0:b=Jh(null,b,e,a,c);break;case 1:b=Lh(null,b,e,a,c);break;case 11:b=Eh(null,b,e,a,c);break;case 14:b=Gh(null,b,e,Af(e.type,a),d,c);break;default:throw t(Error(306),e,\"\");}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Af(d,e),Jh(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Af(d,e),Lh(a,b,d,e,c);case 3:Nh(b);d=b.updateQueue;if(null===d)throw t(Error(282));e=b.memoizedState;e=null!==e?e.element:null;Wf(b,d,b.pendingProps,\nnull,c);d=b.memoizedState.element;if(d===e)Ch(),b=Fh(a,b,c);else{e=b.stateNode;if(e=(null===a||null===a.child)&&e.hydrate)uh=Ne(b.stateNode.containerInfo.firstChild),th=b,e=vh=!0;e?(b.effectTag|=2,b.child=ug(b,null,d,c)):(S(a,b,d,c),Ch());b=b.child}return b;case 5:return Cg(b),null===a&&zh(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,h=e.children,Ke(d,e)?h=null:null!==f&&Ke(d,f)&&(b.effectTag|=16),Kh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):\n(S(a,b,h,c),b=b.child),b;case 6:return null===a&&zh(b),null;case 13:return Ph(a,b,c);case 4:return Ag(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=tg(b,null,d,c):S(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Af(d,e),Eh(a,b,d,e,c);case 7:return S(a,b,b.pendingProps,c),b.child;case 8:return S(a,b,b.pendingProps.children,c),b.child;case 12:return S(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;h=b.memoizedProps;\nf=e.value;Hf(b,f);if(null!==h){var g=h.value;f=hd(g,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(g,f):1073741823)|0;if(0===f){if(h.children===e.children&&!M.current){b=Fh(a,b,c);break a}}else for(g=b.child,null!==g&&(g.return=b);null!==g;){var k=g.dependencies;if(null!==k){h=g.child;for(var l=k.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===g.tag&&(l=Qf(c,null),l.tag=2,Sf(g,l));g.expirationTime<c&&(g.expirationTime=c);l=g.alternate;null!==l&&l.expirationTime<\nc&&(l.expirationTime=c);Jf(g.return,c);k.expirationTime<c&&(k.expirationTime=c);break}l=l.next}}else h=10===g.tag?g.type===b.type?null:g.child:g.child;if(null!==h)h.return=g;else for(h=g;null!==h;){if(h===b){h=null;break}g=h.sibling;if(null!==g){g.return=h.return;h=g;break}h=h.return}g=h}}S(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,Kf(b,c),e=Mf(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,S(a,b,d,c),b.child;case 14:return e=b.type,f=Af(e,b.pendingProps),\nf=Af(e.type,f),Gh(a,b,e,f,d,c);case 15:return Ih(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Af(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Xe(b)):a=!1,Kf(b,c),hg(b,d,e,c),jg(b,d,e,c),Mh(null,b,d,!0,a,c);case 19:return Rh(a,b,c)}throw t(Error(156));};var pj=null,ji=null;\nfunction tj(a){if(\"undefined\"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);pj=function(a){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(e){}};ji=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}\nfunction uj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function xh(a,b,c,d){return new uj(a,b,c,d)}\nfunction Hh(a){a=a.prototype;return!(!a||!a.isReactComponent)}function sj(a){if(\"function\"===typeof a)return Hh(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===gc)return 11;if(a===jc)return 14}return 2}\nfunction og(a,b){var c=a.alternate;null===c?(c=xh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,\nfirstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction qg(a,b,c,d,e,f){var h=2;d=a;if(\"function\"===typeof a)Hh(a)&&(h=1);else if(\"string\"===typeof a)h=5;else a:switch(a){case ac:return sg(c.children,e,f,b);case fc:h=8;e|=7;break;case bc:h=8;e|=1;break;case cc:return a=xh(12,c,b,e|8),a.elementType=cc,a.type=cc,a.expirationTime=f,a;case hc:return a=xh(13,c,b,e),a.type=hc,a.elementType=hc,a.expirationTime=f,a;case ic:return a=xh(19,c,b,e),a.elementType=ic,a.expirationTime=f,a;default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case dc:h=\n10;break a;case ec:h=9;break a;case gc:h=11;break a;case jc:h=14;break a;case kc:h=16;d=null;break a}throw t(Error(130),null==a?a:typeof a,\"\");}b=xh(h,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function sg(a,b,c,d){a=xh(7,a,d,b);a.expirationTime=c;return a}function pg(a,b,c){a=xh(6,a,null,b);a.expirationTime=c;return a}\nfunction rg(a,b,c){b=xh(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction vj(a,b,c){this.tag=b;this.current=null;this.containerInfo=a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=this.firstBatch=null;this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function wj(a,b,c){a=new vj(a,b,c);b=xh(3,null,null,2===b?7:1===b?3:0);a.current=b;return b.stateNode=a}\nfunction xj(a,b,c,d,e,f){var h=b.current;a:if(c){c=c._reactInternalFiber;b:{if(2!==ld(c)||1!==c.tag)throw t(Error(170));var g=c;do{switch(g.tag){case 3:g=g.stateNode.context;break b;case 1:if(N(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break b}}g=g.return}while(null!==g);throw t(Error(171));}if(1===c.tag){var k=c.type;if(N(k)){c=We(c,k,g);break a}}c=g}else c=Qe;null===b.context?b.context=c:b.pendingContext=c;b=f;e=Qf(d,e);e.payload={element:a};b=void 0===b?null:b;null!==b&&\n(e.callback=b);Sf(h,e);eg(h,d);return d}function yj(a,b,c,d){var e=b.current,f=cg(),h=$f.suspense;e=dg(f,e,h);return xj(a,b,c,e,h,d)}function zj(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Aj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$b,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nDb=function(a,b,c){switch(b){case \"input\":Ec(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Ka(d);if(!e)throw t(Error(90));Wb(d);Ec(d,e)}}}break;case \"textarea\":pe(a,c);break;case \"select\":b=c.value,null!=b&&me(a,!!c.multiple,b,!1)}};\nfunction Bj(a){var b=1073741821-25*(((1073741821-cg()+500)/25|0)+1);b<=Xi&&--b;this._expirationTime=Xi=b;this._root=a;this._callbacks=this._next=null;this._hasChildren=this._didComplete=!1;this._children=null;this._defer=!0}Bj.prototype.render=function(a){if(!this._defer)throw t(Error(250));this._hasChildren=!0;this._children=a;var b=this._root._internalRoot,c=this._expirationTime,d=new Cj;xj(a,b,null,c,null,d._onCommit);return d};\nBj.prototype.then=function(a){if(this._didComplete)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};\nBj.prototype.commit=function(){var a=this._root._internalRoot,b=a.firstBatch;if(!this._defer||null===b)throw t(Error(251));if(this._hasChildren){var c=this._expirationTime;if(b!==this){this._hasChildren&&(c=this._expirationTime=b._expirationTime,this.render(this._children));for(var d=null,e=b;e!==this;)d=e,e=e._next;if(null===d)throw t(Error(251));d._next=e._next;this._next=b;a.firstBatch=this}this._defer=!1;b=c;if((U&(Ci|Di))!==T)throw t(Error(253));xf(Z.bind(null,a,b));O();b=this._next;this._next=\nnull;b=a.firstBatch=b;null!==b&&b._hasChildren&&b.render(b._children)}else this._next=null,this._defer=!1};Bj.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++)(0,a[b])()}};function Cj(){this._callbacks=null;this._didCommit=!1;this._onCommit=this._onCommit.bind(this)}Cj.prototype.then=function(a){if(this._didCommit)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};\nCj.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++){var c=a[b];if(\"function\"!==typeof c)throw t(Error(191),c);c()}}};function Dj(a,b,c){this._internalRoot=wj(a,b,c)}function Ej(a,b){this._internalRoot=wj(a,2,b)}Ej.prototype.render=Dj.prototype.render=function(a,b){var c=this._internalRoot,d=new Cj;b=void 0===b?null:b;null!==b&&d.then(b);yj(a,c,null,d._onCommit);return d};\nEj.prototype.unmount=Dj.prototype.unmount=function(a){var b=this._internalRoot,c=new Cj;a=void 0===a?null:a;null!==a&&c.then(a);yj(null,b,null,c._onCommit);return c};Ej.prototype.createBatch=function(){var a=new Bj(this),b=a._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=a,a._next=null;else{for(c=null;null!==d&&d._expirationTime>=b;)c=d,d=d._next;a._next=d;null!==c&&(c._next=a)}return a};\nfunction Hj(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}Jb=ej;Kb=fj;Lb=aj;Mb=function(a,b){var c=U;U|=2;try{return a(b)}finally{U=c,U===T&&O()}};function Ij(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new Dj(a,0,b)}\nfunction Jj(a,b,c,d,e){var f=c._reactRootContainer,h=void 0;if(f){h=f._internalRoot;if(\"function\"===typeof e){var g=e;e=function(){var a=zj(h);g.call(a)}}yj(b,h,a,e)}else{f=c._reactRootContainer=Ij(c,d);h=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=zj(h);k.call(a)}}gj(function(){yj(b,h,a,e)})}return zj(h)}function Kj(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Hj(b))throw t(Error(200));return Aj(a,b,null,c)}\nvar Nj={createPortal:Kj,findDOMNode:function(a){if(null==a)a=null;else if(1!==a.nodeType){var b=a._reactInternalFiber;if(void 0===b){if(\"function\"===typeof a.render)throw t(Error(188));throw t(Error(268),Object.keys(a));}a=qd(b);a=null===a?null:a.stateNode}return a},hydrate:function(a,b,c){if(!Hj(b))throw t(Error(200));return Jj(null,a,b,!0,c)},render:function(a,b,c){if(!Hj(b))throw t(Error(200));return Jj(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){if(!Hj(c))throw t(Error(200));\nif(null==a||void 0===a._reactInternalFiber)throw t(Error(38));return Jj(a,b,c,!1,d)},unmountComponentAtNode:function(a){if(!Hj(a))throw t(Error(40));return a._reactRootContainer?(gj(function(){Jj(null,null,a,!1,function(){a._reactRootContainer=null})}),!0):!1},unstable_createPortal:function(){return Kj.apply(void 0,arguments)},unstable_batchedUpdates:ej,unstable_interactiveUpdates:function(a,b,c,d){aj();return fj(a,b,c,d)},unstable_discreteUpdates:fj,unstable_flushDiscreteUpdates:aj,flushSync:function(a,\nb){if((U&(Ci|Di))!==T)throw t(Error(187));var c=U;U|=1;try{return vf(99,a.bind(null,b))}finally{U=c,O()}},unstable_createRoot:Lj,unstable_createSyncRoot:Mj,unstable_flushControlled:function(a){var b=U;U|=1;try{vf(99,a)}finally{U=b,U===T&&O()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Ia,Ja,Ka,Ca.injectEventPluginsByName,fa,Qa,function(a){ya(a,Pa)},Hb,Ib,Ud,Ba,cj,{current:!1}]}};\nfunction Lj(a,b){if(!Hj(a))throw t(Error(299),\"unstable_createRoot\");return new Ej(a,null!=b&&!0===b.hydrate)}function Mj(a,b){if(!Hj(a))throw t(Error(299),\"unstable_createRoot\");return new Dj(a,1,null!=b&&!0===b.hydrate)}\n(function(a){var b=a.findFiberByHostInstance;return tj(m({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xb.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=qd(a);return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Ha,bundleType:0,version:\"16.9.0\",\nrendererPackageName:\"react-dom\"});var Oj={default:Nj},Pj=Oj&&Nj||Oj;module.exports=Pj.default||Pj;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v0.15.0\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:!0});var d=void 0,e=void 0,g=void 0,m=void 0,n=void 0;exports.unstable_now=void 0;exports.unstable_forceFrameRate=void 0;\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var p=null,q=null,r=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a);p=null}catch(b){throw setTimeout(r,0),b;}};exports.unstable_now=function(){return Date.now()};d=function(a){null!==p?setTimeout(d,0,a):(p=a,setTimeout(r,0))};e=function(a,b){q=setTimeout(a,b)};g=function(){clearTimeout(q)};m=function(){return!1};n=exports.unstable_forceFrameRate=function(){}}else{var t=window.performance,u=window.Date,v=window.setTimeout,\nw=window.clearTimeout,x=window.requestAnimationFrame,y=window.cancelAnimationFrame;\"undefined\"!==typeof console&&(\"function\"!==typeof x&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\"),\"function\"!==typeof y&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\"));exports.unstable_now=\"object\"===typeof t&&\n\"function\"===typeof t.now?function(){return t.now()}:function(){return u.now()};var z=!1,A=null,B=-1,C=-1,D=33.33,E=-1,F=-1,G=0,H=!1;m=function(){return exports.unstable_now()>=G};n=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported\"):0<a?(D=Math.floor(1E3/a),H=!0):(D=33.33,H=!1)};var J=function(){if(null!==A){var a=exports.unstable_now(),b=0<G-a;try{A(b,\na)||(A=null)}catch(c){throw I.postMessage(null),c;}}},K=new MessageChannel,I=K.port2;K.port1.onmessage=J;var L=function(a){if(null===A)F=E=-1,z=!1;else{z=!0;x(function(a){w(B);L(a)});var b=function(){G=exports.unstable_now()+D/2;J();B=v(b,3*D)};B=v(b,3*D);if(-1!==E&&.1<a-E){var c=a-E;!H&&-1!==F&&c<D&&F<D&&(D=c<F?F:c,8.33>D&&(D=8.33));F=c}E=a;G=a+D;I.postMessage(null)}};d=function(a){A=a;z||(z=!0,x(function(a){L(a)}))};e=function(a,b){C=v(function(){a(exports.unstable_now())},b)};g=function(){w(C);\nC=-1}}var M=null,N=null,O=null,P=3,Q=!1,R=!1,S=!1;\nfunction T(a,b){var c=a.next;if(c===a)M=null;else{a===M&&(M=c);var f=a.previous;f.next=c;c.previous=f}a.next=a.previous=null;c=a.callback;f=P;var l=O;P=a.priorityLevel;O=a;try{var h=a.expirationTime<=b;switch(P){case 1:var k=c(h);break;case 2:k=c(h);break;case 3:k=c(h);break;case 4:k=c(h);break;case 5:k=c(h)}}catch(Z){throw Z;}finally{P=f,O=l}if(\"function\"===typeof k)if(b=a.expirationTime,a.callback=k,null===M)M=a.next=a.previous=a;else{k=null;h=M;do{if(b<=h.expirationTime){k=h;break}h=h.next}while(h!==\nM);null===k?k=M:k===M&&(M=a);b=k.previous;b.next=k.previous=a;a.next=k;a.previous=b}}function U(a){if(null!==N&&N.startTime<=a){do{var b=N,c=b.next;if(b===c)N=null;else{N=c;var f=b.previous;f.next=c;c.previous=f}b.next=b.previous=null;V(b,b.expirationTime)}while(null!==N&&N.startTime<=a)}}function W(a){S=!1;U(a);R||(null!==M?(R=!0,d(X)):null!==N&&e(W,N.startTime-a))}\nfunction X(a,b){R=!1;S&&(S=!1,g());U(b);Q=!0;try{if(!a)for(;null!==M&&M.expirationTime<=b;)T(M,b),b=exports.unstable_now(),U(b);else if(null!==M){do T(M,b),b=exports.unstable_now(),U(b);while(null!==M&&!m())}if(null!==M)return!0;null!==N&&e(W,N.startTime-b);return!1}finally{Q=!1}}function Y(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}\nfunction V(a,b){if(null===M)M=a.next=a.previous=a;else{var c=null,f=M;do{if(b<f.expirationTime){c=f;break}f=f.next}while(f!==M);null===c?c=M:c===M&&(M=a);b=c.previous;b.next=c.previous=a;a.next=c;a.previous=b}}var aa=n;exports.unstable_ImmediatePriority=1;exports.unstable_UserBlockingPriority=2;exports.unstable_NormalPriority=3;exports.unstable_IdlePriority=5;exports.unstable_LowPriority=4;\nexports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};exports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var f=exports.unstable_now();if(\"object\"===typeof c&&null!==c){var l=c.delay;l=\"number\"===typeof l&&0<l?f+l:f;c=\"number\"===typeof c.timeout?c.timeout:Y(a)}else c=Y(a),l=f;c=l+c;a={callback:b,priorityLevel:a,startTime:l,expirationTime:c,next:null,previous:null};if(l>f){c=l;if(null===N)N=a.next=a.previous=a;else{b=null;var h=N;do{if(c<h.startTime){b=h;break}h=h.next}while(h!==N);null===b?b=N:b===N&&(N=a);c=b.previous;c.next=b.previous=a;a.next=b;a.previous=\nc}null===M&&N===a&&(S?g():S=!0,e(W,l-f))}else V(a,c),R||Q||(R=!0,d(X));return a};exports.unstable_cancelCallback=function(a){var b=a.next;if(null!==b){if(a===b)a===M?M=null:a===N&&(N=null);else{a===M?M=b:a===N&&(N=b);var c=a.previous;c.next=b;b.previous=c}a.next=a.previous=null}};exports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};exports.unstable_getCurrentPriorityLevel=function(){return P};\nexports.unstable_shouldYield=function(){var a=exports.unstable_now();U(a);return null!==O&&null!==M&&M.startTime<=a&&M.expirationTime<O.expirationTime||m()};exports.unstable_requestPaint=aa;exports.unstable_continueExecution=function(){R||Q||(R=!0,d(X))};exports.unstable_pauseExecution=function(){};exports.unstable_getFirstCallbackNode=function(){return M};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","module.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n","/** @license React v16.9.0\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:!0});\nvar b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?Symbol.for(\"react.suspense_list\"):\n60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.fundamental\"):60117,w=b?Symbol.for(\"react.responder\"):60118;function x(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case h:return a;default:return u}}case t:case r:case d:return u}}}function y(a){return x(a)===m}exports.typeOf=x;exports.AsyncMode=l;\nexports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===v||a.$$typeof===w)};exports.isAsyncMode=function(a){return y(a)||x(a)===l};exports.isConcurrentMode=y;exports.isContextConsumer=function(a){return x(a)===k};exports.isContextProvider=function(a){return x(a)===h};\nexports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return x(a)===n};exports.isFragment=function(a){return x(a)===e};exports.isLazy=function(a){return x(a)===t};exports.isMemo=function(a){return x(a)===r};exports.isPortal=function(a){return x(a)===d};exports.isProfiler=function(a){return x(a)===g};exports.isStrictMode=function(a){return x(a)===f};exports.isSuspense=function(a){return x(a)===p};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { jsonEval, stringify } from '@firebase/util';\n\n/**\n * Wraps a DOM Storage object and:\n * - automatically encode objects as JSON strings before storing them to allow us to store arbitrary types.\n * - prefixes names with \"firebase:\" to avoid collisions with app data.\n *\n * We automatically (see storage.js) create two such wrappers, one for sessionStorage,\n * and one for localStorage.\n *\n * @constructor\n */\nexport class DOMStorageWrapper {\n  // Use a prefix to avoid collisions with other stuff saved by the app.\n  private prefix_ = 'firebase:';\n\n  /**\n   * @param {Storage} domStorage_ The underlying storage object (e.g. localStorage or sessionStorage)\n   */\n  constructor(private domStorage_: Storage) {}\n\n  /**\n   * @param {string} key The key to save the value under\n   * @param {?Object} value The value being stored, or null to remove the key.\n   */\n  set(key: string, value: unknown | null) {\n    if (value == null) {\n      this.domStorage_.removeItem(this.prefixedName_(key));\n    } else {\n      this.domStorage_.setItem(this.prefixedName_(key), stringify(value));\n    }\n  }\n\n  /**\n   * @param {string} key\n   * @return {*} The value that was stored under this key, or null\n   */\n  get(key: string): unknown {\n    const storedVal = this.domStorage_.getItem(this.prefixedName_(key));\n    if (storedVal == null) {\n      return null;\n    } else {\n      return jsonEval(storedVal);\n    }\n  }\n\n  /**\n   * @param {string} key\n   */\n  remove(key: string) {\n    this.domStorage_.removeItem(this.prefixedName_(key));\n  }\n\n  isInMemoryStorage: boolean;\n\n  /**\n   * @param {string} name\n   * @return {string}\n   */\n  prefixedName_(name: string): string {\n    return this.prefix_ + name;\n  }\n\n  toString(): string {\n    return this.domStorage_.toString();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains } from '@firebase/util';\n\n/**\n * An in-memory storage implementation that matches the API of DOMStorageWrapper\n * (TODO: create interface for both to implement).\n *\n * @constructor\n */\nexport class MemoryStorage {\n  private cache_: { [k: string]: unknown } = {};\n\n  set(key: string, value: unknown | null) {\n    if (value == null) {\n      delete this.cache_[key];\n    } else {\n      this.cache_[key] = value;\n    }\n  }\n\n  get(key: string): unknown {\n    if (contains(this.cache_, key)) {\n      return this.cache_[key];\n    }\n    return null;\n  }\n\n  remove(key: string) {\n    delete this.cache_[key];\n  }\n\n  isInMemoryStorage = true;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DOMStorageWrapper } from './DOMStorageWrapper';\nimport { MemoryStorage } from './MemoryStorage';\n\ndeclare const window: Window;\n\n/**\n * Helper to create a DOMStorageWrapper or else fall back to MemoryStorage.\n * TODO: Once MemoryStorage and DOMStorageWrapper have a shared interface this method annotation should change\n * to reflect this type\n *\n * @param {string} domStorageName Name of the underlying storage object\n *   (e.g. 'localStorage' or 'sessionStorage').\n * @return {?} Turning off type information until a common interface is defined.\n */\nconst createStoragefor = function(\n  domStorageName: string\n): DOMStorageWrapper | MemoryStorage {\n  try {\n    // NOTE: just accessing \"localStorage\" or \"window['localStorage']\" may throw a security exception,\n    // so it must be inside the try/catch.\n    if (\n      typeof window !== 'undefined' &&\n      typeof window[domStorageName] !== 'undefined'\n    ) {\n      // Need to test cache. Just because it's here doesn't mean it works\n      const domStorage = window[domStorageName];\n      domStorage.setItem('firebase:sentinel', 'cache');\n      domStorage.removeItem('firebase:sentinel');\n      return new DOMStorageWrapper(domStorage);\n    }\n  } catch (e) {}\n\n  // Failed to create wrapper.  Just return in-memory storage.\n  // TODO: log?\n  return new MemoryStorage();\n};\n\n/** A storage object that lasts across sessions */\nexport const PersistentStorage = createStoragefor('localStorage');\n\n/** A storage object that only lasts one session */\nexport const SessionStorage = createStoragefor('sessionStorage');\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Query } from '../../api/Query';\nimport {\n  assert,\n  base64,\n  Sha1,\n  stringToByteArray,\n  stringify,\n  isNodeSdk\n} from '@firebase/util';\nimport { SessionStorage } from '../storage/storage';\nimport { Logger, LogLevel } from '@firebase/logger';\n\ndeclare const window: Window;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare const Windows: any;\n\nconst logClient = new Logger('@firebase/database');\n\n/**\n * Returns a locally-unique ID (generated by just incrementing up from 0 each time its called).\n * @type {function(): number} Generated ID.\n */\nexport const LUIDGenerator: () => number = (function() {\n  let id = 1;\n  return function() {\n    return id++;\n  };\n})();\n\n/**\n * Sha1 hash of the input string\n * @param {!string} str The string to hash\n * @return {!string} The resulting hash\n */\nexport const sha1 = function(str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  const sha1 = new Sha1();\n  sha1.update(utf8Bytes);\n  const sha1Bytes = sha1.digest();\n  return base64.encodeByteArray(sha1Bytes);\n};\n\n/**\n * @param {...*} varArgs\n * @return {string}\n * @private\n */\nconst buildLogMessage_ = function(...varArgs: unknown[]): string {\n  let message = '';\n  for (let i = 0; i < varArgs.length; i++) {\n    const arg = varArgs[i];\n    if (\n      Array.isArray(arg) ||\n      (arg &&\n        typeof arg === 'object' &&\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        typeof (arg as any).length === 'number')\n    ) {\n      message += buildLogMessage_.apply(null, arg);\n    } else if (typeof arg === 'object') {\n      message += stringify(arg);\n    } else {\n      message += arg;\n    }\n    message += ' ';\n  }\n\n  return message;\n};\n\n/**\n * Use this for all debug messages in Firebase.\n * @type {?function(string)}\n */\nexport let logger: ((a: string) => void) | null = null;\n\n/**\n * Flag to check for log availability on first log message\n * @type {boolean}\n * @private\n */\nlet firstLog_ = true;\n\n/**\n * The implementation of Firebase.enableLogging (defined here to break dependencies)\n * @param {boolean|?function(string)} logger_ A flag to turn on logging, or a custom logger\n * @param {boolean=} persistent Whether or not to persist logging settings across refreshes\n */\nexport const enableLogging = function(\n  logger_?: boolean | ((a: string) => void) | null,\n  persistent?: boolean\n) {\n  assert(\n    !persistent || logger_ === true || logger_ === false,\n    \"Can't turn on custom loggers persistently.\"\n  );\n  if (logger_ === true) {\n    logClient.logLevel = LogLevel.VERBOSE;\n    logger = logClient.log.bind(logClient);\n    if (persistent) {\n      SessionStorage.set('logging_enabled', true);\n    }\n  } else if (typeof logger_ === 'function') {\n    logger = logger_;\n  } else {\n    logger = null;\n    SessionStorage.remove('logging_enabled');\n  }\n};\n\n/**\n *\n * @param {...(string|Arguments)} varArgs\n */\nexport const log = function(...varArgs: unknown[]) {\n  if (firstLog_ === true) {\n    firstLog_ = false;\n    if (logger === null && SessionStorage.get('logging_enabled') === true) {\n      enableLogging(true);\n    }\n  }\n\n  if (logger) {\n    const message = buildLogMessage_.apply(null, varArgs);\n    logger(message);\n  }\n};\n\n/**\n * @param {!string} prefix\n * @return {function(...[*])}\n */\nexport const logWrapper = function(\n  prefix: string\n): (...varArgs: unknown[]) => void {\n  return function(...varArgs: unknown[]) {\n    log(prefix, ...varArgs);\n  };\n};\n\n/**\n * @param {...string} varArgs\n */\nexport const error = function(...varArgs: string[]) {\n  const message = 'FIREBASE INTERNAL ERROR: ' + buildLogMessage_(...varArgs);\n  logClient.error(message);\n};\n\n/**\n * @param {...string} varArgs\n */\nexport const fatal = function(...varArgs: string[]) {\n  const message = `FIREBASE FATAL ERROR: ${buildLogMessage_(...varArgs)}`;\n  logClient.error(message);\n  throw new Error(message);\n};\n\n/**\n * @param {...*} varArgs\n */\nexport const warn = function(...varArgs: unknown[]) {\n  const message = 'FIREBASE WARNING: ' + buildLogMessage_(...varArgs);\n  logClient.warn(message);\n};\n\n/**\n * Logs a warning if the containing page uses https. Called when a call to new Firebase\n * does not use https.\n */\nexport const warnIfPageIsSecure = function() {\n  // Be very careful accessing browser globals. Who knows what may or may not exist.\n  if (\n    typeof window !== 'undefined' &&\n    window.location &&\n    window.location.protocol &&\n    window.location.protocol.indexOf('https:') !== -1\n  ) {\n    warn(\n      'Insecure Firebase access from a secure page. ' +\n        'Please use https in calls to new Firebase().'\n    );\n  }\n};\n\n/**\n * @param {!String} methodName\n */\nexport const warnAboutUnsupportedMethod = function(methodName: string) {\n  warn(\n    methodName +\n      ' is unsupported and will likely change soon.  ' +\n      'Please do not use.'\n  );\n};\n\n/**\n * Returns true if data is NaN, or +/- Infinity.\n * @param {*} data\n * @return {boolean}\n */\nexport const isInvalidJSONNumber = function(data: unknown): boolean {\n  return (\n    typeof data === 'number' &&\n    (data !== data || // NaN\n      data === Number.POSITIVE_INFINITY ||\n      data === Number.NEGATIVE_INFINITY)\n  );\n};\n\n/**\n * @param {function()} fn\n */\nexport const executeWhenDOMReady = function(fn: () => void) {\n  if (isNodeSdk() || document.readyState === 'complete') {\n    fn();\n  } else {\n    // Modeled after jQuery. Try DOMContentLoaded and onreadystatechange (which\n    // fire before onload), but fall back to onload.\n\n    let called = false;\n    const wrappedFn = function() {\n      if (!document.body) {\n        setTimeout(wrappedFn, Math.floor(10));\n        return;\n      }\n\n      if (!called) {\n        called = true;\n        fn();\n      }\n    };\n\n    if (document.addEventListener) {\n      document.addEventListener('DOMContentLoaded', wrappedFn, false);\n      // fallback to onload.\n      window.addEventListener('load', wrappedFn, false);\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } else if ((document as any).attachEvent) {\n      // IE.\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (document as any).attachEvent('onreadystatechange', () => {\n        if (document.readyState === 'complete') {\n          wrappedFn();\n        }\n      });\n      // fallback to onload.\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (window as any).attachEvent('onload', wrappedFn);\n\n      // jQuery has an extra hack for IE that we could employ (based on\n      // http://javascript.nwbox.com/IEContentLoaded/) But it looks really old.\n      // I'm hoping we don't need it.\n    }\n  }\n};\n\n/**\n * Minimum key name. Invalid for actual data, used as a marker to sort before any valid names\n * @type {!string}\n */\nexport const MIN_NAME = '[MIN_NAME]';\n\n/**\n * Maximum key name. Invalid for actual data, used as a marker to sort above any valid names\n * @type {!string}\n */\nexport const MAX_NAME = '[MAX_NAME]';\n\n/**\n * Compares valid Firebase key names, plus min and max name\n * @param {!string} a\n * @param {!string} b\n * @return {!number}\n */\nexport const nameCompare = function(a: string, b: string): number {\n  if (a === b) {\n    return 0;\n  } else if (a === MIN_NAME || b === MAX_NAME) {\n    return -1;\n  } else if (b === MIN_NAME || a === MAX_NAME) {\n    return 1;\n  } else {\n    const aAsInt = tryParseInt(a),\n      bAsInt = tryParseInt(b);\n\n    if (aAsInt !== null) {\n      if (bAsInt !== null) {\n        return aAsInt - bAsInt === 0 ? a.length - b.length : aAsInt - bAsInt;\n      } else {\n        return -1;\n      }\n    } else if (bAsInt !== null) {\n      return 1;\n    } else {\n      return a < b ? -1 : 1;\n    }\n  }\n};\n\n/**\n * @param {!string} a\n * @param {!string} b\n * @return {!number} comparison result.\n */\nexport const stringCompare = function(a: string, b: string): number {\n  if (a === b) {\n    return 0;\n  } else if (a < b) {\n    return -1;\n  } else {\n    return 1;\n  }\n};\n\n/**\n * @param {string} key\n * @param {Object} obj\n * @return {*}\n */\nexport const requireKey = function(\n  key: string,\n  obj: { [k: string]: unknown }\n): unknown {\n  if (obj && key in obj) {\n    return obj[key];\n  } else {\n    throw new Error(\n      'Missing required key (' + key + ') in object: ' + stringify(obj)\n    );\n  }\n};\n\n/**\n * @param {*} obj\n * @return {string}\n */\nexport const ObjectToUniqueKey = function(obj: unknown): string {\n  if (typeof obj !== 'object' || obj === null) {\n    return stringify(obj);\n  }\n\n  const keys = [];\n  // eslint-disable-next-line guard-for-in\n  for (const k in obj) {\n    keys.push(k);\n  }\n\n  // Export as json, but with the keys sorted.\n  keys.sort();\n  let key = '{';\n  for (let i = 0; i < keys.length; i++) {\n    if (i !== 0) {\n      key += ',';\n    }\n    key += stringify(keys[i]);\n    key += ':';\n    key += ObjectToUniqueKey(obj[keys[i]]);\n  }\n\n  key += '}';\n  return key;\n};\n\n/**\n * Splits a string into a number of smaller segments of maximum size\n * @param {!string} str The string\n * @param {!number} segsize The maximum number of chars in the string.\n * @return {Array.<string>} The string, split into appropriately-sized chunks\n */\nexport const splitStringBySize = function(\n  str: string,\n  segsize: number\n): string[] {\n  const len = str.length;\n\n  if (len <= segsize) {\n    return [str];\n  }\n\n  const dataSegs = [];\n  for (let c = 0; c < len; c += segsize) {\n    if (c + segsize > len) {\n      dataSegs.push(str.substring(c, len));\n    } else {\n      dataSegs.push(str.substring(c, c + segsize));\n    }\n  }\n  return dataSegs;\n};\n\n/**\n * Apply a function to each (key, value) pair in an object or\n * apply a function to each (index, value) pair in an array\n * @param obj The object or array to iterate over\n * @param fn The function to apply\n */\nexport function each(obj: object, fn: (k: string, v: unknown) => void) {\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      fn(key, obj[key]);\n    }\n  }\n}\n\n/**\n * Like goog.bind, but doesn't bother to create a closure if opt_context is null/undefined.\n * @param {function(*)} callback Callback function.\n * @param {?Object=} context Optional context to bind to.\n * @return {function(*)}\n */\nexport const bindCallback = function(\n  callback: (a: unknown) => void,\n  context?: object | null\n): Function {\n  return context ? callback.bind(context) : callback;\n};\n\n/**\n * Borrowed from http://hg.secondlife.com/llsd/src/tip/js/typedarray.js (MIT License)\n * I made one modification at the end and removed the NaN / Infinity\n * handling (since it seemed broken [caused an overflow] and we don't need it).  See MJL comments.\n * @param {!number} v A double\n * @return {string}\n */\nexport const doubleToIEEE754String = function(v: number): string {\n  assert(!isInvalidJSONNumber(v), 'Invalid JSON number'); // MJL\n\n  const ebits = 11,\n    fbits = 52;\n  const bias = (1 << (ebits - 1)) - 1;\n  let s, e, f, ln, i;\n\n  // Compute sign, exponent, fraction\n  // Skip NaN / Infinity handling --MJL.\n  if (v === 0) {\n    e = 0;\n    f = 0;\n    s = 1 / v === -Infinity ? 1 : 0;\n  } else {\n    s = v < 0;\n    v = Math.abs(v);\n\n    if (v >= Math.pow(2, 1 - bias)) {\n      // Normalized\n      ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);\n      e = ln + bias;\n      f = Math.round(v * Math.pow(2, fbits - ln) - Math.pow(2, fbits));\n    } else {\n      // Denormalized\n      e = 0;\n      f = Math.round(v / Math.pow(2, 1 - bias - fbits));\n    }\n  }\n\n  // Pack sign, exponent, fraction\n  const bits = [];\n  for (i = fbits; i; i -= 1) {\n    bits.push(f % 2 ? 1 : 0);\n    f = Math.floor(f / 2);\n  }\n  for (i = ebits; i; i -= 1) {\n    bits.push(e % 2 ? 1 : 0);\n    e = Math.floor(e / 2);\n  }\n  bits.push(s ? 1 : 0);\n  bits.reverse();\n  const str = bits.join('');\n\n  // Return the data as a hex string. --MJL\n  let hexByteString = '';\n  for (i = 0; i < 64; i += 8) {\n    let hexByte = parseInt(str.substr(i, 8), 2).toString(16);\n    if (hexByte.length === 1) {\n      hexByte = '0' + hexByte;\n    }\n    hexByteString = hexByteString + hexByte;\n  }\n  return hexByteString.toLowerCase();\n};\n\n/**\n * Used to detect if we're in a Chrome content script (which executes in an\n * isolated environment where long-polling doesn't work).\n * @return {boolean}\n */\nexport const isChromeExtensionContentScript = function(): boolean {\n  return !!(\n    typeof window === 'object' &&\n    window['chrome'] &&\n    window['chrome']['extension'] &&\n    !/^chrome/.test(window.location.href)\n  );\n};\n\n/**\n * Used to detect if we're in a Windows 8 Store app.\n * @return {boolean}\n */\nexport const isWindowsStoreApp = function(): boolean {\n  // Check for the presence of a couple WinRT globals\n  return typeof Windows === 'object' && typeof Windows.UI === 'object';\n};\n\n/**\n * Converts a server error code to a Javascript Error\n * @param {!string} code\n * @param {!Query} query\n * @return {Error}\n */\nexport const errorForServerCode = function(code: string, query: Query): Error {\n  let reason = 'Unknown Error';\n  if (code === 'too_big') {\n    reason =\n      'The data requested exceeds the maximum size ' +\n      'that can be accessed with a single request.';\n  } else if (code === 'permission_denied') {\n    reason = \"Client doesn't have permission to access the desired data.\";\n  } else if (code === 'unavailable') {\n    reason = 'The service is unavailable';\n  }\n\n  const error = new Error(\n    code + ' at ' + query.path.toString() + ': ' + reason\n  );\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (error as any).code = code.toUpperCase();\n  return error;\n};\n\n/**\n * Used to test for integer-looking strings\n * @type {RegExp}\n * @private\n */\nexport const INTEGER_REGEXP_ = new RegExp('^-?(0*)\\\\d{1,10}$');\n\n/**\n * If the string contains a 32-bit integer, return it.  Else return null.\n * @param {!string} str\n * @return {?number}\n */\nexport const tryParseInt = function(str: string): number | null {\n  if (INTEGER_REGEXP_.test(str)) {\n    const intVal = Number(str);\n    if (intVal >= -2147483648 && intVal <= 2147483647) {\n      return intVal;\n    }\n  }\n  return null;\n};\n\n/**\n * Helper to run some code but catch any exceptions and re-throw them later.\n * Useful for preventing user callbacks from breaking internal code.\n *\n * Re-throwing the exception from a setTimeout is a little evil, but it's very\n * convenient (we don't have to try to figure out when is a safe point to\n * re-throw it), and the behavior seems reasonable:\n *\n * * If you aren't pausing on exceptions, you get an error in the console with\n *   the correct stack trace.\n * * If you're pausing on all exceptions, the debugger will pause on your\n *   exception and then again when we rethrow it.\n * * If you're only pausing on uncaught exceptions, the debugger will only pause\n *   on us re-throwing it.\n *\n * @param {!function()} fn The code to guard.\n */\nexport const exceptionGuard = function(fn: () => void) {\n  try {\n    fn();\n  } catch (e) {\n    // Re-throw exception when it's safe.\n    setTimeout(() => {\n      // It used to be that \"throw e\" would result in a good console error with\n      // relevant context, but as of Chrome 39, you just get the firebase.js\n      // file/line number where we re-throw it, which is useless. So we log\n      // e.stack explicitly.\n      const stack = e.stack || '';\n      warn('Exception was thrown by user callback.', stack);\n      throw e;\n    }, Math.floor(0));\n  }\n};\n\n/**\n * Helper function to safely call opt_callback with the specified arguments.  It:\n * 1. Turns into a no-op if opt_callback is null or undefined.\n * 2. Wraps the call inside exceptionGuard to prevent exceptions from breaking our state.\n *\n * @param {?Function=} callback Optional onComplete callback.\n * @param {...*} varArgs Arbitrary args to be passed to opt_onComplete\n */\nexport const callUserCallback = function(\n  callback?: Function | null,\n  ...varArgs: unknown[]\n) {\n  if (typeof callback === 'function') {\n    exceptionGuard(() => {\n      callback(...varArgs);\n    });\n  }\n};\n\n/**\n * @return {boolean} true if we think we're currently being crawled.\n */\nexport const beingCrawled = function(): boolean {\n  const userAgent =\n    (typeof window === 'object' &&\n      window['navigator'] &&\n      window['navigator']['userAgent']) ||\n    '';\n\n  // For now we whitelist the most popular crawlers.  We should refine this to be the set of crawlers we\n  // believe to support JavaScript/AJAX rendering.\n  // NOTE: Google Webmaster Tools doesn't really belong, but their \"This is how a visitor to your website\n  // would have seen the page\" is flaky if we don't treat it as a crawler.\n  return (\n    userAgent.search(\n      /googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i\n    ) >= 0\n  );\n};\n\n/**\n * Export a property of an object using a getter function.\n *\n * @param {!Object} object\n * @param {string} name\n * @param {!function(): *} fnGet\n */\nexport const exportPropGetter = function(\n  object: object,\n  name: string,\n  fnGet: () => unknown\n) {\n  Object.defineProperty(object, name, { get: fnGet });\n};\n\n/**\n * Same as setTimeout() except on Node.JS it will /not/ prevent the process from exiting.\n *\n * It is removed with clearTimeout() as normal.\n *\n * @param {Function} fn Function to run.\n * @param {number} time Milliseconds to wait before running.\n * @return {number|Object} The setTimeout() return value.\n */\nexport const setTimeoutNonBlocking = function(\n  fn: Function,\n  time: number\n): number | object {\n  const timeout: number | object = setTimeout(fn, time);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  if (typeof timeout === 'object' && (timeout as any)['unref']) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (timeout as any)['unref']();\n  }\n  return timeout;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nameCompare } from './util';\nimport { stringLength } from '@firebase/util';\n/**\n * An immutable object representing a parsed path.  It's immutable so that you\n * can pass them around to other functions without worrying about them changing\n * it.\n */\n\nexport class Path {\n  private pieces_: string[];\n  private pieceNum_: number;\n\n  /**\n   * Singleton to represent an empty path\n   *\n   * @const\n   */\n  static get Empty() {\n    return new Path('');\n  }\n\n  /**\n   * @param {string|Array.<string>} pathOrString Path string to parse,\n   *      or another path, or the raw tokens array\n   * @param {number=} pieceNum\n   */\n  constructor(pathOrString: string | string[], pieceNum?: number) {\n    if (pieceNum === void 0) {\n      this.pieces_ = (pathOrString as string).split('/');\n\n      // Remove empty pieces.\n      let copyTo = 0;\n      for (let i = 0; i < this.pieces_.length; i++) {\n        if (this.pieces_[i].length > 0) {\n          this.pieces_[copyTo] = this.pieces_[i];\n          copyTo++;\n        }\n      }\n      this.pieces_.length = copyTo;\n\n      this.pieceNum_ = 0;\n    } else {\n      this.pieces_ = pathOrString as string[];\n      this.pieceNum_ = pieceNum;\n    }\n  }\n\n  getFront(): string | null {\n    if (this.pieceNum_ >= this.pieces_.length) {\n      return null;\n    }\n\n    return this.pieces_[this.pieceNum_];\n  }\n\n  /**\n   * @return {number} The number of segments in this path\n   */\n  getLength(): number {\n    return this.pieces_.length - this.pieceNum_;\n  }\n\n  /**\n   * @return {!Path}\n   */\n  popFront(): Path {\n    let pieceNum = this.pieceNum_;\n    if (pieceNum < this.pieces_.length) {\n      pieceNum++;\n    }\n    return new Path(this.pieces_, pieceNum);\n  }\n\n  /**\n   * @return {?string}\n   */\n  getBack(): string | null {\n    if (this.pieceNum_ < this.pieces_.length) {\n      return this.pieces_[this.pieces_.length - 1];\n    }\n\n    return null;\n  }\n\n  toString(): string {\n    let pathString = '';\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++) {\n      if (this.pieces_[i] !== '') {\n        pathString += '/' + this.pieces_[i];\n      }\n    }\n\n    return pathString || '/';\n  }\n\n  toUrlEncodedString(): string {\n    let pathString = '';\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++) {\n      if (this.pieces_[i] !== '') {\n        pathString += '/' + encodeURIComponent(String(this.pieces_[i]));\n      }\n    }\n\n    return pathString || '/';\n  }\n\n  /**\n   * Shallow copy of the parts of the path.\n   *\n   * @param {number=} begin\n   * @return {!Array<string>}\n   */\n  slice(begin: number = 0): string[] {\n    return this.pieces_.slice(this.pieceNum_ + begin);\n  }\n\n  /**\n   * @return {?Path}\n   */\n  parent(): Path | null {\n    if (this.pieceNum_ >= this.pieces_.length) {\n      return null;\n    }\n\n    const pieces = [];\n    for (let i = this.pieceNum_; i < this.pieces_.length - 1; i++) {\n      pieces.push(this.pieces_[i]);\n    }\n\n    return new Path(pieces, 0);\n  }\n\n  /**\n   * @param {string|!Path} childPathObj\n   * @return {!Path}\n   */\n  child(childPathObj: string | Path): Path {\n    const pieces = [];\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++) {\n      pieces.push(this.pieces_[i]);\n    }\n\n    if (childPathObj instanceof Path) {\n      for (\n        let i = childPathObj.pieceNum_;\n        i < childPathObj.pieces_.length;\n        i++\n      ) {\n        pieces.push(childPathObj.pieces_[i]);\n      }\n    } else {\n      const childPieces = childPathObj.split('/');\n      for (let i = 0; i < childPieces.length; i++) {\n        if (childPieces[i].length > 0) {\n          pieces.push(childPieces[i]);\n        }\n      }\n    }\n\n    return new Path(pieces, 0);\n  }\n\n  /**\n   * @return {boolean} True if there are no segments in this path\n   */\n  isEmpty(): boolean {\n    return this.pieceNum_ >= this.pieces_.length;\n  }\n\n  /**\n   * @param {!Path} outerPath\n   * @param {!Path} innerPath\n   * @return {!Path} The path from outerPath to innerPath\n   */\n  static relativePath(outerPath: Path, innerPath: Path): Path {\n    const outer = outerPath.getFront(),\n      inner = innerPath.getFront();\n    if (outer === null) {\n      return innerPath;\n    } else if (outer === inner) {\n      return Path.relativePath(outerPath.popFront(), innerPath.popFront());\n    } else {\n      throw new Error(\n        'INTERNAL ERROR: innerPath (' +\n          innerPath +\n          ') is not within ' +\n          'outerPath (' +\n          outerPath +\n          ')'\n      );\n    }\n  }\n\n  /**\n   * @param {!Path} left\n   * @param {!Path} right\n   * @return {number} -1, 0, 1 if left is less, equal, or greater than the right.\n   */\n  static comparePaths(left: Path, right: Path): number {\n    const leftKeys = left.slice();\n    const rightKeys = right.slice();\n    for (let i = 0; i < leftKeys.length && i < rightKeys.length; i++) {\n      const cmp = nameCompare(leftKeys[i], rightKeys[i]);\n      if (cmp !== 0) {\n        return cmp;\n      }\n    }\n    if (leftKeys.length === rightKeys.length) {\n      return 0;\n    }\n    return leftKeys.length < rightKeys.length ? -1 : 1;\n  }\n\n  /**\n   *\n   * @param {Path} other\n   * @return {boolean} true if paths are the same.\n   */\n  equals(other: Path): boolean {\n    if (this.getLength() !== other.getLength()) {\n      return false;\n    }\n\n    for (\n      let i = this.pieceNum_, j = other.pieceNum_;\n      i <= this.pieces_.length;\n      i++, j++\n    ) {\n      if (this.pieces_[i] !== other.pieces_[j]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   *\n   * @param {!Path} other\n   * @return {boolean} True if this path is a parent (or the same as) other\n   */\n  contains(other: Path): boolean {\n    let i = this.pieceNum_;\n    let j = other.pieceNum_;\n    if (this.getLength() > other.getLength()) {\n      return false;\n    }\n    while (i < this.pieces_.length) {\n      if (this.pieces_[i] !== other.pieces_[j]) {\n        return false;\n      }\n      ++i;\n      ++j;\n    }\n    return true;\n  }\n} // end Path\n\n/**\n * Dynamic (mutable) path used to count path lengths.\n *\n * This class is used to efficiently check paths for valid\n * length (in UTF8 bytes) and depth (used in path validation).\n *\n * Throws Error exception if path is ever invalid.\n *\n * The definition of a path always begins with '/'.\n */\nexport class ValidationPath {\n  /** @type {!Array<string>} */\n  private parts_: string[];\n  /** @type {number} Initialize to number of '/' chars needed in path. */\n  private byteLength_: number;\n\n  /**\n   * @param {!Path} path Initial Path.\n   * @param {string} errorPrefix_ Prefix for any error messages.\n   */\n  constructor(path: Path, private errorPrefix_: string) {\n    /** @type {!Array<string>} */\n    this.parts_ = path.slice();\n    /** @type {number} Initialize to number of '/' chars needed in path. */\n    this.byteLength_ = Math.max(1, this.parts_.length);\n\n    for (let i = 0; i < this.parts_.length; i++) {\n      this.byteLength_ += stringLength(this.parts_[i]);\n    }\n    this.checkValid_();\n  }\n\n  /** @const {number} Maximum key depth. */\n  static get MAX_PATH_DEPTH() {\n    return 32;\n  }\n\n  /** @const {number} Maximum number of (UTF8) bytes in a Firebase path. */\n  static get MAX_PATH_LENGTH_BYTES() {\n    return 768;\n  }\n\n  /** @param {string} child */\n  push(child: string) {\n    // Count the needed '/'\n    if (this.parts_.length > 0) {\n      this.byteLength_ += 1;\n    }\n    this.parts_.push(child);\n    this.byteLength_ += stringLength(child);\n    this.checkValid_();\n  }\n\n  pop() {\n    const last = this.parts_.pop();\n    this.byteLength_ -= stringLength(last);\n    // Un-count the previous '/'\n    if (this.parts_.length > 0) {\n      this.byteLength_ -= 1;\n    }\n  }\n\n  private checkValid_() {\n    if (this.byteLength_ > ValidationPath.MAX_PATH_LENGTH_BYTES) {\n      throw new Error(\n        this.errorPrefix_ +\n          'has a key path longer than ' +\n          ValidationPath.MAX_PATH_LENGTH_BYTES +\n          ' bytes (' +\n          this.byteLength_ +\n          ').'\n      );\n    }\n    if (this.parts_.length > ValidationPath.MAX_PATH_DEPTH) {\n      throw new Error(\n        this.errorPrefix_ +\n          'path specified exceeds the maximum depth that can be written (' +\n          ValidationPath.MAX_PATH_DEPTH +\n          ') or object contains a cycle ' +\n          this.toErrorString()\n      );\n    }\n  }\n\n  /**\n   * String for use in error messages - uses '.' notation for path.\n   *\n   * @return {string}\n   */\n  toErrorString(): string {\n    if (this.parts_.length === 0) {\n      return '';\n    }\n    return \"in property '\" + this.parts_.join('.') + \"'\";\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { PersistentStorage } from './storage/storage';\nimport { LONG_POLLING, WEBSOCKET } from '../realtime/Constants';\nimport { each } from './util/util';\n\n/**\n * A class that holds metadata about a Repo object\n *\n * @constructor\n */\nexport class RepoInfo {\n  host: string;\n  domain: string;\n  internalHost: string;\n\n  /**\n   * @param {string} host Hostname portion of the url for the repo\n   * @param {boolean} secure Whether or not this repo is accessed over ssl\n   * @param {string} namespace The namespace represented by the repo\n   * @param {boolean} webSocketOnly Whether to prefer websockets over all other transports (used by Nest).\n   * @param {string=} persistenceKey Override the default session persistence storage key\n   */\n  constructor(\n    host: string,\n    public secure: boolean,\n    public namespace: string,\n    public webSocketOnly: boolean,\n    public persistenceKey: string = '',\n    public includeNamespaceInQueryParams: boolean = false\n  ) {\n    this.host = host.toLowerCase();\n    this.domain = this.host.substr(this.host.indexOf('.') + 1);\n    this.internalHost =\n      (PersistentStorage.get('host:' + host) as string) || this.host;\n  }\n\n  needsQueryParam(): boolean {\n    return (\n      this.host !== this.internalHost ||\n      this.isCustomHost() ||\n      this.includeNamespaceInQueryParams\n    );\n  }\n\n  isCacheableHost(): boolean {\n    return this.internalHost.substr(0, 2) === 's-';\n  }\n\n  isDemoHost() {\n    return this.domain === 'firebaseio-demo.com';\n  }\n\n  isCustomHost() {\n    return (\n      this.domain !== 'firebaseio.com' && this.domain !== 'firebaseio-demo.com'\n    );\n  }\n\n  updateHost(newHost: string) {\n    if (newHost !== this.internalHost) {\n      this.internalHost = newHost;\n      if (this.isCacheableHost()) {\n        PersistentStorage.set('host:' + this.host, this.internalHost);\n      }\n    }\n  }\n\n  /**\n   * Returns the websocket URL for this repo\n   * @param {string} type of connection\n   * @param {Object} params list\n   * @return {string} The URL for this repo\n   */\n  connectionURL(type: string, params: { [k: string]: string }): string {\n    assert(typeof type === 'string', 'typeof type must == string');\n    assert(typeof params === 'object', 'typeof params must == object');\n\n    let connURL: string;\n    if (type === WEBSOCKET) {\n      connURL =\n        (this.secure ? 'wss://' : 'ws://') + this.internalHost + '/.ws?';\n    } else if (type === LONG_POLLING) {\n      connURL =\n        (this.secure ? 'https://' : 'http://') + this.internalHost + '/.lp?';\n    } else {\n      throw new Error('Unknown connection type: ' + type);\n    }\n    if (this.needsQueryParam()) {\n      params['ns'] = this.namespace;\n    }\n\n    const pairs: string[] = [];\n\n    each(params, (key: string, value: string) => {\n      pairs.push(key + '=' + value);\n    });\n\n    return connURL + pairs.join('&');\n  }\n\n  /** @return {string} */\n  toString(): string {\n    let str = this.toURLString();\n    if (this.persistenceKey) {\n      str += '<' + this.persistenceKey + '>';\n    }\n    return str;\n  }\n\n  /** @return {string} */\n  toURLString(): string {\n    return (this.secure ? 'https://' : 'http://') + this.host;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const PROTOCOL_VERSION = '5';\n\nexport const VERSION_PARAM = 'v';\n\nexport const TRANSPORT_SESSION_PARAM = 's';\n\nexport const REFERER_PARAM = 'r';\n\nexport const FORGE_REF = 'f';\n\nexport const FORGE_DOMAIN = 'firebaseio.com';\n\nexport const LAST_SESSION_PARAM = 'ls';\n\nexport const WEBSOCKET = 'websocket';\n\nexport const LONG_POLLING = 'long_polling';\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../Path';\nimport { RepoInfo } from '../../RepoInfo';\nimport { warnIfPageIsSecure, warn, fatal } from '../util';\n\n/**\n * @param {!string} pathString\n * @return {string}\n */\nfunction decodePath(pathString: string): string {\n  let pathStringDecoded = '';\n  const pieces = pathString.split('/');\n  for (let i = 0; i < pieces.length; i++) {\n    if (pieces[i].length > 0) {\n      let piece = pieces[i];\n      try {\n        piece = decodeURIComponent(piece.replace(/\\+/g, ' '));\n      } catch (e) {}\n      pathStringDecoded += '/' + piece;\n    }\n  }\n  return pathStringDecoded;\n}\n\n/**\n * @param {!string} queryString\n * @return {!{[key:string]:string}} key value hash\n */\nfunction decodeQuery(queryString: string): { [key: string]: string } {\n  const results = {};\n  if (queryString.charAt(0) === '?') {\n    queryString = queryString.substring(1);\n  }\n  for (const segment of queryString.split('&')) {\n    if (segment.length === 0) {\n      continue;\n    }\n    const kv = segment.split('=');\n    if (kv.length === 2) {\n      results[decodeURIComponent(kv[0])] = decodeURIComponent(kv[1]);\n    } else {\n      warn(`Invalid query segment '${segment}' in query '${queryString}'`);\n    }\n  }\n  return results;\n}\n\n/**\n *\n * @param {!string} dataURL\n * @return {{repoInfo: !RepoInfo, path: !Path}}\n */\nexport const parseRepoInfo = function(\n  dataURL: string\n): { repoInfo: RepoInfo; path: Path } {\n  const parsedUrl = parseDatabaseURL(dataURL),\n    namespace = parsedUrl.namespace;\n\n  if (parsedUrl.domain === 'firebase') {\n    fatal(\n      parsedUrl.host +\n        ' is no longer supported. ' +\n        'Please use <YOUR FIREBASE>.firebaseio.com instead'\n    );\n  }\n\n  // Catch common error of uninitialized namespace value.\n  if (\n    (!namespace || namespace === 'undefined') &&\n    parsedUrl.domain !== 'localhost'\n  ) {\n    fatal(\n      'Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com'\n    );\n  }\n\n  if (!parsedUrl.secure) {\n    warnIfPageIsSecure();\n  }\n\n  const webSocketOnly = parsedUrl.scheme === 'ws' || parsedUrl.scheme === 'wss';\n\n  return {\n    repoInfo: new RepoInfo(\n      parsedUrl.host,\n      parsedUrl.secure,\n      namespace,\n      webSocketOnly,\n      /*persistenceKey=*/ '',\n      /*includeNamespaceInQueryParams=*/ namespace !== parsedUrl.subdomain\n    ),\n    path: new Path(parsedUrl.pathString)\n  };\n};\n\n/**\n *\n * @param {!string} dataURL\n * @return {{host: string, port: number, domain: string, subdomain: string, secure: boolean, scheme: string, pathString: string, namespace: string}}\n */\nexport const parseDatabaseURL = function(\n  dataURL: string\n): {\n  host: string;\n  port: number;\n  domain: string;\n  subdomain: string;\n  secure: boolean;\n  scheme: string;\n  pathString: string;\n  namespace: string;\n} {\n  // Default to empty strings in the event of a malformed string.\n  let host = '',\n    domain = '',\n    subdomain = '',\n    pathString = '',\n    namespace = '';\n\n  // Always default to SSL, unless otherwise specified.\n  let secure = true,\n    scheme = 'https',\n    port = 443;\n\n  // Don't do any validation here. The caller is responsible for validating the result of parsing.\n  if (typeof dataURL === 'string') {\n    // Parse scheme.\n    let colonInd = dataURL.indexOf('//');\n    if (colonInd >= 0) {\n      scheme = dataURL.substring(0, colonInd - 1);\n      dataURL = dataURL.substring(colonInd + 2);\n    }\n\n    // Parse host, path, and query string.\n    let slashInd = dataURL.indexOf('/');\n    if (slashInd === -1) {\n      slashInd = dataURL.length;\n    }\n    let questionMarkInd = dataURL.indexOf('?');\n    if (questionMarkInd === -1) {\n      questionMarkInd = dataURL.length;\n    }\n    host = dataURL.substring(0, Math.min(slashInd, questionMarkInd));\n    if (slashInd < questionMarkInd) {\n      // For pathString, questionMarkInd will always come after slashInd\n      pathString = decodePath(dataURL.substring(slashInd, questionMarkInd));\n    }\n    const queryParams = decodeQuery(\n      dataURL.substring(Math.min(dataURL.length, questionMarkInd))\n    );\n\n    // If we have a port, use scheme for determining if it's secure.\n    colonInd = host.indexOf(':');\n    if (colonInd >= 0) {\n      secure = scheme === 'https' || scheme === 'wss';\n      port = parseInt(host.substring(colonInd + 1), 10);\n    } else {\n      colonInd = dataURL.length;\n    }\n\n    const parts = host.split('.');\n    if (parts.length === 3) {\n      // Normalize namespaces to lowercase to share storage / connection.\n      domain = parts[1];\n      subdomain = parts[0].toLowerCase();\n      // We interpret the subdomain of a 3 component URL as the namespace name.\n      namespace = subdomain;\n    } else if (parts.length === 2) {\n      domain = parts[0];\n    } else if (parts[0].slice(0, colonInd).toLowerCase() === 'localhost') {\n      domain = 'localhost';\n    }\n    // Always treat the value of the `ns` as the namespace name if it is present.\n    if ('ns' in queryParams) {\n      namespace = queryParams['ns'];\n    }\n  }\n\n  return {\n    host,\n    port,\n    domain,\n    subdomain,\n    secure,\n    scheme,\n    pathString,\n    namespace\n  };\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from './Index';\nimport { Node, NamedNode } from '../Node';\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { assert, assertionError } from '@firebase/util';\nimport { ChildrenNode } from '../ChildrenNode';\n\nlet __EMPTY_NODE: ChildrenNode;\n\nexport class KeyIndex extends Index {\n  static get __EMPTY_NODE() {\n    return __EMPTY_NODE;\n  }\n\n  static set __EMPTY_NODE(val) {\n    __EMPTY_NODE = val;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    return nameCompare(a.name, b.name);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    // We could probably return true here (since every node has a key), but it's never called\n    // so just leaving unimplemented for now.\n    throw assertionError('KeyIndex.isDefinedOn not expected to be called.');\n  }\n\n  /**\n   * @inheritDoc\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return false; // The key for a node never changes.\n  }\n\n  /**\n   * @inheritDoc\n   */\n  minPost() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    // TODO: This should really be created once and cached in a static property, but\n    // NamedNode isn't defined yet, so I can't use it in a static.  Bleh.\n    return new NamedNode(MAX_NAME, __EMPTY_NODE);\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  makePost(indexValue: string, name: string): NamedNode {\n    assert(\n      typeof indexValue === 'string',\n      'KeyIndex indexValue must always be a string.'\n    );\n    // We just use empty node, but it'll never be compared, since our comparator only looks at name.\n    return new NamedNode(indexValue, __EMPTY_NODE);\n  }\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.key';\n  }\n}\n\nexport const KEY_INDEX = new KeyIndex();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, contains } from '@firebase/util';\nimport { doubleToIEEE754String } from '../util/util';\n\nimport { Node } from './Node';\nimport { Indexable } from '../util/misc';\n\nlet MAX_NODE: Node;\n\nexport function setMaxNode(val: Node) {\n  MAX_NODE = val;\n}\n\n/**\n * @param {(!string|!number)} priority\n * @return {!string}\n */\nexport const priorityHashText = function(priority: string | number): string {\n  if (typeof priority === 'number') {\n    return 'number:' + doubleToIEEE754String(priority);\n  } else {\n    return 'string:' + priority;\n  }\n};\n\n/**\n * Validates that a priority snapshot Node is valid.\n *\n * @param {!Node} priorityNode\n */\nexport const validatePriorityNode = function(priorityNode: Node) {\n  if (priorityNode.isLeafNode()) {\n    const val = priorityNode.val();\n    assert(\n      typeof val === 'string' ||\n        typeof val === 'number' ||\n        (typeof val === 'object' && contains(val as Indexable, '.sv')),\n      'Priority must be a string or number.'\n    );\n  } else {\n    assert(\n      priorityNode === MAX_NODE || priorityNode.isEmpty(),\n      'priority of unexpected type.'\n    );\n  }\n  // Don't call getPriority() on MAX_NODE to avoid hitting assertion.\n  assert(\n    priorityNode === MAX_NODE || priorityNode.getPriority().isEmpty(),\n    \"Priority nodes can't have a priority of their own.\"\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path, ValidationPath } from './Path';\nimport {\n  contains,\n  safeGet,\n  errorPrefix as errorPrefixFxn,\n  stringLength\n} from '@firebase/util';\nimport { isInvalidJSONNumber, each } from './util';\n\nimport { RepoInfo } from '../RepoInfo';\n\n/**\n * True for invalid Firebase keys\n * @type {RegExp}\n * @private\n */\nexport const INVALID_KEY_REGEX_ = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/;\n\n/**\n * True for invalid Firebase paths.\n * Allows '/' in paths.\n * @type {RegExp}\n * @private\n */\nexport const INVALID_PATH_REGEX_ = /[\\[\\].#$\\u0000-\\u001F\\u007F]/;\n\n/**\n * Maximum number of characters to allow in leaf value\n * @type {number}\n * @private\n */\nexport const MAX_LEAF_SIZE_ = 10 * 1024 * 1024;\n\n/**\n * @param {*} key\n * @return {boolean}\n */\nexport const isValidKey = function(key: unknown): boolean {\n  return (\n    typeof key === 'string' && key.length !== 0 && !INVALID_KEY_REGEX_.test(key)\n  );\n};\n\n/**\n * @param {string} pathString\n * @return {boolean}\n */\nexport const isValidPathString = function(pathString: string): boolean {\n  return (\n    typeof pathString === 'string' &&\n    pathString.length !== 0 &&\n    !INVALID_PATH_REGEX_.test(pathString)\n  );\n};\n\n/**\n * @param {string} pathString\n * @return {boolean}\n */\nexport const isValidRootPathString = function(pathString: string): boolean {\n  if (pathString) {\n    // Allow '/.info/' at the beginning.\n    pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n  }\n\n  return isValidPathString(pathString);\n};\n\n/**\n * @param {*} priority\n * @return {boolean}\n */\nexport const isValidPriority = function(priority: unknown): boolean {\n  return (\n    priority === null ||\n    typeof priority === 'string' ||\n    (typeof priority === 'number' && !isInvalidJSONNumber(priority)) ||\n    (priority &&\n      typeof priority === 'object' &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      contains(priority as any, '.sv'))\n  );\n};\n\n/**\n * Pre-validate a datum passed as an argument to Firebase function.\n *\n * @param {string} fnName\n * @param {number} argumentNumber\n * @param {*} data\n * @param {!Path} path\n * @param {boolean} optional\n */\nexport const validateFirebaseDataArg = function(\n  fnName: string,\n  argumentNumber: number,\n  data: unknown,\n  path: Path,\n  optional: boolean\n) {\n  if (optional && data === undefined) {\n    return;\n  }\n\n  validateFirebaseData(\n    errorPrefixFxn(fnName, argumentNumber, optional),\n    data,\n    path\n  );\n};\n\n/**\n * Validate a data object client-side before sending to server.\n *\n * @param {string} errorPrefix\n * @param {*} data\n * @param {!Path|!ValidationPath} path_\n */\nexport const validateFirebaseData = function(\n  errorPrefix: string,\n  data: unknown,\n  path_: Path | ValidationPath\n) {\n  const path =\n    path_ instanceof Path ? new ValidationPath(path_, errorPrefix) : path_;\n\n  if (data === undefined) {\n    throw new Error(errorPrefix + 'contains undefined ' + path.toErrorString());\n  }\n  if (typeof data === 'function') {\n    throw new Error(\n      errorPrefix +\n        'contains a function ' +\n        path.toErrorString() +\n        ' with contents = ' +\n        data.toString()\n    );\n  }\n  if (isInvalidJSONNumber(data)) {\n    throw new Error(\n      errorPrefix + 'contains ' + data.toString() + ' ' + path.toErrorString()\n    );\n  }\n\n  // Check max leaf size, but try to avoid the utf8 conversion if we can.\n  if (\n    typeof data === 'string' &&\n    data.length > MAX_LEAF_SIZE_ / 3 &&\n    stringLength(data) > MAX_LEAF_SIZE_\n  ) {\n    throw new Error(\n      errorPrefix +\n        'contains a string greater than ' +\n        MAX_LEAF_SIZE_ +\n        ' utf8 bytes ' +\n        path.toErrorString() +\n        \" ('\" +\n        data.substring(0, 50) +\n        \"...')\"\n    );\n  }\n\n  // TODO = Perf = Consider combining the recursive validation of keys into NodeFromJSON\n  // to save extra walking of large objects.\n  if (data && typeof data === 'object') {\n    let hasDotValue = false;\n    let hasActualChild = false;\n    each(data, (key: string, value: unknown) => {\n      if (key === '.value') {\n        hasDotValue = true;\n      } else if (key !== '.priority' && key !== '.sv') {\n        hasActualChild = true;\n        if (!isValidKey(key)) {\n          throw new Error(\n            errorPrefix +\n              ' contains an invalid key (' +\n              key +\n              ') ' +\n              path.toErrorString() +\n              '.  Keys must be non-empty strings ' +\n              'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"'\n          );\n        }\n      }\n\n      path.push(key);\n      validateFirebaseData(errorPrefix, value, path);\n      path.pop();\n    });\n\n    if (hasDotValue && hasActualChild) {\n      throw new Error(\n        errorPrefix +\n          ' contains \".value\" child ' +\n          path.toErrorString() +\n          ' in addition to actual children.'\n      );\n    }\n  }\n};\n\n/**\n * Pre-validate paths passed in the firebase function.\n *\n * @param {string} errorPrefix\n * @param {Array<!Path>} mergePaths\n */\nexport const validateFirebaseMergePaths = function(\n  errorPrefix: string,\n  mergePaths: Path[]\n) {\n  let i, curPath;\n  for (i = 0; i < mergePaths.length; i++) {\n    curPath = mergePaths[i];\n    const keys = curPath.slice();\n    for (let j = 0; j < keys.length; j++) {\n      if (keys[j] === '.priority' && j === keys.length - 1) {\n        // .priority is OK\n      } else if (!isValidKey(keys[j])) {\n        throw new Error(\n          errorPrefix +\n            'contains an invalid key (' +\n            keys[j] +\n            ') in path ' +\n            curPath.toString() +\n            '. Keys must be non-empty strings ' +\n            'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"'\n        );\n      }\n    }\n  }\n\n  // Check that update keys are not descendants of each other.\n  // We rely on the property that sorting guarantees that ancestors come\n  // right before descendants.\n  mergePaths.sort(Path.comparePaths);\n  let prevPath: Path | null = null;\n  for (i = 0; i < mergePaths.length; i++) {\n    curPath = mergePaths[i];\n    if (prevPath !== null && prevPath.contains(curPath)) {\n      throw new Error(\n        errorPrefix +\n          'contains a path ' +\n          prevPath.toString() +\n          ' that is ancestor of another path ' +\n          curPath.toString()\n      );\n    }\n    prevPath = curPath;\n  }\n};\n\n/**\n * pre-validate an object passed as an argument to firebase function (\n * must be an object - e.g. for firebase.update()).\n *\n * @param {string} fnName\n * @param {number} argumentNumber\n * @param {*} data\n * @param {!Path} path\n * @param {boolean} optional\n */\nexport const validateFirebaseMergeDataArg = function(\n  fnName: string,\n  argumentNumber: number,\n  data: unknown,\n  path: Path,\n  optional: boolean\n) {\n  if (optional && data === undefined) {\n    return;\n  }\n\n  const errorPrefix = errorPrefixFxn(fnName, argumentNumber, optional);\n\n  if (!(data && typeof data === 'object') || Array.isArray(data)) {\n    throw new Error(\n      errorPrefix + ' must be an object containing the children to replace.'\n    );\n  }\n\n  const mergePaths: Path[] = [];\n  each(data, (key: string, value: unknown) => {\n    const curPath = new Path(key);\n    validateFirebaseData(errorPrefix, value, path.child(curPath));\n    if (curPath.getBack() === '.priority') {\n      if (!isValidPriority(value)) {\n        throw new Error(\n          errorPrefix +\n            \"contains an invalid value for '\" +\n            curPath.toString() +\n            \"', which must be a valid \" +\n            'Firebase priority (a string, finite number, server value, or null).'\n        );\n      }\n    }\n    mergePaths.push(curPath);\n  });\n  validateFirebaseMergePaths(errorPrefix, mergePaths);\n};\n\nexport const validatePriority = function(\n  fnName: string,\n  argumentNumber: number,\n  priority: unknown,\n  optional: boolean\n) {\n  if (optional && priority === undefined) {\n    return;\n  }\n  if (isInvalidJSONNumber(priority)) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'is ' +\n        priority.toString() +\n        ', but must be a valid Firebase priority (a string, finite number, ' +\n        'server value, or null).'\n    );\n  }\n  // Special case to allow importing data with a .sv.\n  if (!isValidPriority(priority)) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid Firebase priority ' +\n        '(a string, finite number, server value, or null).'\n    );\n  }\n};\n\nexport const validateEventType = function(\n  fnName: string,\n  argumentNumber: number,\n  eventType: string,\n  optional: boolean\n) {\n  if (optional && eventType === undefined) {\n    return;\n  }\n\n  switch (eventType) {\n    case 'value':\n    case 'child_added':\n    case 'child_removed':\n    case 'child_changed':\n    case 'child_moved':\n      break;\n    default:\n      throw new Error(\n        errorPrefixFxn(fnName, argumentNumber, optional) +\n          'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' +\n          '\"child_changed\", or \"child_moved\".'\n      );\n  }\n};\n\nexport const validateKey = function(\n  fnName: string,\n  argumentNumber: number,\n  key: string,\n  optional: boolean\n) {\n  if (optional && key === undefined) {\n    return;\n  }\n  if (!isValidKey(key)) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'was an invalid key = \"' +\n        key +\n        '\".  Firebase keys must be non-empty strings and ' +\n        'can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").'\n    );\n  }\n};\n\nexport const validatePathString = function(\n  fnName: string,\n  argumentNumber: number,\n  pathString: string,\n  optional: boolean\n) {\n  if (optional && pathString === undefined) {\n    return;\n  }\n\n  if (!isValidPathString(pathString)) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'was an invalid path = \"' +\n        pathString +\n        '\". Paths must be non-empty strings and ' +\n        'can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"'\n    );\n  }\n};\n\nexport const validateRootPathString = function(\n  fnName: string,\n  argumentNumber: number,\n  pathString: string,\n  optional: boolean\n) {\n  if (pathString) {\n    // Allow '/.info/' at the beginning.\n    pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n  }\n\n  validatePathString(fnName, argumentNumber, pathString, optional);\n};\n\nexport const validateWritablePath = function(fnName: string, path: Path) {\n  if (path.getFront() === '.info') {\n    throw new Error(fnName + \" failed = Can't modify data under /.info/\");\n  }\n};\n\nexport const validateUrl = function(\n  fnName: string,\n  argumentNumber: number,\n  parsedUrl: { repoInfo: RepoInfo; path: Path }\n) {\n  // TODO = Validate server better.\n  const pathString = parsedUrl.path.toString();\n  if (\n    !(typeof parsedUrl.repoInfo.host === 'string') ||\n    parsedUrl.repoInfo.host.length === 0 ||\n    (!isValidKey(parsedUrl.repoInfo.namespace) &&\n      parsedUrl.repoInfo.host.split(':')[0] !== 'localhost') ||\n    (pathString.length !== 0 && !isValidRootPathString(pathString))\n  ) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, false) +\n        'must be a valid firebase URL and ' +\n        'the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".'\n    );\n  }\n};\n\nexport const validateCredential = function(\n  fnName: string,\n  argumentNumber: number,\n  cred: unknown,\n  optional: boolean\n) {\n  if (optional && cred === undefined) {\n    return;\n  }\n  if (!(typeof cred === 'string')) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid credential (a string).'\n    );\n  }\n};\n\nexport const validateBoolean = function(\n  fnName: string,\n  argumentNumber: number,\n  bool: unknown,\n  optional: boolean\n) {\n  if (optional && bool === undefined) {\n    return;\n  }\n  if (typeof bool !== 'boolean') {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) + 'must be a boolean.'\n    );\n  }\n};\n\nexport const validateString = function(\n  fnName: string,\n  argumentNumber: number,\n  string: unknown,\n  optional: boolean\n) {\n  if (optional && string === undefined) {\n    return;\n  }\n  if (!(typeof string === 'string')) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid string.'\n    );\n  }\n};\n\nexport const validateObject = function(\n  fnName: string,\n  argumentNumber: number,\n  obj: unknown,\n  optional: boolean\n) {\n  if (optional && obj === undefined) {\n    return;\n  }\n  if (!(obj && typeof obj === 'object') || obj === null) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid object.'\n    );\n  }\n};\n\nexport const validateObjectContainsKey = function(\n  fnName: string,\n  argumentNumber: number,\n  obj: unknown,\n  key: string,\n  optional: boolean,\n  optType?: string\n) {\n  const objectContainsKey =\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    obj && typeof obj === 'object' && contains(obj as any, key);\n\n  if (!objectContainsKey) {\n    if (optional) {\n      return;\n    } else {\n      throw new Error(\n        errorPrefixFxn(fnName, argumentNumber, optional) +\n          'must contain the key \"' +\n          key +\n          '\"'\n      );\n    }\n  }\n\n  if (optType) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const val = safeGet(obj as any, key);\n    if (\n      (optType === 'number' && !(typeof val === 'number')) ||\n      (optType === 'string' && !(typeof val === 'string')) ||\n      (optType === 'boolean' && !(typeof val === 'boolean')) ||\n      (optType === 'function' && !(typeof val === 'function')) ||\n      (optType === 'object' && !(typeof val === 'object') && val)\n    ) {\n      if (optional) {\n        throw new Error(\n          errorPrefixFxn(fnName, argumentNumber, optional) +\n            'contains invalid value for key \"' +\n            key +\n            '\" (must be of type \"' +\n            optType +\n            '\")'\n        );\n      } else {\n        throw new Error(\n          errorPrefixFxn(fnName, argumentNumber, optional) +\n            'must contain the key \"' +\n            key +\n            '\" with type \"' +\n            optType +\n            '\"'\n        );\n      }\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { validateArgCount, validateCallback, Deferred } from '@firebase/util';\nimport {\n  validateWritablePath,\n  validateFirebaseDataArg,\n  validatePriority,\n  validateFirebaseMergeDataArg\n} from '../core/util/validation';\nimport { warn } from '../core/util/util';\n\nimport { Repo } from '../core/Repo';\nimport { Path } from '../core/util/Path';\nimport { Indexable } from '../core/util/misc';\n\n/**\n * @constructor\n */\nexport class OnDisconnect {\n  /**\n   * @param {!Repo} repo_\n   * @param {!Path} path_\n   */\n  constructor(private repo_: Repo, private path_: Path) {}\n\n  /**\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  cancel(onComplete?: (a: Error | null) => void): Promise<void> {\n    validateArgCount('OnDisconnect.cancel', 0, 1, arguments.length);\n    validateCallback('OnDisconnect.cancel', 1, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectCancel(\n      this.path_,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  remove(onComplete?: (a: Error | null) => void): Promise<void> {\n    validateArgCount('OnDisconnect.remove', 0, 1, arguments.length);\n    validateWritablePath('OnDisconnect.remove', this.path_);\n    validateCallback('OnDisconnect.remove', 1, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectSet(\n      this.path_,\n      null,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*} value\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  set(value: unknown, onComplete?: (a: Error | null) => void): Promise<void> {\n    validateArgCount('OnDisconnect.set', 1, 2, arguments.length);\n    validateWritablePath('OnDisconnect.set', this.path_);\n    validateFirebaseDataArg('OnDisconnect.set', 1, value, this.path_, false);\n    validateCallback('OnDisconnect.set', 2, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectSet(\n      this.path_,\n      value,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*} value\n   * @param {number|string|null} priority\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  setWithPriority(\n    value: unknown,\n    priority: number | string | null,\n    onComplete?: (a: Error | null) => void\n  ): Promise<void> {\n    validateArgCount('OnDisconnect.setWithPriority', 2, 3, arguments.length);\n    validateWritablePath('OnDisconnect.setWithPriority', this.path_);\n    validateFirebaseDataArg(\n      'OnDisconnect.setWithPriority',\n      1,\n      value,\n      this.path_,\n      false\n    );\n    validatePriority('OnDisconnect.setWithPriority', 2, priority, false);\n    validateCallback('OnDisconnect.setWithPriority', 3, onComplete, true);\n\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectSetWithPriority(\n      this.path_,\n      value,\n      priority,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {!Object} objectToMerge\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  update(\n    objectToMerge: Indexable,\n    onComplete?: (a: Error | null) => void\n  ): Promise<void> {\n    validateArgCount('OnDisconnect.update', 1, 2, arguments.length);\n    validateWritablePath('OnDisconnect.update', this.path_);\n    if (Array.isArray(objectToMerge)) {\n      const newObjectToMerge: { [k: string]: unknown } = {};\n      for (let i = 0; i < objectToMerge.length; ++i) {\n        newObjectToMerge['' + i] = objectToMerge[i];\n      }\n      objectToMerge = newObjectToMerge;\n      warn(\n        'Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the ' +\n          'existing data, or an Object with integer keys if you really do want to only update some of the children.'\n      );\n    }\n    validateFirebaseMergeDataArg(\n      'OnDisconnect.update',\n      1,\n      objectToMerge,\n      this.path_,\n      false\n    );\n    validateCallback('OnDisconnect.update', 2, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectUpdate(\n      this.path_,\n      objectToMerge,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataSnapshot } from './DataSnapshot';\nimport { validateArgCount } from '@firebase/util';\n\nexport class TransactionResult {\n  /**\n   * A type for the resolve value of Firebase.transaction.\n   * @constructor\n   * @dict\n   * @param {boolean} committed\n   * @param {DataSnapshot} snapshot\n   */\n  constructor(public committed: boolean, public snapshot: DataSnapshot) {}\n\n  // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users\n  toJSON(): object {\n    validateArgCount('TransactionResult.toJSON', 0, 1, arguments.length);\n    return { committed: this.committed, snapshot: this.snapshot.toJSON() };\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\n/**\n * Fancy ID generator that creates 20-character string identifiers with the\n * following properties:\n *\n * 1. They're based on timestamp so that they sort *after* any existing ids.\n * 2. They contain 72-bits of random data after the timestamp so that IDs won't\n *    collide with other clients' IDs.\n * 3. They sort *lexicographically* (so the timestamp is converted to characters\n *    that will sort properly).\n * 4. They're monotonically increasing. Even if you generate more than one in\n *    the same timestamp, the latter ones will sort after the former ones. We do\n *    this by using the previous random bits but \"incrementing\" them by 1 (only\n *    in the case of a timestamp collision).\n */\nexport const nextPushId = (function() {\n  // Modeled after base64 web-safe chars, but ordered by ASCII.\n  const PUSH_CHARS =\n    '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\n\n  // Timestamp of last push, used to prevent local collisions if you push twice\n  // in one ms.\n  let lastPushTime = 0;\n\n  // We generate 72-bits of randomness which get turned into 12 characters and\n  // appended to the timestamp to prevent collisions with other clients. We\n  // store the last characters we generated because in the event of a collision,\n  // we'll use those same characters except \"incremented\" by one.\n  const lastRandChars: number[] = [];\n\n  return function(now: number) {\n    const duplicateTime = now === lastPushTime;\n    lastPushTime = now;\n\n    let i;\n    const timeStampChars = new Array(8);\n    for (i = 7; i >= 0; i--) {\n      timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\n      // NOTE: Can't use << here because javascript will convert to int and lose\n      // the upper bits.\n      now = Math.floor(now / 64);\n    }\n    assert(now === 0, 'Cannot push at time == 0');\n\n    let id = timeStampChars.join('');\n\n    if (!duplicateTime) {\n      for (i = 0; i < 12; i++) {\n        lastRandChars[i] = Math.floor(Math.random() * 64);\n      }\n    } else {\n      // If the timestamp hasn't changed since last push, use the same random\n      // number, except incremented by 1.\n      for (i = 11; i >= 0 && lastRandChars[i] === 63; i--) {\n        lastRandChars[i] = 0;\n      }\n      lastRandChars[i]++;\n    }\n    for (i = 0; i < 12; i++) {\n      id += PUSH_CHARS.charAt(lastRandChars[i]);\n    }\n    assert(id.length === 20, 'nextPushId: Length should be 20.');\n\n    return id;\n  };\n})();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\nimport { Index } from './indexes/Index';\n\n/**\n * Node is an interface defining the common functionality for nodes in\n * a DataSnapshot.\n *\n * @interface\n */\nexport interface Node {\n  /**\n   * Whether this node is a leaf node.\n   * @return {boolean} Whether this is a leaf node.\n   */\n  isLeafNode(): boolean;\n\n  /**\n   * Gets the priority of the node.\n   * @return {!Node} The priority of the node.\n   */\n  getPriority(): Node;\n\n  /**\n   * Returns a duplicate node with the new priority.\n   * @param {!Node} newPriorityNode New priority to set for the node.\n   * @return {!Node} Node with new priority.\n   */\n  updatePriority(newPriorityNode: Node): Node;\n\n  /**\n   * Returns the specified immediate child, or null if it doesn't exist.\n   * @param {string} childName The name of the child to retrieve.\n   * @return {!Node} The retrieved child, or an empty node.\n   */\n  getImmediateChild(childName: string): Node;\n\n  /**\n   * Returns a child by path, or null if it doesn't exist.\n   * @param {!Path} path The path of the child to retrieve.\n   * @return {!Node} The retrieved child or an empty node.\n   */\n  getChild(path: Path): Node;\n\n  /**\n   * Returns the name of the child immediately prior to the specified childNode, or null.\n   * @param {!string} childName The name of the child to find the predecessor of.\n   * @param {!Node} childNode The node to find the predecessor of.\n   * @param {!Index} index The index to use to determine the predecessor\n   * @return {?string} The name of the predecessor child, or null if childNode is the first child.\n   */\n  getPredecessorChildName(\n    childName: string,\n    childNode: Node,\n    index: Index\n  ): string | null;\n\n  /**\n   * Returns a duplicate node, with the specified immediate child updated.\n   * Any value in the node will be removed.\n   * @param {string} childName The name of the child to update.\n   * @param {!Node} newChildNode The new child node\n   * @return {!Node} The updated node.\n   */\n  updateImmediateChild(childName: string, newChildNode: Node): Node;\n\n  /**\n   * Returns a duplicate node, with the specified child updated.  Any value will\n   * be removed.\n   * @param {!Path} path The path of the child to update.\n   * @param {!Node} newChildNode The new child node, which may be an empty node\n   * @return {!Node} The updated node.\n   */\n  updateChild(path: Path, newChildNode: Node): Node;\n\n  /**\n   * True if the immediate child specified exists\n   * @param {!string} childName\n   * @return {boolean}\n   */\n  hasChild(childName: string): boolean;\n\n  /**\n   * @return {boolean} True if this node has no value or children.\n   */\n  isEmpty(): boolean;\n\n  /**\n   * @return {number} The number of children of this node.\n   */\n  numChildren(): number;\n\n  /**\n   * Calls action for each child.\n   * @param {!Index} index\n   * @param {function(string, !Node)} action Action to be called for\n   * each child.  It's passed the child name and the child node.\n   * @return {*} The first truthy value return by action, or the last falsey one\n   */\n  forEachChild(index: Index, action: (a: string, b: Node) => void): unknown;\n\n  /**\n   * @param exportFormat True for export format (also wire protocol format).\n   * @return Value of this node as JSON.\n   */\n  val(exportFormat?: boolean): unknown;\n\n  /**\n   * @return {string} hash representing the node contents.\n   */\n  hash(): string;\n\n  /**\n   * @param {!Node} other Another node\n   * @return {!number} -1 for less than, 0 for equal, 1 for greater than other\n   */\n  compareTo(other: Node): number;\n\n  /**\n   * @param {!Node} other\n   * @return {boolean} Whether or not this snapshot equals other\n   */\n  equals(other: Node): boolean;\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {!Node} This node, with the specified index now available\n   */\n  withIndex(indexDefinition: Index): Node;\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {boolean}\n   */\n  isIndexed(indexDefinition: Index): boolean;\n}\n\n/**\n *\n * @param {!string} name\n * @param {!Node} node\n * @constructor\n * @struct\n */\nexport class NamedNode {\n  constructor(public name: string, public node: Node) {}\n\n  /**\n   *\n   * @param {!string} name\n   * @param {!Node} node\n   * @return {NamedNode}\n   */\n  static Wrap(name: string, node: Node) {\n    return new NamedNode(name, node);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node, NamedNode } from '../Node';\nimport { MIN_NAME, MAX_NAME } from '../../util/util';\nimport { Comparator } from '../../util/SortedMap';\n\n/**\n *\n * @constructor\n */\nexport abstract class Index {\n  /**\n   * @param {!NamedNode} a\n   * @param {!NamedNode} b\n   * @return {number}\n   */\n  abstract compare(a: NamedNode, b: NamedNode): number;\n\n  /**\n   * @param {!Node} node\n   * @return {boolean}\n   */\n  abstract isDefinedOn(node: Node): boolean;\n\n  /**\n   * @return {function(!NamedNode, !NamedNode):number} A standalone comparison function for\n   * this index\n   */\n  getCompare(): Comparator<NamedNode> {\n    return this.compare.bind(this);\n  }\n\n  /**\n   * Given a before and after value for a node, determine if the indexed value has changed. Even if they are different,\n   * it's possible that the changes are isolated to parts of the snapshot that are not indexed.\n   *\n   * @param {!Node} oldNode\n   * @param {!Node} newNode\n   * @return {boolean} True if the portion of the snapshot being indexed changed between oldNode and newNode\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    const oldWrapped = new NamedNode(MIN_NAME, oldNode);\n    const newWrapped = new NamedNode(MIN_NAME, newNode);\n    return this.compare(oldWrapped, newWrapped) !== 0;\n  }\n\n  /**\n   * @return {!NamedNode} a node wrapper that will sort equal to or less than\n   * any other node wrapper, using this index\n   */\n  minPost(): NamedNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @return {!NamedNode} a node wrapper that will sort greater than or equal to\n   * any other node wrapper, using this index\n   */\n  abstract maxPost(): NamedNode;\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  abstract makePost(indexValue: unknown, name: string): NamedNode;\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  abstract toString(): string;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { doubleToIEEE754String, sha1 } from '../util/util';\nimport { priorityHashText, validatePriorityNode } from './snap';\nimport { Node } from './Node';\nimport { Path } from '../util/Path';\nimport { Index } from './indexes/Index';\nimport { ChildrenNodeConstructor } from './ChildrenNode';\nimport { Indexable } from '../util/misc';\n\nlet __childrenNodeConstructor: ChildrenNodeConstructor;\n\n/**\n * LeafNode is a class for storing leaf nodes in a DataSnapshot.  It\n * implements Node and stores the value of the node (a string,\n * number, or boolean) accessible via getValue().\n */\nexport class LeafNode implements Node {\n  static set __childrenNodeConstructor(val: ChildrenNodeConstructor) {\n    __childrenNodeConstructor = val;\n  }\n\n  static get __childrenNodeConstructor() {\n    return __childrenNodeConstructor;\n  }\n\n  /**\n   * The sort order for comparing leaf nodes of different types. If two leaf nodes have\n   * the same type, the comparison falls back to their value\n   * @type {Array.<!string>}\n   * @const\n   */\n  static VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string'];\n\n  private lazyHash_: string | null = null;\n\n  /**\n   * @implements {Node}\n   * @param {!(string|number|boolean|Object)} value_ The value to store in this leaf node.\n   *                                         The object type is possible in the event of a deferred value\n   * @param {!Node=} priorityNode_ The priority of this node.\n   */\n  constructor(\n    private readonly value_: string | number | boolean | Indexable,\n    private priorityNode_: Node = LeafNode.__childrenNodeConstructor.EMPTY_NODE\n  ) {\n    assert(\n      this.value_ !== undefined && this.value_ !== null,\n      \"LeafNode shouldn't be created with null/undefined value.\"\n    );\n\n    validatePriorityNode(this.priorityNode_);\n  }\n\n  /** @inheritDoc */\n  isLeafNode(): boolean {\n    return true;\n  }\n\n  /** @inheritDoc */\n  getPriority(): Node {\n    return this.priorityNode_;\n  }\n\n  /** @inheritDoc */\n  updatePriority(newPriorityNode: Node): Node {\n    return new LeafNode(this.value_, newPriorityNode);\n  }\n\n  /** @inheritDoc */\n  getImmediateChild(childName: string): Node {\n    // Hack to treat priority as a regular child\n    if (childName === '.priority') {\n      return this.priorityNode_;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\n    }\n  }\n\n  /** @inheritDoc */\n  getChild(path: Path): Node {\n    if (path.isEmpty()) {\n      return this;\n    } else if (path.getFront() === '.priority') {\n      return this.priorityNode_;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasChild(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  getPredecessorChildName(childName: string, childNode: Node): null {\n    return null;\n  }\n\n  /** @inheritDoc */\n  updateImmediateChild(childName: string, newChildNode: Node): Node {\n    if (childName === '.priority') {\n      return this.updatePriority(newChildNode);\n    } else if (newChildNode.isEmpty() && childName !== '.priority') {\n      return this;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(\n        childName,\n        newChildNode\n      ).updatePriority(this.priorityNode_);\n    }\n  }\n\n  /** @inheritDoc */\n  updateChild(path: Path, newChildNode: Node): Node {\n    const front = path.getFront();\n    if (front === null) {\n      return newChildNode;\n    } else if (newChildNode.isEmpty() && front !== '.priority') {\n      return this;\n    } else {\n      assert(\n        front !== '.priority' || path.getLength() === 1,\n        '.priority must be the last token in a path'\n      );\n\n      return this.updateImmediateChild(\n        front,\n        LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(\n          path.popFront(),\n          newChildNode\n        )\n      );\n    }\n  }\n\n  /** @inheritDoc */\n  isEmpty(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  numChildren(): number {\n    return 0;\n  }\n\n  /** @inheritDoc */\n  forEachChild(index: Index, action: (s: string, n: Node) => void): boolean {\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  val(exportFormat?: boolean): {} {\n    if (exportFormat && !this.getPriority().isEmpty()) {\n      return {\n        '.value': this.getValue(),\n        '.priority': this.getPriority().val()\n      };\n    } else {\n      return this.getValue();\n    }\n  }\n\n  /** @inheritDoc */\n  hash(): string {\n    if (this.lazyHash_ === null) {\n      let toHash = '';\n      if (!this.priorityNode_.isEmpty()) {\n        toHash +=\n          'priority:' +\n          priorityHashText(this.priorityNode_.val() as number | string) +\n          ':';\n      }\n\n      const type = typeof this.value_;\n      toHash += type + ':';\n      if (type === 'number') {\n        toHash += doubleToIEEE754String(this.value_ as number);\n      } else {\n        toHash += this.value_;\n      }\n      this.lazyHash_ = sha1(toHash);\n    }\n    return this.lazyHash_;\n  }\n\n  /**\n   * Returns the value of the leaf node.\n   * @return {Object|string|number|boolean} The value of the node.\n   */\n  getValue(): Indexable | string | number | boolean {\n    return this.value_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compareTo(other: Node): number {\n    if (other === LeafNode.__childrenNodeConstructor.EMPTY_NODE) {\n      return 1;\n    } else if (other instanceof LeafNode.__childrenNodeConstructor) {\n      return -1;\n    } else {\n      assert(other.isLeafNode(), 'Unknown node type');\n      return this.compareToLeafNode_(other as LeafNode);\n    }\n  }\n\n  /**\n   * Comparison specifically for two leaf nodes\n   * @param {!LeafNode} otherLeaf\n   * @return {!number}\n   * @private\n   */\n  private compareToLeafNode_(otherLeaf: LeafNode): number {\n    const otherLeafType = typeof otherLeaf.value_;\n    const thisLeafType = typeof this.value_;\n    const otherIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType);\n    const thisIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);\n    assert(otherIndex >= 0, 'Unknown leaf type: ' + otherLeafType);\n    assert(thisIndex >= 0, 'Unknown leaf type: ' + thisLeafType);\n    if (otherIndex === thisIndex) {\n      // Same type, compare values\n      if (thisLeafType === 'object') {\n        // Deferred value nodes are all equal, but we should also never get to this point...\n        return 0;\n      } else {\n        // Note that this works because true > false, all others are number or string comparisons\n        if (this.value_ < otherLeaf.value_) {\n          return -1;\n        } else if (this.value_ === otherLeaf.value_) {\n          return 0;\n        } else {\n          return 1;\n        }\n      }\n    } else {\n      return thisIndex - otherIndex;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  withIndex(): Node {\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isIndexed(): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  equals(other: Node): boolean {\n    /**\n     * @inheritDoc\n     */\n    if (other === this) {\n      return true;\n    } else if (other.isLeafNode()) {\n      const otherLeaf = other as LeafNode;\n      return (\n        this.value_ === otherLeaf.value_ &&\n        this.priorityNode_.equals(otherLeaf.priorityNode_)\n      );\n    } else {\n      return false;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from './Index';\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { NamedNode, Node } from '../Node';\nimport { LeafNode } from '../LeafNode';\n\nlet nodeFromJSON: (a: unknown) => Node;\nlet MAX_NODE: Node;\n\nexport function setNodeFromJSON(val: (a: unknown) => Node) {\n  nodeFromJSON = val;\n}\n\nexport function setMaxNode(val: Node) {\n  MAX_NODE = val;\n}\n\n/**\n * @constructor\n * @extends {Index}\n * @private\n */\nexport class PriorityIndex extends Index {\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    const aPriority = a.node.getPriority();\n    const bPriority = b.node.getPriority();\n    const indexCmp = aPriority.compareTo(bPriority);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    return !node.getPriority().isEmpty();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return !oldNode.getPriority().equals(newNode.getPriority());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  minPost(): NamedNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    return new NamedNode(MAX_NAME, new LeafNode('[PRIORITY-POST]', MAX_NODE));\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  makePost(indexValue: unknown, name: string): NamedNode {\n    const priorityNode = nodeFromJSON(indexValue);\n    return new NamedNode(name, new LeafNode('[PRIORITY-POST]', priorityNode));\n  }\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.priority';\n  }\n}\n\nexport const PRIORITY_INDEX = new PriorityIndex();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, contains, map, safeGet } from '@firebase/util';\nimport { buildChildSet } from './childSet';\n\nimport { NamedNode, Node } from './Node';\nimport { PRIORITY_INDEX } from './indexes/PriorityIndex';\nimport { KEY_INDEX } from './indexes/KeyIndex';\nimport { SortedMap } from '../util/SortedMap';\nimport { Index } from './indexes/Index';\n\nlet _defaultIndexMap: IndexMap;\n\nconst fallbackObject = {};\n\nexport class IndexMap {\n  /**\n   * The default IndexMap for nodes without a priority\n   */\n  static get Default(): IndexMap {\n    assert(\n      fallbackObject && PRIORITY_INDEX,\n      'ChildrenNode.ts has not been loaded'\n    );\n    _defaultIndexMap =\n      _defaultIndexMap ||\n      new IndexMap(\n        { '.priority': fallbackObject },\n        { '.priority': PRIORITY_INDEX }\n      );\n    return _defaultIndexMap;\n  }\n\n  constructor(\n    private indexes_: {\n      [k: string]: SortedMap<NamedNode, Node> | /*FallbackType*/ object;\n    },\n    private indexSet_: { [k: string]: Index }\n  ) {}\n\n  get(indexKey: string): SortedMap<NamedNode, Node> | null {\n    const sortedMap = safeGet(this.indexes_, indexKey);\n    if (!sortedMap) {\n      throw new Error('No index defined for ' + indexKey);\n    }\n\n    if (sortedMap instanceof SortedMap) {\n      return sortedMap;\n    } else {\n      // The index exists, but it falls back to just name comparison. Return null so that the calling code uses the\n      // regular child map\n      return null;\n    }\n  }\n\n  hasIndex(indexDefinition: Index): boolean {\n    return contains(this.indexSet_, indexDefinition.toString());\n  }\n\n  addIndex(\n    indexDefinition: Index,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    assert(\n      indexDefinition !== KEY_INDEX,\n      \"KeyIndex always exists and isn't meant to be added to the IndexMap.\"\n    );\n    const childList = [];\n    let sawIndexedValue = false;\n    const iter = existingChildren.getIterator(NamedNode.Wrap);\n    let next = iter.getNext();\n    while (next) {\n      sawIndexedValue =\n        sawIndexedValue || indexDefinition.isDefinedOn(next.node);\n      childList.push(next);\n      next = iter.getNext();\n    }\n    let newIndex;\n    if (sawIndexedValue) {\n      newIndex = buildChildSet(childList, indexDefinition.getCompare());\n    } else {\n      newIndex = fallbackObject;\n    }\n    const indexName = indexDefinition.toString();\n    const newIndexSet = { ...this.indexSet_ };\n    newIndexSet[indexName] = indexDefinition;\n    const newIndexes = { ...this.indexes_ };\n    newIndexes[indexName] = newIndex;\n    return new IndexMap(newIndexes, newIndexSet);\n  }\n\n  /**\n   * Ensure that this node is properly tracked in any indexes that we're maintaining\n   */\n  addToIndexes(\n    namedNode: NamedNode,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    const newIndexes = map(\n      this.indexes_,\n      (indexedChildren: SortedMap<NamedNode, Node>, indexName: string) => {\n        const index = safeGet(this.indexSet_, indexName);\n        assert(index, 'Missing index implementation for ' + indexName);\n        if (indexedChildren === fallbackObject) {\n          // Check to see if we need to index everything\n          if (index.isDefinedOn(namedNode.node)) {\n            // We need to build this index\n            const childList = [];\n            const iter = existingChildren.getIterator(NamedNode.Wrap);\n            let next = iter.getNext();\n            while (next) {\n              if (next.name !== namedNode.name) {\n                childList.push(next);\n              }\n              next = iter.getNext();\n            }\n            childList.push(namedNode);\n            return buildChildSet(childList, index.getCompare());\n          } else {\n            // No change, this remains a fallback\n            return fallbackObject;\n          }\n        } else {\n          const existingSnap = existingChildren.get(namedNode.name);\n          let newChildren = indexedChildren;\n          if (existingSnap) {\n            newChildren = newChildren.remove(\n              new NamedNode(namedNode.name, existingSnap)\n            );\n          }\n          return newChildren.insert(namedNode, namedNode.node);\n        }\n      }\n    );\n    return new IndexMap(newIndexes, this.indexSet_);\n  }\n\n  /**\n   * Create a new IndexMap instance with the given value removed\n   */\n  removeFromIndexes(\n    namedNode: NamedNode,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    const newIndexes = map(\n      this.indexes_,\n      (indexedChildren: SortedMap<NamedNode, Node>) => {\n        if (indexedChildren === fallbackObject) {\n          // This is the fallback. Just return it, nothing to do in this case\n          return indexedChildren;\n        } else {\n          const existingSnap = existingChildren.get(namedNode.name);\n          if (existingSnap) {\n            return indexedChildren.remove(\n              new NamedNode(namedNode.name, existingSnap)\n            );\n          } else {\n            // No record of this child\n            return indexedChildren;\n          }\n        }\n      }\n    );\n    return new IndexMap(newIndexes, this.indexSet_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { sha1, MAX_NAME, MIN_NAME } from '../util/util';\nimport { SortedMap, SortedMapIterator } from '../util/SortedMap';\nimport { Node, NamedNode } from './Node';\nimport { validatePriorityNode, priorityHashText, setMaxNode } from './snap';\nimport {\n  PRIORITY_INDEX,\n  setMaxNode as setPriorityMaxNode\n} from './indexes/PriorityIndex';\nimport { KEY_INDEX, KeyIndex } from './indexes/KeyIndex';\nimport { IndexMap } from './IndexMap';\nimport { LeafNode } from './LeafNode';\nimport { NAME_COMPARATOR } from './comparators';\nimport { Index } from './indexes/Index';\nimport { Path } from '../util/Path';\n\nexport interface ChildrenNodeConstructor {\n  new (\n    children_: SortedMap<string, Node>,\n    priorityNode_: Node | null,\n    indexMap_: IndexMap\n  ): ChildrenNode;\n  EMPTY_NODE: ChildrenNode;\n}\n\n// TODO: For memory savings, don't store priorityNode_ if it's empty.\n\nlet EMPTY_NODE: ChildrenNode;\n\n/**\n * ChildrenNode is a class for storing internal nodes in a DataSnapshot\n * (i.e. nodes with children).  It implements Node and stores the\n * list of children in the children property, sorted by child name.\n *\n * @constructor\n * @implements {Node}\n */\nexport class ChildrenNode implements Node {\n  private lazyHash_: string | null = null;\n\n  static get EMPTY_NODE(): ChildrenNode {\n    return (\n      EMPTY_NODE ||\n      (EMPTY_NODE = new ChildrenNode(\n        new SortedMap<string, Node>(NAME_COMPARATOR),\n        null,\n        IndexMap.Default\n      ))\n    );\n  }\n\n  /**\n   *\n   * @param {!SortedMap.<string, !Node>} children_ List of children\n   * of this node..\n   * @param {?Node} priorityNode_ The priority of this node (as a snapshot node).\n   * @param {!IndexMap} indexMap_\n   */\n  constructor(\n    private readonly children_: SortedMap<string, Node>,\n    private readonly priorityNode_: Node | null,\n    private indexMap_: IndexMap\n  ) {\n    /**\n     * Note: The only reason we allow null priority is for EMPTY_NODE, since we can't use\n     * EMPTY_NODE as the priority of EMPTY_NODE.  We might want to consider making EMPTY_NODE its own\n     * class instead of an empty ChildrenNode.\n     */\n    if (this.priorityNode_) {\n      validatePriorityNode(this.priorityNode_);\n    }\n\n    if (this.children_.isEmpty()) {\n      assert(\n        !this.priorityNode_ || this.priorityNode_.isEmpty(),\n        'An empty node cannot have a priority'\n      );\n    }\n  }\n\n  /** @inheritDoc */\n  isLeafNode(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  getPriority(): Node {\n    return this.priorityNode_ || EMPTY_NODE;\n  }\n\n  /** @inheritDoc */\n  updatePriority(newPriorityNode: Node): Node {\n    if (this.children_.isEmpty()) {\n      // Don't allow priorities on empty nodes\n      return this;\n    } else {\n      return new ChildrenNode(this.children_, newPriorityNode, this.indexMap_);\n    }\n  }\n\n  /** @inheritDoc */\n  getImmediateChild(childName: string): Node {\n    // Hack to treat priority as a regular child\n    if (childName === '.priority') {\n      return this.getPriority();\n    } else {\n      const child = this.children_.get(childName);\n      return child === null ? EMPTY_NODE : child;\n    }\n  }\n\n  /** @inheritDoc */\n  getChild(path: Path): Node {\n    const front = path.getFront();\n    if (front === null) {\n      return this;\n    }\n\n    return this.getImmediateChild(front).getChild(path.popFront());\n  }\n\n  /** @inheritDoc */\n  hasChild(childName: string): boolean {\n    return this.children_.get(childName) !== null;\n  }\n\n  /** @inheritDoc */\n  updateImmediateChild(childName: string, newChildNode: Node): Node {\n    assert(newChildNode, 'We should always be passing snapshot nodes');\n    if (childName === '.priority') {\n      return this.updatePriority(newChildNode);\n    } else {\n      const namedNode = new NamedNode(childName, newChildNode);\n      let newChildren, newIndexMap;\n      if (newChildNode.isEmpty()) {\n        newChildren = this.children_.remove(childName);\n        newIndexMap = this.indexMap_.removeFromIndexes(\n          namedNode,\n          this.children_\n        );\n      } else {\n        newChildren = this.children_.insert(childName, newChildNode);\n        newIndexMap = this.indexMap_.addToIndexes(namedNode, this.children_);\n      }\n\n      const newPriority = newChildren.isEmpty()\n        ? EMPTY_NODE\n        : this.priorityNode_;\n      return new ChildrenNode(newChildren, newPriority, newIndexMap);\n    }\n  }\n\n  /** @inheritDoc */\n  updateChild(path: Path, newChildNode: Node): Node {\n    const front = path.getFront();\n    if (front === null) {\n      return newChildNode;\n    } else {\n      assert(\n        path.getFront() !== '.priority' || path.getLength() === 1,\n        '.priority must be the last token in a path'\n      );\n      const newImmediateChild = this.getImmediateChild(front).updateChild(\n        path.popFront(),\n        newChildNode\n      );\n      return this.updateImmediateChild(front, newImmediateChild);\n    }\n  }\n\n  /** @inheritDoc */\n  isEmpty(): boolean {\n    return this.children_.isEmpty();\n  }\n\n  /** @inheritDoc */\n  numChildren(): number {\n    return this.children_.count();\n  }\n\n  /**\n   * @private\n   * @type {RegExp}\n   */\n  private static INTEGER_REGEXP_ = /^(0|[1-9]\\d*)$/;\n\n  /** @inheritDoc */\n  val(exportFormat?: boolean): object {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const obj: { [k: string]: unknown } = {};\n    let numKeys = 0,\n      maxKey = 0,\n      allIntegerKeys = true;\n    this.forEachChild(PRIORITY_INDEX, (key: string, childNode: Node) => {\n      obj[key] = childNode.val(exportFormat);\n\n      numKeys++;\n      if (allIntegerKeys && ChildrenNode.INTEGER_REGEXP_.test(key)) {\n        maxKey = Math.max(maxKey, Number(key));\n      } else {\n        allIntegerKeys = false;\n      }\n    });\n\n    if (!exportFormat && allIntegerKeys && maxKey < 2 * numKeys) {\n      // convert to array.\n      const array: unknown[] = [];\n      // eslint-disable-next-line guard-for-in\n      for (const key in obj) {\n        array[(key as unknown) as number] = obj[key];\n      }\n\n      return array;\n    } else {\n      if (exportFormat && !this.getPriority().isEmpty()) {\n        obj['.priority'] = this.getPriority().val();\n      }\n      return obj;\n    }\n  }\n\n  /** @inheritDoc */\n  hash(): string {\n    if (this.lazyHash_ === null) {\n      let toHash = '';\n      if (!this.getPriority().isEmpty()) {\n        toHash +=\n          'priority:' +\n          priorityHashText(this.getPriority().val() as string | number) +\n          ':';\n      }\n\n      this.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n        const childHash = childNode.hash();\n        if (childHash !== '') {\n          toHash += ':' + key + ':' + childHash;\n        }\n      });\n\n      this.lazyHash_ = toHash === '' ? '' : sha1(toHash);\n    }\n    return this.lazyHash_;\n  }\n\n  /** @inheritDoc */\n  getPredecessorChildName(\n    childName: string,\n    childNode: Node,\n    index: Index\n  ): string {\n    const idx = this.resolveIndex_(index);\n    if (idx) {\n      const predecessor = idx.getPredecessorKey(\n        new NamedNode(childName, childNode)\n      );\n      return predecessor ? predecessor.name : null;\n    } else {\n      return this.children_.getPredecessorKey(childName);\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {?string}\n   */\n  getFirstChildName(indexDefinition: Index): string | null {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      const minKey = idx.minKey();\n      return minKey && minKey.name;\n    } else {\n      return this.children_.minKey();\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {?NamedNode}\n   */\n  getFirstChild(indexDefinition: Index): NamedNode | null {\n    const minKey = this.getFirstChildName(indexDefinition);\n    if (minKey) {\n      return new NamedNode(minKey, this.children_.get(minKey));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Given an index, return the key name of the largest value we have, according to that index\n   * @param {!Index} indexDefinition\n   * @return {?string}\n   */\n  getLastChildName(indexDefinition: Index): string | null {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      const maxKey = idx.maxKey();\n      return maxKey && maxKey.name;\n    } else {\n      return this.children_.maxKey();\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {?NamedNode}\n   */\n  getLastChild(indexDefinition: Index): NamedNode | null {\n    const maxKey = this.getLastChildName(indexDefinition);\n    if (maxKey) {\n      return new NamedNode(maxKey, this.children_.get(maxKey));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachChild(\n    index: Index,\n    action: (key: string, node: Node) => boolean | void\n  ): boolean {\n    const idx = this.resolveIndex_(index);\n    if (idx) {\n      return idx.inorderTraversal(wrappedNode => {\n        return action(wrappedNode.name, wrappedNode.node);\n      });\n    } else {\n      return this.children_.inorderTraversal(action);\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {SortedMapIterator}\n   */\n  getIterator(\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    return this.getIteratorFrom(indexDefinition.minPost(), indexDefinition);\n  }\n\n  /**\n   *\n   * @param {!NamedNode} startPost\n   * @param {!Index} indexDefinition\n   * @return {!SortedMapIterator}\n   */\n  getIteratorFrom(\n    startPost: NamedNode,\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      return idx.getIteratorFrom(startPost, key => key);\n    } else {\n      const iterator = this.children_.getIteratorFrom(\n        startPost.name,\n        NamedNode.Wrap\n      );\n      let next = iterator.peek();\n      while (next != null && indexDefinition.compare(next, startPost) < 0) {\n        iterator.getNext();\n        next = iterator.peek();\n      }\n      return iterator;\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {!SortedMapIterator}\n   */\n  getReverseIterator(\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    return this.getReverseIteratorFrom(\n      indexDefinition.maxPost(),\n      indexDefinition\n    );\n  }\n\n  /**\n   * @param {!NamedNode} endPost\n   * @param {!Index} indexDefinition\n   * @return {!SortedMapIterator}\n   */\n  getReverseIteratorFrom(\n    endPost: NamedNode,\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      return idx.getReverseIteratorFrom(endPost, key => {\n        return key;\n      });\n    } else {\n      const iterator = this.children_.getReverseIteratorFrom(\n        endPost.name,\n        NamedNode.Wrap\n      );\n      let next = iterator.peek();\n      while (next != null && indexDefinition.compare(next, endPost) > 0) {\n        iterator.getNext();\n        next = iterator.peek();\n      }\n      return iterator;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compareTo(other: ChildrenNode): number {\n    if (this.isEmpty()) {\n      if (other.isEmpty()) {\n        return 0;\n      } else {\n        return -1;\n      }\n    } else if (other.isLeafNode() || other.isEmpty()) {\n      return 1;\n    } else if (other === MAX_NODE) {\n      return -1;\n    } else {\n      // Must be another node with children.\n      return 0;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  withIndex(indexDefinition: Index): Node {\n    if (\n      indexDefinition === KEY_INDEX ||\n      this.indexMap_.hasIndex(indexDefinition)\n    ) {\n      return this;\n    } else {\n      const newIndexMap = this.indexMap_.addIndex(\n        indexDefinition,\n        this.children_\n      );\n      return new ChildrenNode(this.children_, this.priorityNode_, newIndexMap);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isIndexed(index: Index): boolean {\n    return index === KEY_INDEX || this.indexMap_.hasIndex(index);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  equals(other: Node): boolean {\n    if (other === this) {\n      return true;\n    } else if (other.isLeafNode()) {\n      return false;\n    } else {\n      const otherChildrenNode = other as ChildrenNode;\n      if (!this.getPriority().equals(otherChildrenNode.getPriority())) {\n        return false;\n      } else if (\n        this.children_.count() === otherChildrenNode.children_.count()\n      ) {\n        const thisIter = this.getIterator(PRIORITY_INDEX);\n        const otherIter = otherChildrenNode.getIterator(PRIORITY_INDEX);\n        let thisCurrent = thisIter.getNext();\n        let otherCurrent = otherIter.getNext();\n        while (thisCurrent && otherCurrent) {\n          if (\n            thisCurrent.name !== otherCurrent.name ||\n            !thisCurrent.node.equals(otherCurrent.node)\n          ) {\n            return false;\n          }\n          thisCurrent = thisIter.getNext();\n          otherCurrent = otherIter.getNext();\n        }\n        return thisCurrent === null && otherCurrent === null;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  /**\n   * Returns a SortedMap ordered by index, or null if the default (by-key) ordering can be used\n   * instead.\n   *\n   * @private\n   * @param {!Index} indexDefinition\n   * @return {?SortedMap.<NamedNode, Node>}\n   */\n  private resolveIndex_(\n    indexDefinition: Index\n  ): SortedMap<NamedNode, Node> | null {\n    if (indexDefinition === KEY_INDEX) {\n      return null;\n    } else {\n      return this.indexMap_.get(indexDefinition.toString());\n    }\n  }\n}\n\n/**\n * @constructor\n * @extends {ChildrenNode}\n * @private\n */\nexport class MaxNode extends ChildrenNode {\n  constructor() {\n    super(\n      new SortedMap<string, Node>(NAME_COMPARATOR),\n      ChildrenNode.EMPTY_NODE,\n      IndexMap.Default\n    );\n  }\n\n  compareTo(other: Node): number {\n    if (other === this) {\n      return 0;\n    } else {\n      return 1;\n    }\n  }\n\n  equals(other: Node): boolean {\n    // Not that we every compare it, but MAX_NODE is only ever equal to itself\n    return other === this;\n  }\n\n  getPriority(): MaxNode {\n    return this;\n  }\n\n  getImmediateChild(childName: string): ChildrenNode {\n    return ChildrenNode.EMPTY_NODE;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n}\n\n/**\n * Marker that will sort higher than any other snapshot.\n * @type {!MAX_NODE}\n * @const\n */\nexport const MAX_NODE = new MaxNode();\n\n/**\n * Document NamedNode extensions\n */\ndeclare module './Node' {\n  interface NamedNode {\n    MIN: NamedNode;\n    MAX: NamedNode;\n  }\n}\n\nObject.defineProperties(NamedNode, {\n  MIN: {\n    value: new NamedNode(MIN_NAME, ChildrenNode.EMPTY_NODE)\n  },\n  MAX: {\n    value: new NamedNode(MAX_NAME, MAX_NODE)\n  }\n});\n\n/**\n * Reference Extensions\n */\nKeyIndex.__EMPTY_NODE = ChildrenNode.EMPTY_NODE;\nLeafNode.__childrenNodeConstructor = ChildrenNode;\nsetMaxNode(MAX_NODE);\nsetPriorityMaxNode(MAX_NODE);\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Implementation of an immutable SortedMap using a Left-leaning\n * Red-Black Tree, adapted from the implementation in Mugs\n * (http://mads379.github.com/mugs/) by Mads Hartmann Jensen\n * (mads379@gmail.com).\n *\n * Original paper on Left-leaning Red-Black Trees:\n *   http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf\n *\n * Invariant 1: No red node has a red child\n * Invariant 2: Every leaf path has the same number of black nodes\n * Invariant 3: Only the left child can be red (left leaning)\n */\n\n// TODO: There are some improvements I'd like to make to improve memory / perf:\n//  * Create two prototypes, LLRedNode and LLBlackNode, instead of storing a\n//    color property in every node.\n// TODO: It would also be good (and possibly necessary) to create a base\n// interface for LLRBNode and LLRBEmptyNode.\n\nexport type Comparator<K> = (key1: K, key2: K) => number;\n\n/**\n * An iterator over an LLRBNode.\n */\nexport class SortedMapIterator<K, V, T> {\n  /** @private\n   * @type {Array.<!LLRBNode>}\n   */\n  private nodeStack_: Array<LLRBNode<K, V> | LLRBEmptyNode<K, V>> = [];\n\n  /**\n   * @template K, V, T\n   * @param {LLRBNode|LLRBEmptyNode} node Node to iterate.\n   * @param {?K} startKey\n   * @param {function(K, K): number} comparator\n   * @param {boolean} isReverse_ Whether or not to iterate in reverse\n   * @param {(function(K, V):T)=} resultGenerator_\n   */\n  constructor(\n    node: LLRBNode<K, V> | LLRBEmptyNode<K, V>,\n    startKey: K | null,\n    comparator: Comparator<K>,\n    private isReverse_: boolean,\n    private resultGenerator_: ((k: K, v: V) => T) | null = null\n  ) {\n    let cmp = 1;\n    while (!node.isEmpty()) {\n      node = node as LLRBNode<K, V>;\n      cmp = startKey ? comparator(node.key, startKey) : 1;\n      // flip the comparison if we're going in reverse\n      if (isReverse_) {\n        cmp *= -1;\n      }\n\n      if (cmp < 0) {\n        // This node is less than our start key. ignore it\n        if (this.isReverse_) {\n          node = node.left;\n        } else {\n          node = node.right;\n        }\n      } else if (cmp === 0) {\n        // This node is exactly equal to our start key. Push it on the stack, but stop iterating;\n        this.nodeStack_.push(node);\n        break;\n      } else {\n        // This node is greater than our start key, add it to the stack and move to the next one\n        this.nodeStack_.push(node);\n        if (this.isReverse_) {\n          node = node.right;\n        } else {\n          node = node.left;\n        }\n      }\n    }\n  }\n\n  getNext(): T {\n    if (this.nodeStack_.length === 0) {\n      return null;\n    }\n\n    let node = this.nodeStack_.pop();\n    let result: T;\n    if (this.resultGenerator_) {\n      result = this.resultGenerator_(node.key, node.value);\n    } else {\n      result = ({ key: node.key, value: node.value } as unknown) as T;\n    }\n\n    if (this.isReverse_) {\n      node = node.left;\n      while (!node.isEmpty()) {\n        this.nodeStack_.push(node);\n        node = node.right;\n      }\n    } else {\n      node = node.right;\n      while (!node.isEmpty()) {\n        this.nodeStack_.push(node);\n        node = node.left;\n      }\n    }\n\n    return result;\n  }\n\n  hasNext(): boolean {\n    return this.nodeStack_.length > 0;\n  }\n\n  peek(): T {\n    if (this.nodeStack_.length === 0) {\n      return null;\n    }\n\n    const node = this.nodeStack_[this.nodeStack_.length - 1];\n    if (this.resultGenerator_) {\n      return this.resultGenerator_(node.key, node.value);\n    } else {\n      return ({ key: node.key, value: node.value } as unknown) as T;\n    }\n  }\n}\n\n/**\n * Represents a node in a Left-leaning Red-Black tree.\n */\nexport class LLRBNode<K, V> {\n  color: boolean;\n  left: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  right: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n\n  /**\n   * @template K, V\n   * @param {!K} key Key associated with this node.\n   * @param {!V} value Value associated with this node.\n   * @param {?boolean} color Whether this node is red.\n   * @param {?(LLRBNode|LLRBEmptyNode)=} left Left child.\n   * @param {?(LLRBNode|LLRBEmptyNode)=} right Right child.\n   */\n  constructor(\n    public key: K,\n    public value: V,\n    color: boolean | null,\n    left?: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right?: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ) {\n    this.color = color != null ? color : LLRBNode.RED;\n    this.left =\n      left != null ? left : (SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>);\n    this.right =\n      right != null ? right : (SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>);\n  }\n\n  static RED = true;\n  static BLACK = false;\n\n  /**\n   * Returns a copy of the current node, optionally replacing pieces of it.\n   *\n   * @param {?K} key New key for the node, or null.\n   * @param {?V} value New value for the node, or null.\n   * @param {?boolean} color New color for the node, or null.\n   * @param {?LLRBNode|LLRBEmptyNode} left New left child for the node, or null.\n   * @param {?LLRBNode|LLRBEmptyNode} right New right child for the node, or null.\n   * @return {!LLRBNode} The node copy.\n   */\n  copy(\n    key: K | null,\n    value: V | null,\n    color: boolean | null,\n    left: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ): LLRBNode<K, V> {\n    return new LLRBNode(\n      key != null ? key : this.key,\n      value != null ? value : this.value,\n      color != null ? color : this.color,\n      left != null ? left : this.left,\n      right != null ? right : this.right\n    );\n  }\n\n  /**\n   * @return {number} The total number of nodes in the tree.\n   */\n  count(): number {\n    return this.left.count() + 1 + this.right.count();\n  }\n\n  /**\n   * @return {boolean} True if the tree is empty.\n   */\n  isEmpty(): boolean {\n    return false;\n  }\n\n  /**\n   * Traverses the tree in key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!K, !V):*} action Callback function to be called for each\n   *   node.  If it returns true, traversal is aborted.\n   * @return {*} The first truthy value returned by action, or the last falsey\n   *   value returned by action\n   */\n  inorderTraversal(action: (k: K, v: V) => unknown): boolean {\n    return (\n      this.left.inorderTraversal(action) ||\n      !!action(this.key, this.value) ||\n      this.right.inorderTraversal(action)\n    );\n  }\n\n  /**\n   * Traverses the tree in reverse key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!Object, !Object)} action Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @return {*} True if traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return (\n      this.right.reverseTraversal(action) ||\n      action(this.key, this.value) ||\n      this.left.reverseTraversal(action)\n    );\n  }\n\n  /**\n   * @return {!Object} The minimum node in the tree.\n   * @private\n   */\n  private min_(): LLRBNode<K, V> {\n    if (this.left.isEmpty()) {\n      return this;\n    } else {\n      return (this.left as LLRBNode<K, V>).min_();\n    }\n  }\n\n  /**\n   * @return {!K} The maximum key in the tree.\n   */\n  minKey(): K {\n    return this.min_().key;\n  }\n\n  /**\n   * @return {!K} The maximum key in the tree.\n   */\n  maxKey(): K {\n    if (this.right.isEmpty()) {\n      return this.key;\n    } else {\n      return this.right.maxKey();\n    }\n  }\n\n  /**\n   *\n   * @param {!Object} key Key to insert.\n   * @param {!Object} value Value to insert.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBNode} New tree, with the key/value added.\n   */\n  insert(key: K, value: V, comparator: Comparator<K>): LLRBNode<K, V> {\n    let n: LLRBNode<K, V> = this;\n    const cmp = comparator(key, n.key);\n    if (cmp < 0) {\n      n = n.copy(null, null, null, n.left.insert(key, value, comparator), null);\n    } else if (cmp === 0) {\n      n = n.copy(null, value, null, null, null);\n    } else {\n      n = n.copy(\n        null,\n        null,\n        null,\n        null,\n        n.right.insert(key, value, comparator)\n      );\n    }\n    return n.fixUp_();\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode|LLRBEmptyNode} New tree, with the minimum key removed.\n   */\n  private removeMin_(): LLRBNode<K, V> | LLRBEmptyNode<K, V> {\n    if (this.left.isEmpty()) {\n      return SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>;\n    }\n    let n: LLRBNode<K, V> = this;\n    if (!n.left.isRed_() && !n.left.left.isRed_()) {\n      n = n.moveRedLeft_();\n    }\n    n = n.copy(null, null, null, (n.left as LLRBNode<K, V>).removeMin_(), null);\n    return n.fixUp_();\n  }\n\n  /**\n   * @param {!Object} key The key of the item to remove.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBNode|LLRBEmptyNode} New tree, with the specified item removed.\n   */\n  remove(\n    key: K,\n    comparator: Comparator<K>\n  ): LLRBNode<K, V> | LLRBEmptyNode<K, V> {\n    let n, smallest;\n    n = this;\n    if (comparator(key, n.key) < 0) {\n      if (!n.left.isEmpty() && !n.left.isRed_() && !n.left.left.isRed_()) {\n        n = n.moveRedLeft_();\n      }\n      n = n.copy(null, null, null, n.left.remove(key, comparator), null);\n    } else {\n      if (n.left.isRed_()) {\n        n = n.rotateRight_();\n      }\n      if (!n.right.isEmpty() && !n.right.isRed_() && !n.right.left.isRed_()) {\n        n = n.moveRedRight_();\n      }\n      if (comparator(key, n.key) === 0) {\n        if (n.right.isEmpty()) {\n          return SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>;\n        } else {\n          smallest = (n.right as LLRBNode<K, V>).min_();\n          n = n.copy(\n            smallest.key,\n            smallest.value,\n            null,\n            null,\n            (n.right as LLRBNode<K, V>).removeMin_()\n          );\n        }\n      }\n      n = n.copy(null, null, null, null, n.right.remove(key, comparator));\n    }\n    return n.fixUp_();\n  }\n\n  /**\n   * @private\n   * @return {boolean} Whether this is a RED node.\n   */\n  isRed_(): boolean {\n    return this.color;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree after performing any needed rotations.\n   */\n  private fixUp_(): LLRBNode<K, V> {\n    let n: LLRBNode<K, V> = this;\n    if (n.right.isRed_() && !n.left.isRed_()) {\n      n = n.rotateLeft_();\n    }\n    if (n.left.isRed_() && n.left.left.isRed_()) {\n      n = n.rotateRight_();\n    }\n    if (n.left.isRed_() && n.right.isRed_()) {\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after moveRedLeft.\n   */\n  private moveRedLeft_(): LLRBNode<K, V> {\n    let n = this.colorFlip_();\n    if (n.right.left.isRed_()) {\n      n = n.copy(\n        null,\n        null,\n        null,\n        null,\n        (n.right as LLRBNode<K, V>).rotateRight_()\n      );\n      n = n.rotateLeft_();\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after moveRedRight.\n   */\n  private moveRedRight_(): LLRBNode<K, V> {\n    let n = this.colorFlip_();\n    if (n.left.left.isRed_()) {\n      n = n.rotateRight_();\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after rotateLeft.\n   */\n  private rotateLeft_(): LLRBNode<K, V> {\n    const nl = this.copy(null, null, LLRBNode.RED, null, this.right.left);\n    return this.right.copy(null, null, this.color, nl, null) as LLRBNode<K, V>;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after rotateRight.\n   */\n  private rotateRight_(): LLRBNode<K, V> {\n    const nr = this.copy(null, null, LLRBNode.RED, this.left.right, null);\n    return this.left.copy(null, null, this.color, null, nr) as LLRBNode<K, V>;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after colorFlip.\n   */\n  private colorFlip_(): LLRBNode<K, V> {\n    const left = this.left.copy(null, null, !this.left.color, null, null);\n    const right = this.right.copy(null, null, !this.right.color, null, null);\n    return this.copy(null, null, !this.color, left, right);\n  }\n\n  /**\n   * For testing.\n   *\n   * @private\n   * @return {boolean} True if all is well.\n   */\n  private checkMaxDepth_(): boolean {\n    const blackDepth = this.check_();\n    return Math.pow(2.0, blackDepth) <= this.count() + 1;\n  }\n\n  /**\n   * @private\n   * @return {number} Not sure what this returns exactly. :-).\n   */\n  check_(): number {\n    if (this.isRed_() && this.left.isRed_()) {\n      throw new Error(\n        'Red node has red child(' + this.key + ',' + this.value + ')'\n      );\n    }\n    if (this.right.isRed_()) {\n      throw new Error(\n        'Right child of (' + this.key + ',' + this.value + ') is red'\n      );\n    }\n    const blackDepth = this.left.check_();\n    if (blackDepth !== this.right.check_()) {\n      throw new Error('Black depths differ');\n    } else {\n      return blackDepth + (this.isRed_() ? 0 : 1);\n    }\n  }\n}\n\n/**\n * Represents an empty node (a leaf node in the Red-Black Tree).\n */\nexport class LLRBEmptyNode<K, V> {\n  key: K;\n  value: V;\n  left: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  right: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  color: boolean;\n\n  /**\n   * Returns a copy of the current node.\n   *\n   * @return {!LLRBEmptyNode} The node copy.\n   */\n  copy(\n    key: K | null,\n    value: V | null,\n    color: boolean | null,\n    left: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ): LLRBEmptyNode<K, V> {\n    return this;\n  }\n\n  /**\n   * Returns a copy of the tree, with the specified key/value added.\n   *\n   * @param {!K} key Key to be added.\n   * @param {!V} value Value to be added.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBNode} New tree, with item added.\n   */\n  insert(key: K, value: V, comparator: Comparator<K>): LLRBNode<K, V> {\n    return new LLRBNode(key, value, null);\n  }\n\n  /**\n   * Returns a copy of the tree, with the specified key removed.\n   *\n   * @param {!K} key The key to remove.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBEmptyNode} New tree, with item removed.\n   */\n  remove(key: K, comparator: Comparator<K>): LLRBEmptyNode<K, V> {\n    return this;\n  }\n\n  /**\n   * @return {number} The total number of nodes in the tree.\n   */\n  count(): number {\n    return 0;\n  }\n\n  /**\n   * @return {boolean} True if the tree is empty.\n   */\n  isEmpty(): boolean {\n    return true;\n  }\n\n  /**\n   * Traverses the tree in key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!K, !V):*} action Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @return {boolean} True if traversal was aborted.\n   */\n  inorderTraversal(action: (k: K, v: V) => unknown): boolean {\n    return false;\n  }\n\n  /**\n   * Traverses the tree in reverse key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!K, !V)} action Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @return {boolean} True if traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return false;\n  }\n\n  /**\n   * @return {null}\n   */\n  minKey(): null {\n    return null;\n  }\n\n  /**\n   * @return {null}\n   */\n  maxKey(): null {\n    return null;\n  }\n\n  /**\n   * @private\n   * @return {number} Not sure what this returns exactly. :-).\n   */\n  check_(): number {\n    return 0;\n  }\n\n  /**\n   * @private\n   * @return {boolean} Whether this node is red.\n   */\n  isRed_() {\n    return false;\n  }\n}\n\n/**\n * An immutable sorted map implementation, based on a Left-leaning Red-Black\n * tree.\n */\nexport class SortedMap<K, V> {\n  /**\n   * Always use the same empty node, to reduce memory.\n   * @const\n   */\n  static EMPTY_NODE = new LLRBEmptyNode();\n\n  /**\n   * @template K, V\n   * @param {function(K, K):number} comparator_ Key comparator.\n   * @param {LLRBNode=} root_ (Optional) Root node for the map.\n   */\n  constructor(\n    private comparator_: Comparator<K>,\n    private root_:\n      | LLRBNode<K, V>\n      | LLRBEmptyNode<K, V> = SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>\n  ) {}\n\n  /**\n   * Returns a copy of the map, with the specified key/value added or replaced.\n   * (TODO: We should perhaps rename this method to 'put')\n   *\n   * @param {!K} key Key to be added.\n   * @param {!V} value Value to be added.\n   * @return {!SortedMap.<K, V>} New map, with item added.\n   */\n  insert(key: K, value: V): SortedMap<K, V> {\n    return new SortedMap(\n      this.comparator_,\n      this.root_\n        .insert(key, value, this.comparator_)\n        .copy(null, null, LLRBNode.BLACK, null, null)\n    );\n  }\n\n  /**\n   * Returns a copy of the map, with the specified key removed.\n   *\n   * @param {!K} key The key to remove.\n   * @return {!SortedMap.<K, V>} New map, with item removed.\n   */\n  remove(key: K): SortedMap<K, V> {\n    return new SortedMap(\n      this.comparator_,\n      this.root_\n        .remove(key, this.comparator_)\n        .copy(null, null, LLRBNode.BLACK, null, null)\n    );\n  }\n\n  /**\n   * Returns the value of the node with the given key, or null.\n   *\n   * @param {!K} key The key to look up.\n   * @return {?V} The value of the node with the given key, or null if the\n   * key doesn't exist.\n   */\n  get(key: K): V | null {\n    let cmp;\n    let node = this.root_;\n    while (!node.isEmpty()) {\n      cmp = this.comparator_(key, node.key);\n      if (cmp === 0) {\n        return node.value;\n      } else if (cmp < 0) {\n        node = node.left;\n      } else if (cmp > 0) {\n        node = node.right;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns the key of the item *before* the specified key, or null if key is the first item.\n   * @param {K} key The key to find the predecessor of\n   * @return {?K} The predecessor key.\n   */\n  getPredecessorKey(key: K): K | null {\n    let cmp,\n      node = this.root_,\n      rightParent = null;\n    while (!node.isEmpty()) {\n      cmp = this.comparator_(key, node.key);\n      if (cmp === 0) {\n        if (!node.left.isEmpty()) {\n          node = node.left;\n          while (!node.right.isEmpty()) {\n            node = node.right;\n          }\n          return node.key;\n        } else if (rightParent) {\n          return rightParent.key;\n        } else {\n          return null; // first item.\n        }\n      } else if (cmp < 0) {\n        node = node.left;\n      } else if (cmp > 0) {\n        rightParent = node;\n        node = node.right;\n      }\n    }\n\n    throw new Error(\n      'Attempted to find predecessor key for a nonexistent key.  What gives?'\n    );\n  }\n\n  /**\n   * @return {boolean} True if the map is empty.\n   */\n  isEmpty(): boolean {\n    return this.root_.isEmpty();\n  }\n\n  /**\n   * @return {number} The total number of nodes in the map.\n   */\n  count(): number {\n    return this.root_.count();\n  }\n\n  /**\n   * @return {?K} The minimum key in the map.\n   */\n  minKey(): K | null {\n    return this.root_.minKey();\n  }\n\n  /**\n   * @return {?K} The maximum key in the map.\n   */\n  maxKey(): K | null {\n    return this.root_.maxKey();\n  }\n\n  /**\n   * Traverses the map in key order and calls the specified action function\n   * for each key/value pair.\n   *\n   * @param {function(!K, !V):*} action Callback function to be called\n   * for each key/value pair.  If action returns true, traversal is aborted.\n   * @return {*} The first truthy value returned by action, or the last falsey\n   *   value returned by action\n   */\n  inorderTraversal(action: (k: K, v: V) => unknown): boolean {\n    return this.root_.inorderTraversal(action);\n  }\n\n  /**\n   * Traverses the map in reverse key order and calls the specified action function\n   * for each key/value pair.\n   *\n   * @param {function(!Object, !Object)} action Callback function to be called\n   * for each key/value pair.  If action returns true, traversal is aborted.\n   * @return {*} True if the traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return this.root_.reverseTraversal(action);\n  }\n\n  /**\n   * Returns an iterator over the SortedMap.\n   * @template T\n   * @param {(function(K, V):T)=} resultGenerator\n   * @return {SortedMapIterator.<K, V, T>} The iterator.\n   */\n  getIterator<T>(\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      null,\n      this.comparator_,\n      false,\n      resultGenerator\n    );\n  }\n\n  getIteratorFrom<T>(\n    key: K,\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      key,\n      this.comparator_,\n      false,\n      resultGenerator\n    );\n  }\n\n  getReverseIteratorFrom<T>(\n    key: K,\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      key,\n      this.comparator_,\n      true,\n      resultGenerator\n    );\n  }\n\n  getReverseIterator<T>(\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      null,\n      this.comparator_,\n      true,\n      resultGenerator\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LLRBNode, SortedMap } from '../util/SortedMap';\n\nimport { NamedNode } from './Node';\n\nconst LOG_2 = Math.log(2);\n\n/**\n * @constructor\n */\nclass Base12Num {\n  count: number;\n  private current_: number;\n  private bits_: number;\n\n  /**\n   * @param {number} length\n   */\n  constructor(length: number) {\n    const logBase2 = (num: number) =>\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      parseInt((Math.log(num) / LOG_2) as any, 10);\n    const bitMask = (bits: number) => parseInt(Array(bits + 1).join('1'), 2);\n    this.count = logBase2(length + 1);\n    this.current_ = this.count - 1;\n    const mask = bitMask(this.count);\n    this.bits_ = (length + 1) & mask;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  nextBitIsOne(): boolean {\n    //noinspection JSBitwiseOperatorUsage\n    const result = !(this.bits_ & (0x1 << this.current_));\n    this.current_--;\n    return result;\n  }\n}\n\n/**\n * Takes a list of child nodes and constructs a SortedSet using the given comparison\n * function\n *\n * Uses the algorithm described in the paper linked here:\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1458\n *\n * @template K, V\n * @param {Array.<!NamedNode>} childList Unsorted list of children\n * @param {function(!NamedNode, !NamedNode):number} cmp The comparison method to be used\n * @param {(function(NamedNode):K)=} keyFn An optional function to extract K from a node wrapper, if K's\n *                                                        type is not NamedNode\n * @param {(function(K, K):number)=} mapSortFn An optional override for comparator used by the generated sorted map\n * @return {SortedMap.<K, V>}\n */\nexport const buildChildSet = function<K, V>(\n  childList: NamedNode[],\n  cmp: (a: NamedNode, b: NamedNode) => number,\n  keyFn?: (a: NamedNode) => K,\n  mapSortFn?: (a: K, b: K) => number\n): SortedMap<K, V> {\n  childList.sort(cmp);\n\n  const buildBalancedTree = function(\n    low: number,\n    high: number\n  ): LLRBNode<K, V> | null {\n    const length = high - low;\n    let namedNode: NamedNode;\n    let key: K;\n    if (length === 0) {\n      return null;\n    } else if (length === 1) {\n      namedNode = childList[low];\n      key = keyFn ? keyFn(namedNode) : ((namedNode as unknown) as K);\n      return new LLRBNode(\n        key,\n        (namedNode.node as unknown) as V,\n        LLRBNode.BLACK,\n        null,\n        null\n      );\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const middle = parseInt((length / 2) as any, 10) + low;\n      const left = buildBalancedTree(low, middle);\n      const right = buildBalancedTree(middle + 1, high);\n      namedNode = childList[middle];\n      key = keyFn ? keyFn(namedNode) : ((namedNode as unknown) as K);\n      return new LLRBNode(\n        key,\n        (namedNode.node as unknown) as V,\n        LLRBNode.BLACK,\n        left,\n        right\n      );\n    }\n  };\n\n  const buildFrom12Array = function(base12: Base12Num): LLRBNode<K, V> {\n    let node: LLRBNode<K, V> = null;\n    let root = null;\n    let index = childList.length;\n\n    const buildPennant = function(chunkSize: number, color: boolean) {\n      const low = index - chunkSize;\n      const high = index;\n      index -= chunkSize;\n      const childTree = buildBalancedTree(low + 1, high);\n      const namedNode = childList[low];\n      const key: K = keyFn ? keyFn(namedNode) : ((namedNode as unknown) as K);\n      attachPennant(\n        new LLRBNode(\n          key,\n          (namedNode.node as unknown) as V,\n          color,\n          null,\n          childTree\n        )\n      );\n    };\n\n    const attachPennant = function(pennant: LLRBNode<K, V>) {\n      if (node) {\n        node.left = pennant;\n        node = pennant;\n      } else {\n        root = pennant;\n        node = pennant;\n      }\n    };\n\n    for (let i = 0; i < base12.count; ++i) {\n      const isOne = base12.nextBitIsOne();\n      // The number of nodes taken in each slice is 2^(arr.length - (i + 1))\n      const chunkSize = Math.pow(2, base12.count - (i + 1));\n      if (isOne) {\n        buildPennant(chunkSize, LLRBNode.BLACK);\n      } else {\n        // current == 2\n        buildPennant(chunkSize, LLRBNode.BLACK);\n        buildPennant(chunkSize, LLRBNode.RED);\n      }\n    }\n    return root;\n  };\n\n  const base12 = new Base12Num(childList.length);\n  const root = buildFrom12Array(base12);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return new SortedMap<K, V>(mapSortFn || (cmp as any), root);\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nameCompare } from '../util/util';\nimport { NamedNode } from './Node';\n\nexport function NAME_ONLY_COMPARATOR(left: NamedNode, right: NamedNode) {\n  return nameCompare(left.name, right.name);\n}\n\nexport function NAME_COMPARATOR(left: string, right: string) {\n  return nameCompare(left, right);\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from './ChildrenNode';\nimport { LeafNode } from './LeafNode';\nimport { NamedNode, Node } from './Node';\nimport { contains, assert } from '@firebase/util';\n\nimport { buildChildSet } from './childSet';\nimport { NAME_COMPARATOR, NAME_ONLY_COMPARATOR } from './comparators';\nimport { IndexMap } from './IndexMap';\nimport { PRIORITY_INDEX, setNodeFromJSON } from './indexes/PriorityIndex';\nimport { SortedMap } from '../util/SortedMap';\nimport { each } from '../util/util';\nimport { Indexable } from '../util/misc';\n\nconst USE_HINZE = true;\n\n/**\n * Constructs a snapshot node representing the passed JSON and returns it.\n * @param {*} json JSON to create a node for.\n * @param {?string|?number=} priority Optional priority to use.  This will be ignored if the\n * passed JSON contains a .priority property.\n * @return {!Node}\n */\nexport function nodeFromJSON(\n  json: unknown | null,\n  priority: unknown = null\n): Node {\n  if (json === null) {\n    return ChildrenNode.EMPTY_NODE;\n  }\n\n  if (typeof json === 'object' && '.priority' in json) {\n    priority = json['.priority'];\n  }\n\n  assert(\n    priority === null ||\n      typeof priority === 'string' ||\n      typeof priority === 'number' ||\n      (typeof priority === 'object' && '.sv' in (priority as object)),\n    'Invalid priority type found: ' + typeof priority\n  );\n\n  if (typeof json === 'object' && '.value' in json && json['.value'] !== null) {\n    json = json['.value'];\n  }\n\n  // Valid leaf nodes include non-objects or server-value wrapper objects\n  if (typeof json !== 'object' || '.sv' in json) {\n    const jsonLeaf = json as string | number | boolean | Indexable;\n    return new LeafNode(jsonLeaf, nodeFromJSON(priority));\n  }\n\n  if (!(json instanceof Array) && USE_HINZE) {\n    const children: NamedNode[] = [];\n    let childrenHavePriority = false;\n    const hinzeJsonObj = json;\n    each(hinzeJsonObj, (key, child) => {\n      if (key.substring(0, 1) !== '.') {\n        // Ignore metadata nodes\n        const childNode = nodeFromJSON(child);\n        if (!childNode.isEmpty()) {\n          childrenHavePriority =\n            childrenHavePriority || !childNode.getPriority().isEmpty();\n          children.push(new NamedNode(key, childNode));\n        }\n      }\n    });\n\n    if (children.length === 0) {\n      return ChildrenNode.EMPTY_NODE;\n    }\n\n    const childSet = buildChildSet(\n      children,\n      NAME_ONLY_COMPARATOR,\n      namedNode => namedNode.name,\n      NAME_COMPARATOR\n    ) as SortedMap<string, Node>;\n    if (childrenHavePriority) {\n      const sortedChildSet = buildChildSet(\n        children,\n        PRIORITY_INDEX.getCompare()\n      );\n      return new ChildrenNode(\n        childSet,\n        nodeFromJSON(priority),\n        new IndexMap(\n          { '.priority': sortedChildSet },\n          { '.priority': PRIORITY_INDEX }\n        )\n      );\n    } else {\n      return new ChildrenNode(\n        childSet,\n        nodeFromJSON(priority),\n        IndexMap.Default\n      );\n    }\n  } else {\n    let node: Node = ChildrenNode.EMPTY_NODE;\n    each(json, (key: string, childData: unknown) => {\n      if (contains(json as object, key)) {\n        if (key.substring(0, 1) !== '.') {\n          // ignore metadata nodes.\n          const childNode = nodeFromJSON(childData);\n          if (childNode.isLeafNode() || !childNode.isEmpty()) {\n            node = node.updateImmediateChild(key, childNode);\n          }\n        }\n      }\n    });\n\n    return node.updatePriority(nodeFromJSON(priority));\n  }\n}\n\nsetNodeFromJSON(nodeFromJSON);\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from './Index';\nimport { NamedNode, Node } from '../Node';\nimport { nameCompare } from '../../util/util';\nimport { nodeFromJSON } from '../nodeFromJSON';\n\n/**\n * @constructor\n * @extends {Index}\n * @private\n */\nexport class ValueIndex extends Index {\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    const indexCmp = a.node.compareTo(b.node);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return !oldNode.equals(newNode);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  minPost(): NamedNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MAX;\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  makePost(indexValue: object, name: string): NamedNode {\n    const valueNode = nodeFromJSON(indexValue);\n    return new NamedNode(name, valueNode);\n  }\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.value';\n  }\n}\n\nexport const VALUE_INDEX = new ValueIndex();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  errorPrefix,\n  validateArgCount,\n  validateCallback,\n  validateContextObject,\n  Deferred\n} from '@firebase/util';\nimport { KEY_INDEX } from '../core/snap/indexes/KeyIndex';\nimport { PRIORITY_INDEX } from '../core/snap/indexes/PriorityIndex';\nimport { VALUE_INDEX } from '../core/snap/indexes/ValueIndex';\nimport { PathIndex } from '../core/snap/indexes/PathIndex';\nimport { MIN_NAME, MAX_NAME, ObjectToUniqueKey } from '../core/util/util';\nimport { Path } from '../core/util/Path';\nimport {\n  isValidPriority,\n  validateEventType,\n  validatePathString,\n  validateFirebaseDataArg,\n  validateKey\n} from '../core/util/validation';\n\nimport {\n  ValueEventRegistration,\n  ChildEventRegistration,\n  EventRegistration\n} from '../core/view/EventRegistration';\n\nimport { Repo } from '../core/Repo';\nimport { QueryParams } from '../core/view/QueryParams';\nimport { Reference } from './Reference';\nimport { DataSnapshot } from './DataSnapshot';\n\nlet __referenceConstructor: new (repo: Repo, path: Path) => Query;\n\nexport interface SnapshotCallback {\n  (a: DataSnapshot, b?: string | null): unknown;\n}\n\n/**\n * A Query represents a filter to be applied to a firebase location.  This object purely represents the\n * query expression (and exposes our public API to build the query).  The actual query logic is in ViewBase.js.\n *\n * Since every Firebase reference is a query, Firebase inherits from this object.\n */\nexport class Query {\n  static set __referenceConstructor(val) {\n    __referenceConstructor = val;\n  }\n\n  static get __referenceConstructor() {\n    assert(__referenceConstructor, 'Reference.ts has not been loaded');\n    return __referenceConstructor;\n  }\n\n  constructor(\n    public repo: Repo,\n    public path: Path,\n    private queryParams_: QueryParams,\n    private orderByCalled_: boolean\n  ) {}\n\n  /**\n   * Validates start/end values for queries.\n   * @param {!QueryParams} params\n   * @private\n   */\n  private static validateQueryEndpoints_(params: QueryParams) {\n    let startNode = null;\n    let endNode = null;\n    if (params.hasStart()) {\n      startNode = params.getIndexStartValue();\n    }\n    if (params.hasEnd()) {\n      endNode = params.getIndexEndValue();\n    }\n\n    if (params.getIndex() === KEY_INDEX) {\n      const tooManyArgsError =\n        'Query: When ordering by key, you may only pass one argument to ' +\n        'startAt(), endAt(), or equalTo().';\n      const wrongArgTypeError =\n        'Query: When ordering by key, the argument passed to startAt(), endAt(),' +\n        'or equalTo() must be a string.';\n      if (params.hasStart()) {\n        const startName = params.getIndexStartName();\n        if (startName !== MIN_NAME) {\n          throw new Error(tooManyArgsError);\n        } else if (typeof startNode !== 'string') {\n          throw new Error(wrongArgTypeError);\n        }\n      }\n      if (params.hasEnd()) {\n        const endName = params.getIndexEndName();\n        if (endName !== MAX_NAME) {\n          throw new Error(tooManyArgsError);\n        } else if (typeof endNode !== 'string') {\n          throw new Error(wrongArgTypeError);\n        }\n      }\n    } else if (params.getIndex() === PRIORITY_INDEX) {\n      if (\n        (startNode != null && !isValidPriority(startNode)) ||\n        (endNode != null && !isValidPriority(endNode))\n      ) {\n        throw new Error(\n          'Query: When ordering by priority, the first argument passed to startAt(), ' +\n            'endAt(), or equalTo() must be a valid priority value (null, a number, or a string).'\n        );\n      }\n    } else {\n      assert(\n        params.getIndex() instanceof PathIndex ||\n          params.getIndex() === VALUE_INDEX,\n        'unknown index type.'\n      );\n      if (\n        (startNode != null && typeof startNode === 'object') ||\n        (endNode != null && typeof endNode === 'object')\n      ) {\n        throw new Error(\n          'Query: First argument passed to startAt(), endAt(), or equalTo() cannot be ' +\n            'an object.'\n        );\n      }\n    }\n  }\n\n  /**\n   * Validates that limit* has been called with the correct combination of parameters\n   * @param {!QueryParams} params\n   * @private\n   */\n  private static validateLimit_(params: QueryParams) {\n    if (\n      params.hasStart() &&\n      params.hasEnd() &&\n      params.hasLimit() &&\n      !params.hasAnchoredLimit()\n    ) {\n      throw new Error(\n        \"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\"\n      );\n    }\n  }\n\n  /**\n   * Validates that no other order by call has been made\n   * @param {!string} fnName\n   * @private\n   */\n  private validateNoPreviousOrderByCall_(fnName: string) {\n    if (this.orderByCalled_ === true) {\n      throw new Error(fnName + \": You can't combine multiple orderBy calls.\");\n    }\n  }\n\n  /**\n   * @return {!QueryParams}\n   */\n  getQueryParams(): QueryParams {\n    return this.queryParams_;\n  }\n\n  /**\n   * @return {!Reference}\n   */\n  getRef(): Reference {\n    validateArgCount('Query.ref', 0, 0, arguments.length);\n    // This is a slight hack. We cannot goog.require('fb.api.Firebase'), since Firebase requires fb.api.Query.\n    // However, we will always export 'Firebase' to the global namespace, so it's guaranteed to exist by the time this\n    // method gets called.\n    return new Query.__referenceConstructor(this.repo, this.path) as Reference;\n  }\n\n  /**\n   * @param {!string} eventType\n   * @param {!function(DataSnapshot, string=)} callback\n   * @param {(function(Error)|Object)=} cancelCallbackOrContext\n   * @param {Object=} context\n   * @return {!function(DataSnapshot, string=)}\n   */\n  on(\n    eventType: string,\n    callback: SnapshotCallback,\n    cancelCallbackOrContext?: ((a: Error) => unknown) | object | null,\n    context?: object | null\n  ): SnapshotCallback {\n    validateArgCount('Query.on', 2, 4, arguments.length);\n    validateEventType('Query.on', 1, eventType, false);\n    validateCallback('Query.on', 2, callback, false);\n\n    const ret = Query.getCancelAndContextArgs_(\n      'Query.on',\n      cancelCallbackOrContext,\n      context\n    );\n\n    if (eventType === 'value') {\n      this.onValueEvent(callback, ret.cancel, ret.context);\n    } else {\n      const callbacks: { [k: string]: typeof callback } = {};\n      callbacks[eventType] = callback;\n      this.onChildEvent(callbacks, ret.cancel, ret.context);\n    }\n    return callback;\n  }\n\n  /**\n   * @param {!function(!DataSnapshot)} callback\n   * @param {?function(Error)} cancelCallback\n   * @param {?Object} context\n   * @protected\n   */\n  protected onValueEvent(\n    callback: (a: DataSnapshot) => void,\n    cancelCallback: ((a: Error) => void) | null,\n    context: object | null\n  ) {\n    const container = new ValueEventRegistration(\n      callback,\n      cancelCallback || null,\n      context || null\n    );\n    this.repo.addEventCallbackForQuery(this, container);\n  }\n\n  /**\n   * @param {!Object.<string, !function(!DataSnapshot, ?string)>} callbacks\n   * @param {?function(Error)} cancelCallback\n   * @param {?Object} context\n   * @protected\n   */\n  onChildEvent(\n    callbacks: { [k: string]: SnapshotCallback },\n    cancelCallback: ((a: Error) => unknown) | null,\n    context: object | null\n  ) {\n    const container = new ChildEventRegistration(\n      callbacks,\n      cancelCallback,\n      context\n    );\n    this.repo.addEventCallbackForQuery(this, container);\n  }\n\n  /**\n   * @param {string=} eventType\n   * @param {(function(!DataSnapshot, ?string=))=} callback\n   * @param {Object=} context\n   */\n  off(\n    eventType?: string,\n    callback?: SnapshotCallback,\n    context?: object | null\n  ): void {\n    validateArgCount('Query.off', 0, 3, arguments.length);\n    validateEventType('Query.off', 1, eventType, true);\n    validateCallback('Query.off', 2, callback, true);\n    validateContextObject('Query.off', 3, context, true);\n\n    let container: EventRegistration | null = null;\n    let callbacks: { [k: string]: typeof callback } | null = null;\n    if (eventType === 'value') {\n      const valueCallback = callback || null;\n      container = new ValueEventRegistration(\n        valueCallback,\n        null,\n        context || null\n      );\n    } else if (eventType) {\n      if (callback) {\n        callbacks = {};\n        callbacks[eventType] = callback;\n      }\n      container = new ChildEventRegistration(callbacks, null, context || null);\n    }\n    this.repo.removeEventCallbackForQuery(this, container);\n  }\n\n  /**\n   * Attaches a listener, waits for the first event, and then removes the listener\n   * @param {!string} eventType\n   * @param {!function(!DataSnapshot, string=)} userCallback\n   * @param failureCallbackOrContext\n   * @param context\n   * @return {!firebase.Promise}\n   */\n  once(\n    eventType: string,\n    userCallback?: SnapshotCallback,\n    failureCallbackOrContext?: ((a: Error) => void) | object | null,\n    context?: object | null\n  ): Promise<DataSnapshot> {\n    validateArgCount('Query.once', 1, 4, arguments.length);\n    validateEventType('Query.once', 1, eventType, false);\n    validateCallback('Query.once', 2, userCallback, true);\n\n    const ret = Query.getCancelAndContextArgs_(\n      'Query.once',\n      failureCallbackOrContext,\n      context\n    );\n\n    // TODO: Implement this more efficiently (in particular, use 'get' wire protocol for 'value' event)\n    // TODO: consider actually wiring the callbacks into the promise. We cannot do this without a breaking change\n    // because the API currently expects callbacks will be called synchronously if the data is cached, but this is\n    // against the Promise specification.\n    let firstCall = true;\n    const deferred = new Deferred<DataSnapshot>();\n\n    // A dummy error handler in case a user wasn't expecting promises\n    deferred.promise.catch(() => {});\n\n    const onceCallback = (snapshot: DataSnapshot) => {\n      // NOTE: Even though we unsubscribe, we may get called multiple times if a single action (e.g. set() with JSON)\n      // triggers multiple events (e.g. child_added or child_changed).\n      if (firstCall) {\n        firstCall = false;\n        this.off(eventType, onceCallback);\n\n        if (userCallback) {\n          userCallback.bind(ret.context)(snapshot);\n        }\n        deferred.resolve(snapshot);\n      }\n    };\n\n    this.on(\n      eventType,\n      onceCallback,\n      /*cancel=*/ err => {\n        this.off(eventType, onceCallback);\n\n        if (ret.cancel) {\n          ret.cancel.bind(ret.context)(err);\n        }\n        deferred.reject(err);\n      }\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * Set a limit and anchor it to the start of the window.\n   * @param {!number} limit\n   * @return {!Query}\n   */\n  limitToFirst(limit: number): Query {\n    validateArgCount('Query.limitToFirst', 1, 1, arguments.length);\n    if (\n      typeof limit !== 'number' ||\n      Math.floor(limit) !== limit ||\n      limit <= 0\n    ) {\n      throw new Error(\n        'Query.limitToFirst: First argument must be a positive integer.'\n      );\n    }\n    if (this.queryParams_.hasLimit()) {\n      throw new Error(\n        'Query.limitToFirst: Limit was already set (by another call to limit, ' +\n          'limitToFirst, or limitToLast).'\n      );\n    }\n\n    return new Query(\n      this.repo,\n      this.path,\n      this.queryParams_.limitToFirst(limit),\n      this.orderByCalled_\n    );\n  }\n\n  /**\n   * Set a limit and anchor it to the end of the window.\n   * @param {!number} limit\n   * @return {!Query}\n   */\n  limitToLast(limit: number): Query {\n    validateArgCount('Query.limitToLast', 1, 1, arguments.length);\n    if (\n      typeof limit !== 'number' ||\n      Math.floor(limit) !== limit ||\n      limit <= 0\n    ) {\n      throw new Error(\n        'Query.limitToLast: First argument must be a positive integer.'\n      );\n    }\n    if (this.queryParams_.hasLimit()) {\n      throw new Error(\n        'Query.limitToLast: Limit was already set (by another call to limit, ' +\n          'limitToFirst, or limitToLast).'\n      );\n    }\n\n    return new Query(\n      this.repo,\n      this.path,\n      this.queryParams_.limitToLast(limit),\n      this.orderByCalled_\n    );\n  }\n\n  /**\n   * Given a child path, return a new query ordered by the specified grandchild path.\n   * @param {!string} path\n   * @return {!Query}\n   */\n  orderByChild(path: string): Query {\n    validateArgCount('Query.orderByChild', 1, 1, arguments.length);\n    if (path === '$key') {\n      throw new Error(\n        'Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.'\n      );\n    } else if (path === '$priority') {\n      throw new Error(\n        'Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.'\n      );\n    } else if (path === '$value') {\n      throw new Error(\n        'Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.'\n      );\n    }\n    validatePathString('Query.orderByChild', 1, path, false);\n    this.validateNoPreviousOrderByCall_('Query.orderByChild');\n    const parsedPath = new Path(path);\n    if (parsedPath.isEmpty()) {\n      throw new Error(\n        'Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.'\n      );\n    }\n    const index = new PathIndex(parsedPath);\n    const newParams = this.queryParams_.orderBy(index);\n    Query.validateQueryEndpoints_(newParams);\n\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * Return a new query ordered by the KeyIndex\n   * @return {!Query}\n   */\n  orderByKey(): Query {\n    validateArgCount('Query.orderByKey', 0, 0, arguments.length);\n    this.validateNoPreviousOrderByCall_('Query.orderByKey');\n    const newParams = this.queryParams_.orderBy(KEY_INDEX);\n    Query.validateQueryEndpoints_(newParams);\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * Return a new query ordered by the PriorityIndex\n   * @return {!Query}\n   */\n  orderByPriority(): Query {\n    validateArgCount('Query.orderByPriority', 0, 0, arguments.length);\n    this.validateNoPreviousOrderByCall_('Query.orderByPriority');\n    const newParams = this.queryParams_.orderBy(PRIORITY_INDEX);\n    Query.validateQueryEndpoints_(newParams);\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * Return a new query ordered by the ValueIndex\n   * @return {!Query}\n   */\n  orderByValue(): Query {\n    validateArgCount('Query.orderByValue', 0, 0, arguments.length);\n    this.validateNoPreviousOrderByCall_('Query.orderByValue');\n    const newParams = this.queryParams_.orderBy(VALUE_INDEX);\n    Query.validateQueryEndpoints_(newParams);\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * @param {number|string|boolean|null} value\n   * @param {?string=} name\n   * @return {!Query}\n   */\n  startAt(\n    value: number | string | boolean | null = null,\n    name?: string | null\n  ): Query {\n    validateArgCount('Query.startAt', 0, 2, arguments.length);\n    validateFirebaseDataArg('Query.startAt', 1, value, this.path, true);\n    validateKey('Query.startAt', 2, name, true);\n\n    const newParams = this.queryParams_.startAt(value, name);\n    Query.validateLimit_(newParams);\n    Query.validateQueryEndpoints_(newParams);\n    if (this.queryParams_.hasStart()) {\n      throw new Error(\n        'Query.startAt: Starting point was already set (by another call to startAt ' +\n          'or equalTo).'\n      );\n    }\n\n    // Calling with no params tells us to start at the beginning.\n    if (value === undefined) {\n      value = null;\n      name = null;\n    }\n    return new Query(this.repo, this.path, newParams, this.orderByCalled_);\n  }\n\n  /**\n   * @param {number|string|boolean|null} value\n   * @param {?string=} name\n   * @return {!Query}\n   */\n  endAt(\n    value: number | string | boolean | null = null,\n    name?: string | null\n  ): Query {\n    validateArgCount('Query.endAt', 0, 2, arguments.length);\n    validateFirebaseDataArg('Query.endAt', 1, value, this.path, true);\n    validateKey('Query.endAt', 2, name, true);\n\n    const newParams = this.queryParams_.endAt(value, name);\n    Query.validateLimit_(newParams);\n    Query.validateQueryEndpoints_(newParams);\n    if (this.queryParams_.hasEnd()) {\n      throw new Error(\n        'Query.endAt: Ending point was already set (by another call to endAt or ' +\n          'equalTo).'\n      );\n    }\n\n    return new Query(this.repo, this.path, newParams, this.orderByCalled_);\n  }\n\n  /**\n   * Load the selection of children with exactly the specified value, and, optionally,\n   * the specified name.\n   * @param {number|string|boolean|null} value\n   * @param {string=} name\n   * @return {!Query}\n   */\n  equalTo(value: number | string | boolean | null, name?: string) {\n    validateArgCount('Query.equalTo', 1, 2, arguments.length);\n    validateFirebaseDataArg('Query.equalTo', 1, value, this.path, false);\n    validateKey('Query.equalTo', 2, name, true);\n    if (this.queryParams_.hasStart()) {\n      throw new Error(\n        'Query.equalTo: Starting point was already set (by another call to startAt or ' +\n          'equalTo).'\n      );\n    }\n    if (this.queryParams_.hasEnd()) {\n      throw new Error(\n        'Query.equalTo: Ending point was already set (by another call to endAt or ' +\n          'equalTo).'\n      );\n    }\n    return this.startAt(value, name).endAt(value, name);\n  }\n\n  /**\n   * @return {!string} URL for this location.\n   */\n  toString(): string {\n    validateArgCount('Query.toString', 0, 0, arguments.length);\n\n    return this.repo.toString() + this.path.toUrlEncodedString();\n  }\n\n  // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users.\n  toJSON() {\n    // An optional spacer argument is unnecessary for a string.\n    validateArgCount('Query.toJSON', 0, 1, arguments.length);\n    return this.toString();\n  }\n\n  /**\n   * An object representation of the query parameters used by this Query.\n   * @return {!Object}\n   */\n  queryObject(): object {\n    return this.queryParams_.getQueryObject();\n  }\n\n  /**\n   * @return {!string}\n   */\n  queryIdentifier(): string {\n    const obj = this.queryObject();\n    const id = ObjectToUniqueKey(obj);\n    return id === '{}' ? 'default' : id;\n  }\n\n  /**\n   * Return true if this query and the provided query are equivalent; otherwise, return false.\n   * @param {Query} other\n   * @return {boolean}\n   */\n  isEqual(other: Query): boolean {\n    validateArgCount('Query.isEqual', 1, 1, arguments.length);\n    if (!(other instanceof Query)) {\n      const error =\n        'Query.isEqual failed: First argument must be an instance of firebase.database.Query.';\n      throw new Error(error);\n    }\n\n    const sameRepo = this.repo === other.repo;\n    const samePath = this.path.equals(other.path);\n    const sameQueryIdentifier =\n      this.queryIdentifier() === other.queryIdentifier();\n\n    return sameRepo && samePath && sameQueryIdentifier;\n  }\n\n  /**\n   * Helper used by .on and .once to extract the context and or cancel arguments.\n   * @param {!string} fnName The function name (on or once)\n   * @param {(function(Error)|Object)=} cancelOrContext\n   * @param {Object=} context\n   * @return {{cancel: ?function(Error), context: ?Object}}\n   * @private\n   */\n  private static getCancelAndContextArgs_(\n    fnName: string,\n    cancelOrContext?: ((a: Error) => void) | object | null,\n    context?: object | null\n  ): { cancel: ((a: Error) => void) | null; context: object | null } {\n    const ret: {\n      cancel: ((a: Error) => void) | null;\n      context: object | null;\n    } = { cancel: null, context: null };\n    if (cancelOrContext && context) {\n      ret.cancel = cancelOrContext as (a: Error) => void;\n      validateCallback(fnName, 3, ret.cancel, true);\n\n      ret.context = context;\n      validateContextObject(fnName, 4, ret.context, true);\n    } else if (cancelOrContext) {\n      // we have either a cancel callback or a context.\n      if (typeof cancelOrContext === 'object' && cancelOrContext !== null) {\n        // it's a context!\n        ret.context = cancelOrContext;\n      } else if (typeof cancelOrContext === 'function') {\n        ret.cancel = cancelOrContext as (a: Error) => void;\n      } else {\n        throw new Error(\n          errorPrefix(fnName, 3, true) +\n            ' must either be a cancel callback or a context object.'\n        );\n      }\n    }\n    return ret;\n  }\n\n  get ref(): Reference {\n    return this.getRef();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from '../util/Path';\n\n/**\n *\n * @enum\n */\nexport enum OperationType {\n  OVERWRITE,\n  MERGE,\n  ACK_USER_WRITE,\n  LISTEN_COMPLETE\n}\n\n/**\n * @interface\n */\nexport interface Operation {\n  /**\n   * @type {!OperationSource}\n   */\n  source: OperationSource;\n\n  /**\n   * @type {!OperationType}\n   */\n  type: OperationType;\n\n  /**\n   * @type {!Path}\n   */\n  path: Path;\n\n  /**\n   * @param {string} childName\n   * @return {?Operation}\n   */\n  operationForChild(childName: string): Operation | null;\n}\n\n/**\n * @param {boolean} fromUser\n * @param {boolean} fromServer\n * @param {?string} queryId\n * @param {boolean} tagged\n * @constructor\n */\nexport class OperationSource {\n  constructor(\n    public fromUser: boolean,\n    public fromServer: boolean,\n    public queryId: string | null,\n    public tagged: boolean\n  ) {\n    assert(!tagged || fromServer, 'Tagged queries must be from server.');\n  }\n  /**\n   * @const\n   * @type {!OperationSource}\n   */\n  static User = new OperationSource(\n    /*fromUser=*/ true,\n    false,\n    null,\n    /*tagged=*/ false\n  );\n\n  /**\n   * @const\n   * @type {!OperationSource}\n   */\n  static Server = new OperationSource(\n    false,\n    /*fromServer=*/ true,\n    null,\n    /*tagged=*/ false\n  );\n\n  /**\n   * @param {string} queryId\n   * @return {!OperationSource}\n   */\n  static forServerTaggedQuery = function(queryId: string): OperationSource {\n    return new OperationSource(\n      false,\n      /*fromServer=*/ true,\n      queryId,\n      /*tagged=*/ true\n    );\n  };\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { Index } from './Index';\nimport { ChildrenNode, MAX_NODE } from '../ChildrenNode';\nimport { NamedNode, Node } from '../Node';\nimport { nodeFromJSON } from '../nodeFromJSON';\nimport { Path } from '../../util/Path';\n\n/**\n * @param {!Path} indexPath\n * @constructor\n * @extends {Index}\n */\nexport class PathIndex extends Index {\n  constructor(private indexPath_: Path) {\n    super();\n\n    assert(\n      !indexPath_.isEmpty() && indexPath_.getFront() !== '.priority',\n      \"Can't create PathIndex with empty path or .priority key\"\n    );\n  }\n\n  /**\n   * @param {!Node} snap\n   * @return {!Node}\n   * @protected\n   */\n  protected extractChild(snap: Node): Node {\n    return snap.getChild(this.indexPath_);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    return !node.getChild(this.indexPath_).isEmpty();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    const aChild = this.extractChild(a.node);\n    const bChild = this.extractChild(b.node);\n    const indexCmp = aChild.compareTo(bChild);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  makePost(indexValue: object, name: string): NamedNode {\n    const valueNode = nodeFromJSON(indexValue);\n    const node = ChildrenNode.EMPTY_NODE.updateChild(\n      this.indexPath_,\n      valueNode\n    );\n    return new NamedNode(name, node);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    const node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, MAX_NODE);\n    return new NamedNode(MAX_NAME, node);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return this.indexPath_.slice().join('/');\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { validateArgCount, validateCallback } from '@firebase/util';\nimport { validatePathString } from '../core/util/validation';\nimport { Path } from '../core/util/Path';\nimport { PRIORITY_INDEX } from '../core/snap/indexes/PriorityIndex';\nimport { Node } from '../core/snap/Node';\nimport { Reference } from './Reference';\nimport { Index } from '../core/snap/indexes/Index';\nimport { ChildrenNode } from '../core/snap/ChildrenNode';\n\n/**\n * Class representing a firebase data snapshot.  It wraps a SnapshotNode and\n * surfaces the public methods (val, forEach, etc.) we want to expose.\n */\nexport class DataSnapshot {\n  /**\n   * @param {!Node} node_ A SnapshotNode to wrap.\n   * @param {!Reference} ref_ The ref of the location this snapshot came from.\n   * @param {!Index} index_ The iteration order for this snapshot\n   */\n  constructor(\n    private readonly node_: Node,\n    private readonly ref_: Reference,\n    private readonly index_: Index\n  ) {}\n\n  /**\n   * Retrieves the snapshot contents as JSON.  Returns null if the snapshot is\n   * empty.\n   *\n   * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\n   */\n  val(): unknown {\n    validateArgCount('DataSnapshot.val', 0, 0, arguments.length);\n    return this.node_.val();\n  }\n\n  /**\n   * Returns the snapshot contents as JSON, including priorities of node.  Suitable for exporting\n   * the entire node contents.\n   * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\n   */\n  exportVal(): unknown {\n    validateArgCount('DataSnapshot.exportVal', 0, 0, arguments.length);\n    return this.node_.val(true);\n  }\n\n  // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users\n  toJSON(): unknown {\n    // Optional spacer argument is unnecessary because we're depending on recursion rather than stringifying the content\n    validateArgCount('DataSnapshot.toJSON', 0, 1, arguments.length);\n    return this.exportVal();\n  }\n\n  /**\n   * Returns whether the snapshot contains a non-null value.\n   *\n   * @return {boolean} Whether the snapshot contains a non-null value, or is empty.\n   */\n  exists(): boolean {\n    validateArgCount('DataSnapshot.exists', 0, 0, arguments.length);\n    return !this.node_.isEmpty();\n  }\n\n  /**\n   * Returns a DataSnapshot of the specified child node's contents.\n   *\n   * @param {!string} childPathString Path to a child.\n   * @return {!DataSnapshot} DataSnapshot for child node.\n   */\n  child(childPathString: string): DataSnapshot {\n    validateArgCount('DataSnapshot.child', 0, 1, arguments.length);\n    // Ensure the childPath is a string (can be a number)\n    childPathString = String(childPathString);\n    validatePathString('DataSnapshot.child', 1, childPathString, false);\n\n    const childPath = new Path(childPathString);\n    const childRef = this.ref_.child(childPath);\n    return new DataSnapshot(\n      this.node_.getChild(childPath),\n      childRef,\n      PRIORITY_INDEX\n    );\n  }\n\n  /**\n   * Returns whether the snapshot contains a child at the specified path.\n   *\n   * @param {!string} childPathString Path to a child.\n   * @return {boolean} Whether the child exists.\n   */\n  hasChild(childPathString: string): boolean {\n    validateArgCount('DataSnapshot.hasChild', 1, 1, arguments.length);\n    validatePathString('DataSnapshot.hasChild', 1, childPathString, false);\n\n    const childPath = new Path(childPathString);\n    return !this.node_.getChild(childPath).isEmpty();\n  }\n\n  /**\n   * Returns the priority of the object, or null if no priority was set.\n   *\n   * @return {string|number|null} The priority.\n   */\n  getPriority(): string | number | null {\n    validateArgCount('DataSnapshot.getPriority', 0, 0, arguments.length);\n\n    // typecast here because we never return deferred values or internal priorities (MAX_PRIORITY)\n    return this.node_.getPriority().val() as string | number | null;\n  }\n\n  /**\n   * Iterates through child nodes and calls the specified action for each one.\n   *\n   * @param {function(!DataSnapshot)} action Callback function to be called\n   * for each child.\n   * @return {boolean} True if forEach was canceled by action returning true for\n   * one of the child nodes.\n   */\n  forEach(action: (d: DataSnapshot) => boolean | void): boolean {\n    validateArgCount('DataSnapshot.forEach', 1, 1, arguments.length);\n    validateCallback('DataSnapshot.forEach', 1, action, false);\n\n    if (this.node_.isLeafNode()) {\n      return false;\n    }\n\n    const childrenNode = this.node_ as ChildrenNode;\n    // Sanitize the return value to a boolean. ChildrenNode.forEachChild has a weird return type...\n    return !!childrenNode.forEachChild(this.index_, (key, node) => {\n      return action(\n        new DataSnapshot(node, this.ref_.child(key), PRIORITY_INDEX)\n      );\n    });\n  }\n\n  /**\n   * Returns whether this DataSnapshot has children.\n   * @return {boolean} True if the DataSnapshot contains 1 or more child nodes.\n   */\n  hasChildren(): boolean {\n    validateArgCount('DataSnapshot.hasChildren', 0, 0, arguments.length);\n\n    if (this.node_.isLeafNode()) {\n      return false;\n    } else {\n      return !this.node_.isEmpty();\n    }\n  }\n\n  get key() {\n    return this.ref_.getKey();\n  }\n\n  /**\n   * Returns the number of children for this DataSnapshot.\n   * @return {number} The number of children that this DataSnapshot contains.\n   */\n  numChildren(): number {\n    validateArgCount('DataSnapshot.numChildren', 0, 0, arguments.length);\n\n    return this.node_.numChildren();\n  }\n\n  /**\n   * @return {Reference} The Firebase reference for the location this snapshot's data came from.\n   */\n  getRef(): Reference {\n    validateArgCount('DataSnapshot.ref', 0, 0, arguments.length);\n\n    return this.ref_;\n  }\n\n  get ref() {\n    return this.getRef();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringify } from '@firebase/util';\nimport { Path } from '../util/Path';\nimport { EventRegistration } from './EventRegistration';\nimport { DataSnapshot } from '../../api/DataSnapshot';\n\n/**\n * Encapsulates the data needed to raise an event\n * @interface\n */\nexport interface Event {\n  /**\n   * @return {!Path}\n   */\n  getPath(): Path;\n\n  /**\n   * @return {!string}\n   */\n  getEventType(): string;\n\n  /**\n   * @return {!function()}\n   */\n  getEventRunner(): () => void;\n\n  /**\n   * @return {!string}\n   */\n  toString(): string;\n}\n\nexport type EventType =\n  | 'value'\n  | ' child_added'\n  | ' child_changed'\n  | ' child_moved'\n  | ' child_removed';\n\n/**\n * Encapsulates the data needed to raise an event\n * @implements {Event}\n */\nexport class DataEvent implements Event {\n  /**\n   * @param {!string} eventType One of: value, child_added, child_changed, child_moved, child_removed\n   * @param {!EventRegistration} eventRegistration The function to call to with the event data. User provided\n   * @param {!DataSnapshot} snapshot The data backing the event\n   * @param {?string=} prevName Optional, the name of the previous child for child_* events.\n   */\n  constructor(\n    public eventType: EventType,\n    public eventRegistration: EventRegistration,\n    public snapshot: DataSnapshot,\n    public prevName?: string | null\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  getPath(): Path {\n    const ref = this.snapshot.getRef();\n    if (this.eventType === 'value') {\n      return ref.path;\n    } else {\n      return ref.getParent().path;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventType(): string {\n    return this.eventType;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(): () => void {\n    return this.eventRegistration.getEventRunner(this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return (\n      this.getPath().toString() +\n      ':' +\n      this.eventType +\n      ':' +\n      stringify(this.snapshot.exportVal())\n    );\n  }\n}\n\nexport class CancelEvent implements Event {\n  /**\n   * @param {EventRegistration} eventRegistration\n   * @param {Error} error\n   * @param {!Path} path\n   */\n  constructor(\n    public eventRegistration: EventRegistration,\n    public error: Error,\n    public path: Path\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  getPath(): Path {\n    return this.path;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventType(): string {\n    return 'cancel';\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(): () => void {\n    return this.eventRegistration.getEventRunner(this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return this.path.toString() + ':cancel';\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataSnapshot } from '../../api/DataSnapshot';\nimport { DataEvent, CancelEvent, Event, EventType } from './Event';\nimport { contains, assert } from '@firebase/util';\n\nimport { Path } from '../util/Path';\nimport { Change } from './Change';\nimport { Query } from '../../api/Query';\n\n/**\n * An EventRegistration is basically an event type ('value', 'child_added', etc.) and a callback\n * to be notified of that type of event.\n *\n * That said, it can also contain a cancel callback to be notified if the event is canceled.  And\n * currently, this code is organized around the idea that you would register multiple child_ callbacks\n * together, as a single EventRegistration.  Though currently we don't do that.\n */\nexport interface EventRegistration {\n  /**\n   * True if this container has a callback to trigger for this event type\n   * @param {!string} eventType\n   * @return {boolean}\n   */\n  respondsTo(eventType: string): boolean;\n\n  /**\n   * @param {!Change} change\n   * @param {!Query} query\n   * @return {!Event}\n   */\n  createEvent(change: Change, query: Query): Event;\n\n  /**\n   * Given event data, return a function to trigger the user's callback\n   * @param {!Event} eventData\n   * @return {function()}\n   */\n  getEventRunner(eventData: Event): () => void;\n\n  /**\n   * @param {!Error} error\n   * @param {!Path} path\n   * @return {?CancelEvent}\n   */\n  createCancelEvent(error: Error, path: Path): CancelEvent | null;\n\n  /**\n   * @param {!EventRegistration} other\n   * @return {boolean}\n   */\n  matches(other: EventRegistration): boolean;\n\n  /**\n   * False basically means this is a \"dummy\" callback container being used as a sentinel\n   * to remove all callback containers of a particular type.  (e.g. if the user does\n   * ref.off('value') without specifying a specific callback).\n   *\n   * (TODO: Rework this, since it's hacky)\n   *\n   * @return {boolean}\n   */\n  hasAnyCallback(): boolean;\n}\n\n/**\n * Represents registration for 'value' events.\n */\nexport class ValueEventRegistration implements EventRegistration {\n  /**\n   * @param {?function(!DataSnapshot)} callback_\n   * @param {?function(Error)} cancelCallback_\n   * @param {?Object} context_\n   */\n  constructor(\n    private callback_: ((d: DataSnapshot) => void) | null,\n    private cancelCallback_: ((e: Error) => void) | null,\n    private context_: {} | null\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  respondsTo(eventType: string): boolean {\n    return eventType === 'value';\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createEvent(change: Change, query: Query): DataEvent {\n    const index = query.getQueryParams().getIndex();\n    return new DataEvent(\n      'value',\n      this,\n      new DataSnapshot(change.snapshotNode, query.getRef(), index)\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(eventData: CancelEvent | DataEvent): () => void {\n    const ctx = this.context_;\n    if (eventData.getEventType() === 'cancel') {\n      assert(\n        this.cancelCallback_,\n        'Raising a cancel event on a listener with no cancel callback'\n      );\n      const cancelCB = this.cancelCallback_;\n      return function() {\n        // We know that error exists, we checked above that this is a cancel event\n        cancelCB.call(ctx, (eventData as CancelEvent).error);\n      };\n    } else {\n      const cb = this.callback_;\n      return function() {\n        cb.call(ctx, (eventData as DataEvent).snapshot);\n      };\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createCancelEvent(error: Error, path: Path): CancelEvent | null {\n    if (this.cancelCallback_) {\n      return new CancelEvent(this, error, path);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  matches(other: EventRegistration): boolean {\n    if (!(other instanceof ValueEventRegistration)) {\n      return false;\n    } else if (!other.callback_ || !this.callback_) {\n      // If no callback specified, we consider it to match any callback.\n      return true;\n    } else {\n      return (\n        other.callback_ === this.callback_ && other.context_ === this.context_\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasAnyCallback(): boolean {\n    return this.callback_ !== null;\n  }\n}\n\n/**\n * Represents the registration of 1 or more child_xxx events.\n *\n * Currently, it is always exactly 1 child_xxx event, but the idea is we might let you\n * register a group of callbacks together in the future.\n *\n * @constructor\n * @implements {EventRegistration}\n */\nexport class ChildEventRegistration implements EventRegistration {\n  /**\n   * @param {?Object.<string, function(!DataSnapshot, ?string=)>} callbacks_\n   * @param {?function(Error)} cancelCallback_\n   * @param {Object=} context_\n   */\n  constructor(\n    private callbacks_: {\n      [k: string]: (d: DataSnapshot, s?: string | null) => void;\n    } | null,\n    private cancelCallback_: ((e: Error) => void) | null,\n    private context_?: {}\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  respondsTo(eventType: string): boolean {\n    let eventToCheck =\n      eventType === 'children_added' ? 'child_added' : eventType;\n    eventToCheck =\n      eventToCheck === 'children_removed' ? 'child_removed' : eventToCheck;\n    return contains(this.callbacks_, eventToCheck);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createCancelEvent(error: Error, path: Path): CancelEvent | null {\n    if (this.cancelCallback_) {\n      return new CancelEvent(this, error, path);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createEvent(change: Change, query: Query): DataEvent {\n    assert(change.childName != null, 'Child events should have a childName.');\n    const ref = query.getRef().child(/** @type {!string} */ change.childName);\n    const index = query.getQueryParams().getIndex();\n    return new DataEvent(\n      change.type as EventType,\n      this,\n      new DataSnapshot(change.snapshotNode, ref, index),\n      change.prevName\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(eventData: CancelEvent | DataEvent): () => void {\n    const ctx = this.context_;\n    if (eventData.getEventType() === 'cancel') {\n      assert(\n        this.cancelCallback_,\n        'Raising a cancel event on a listener with no cancel callback'\n      );\n      const cancelCB = this.cancelCallback_;\n      return function() {\n        // We know that error exists, we checked above that this is a cancel event\n        cancelCB.call(ctx, (eventData as CancelEvent).error);\n      };\n    } else {\n      const cb = this.callbacks_[(eventData as DataEvent).eventType];\n      return function() {\n        cb.call(\n          ctx,\n          (eventData as DataEvent).snapshot,\n          (eventData as DataEvent).prevName\n        );\n      };\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  matches(other: EventRegistration): boolean {\n    if (other instanceof ChildEventRegistration) {\n      if (!this.callbacks_ || !other.callbacks_) {\n        return true;\n      } else if (this.context_ === other.context_) {\n        const otherKeys = Object.keys(other.callbacks_);\n        const thisKeys = Object.keys(this.callbacks_);\n        const otherCount = otherKeys.length;\n        const thisCount = thisKeys.length;\n        if (otherCount === thisCount) {\n          // If count is 1, do an exact match on eventType, if either is defined but null, it's a match.\n          // If event types don't match, not a match\n          // If count is not 1, exact match across all\n\n          if (otherCount === 1) {\n            const otherKey = otherKeys[0];\n            const thisKey = thisKeys[0];\n            return (\n              thisKey === otherKey &&\n              (!other.callbacks_[otherKey] ||\n                !this.callbacks_[thisKey] ||\n                other.callbacks_[otherKey] === this.callbacks_[thisKey])\n            );\n          } else {\n            // Exact match on each key.\n            return thisKeys.every(\n              eventType =>\n                other.callbacks_[eventType] === this.callbacks_[eventType]\n            );\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasAnyCallback(): boolean {\n    return this.callbacks_ !== null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from './util/Path';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { Node } from './snap/Node';\n\n/**\n * Helper class to store a sparse set of snapshots.\n */\nexport class SparseSnapshotTree {\n  private value: Node | null = null;\n\n  private readonly children: Map<string, SparseSnapshotTree> = new Map();\n\n  /**\n   * Gets the node stored at the given path if one exists.\n   *\n   * @param path Path to look up snapshot for.\n   * @return The retrieved node, or null.\n   */\n  find(path: Path): Node | null {\n    if (this.value != null) {\n      return this.value.getChild(path);\n    } else if (!path.isEmpty() && this.children.size > 0) {\n      const childKey = path.getFront();\n      path = path.popFront();\n      if (this.children.has(childKey)) {\n        const childTree = this.children.get(childKey);\n        return childTree.find(path);\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Stores the given node at the specified path. If there is already a node\n   * at a shallower path, it merges the new data into that snapshot node.\n   *\n   * @param path Path to look up snapshot for.\n   * @param data The new data, or null.\n   */\n  remember(path: Path, data: Node) {\n    if (path.isEmpty()) {\n      this.value = data;\n      this.children.clear();\n    } else if (this.value !== null) {\n      this.value = this.value.updateChild(path, data);\n    } else {\n      const childKey = path.getFront();\n      if (!this.children.has(childKey)) {\n        this.children.set(childKey, new SparseSnapshotTree());\n      }\n\n      const child = this.children.get(childKey);\n      path = path.popFront();\n      child.remember(path, data);\n    }\n  }\n\n  /**\n   * Purge the data at path from the cache.\n   *\n   * @param path Path to look up snapshot for.\n   * @return True if this node should now be removed.\n   */\n  forget(path: Path): boolean {\n    if (path.isEmpty()) {\n      this.value = null;\n      this.children.clear();\n      return true;\n    } else {\n      if (this.value !== null) {\n        if (this.value.isLeafNode()) {\n          // We're trying to forget a node that doesn't exist\n          return false;\n        } else {\n          const value = this.value;\n          this.value = null;\n\n          const self = this;\n          value.forEachChild(PRIORITY_INDEX, (key, tree) => {\n            self.remember(new Path(key), tree);\n          });\n\n          return this.forget(path);\n        }\n      } else if (this.children.size > 0) {\n        const childKey = path.getFront();\n        path = path.popFront();\n        if (this.children.has(childKey)) {\n          const safeToRemove = this.children.get(childKey).forget(path);\n          if (safeToRemove) {\n            this.children.delete(childKey);\n          }\n        }\n\n        return this.children.size === 0;\n      } else {\n        return true;\n      }\n    }\n  }\n\n  /**\n   * Recursively iterates through all of the stored tree and calls the\n   * callback on each one.\n   *\n   * @param prefixPath Path to look up node for.\n   * @param func The function to invoke for each tree.\n   */\n  forEachTree(prefixPath: Path, func: (a: Path, b: Node) => unknown) {\n    if (this.value !== null) {\n      func(prefixPath, this.value);\n    } else {\n      this.forEachChild((key, tree) => {\n        const path = new Path(prefixPath.toString() + '/' + key);\n        tree.forEachTree(path, func);\n      });\n    }\n  }\n\n  /**\n   * Iterates through each immediate child and triggers the callback.\n   *\n   * @param func The function to invoke for each child.\n   */\n  forEachChild(func: (a: string, b: SparseSnapshotTree) => void) {\n    this.children.forEach((tree, key) => {\n      func(key, tree);\n    });\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from './Path';\nimport { SparseSnapshotTree } from '../SparseSnapshotTree';\nimport { LeafNode } from '../snap/LeafNode';\nimport { nodeFromJSON } from '../snap/nodeFromJSON';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { Node } from '../snap/Node';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { Indexable } from './misc';\n\n/**\n * Generate placeholders for deferred values.\n * @param {?Object} values\n * @return {!Object}\n */\nexport const generateWithValues = function(\n  values: {\n    [k: string]: unknown;\n  } | null\n): { [k: string]: unknown } {\n  values = values || {};\n  values['timestamp'] = values['timestamp'] || new Date().getTime();\n  return values;\n};\n\n/**\n * Value to use when firing local events. When writing server values, fire\n * local events with an approximate value, otherwise return value as-is.\n * @param {(Object|string|number|boolean)} value\n * @param {!Object} serverValues\n * @return {!(string|number|boolean)}\n */\nexport const resolveDeferredValue = function(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value: { [k: string]: any } | string | number | boolean,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  serverValues: { [k: string]: any }\n): string | number | boolean {\n  if (!value || typeof value !== 'object') {\n    return value as string | number | boolean;\n  } else {\n    assert('.sv' in value, 'Unexpected leaf node or priority contents');\n    return serverValues[value['.sv']];\n  }\n};\n\n/**\n * Recursively replace all deferred values and priorities in the tree with the\n * specified generated replacement values.\n * @param {!SparseSnapshotTree} tree\n * @param {!Object} serverValues\n * @return {!SparseSnapshotTree}\n */\nexport const resolveDeferredValueTree = function(\n  tree: SparseSnapshotTree,\n  serverValues: object\n): SparseSnapshotTree {\n  const resolvedTree = new SparseSnapshotTree();\n  tree.forEachTree(new Path(''), (path, node) => {\n    resolvedTree.remember(\n      path,\n      resolveDeferredValueSnapshot(node, serverValues)\n    );\n  });\n  return resolvedTree;\n};\n\n/**\n * Recursively replace all deferred values and priorities in the node with the\n * specified generated replacement values.  If there are no server values in the node,\n * it'll be returned as-is.\n * @param {!Node} node\n * @param {!Object} serverValues\n * @return {!Node}\n */\nexport const resolveDeferredValueSnapshot = function(\n  node: Node,\n  serverValues: object\n): Node {\n  const rawPri = node.getPriority().val() as\n    | Indexable\n    | boolean\n    | null\n    | number\n    | string;\n  const priority = resolveDeferredValue(rawPri, serverValues);\n  let newNode: Node;\n\n  if (node.isLeafNode()) {\n    const leafNode = node as LeafNode;\n    const value = resolveDeferredValue(leafNode.getValue(), serverValues);\n    if (\n      value !== leafNode.getValue() ||\n      priority !== leafNode.getPriority().val()\n    ) {\n      return new LeafNode(value, nodeFromJSON(priority));\n    } else {\n      return node;\n    }\n  } else {\n    const childrenNode = node as ChildrenNode;\n    newNode = childrenNode;\n    if (priority !== childrenNode.getPriority().val()) {\n      newNode = newNode.updatePriority(new LeafNode(priority));\n    }\n    childrenNode.forEachChild(PRIORITY_INDEX, (childName, childNode) => {\n      const newChildNode = resolveDeferredValueSnapshot(\n        childNode,\n        serverValues\n      );\n      if (newChildNode !== childNode) {\n        newNode = newNode.updateImmediateChild(childName, newChildNode);\n      }\n    });\n    return newNode;\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SortedMap } from './SortedMap';\nimport { Path } from './Path';\nimport { stringCompare, each } from './util';\n\nlet emptyChildrenSingleton: SortedMap<string, ImmutableTree<null>>;\n\n/**\n * Singleton empty children collection.\n *\n * @const\n * @type {!SortedMap.<string, !ImmutableTree.<?>>}\n */\nconst EmptyChildren = (): SortedMap<string, ImmutableTree<null>> => {\n  if (!emptyChildrenSingleton) {\n    emptyChildrenSingleton = new SortedMap<string, ImmutableTree<null>>(\n      stringCompare\n    );\n  }\n  return emptyChildrenSingleton;\n};\n\n/**\n * A tree with immutable elements.\n */\nexport class ImmutableTree<T> {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static Empty = new ImmutableTree<any>(null);\n\n  /**\n   * @template T\n   * @param {!Object.<string, !T>} obj\n   * @return {!ImmutableTree.<!T>}\n   */\n  static fromObject<T>(obj: { [k: string]: T }): ImmutableTree<T> {\n    let tree: ImmutableTree<T> = ImmutableTree.Empty;\n    each(obj, (childPath: string, childSnap: T) => {\n      tree = tree.set(new Path(childPath), childSnap);\n    });\n    return tree;\n  }\n\n  /**\n   * @template T\n   * @param {?T} value\n   * @param {SortedMap.<string, !ImmutableTree.<T>>=} children\n   */\n  constructor(\n    public readonly value: T | null,\n    public readonly children: SortedMap<\n      string,\n      ImmutableTree<T>\n    > = EmptyChildren()\n  ) {}\n\n  /**\n   * True if the value is empty and there are no children\n   * @return {boolean}\n   */\n  isEmpty(): boolean {\n    return this.value === null && this.children.isEmpty();\n  }\n\n  /**\n   * Given a path and predicate, return the first node and the path to that node\n   * where the predicate returns true.\n   *\n   * TODO Do a perf test -- If we're creating a bunch of {path: value:} objects\n   * on the way back out, it may be better to pass down a pathSoFar obj.\n   *\n   * @param {!Path} relativePath The remainder of the path\n   * @param {function(T):boolean} predicate The predicate to satisfy to return a\n   *   node\n   * @return {?{path:!Path, value:!T}}\n   */\n  findRootMostMatchingPathAndValue(\n    relativePath: Path,\n    predicate: (a: T) => boolean\n  ): { path: Path; value: T } | null {\n    if (this.value != null && predicate(this.value)) {\n      return { path: Path.Empty, value: this.value };\n    } else {\n      if (relativePath.isEmpty()) {\n        return null;\n      } else {\n        const front = relativePath.getFront();\n        const child = this.children.get(front);\n        if (child !== null) {\n          const childExistingPathAndValue = child.findRootMostMatchingPathAndValue(\n            relativePath.popFront(),\n            predicate\n          );\n          if (childExistingPathAndValue != null) {\n            const fullPath = new Path(front).child(\n              childExistingPathAndValue.path\n            );\n            return { path: fullPath, value: childExistingPathAndValue.value };\n          } else {\n            return null;\n          }\n        } else {\n          return null;\n        }\n      }\n    }\n  }\n\n  /**\n   * Find, if it exists, the shortest subpath of the given path that points a defined\n   * value in the tree\n   * @param {!Path} relativePath\n   * @return {?{path: !Path, value: !T}}\n   */\n  findRootMostValueAndPath(\n    relativePath: Path\n  ): { path: Path; value: T } | null {\n    return this.findRootMostMatchingPathAndValue(relativePath, () => true);\n  }\n\n  /**\n   * @param {!Path} relativePath\n   * @return {!ImmutableTree.<T>} The subtree at the given path\n   */\n  subtree(relativePath: Path): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      return this;\n    } else {\n      const front = relativePath.getFront();\n      const childTree = this.children.get(front);\n      if (childTree !== null) {\n        return childTree.subtree(relativePath.popFront());\n      } else {\n        return ImmutableTree.Empty;\n      }\n    }\n  }\n\n  /**\n   * Sets a value at the specified path.\n   *\n   * @param {!Path} relativePath Path to set value at.\n   * @param {?T} toSet Value to set.\n   * @return {!ImmutableTree.<T>} Resulting tree.\n   */\n  set(relativePath: Path, toSet: T | null): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      return new ImmutableTree(toSet, this.children);\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front) || ImmutableTree.Empty;\n      const newChild = child.set(relativePath.popFront(), toSet);\n      const newChildren = this.children.insert(front, newChild);\n      return new ImmutableTree(this.value, newChildren);\n    }\n  }\n\n  /**\n   * Removes the value at the specified path.\n   *\n   * @param {!Path} relativePath Path to value to remove.\n   * @return {!ImmutableTree.<T>} Resulting tree.\n   */\n  remove(relativePath: Path): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      if (this.children.isEmpty()) {\n        return ImmutableTree.Empty;\n      } else {\n        return new ImmutableTree(null, this.children);\n      }\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front);\n      if (child) {\n        const newChild = child.remove(relativePath.popFront());\n        let newChildren;\n        if (newChild.isEmpty()) {\n          newChildren = this.children.remove(front);\n        } else {\n          newChildren = this.children.insert(front, newChild);\n        }\n        if (this.value === null && newChildren.isEmpty()) {\n          return ImmutableTree.Empty;\n        } else {\n          return new ImmutableTree(this.value, newChildren);\n        }\n      } else {\n        return this;\n      }\n    }\n  }\n\n  /**\n   * Gets a value from the tree.\n   *\n   * @param {!Path} relativePath Path to get value for.\n   * @return {?T} Value at path, or null.\n   */\n  get(relativePath: Path): T | null {\n    if (relativePath.isEmpty()) {\n      return this.value;\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front);\n      if (child) {\n        return child.get(relativePath.popFront());\n      } else {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Replace the subtree at the specified path with the given new tree.\n   *\n   * @param {!Path} relativePath Path to replace subtree for.\n   * @param {!ImmutableTree} newTree New tree.\n   * @return {!ImmutableTree} Resulting tree.\n   */\n  setTree(relativePath: Path, newTree: ImmutableTree<T>): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      return newTree;\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front) || ImmutableTree.Empty;\n      const newChild = child.setTree(relativePath.popFront(), newTree);\n      let newChildren;\n      if (newChild.isEmpty()) {\n        newChildren = this.children.remove(front);\n      } else {\n        newChildren = this.children.insert(front, newChild);\n      }\n      return new ImmutableTree(this.value, newChildren);\n    }\n  }\n\n  /**\n   * Performs a depth first fold on this tree. Transforms a tree into a single\n   * value, given a function that operates on the path to a node, an optional\n   * current value, and a map of child names to folded subtrees\n   * @template V\n   * @param {function(Path, ?T, Object.<string, V>):V} fn\n   * @return {V}\n   */\n  fold<V>(fn: (path: Path, value: T, children: { [k: string]: V }) => V): V {\n    return this.fold_(Path.Empty, fn);\n  }\n\n  /**\n   * Recursive helper for public-facing fold() method\n   * @template V\n   * @param {!Path} pathSoFar\n   * @param {function(Path, ?T, Object.<string, V>):V} fn\n   * @return {V}\n   * @private\n   */\n  private fold_<V>(\n    pathSoFar: Path,\n    fn: (path: Path, value: T | null, children: { [k: string]: V }) => V\n  ): V {\n    const accum: { [k: string]: V } = {};\n    this.children.inorderTraversal(\n      (childKey: string, childTree: ImmutableTree<T>) => {\n        accum[childKey] = childTree.fold_(pathSoFar.child(childKey), fn);\n      }\n    );\n    return fn(pathSoFar, this.value, accum);\n  }\n\n  /**\n   * Find the first matching value on the given path. Return the result of applying f to it.\n   * @template V\n   * @param {!Path} path\n   * @param {!function(!Path, !T):?V} f\n   * @return {?V}\n   */\n  findOnPath<V>(path: Path, f: (path: Path, value: T) => V | null): V | null {\n    return this.findOnPath_(path, Path.Empty, f);\n  }\n\n  private findOnPath_<V>(\n    pathToFollow: Path,\n    pathSoFar: Path,\n    f: (path: Path, value: T) => V | null\n  ): V | null {\n    const result = this.value ? f(pathSoFar, this.value) : false;\n    if (result) {\n      return result;\n    } else {\n      if (pathToFollow.isEmpty()) {\n        return null;\n      } else {\n        const front = pathToFollow.getFront()!;\n        const nextChild = this.children.get(front);\n        if (nextChild) {\n          return nextChild.findOnPath_(\n            pathToFollow.popFront(),\n            pathSoFar.child(front),\n            f\n          );\n        } else {\n          return null;\n        }\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {!Path} path\n   * @param {!function(!Path, !T)} f\n   * @returns {!ImmutableTree.<T>}\n   */\n  foreachOnPath(\n    path: Path,\n    f: (path: Path, value: T) => void\n  ): ImmutableTree<T> {\n    return this.foreachOnPath_(path, Path.Empty, f);\n  }\n\n  private foreachOnPath_(\n    pathToFollow: Path,\n    currentRelativePath: Path,\n    f: (path: Path, value: T) => void\n  ): ImmutableTree<T> {\n    if (pathToFollow.isEmpty()) {\n      return this;\n    } else {\n      if (this.value) {\n        f(currentRelativePath, this.value);\n      }\n      const front = pathToFollow.getFront();\n      const nextChild = this.children.get(front);\n      if (nextChild) {\n        return nextChild.foreachOnPath_(\n          pathToFollow.popFront(),\n          currentRelativePath.child(front),\n          f\n        );\n      } else {\n        return ImmutableTree.Empty;\n      }\n    }\n  }\n\n  /**\n   * Calls the given function for each node in the tree that has a value.\n   *\n   * @param {function(!Path, !T)} f A function to be called with\n   *   the path from the root of the tree to a node, and the value at that node.\n   *   Called in depth-first order.\n   */\n  foreach(f: (path: Path, value: T) => void) {\n    this.foreach_(Path.Empty, f);\n  }\n\n  private foreach_(\n    currentRelativePath: Path,\n    f: (path: Path, value: T) => void\n  ) {\n    this.children.inorderTraversal((childName, childTree) => {\n      childTree.foreach_(currentRelativePath.child(childName), f);\n    });\n    if (this.value) {\n      f(currentRelativePath, this.value);\n    }\n  }\n\n  /**\n   *\n   * @param {function(string, !T)} f\n   */\n  foreachChild(f: (name: string, value: T) => void) {\n    this.children.inorderTraversal(\n      (childName: string, childTree: ImmutableTree<T>) => {\n        if (childTree.value) {\n          f(childName, childTree.value);\n        }\n      }\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CacheNode } from './view/CacheNode';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { assert } from '@firebase/util';\nimport { ViewCache } from './view/ViewCache';\nimport { View } from './view/View';\nimport { Operation } from './operation/Operation';\nimport { WriteTreeRef } from './WriteTree';\nimport { Query } from '../api/Query';\nimport { EventRegistration } from './view/EventRegistration';\nimport { Node } from './snap/Node';\nimport { Path } from './util/Path';\nimport { Event } from './view/Event';\nimport { Reference, ReferenceConstructor } from '../api/Reference';\n\nlet __referenceConstructor: ReferenceConstructor;\n\n/**\n * SyncPoint represents a single location in a SyncTree with 1 or more event registrations, meaning we need to\n * maintain 1 or more Views at this location to cache server data and raise appropriate events for server changes\n * and user writes (set, transaction, update).\n *\n * It's responsible for:\n *  - Maintaining the set of 1 or more views necessary at this location (a SyncPoint with 0 views should be removed).\n *  - Proxying user / server operations to the views as appropriate (i.e. applyServerOverwrite,\n *    applyUserOverwrite, etc.)\n */\nexport class SyncPoint {\n  static set __referenceConstructor(val: ReferenceConstructor) {\n    assert(\n      !__referenceConstructor,\n      '__referenceConstructor has already been defined'\n    );\n    __referenceConstructor = val;\n  }\n\n  static get __referenceConstructor() {\n    assert(__referenceConstructor, 'Reference.ts has not been loaded');\n    return __referenceConstructor;\n  }\n\n  /**\n   * The Views being tracked at this location in the tree, stored as a map where the key is a\n   * queryId and the value is the View for that query.\n   *\n   * NOTE: This list will be quite small (usually 1, but perhaps 2 or 3; any more is an odd use case).\n   */\n  private readonly views: Map<string, View> = new Map();\n\n  isEmpty(): boolean {\n    return this.views.size === 0;\n  }\n\n  applyOperation(\n    operation: Operation,\n    writesCache: WriteTreeRef,\n    optCompleteServerCache: Node | null\n  ): Event[] {\n    const queryId = operation.source.queryId;\n    if (queryId !== null) {\n      const view = this.views.get(queryId);\n      assert(view != null, 'SyncTree gave us an op for an invalid query.');\n      return view.applyOperation(\n        operation,\n        writesCache,\n        optCompleteServerCache\n      );\n    } else {\n      let events: Event[] = [];\n\n      for (const view of this.views.values()) {\n        events = events.concat(\n          view.applyOperation(operation, writesCache, optCompleteServerCache)\n        );\n      }\n\n      return events;\n    }\n  }\n\n  /**\n   * Add an event callback for the specified query.\n   *\n   * @param {!Query} query\n   * @param {!EventRegistration} eventRegistration\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} serverCache Complete server cache, if we have it.\n   * @param {boolean} serverCacheComplete\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  addEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration,\n    writesCache: WriteTreeRef,\n    serverCache: Node | null,\n    serverCacheComplete: boolean\n  ): Event[] {\n    const queryId = query.queryIdentifier();\n    let view = this.views.get(queryId);\n    if (!view) {\n      // TODO: make writesCache take flag for complete server node\n      let eventCache = writesCache.calcCompleteEventCache(\n        serverCacheComplete ? serverCache : null\n      );\n      let eventCacheComplete = false;\n      if (eventCache) {\n        eventCacheComplete = true;\n      } else if (serverCache instanceof ChildrenNode) {\n        eventCache = writesCache.calcCompleteEventChildren(serverCache);\n        eventCacheComplete = false;\n      } else {\n        eventCache = ChildrenNode.EMPTY_NODE;\n        eventCacheComplete = false;\n      }\n      const viewCache = new ViewCache(\n        new CacheNode(\n          /** @type {!Node} */ eventCache,\n          eventCacheComplete,\n          false\n        ),\n        new CacheNode(\n          /** @type {!Node} */ serverCache,\n          serverCacheComplete,\n          false\n        )\n      );\n      view = new View(query, viewCache);\n      this.views.set(queryId, view);\n    }\n\n    // This is guaranteed to exist now, we just created anything that was missing\n    view.addEventRegistration(eventRegistration);\n    return view.getInitialEvents(eventRegistration);\n  }\n\n  /**\n   * Remove event callback(s).  Return cancelEvents if a cancelError is specified.\n   *\n   * If query is the default query, we'll check all views for the specified eventRegistration.\n   * If eventRegistration is null, we'll remove all callbacks for the specified view(s).\n   *\n   * @param {!Query} query\n   * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\n   * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\n   * @return {{removed:!Array.<!Query>, events:!Array.<!Event>}} removed queries and any cancel events\n   */\n  removeEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration | null,\n    cancelError?: Error\n  ): { removed: Query[]; events: Event[] } {\n    const queryId = query.queryIdentifier();\n    const removed: Query[] = [];\n    let cancelEvents: Event[] = [];\n    const hadCompleteView = this.hasCompleteView();\n    if (queryId === 'default') {\n      // When you do ref.off(...), we search all views for the registration to remove.\n      for (const [viewQueryId, view] of this.views.entries()) {\n        cancelEvents = cancelEvents.concat(\n          view.removeEventRegistration(eventRegistration, cancelError)\n        );\n        if (view.isEmpty()) {\n          this.views.delete(viewQueryId);\n\n          // We'll deal with complete views later.\n          if (\n            !view\n              .getQuery()\n              .getQueryParams()\n              .loadsAllData()\n          ) {\n            removed.push(view.getQuery());\n          }\n        }\n      }\n    } else {\n      // remove the callback from the specific view.\n      const view = this.views.get(queryId);\n      if (view) {\n        cancelEvents = cancelEvents.concat(\n          view.removeEventRegistration(eventRegistration, cancelError)\n        );\n        if (view.isEmpty()) {\n          this.views.delete(queryId);\n\n          // We'll deal with complete views later.\n          if (\n            !view\n              .getQuery()\n              .getQueryParams()\n              .loadsAllData()\n          ) {\n            removed.push(view.getQuery());\n          }\n        }\n      }\n    }\n\n    if (hadCompleteView && !this.hasCompleteView()) {\n      // We removed our last complete view.\n      removed.push(\n        new SyncPoint.__referenceConstructor(query.repo, query.path)\n      );\n    }\n\n    return { removed, events: cancelEvents };\n  }\n\n  getQueryViews(): View[] {\n    const result = [];\n    for (const view of this.views.values()) {\n      if (\n        !view\n          .getQuery()\n          .getQueryParams()\n          .loadsAllData()\n      ) {\n        result.push(view);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * @param path The path to the desired complete snapshot\n   * @return A complete cache, if it exists\n   */\n  getCompleteServerCache(path: Path): Node | null {\n    let serverCache: Node | null = null;\n    for (const view of this.views.values()) {\n      serverCache = serverCache || view.getCompleteServerCache(path);\n    }\n    return serverCache;\n  }\n\n  viewForQuery(query: Query): View | null {\n    const params = query.getQueryParams();\n    if (params.loadsAllData()) {\n      return this.getCompleteView();\n    } else {\n      const queryId = query.queryIdentifier();\n      return this.views.get(queryId);\n    }\n  }\n\n  viewExistsForQuery(query: Query): boolean {\n    return this.viewForQuery(query) != null;\n  }\n\n  hasCompleteView(): boolean {\n    return this.getCompleteView() != null;\n  }\n\n  getCompleteView(): View | null {\n    for (const view of this.views.values()) {\n      if (\n        view\n          .getQuery()\n          .getQueryParams()\n          .loadsAllData()\n      ) {\n        return view;\n      }\n    }\n    return null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from '../util/Path';\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { ImmutableTree } from '../util/ImmutableTree';\n\nexport class AckUserWrite implements Operation {\n  /** @inheritDoc */\n  type = OperationType.ACK_USER_WRITE;\n\n  /** @inheritDoc */\n  source = OperationSource.User;\n\n  /**\n   *\n   * @param {!Path} path\n   * @param {!ImmutableTree<!boolean>} affectedTree A tree containing true for each affected path. Affected paths can't overlap.\n   * @param {!boolean} revert\n   */\n  constructor(\n    /** @inheritDoc */ public path: Path,\n    /** @inheritDoc */ public affectedTree: ImmutableTree<boolean>,\n    /** @inheritDoc */ public revert: boolean\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  operationForChild(childName: string): AckUserWrite {\n    if (!this.path.isEmpty()) {\n      assert(\n        this.path.getFront() === childName,\n        'operationForChild called for unrelated child.'\n      );\n      return new AckUserWrite(\n        this.path.popFront(),\n        this.affectedTree,\n        this.revert\n      );\n    } else if (this.affectedTree.value != null) {\n      assert(\n        this.affectedTree.children.isEmpty(),\n        'affectedTree should not have overlapping affected paths.'\n      );\n      // All child locations are affected as well; just return same operation.\n      return this;\n    } else {\n      const childTree = this.affectedTree.subtree(new Path(childName));\n      return new AckUserWrite(Path.Empty, childTree, this.revert);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\nimport { Operation, OperationSource, OperationType } from './Operation';\n\n/**\n * @param {!OperationSource} source\n * @param {!Path} path\n * @constructor\n * @implements {Operation}\n */\nexport class ListenComplete implements Operation {\n  /** @inheritDoc */\n  type = OperationType.LISTEN_COMPLETE;\n\n  constructor(public source: OperationSource, public path: Path) {}\n\n  operationForChild(childName: string): ListenComplete {\n    if (this.path.isEmpty()) {\n      return new ListenComplete(this.source, Path.Empty);\n    } else {\n      return new ListenComplete(this.source, this.path.popFront());\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { Path } from '../util/Path';\nimport { Node } from '../snap/Node';\n\n/**\n * @param {!OperationSource} source\n * @param {!Path} path\n * @param {!Node} snap\n * @constructor\n * @implements {Operation}\n */\nexport class Overwrite implements Operation {\n  /** @inheritDoc */\n  type = OperationType.OVERWRITE;\n\n  constructor(\n    public source: OperationSource,\n    public path: Path,\n    public snap: Node\n  ) {}\n\n  operationForChild(childName: string): Overwrite {\n    if (this.path.isEmpty()) {\n      return new Overwrite(\n        this.source,\n        Path.Empty,\n        this.snap.getImmediateChild(childName)\n      );\n    } else {\n      return new Overwrite(this.source, this.path.popFront(), this.snap);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { Overwrite } from './Overwrite';\nimport { Path } from '../util/Path';\nimport { assert } from '@firebase/util';\nimport { ImmutableTree } from '../util/ImmutableTree';\nimport { Node } from '../snap/Node';\n\n/**\n * @param {!OperationSource} source\n * @param {!Path} path\n * @param {!ImmutableTree.<!Node>} children\n * @constructor\n * @implements {Operation}\n */\nexport class Merge implements Operation {\n  /** @inheritDoc */\n  type = OperationType.MERGE;\n\n  constructor(\n    /** @inheritDoc */ public source: OperationSource,\n    /** @inheritDoc */ public path: Path,\n    /** @inheritDoc */ public children: ImmutableTree<Node>\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  operationForChild(childName: string): Operation {\n    if (this.path.isEmpty()) {\n      const childTree = this.children.subtree(new Path(childName));\n      if (childTree.isEmpty()) {\n        // This child is unaffected\n        return null;\n      } else if (childTree.value) {\n        // We have a snapshot for the child in question.  This becomes an overwrite of the child.\n        return new Overwrite(this.source, Path.Empty, childTree.value);\n      } else {\n        // This is a merge at a deeper level\n        return new Merge(this.source, Path.Empty, childTree);\n      }\n    } else {\n      assert(\n        this.path.getFront() === childName,\n        \"Can't get a merge for a child not on the path of the operation\"\n      );\n      return new Merge(this.source, this.path.popFront(), this.children);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return (\n      'Operation(' +\n      this.path +\n      ': ' +\n      this.source.toString() +\n      ' merge: ' +\n      this.children.toString() +\n      ')'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\nimport { Path } from '../util/Path';\n\n/**\n * A cache node only stores complete children. Additionally it holds a flag whether the node can be considered fully\n * initialized in the sense that we know at one point in time this represented a valid state of the world, e.g.\n * initialized with data from the server, or a complete overwrite by the client. The filtered flag also tracks\n * whether a node potentially had children removed due to a filter.\n */\nexport class CacheNode {\n  /**\n   * @param {!Node} node_\n   * @param {boolean} fullyInitialized_\n   * @param {boolean} filtered_\n   */\n  constructor(\n    private node_: Node,\n    private fullyInitialized_: boolean,\n    private filtered_: boolean\n  ) {}\n\n  /**\n   * Returns whether this node was fully initialized with either server data or a complete overwrite by the client\n   * @return {boolean}\n   */\n  isFullyInitialized(): boolean {\n    return this.fullyInitialized_;\n  }\n\n  /**\n   * Returns whether this node is potentially missing children due to a filter applied to the node\n   * @return {boolean}\n   */\n  isFiltered(): boolean {\n    return this.filtered_;\n  }\n\n  /**\n   * @param {!Path} path\n   * @return {boolean}\n   */\n  isCompleteForPath(path: Path): boolean {\n    if (path.isEmpty()) {\n      return this.isFullyInitialized() && !this.filtered_;\n    }\n\n    const childKey = path.getFront();\n    return this.isCompleteForChild(childKey);\n  }\n\n  /**\n   * @param {!string} key\n   * @return {boolean}\n   */\n  isCompleteForChild(key: string): boolean {\n    return (\n      (this.isFullyInitialized() && !this.filtered_) || this.node_.hasChild(key)\n    );\n  }\n\n  /**\n   * @return {!Node}\n   */\n  getNode(): Node {\n    return this.node_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { CacheNode } from './CacheNode';\nimport { Node } from '../snap/Node';\n\n/**\n * Stores the data we have cached for a view.\n *\n * serverSnap is the cached server data, eventSnap is the cached event data (server data plus any local writes).\n *\n * @constructor\n */\nexport class ViewCache {\n  /**\n   *\n   * @param {!CacheNode} eventCache_\n   * @param {!CacheNode} serverCache_\n   */\n  constructor(\n    private readonly eventCache_: CacheNode,\n    private readonly serverCache_: CacheNode\n  ) {}\n\n  /**\n   * @const\n   * @type {ViewCache}\n   */\n  static Empty = new ViewCache(\n    new CacheNode(\n      ChildrenNode.EMPTY_NODE,\n      /*fullyInitialized=*/ false,\n      /*filtered=*/ false\n    ),\n    new CacheNode(\n      ChildrenNode.EMPTY_NODE,\n      /*fullyInitialized=*/ false,\n      /*filtered=*/ false\n    )\n  );\n\n  /**\n   * @param {!Node} eventSnap\n   * @param {boolean} complete\n   * @param {boolean} filtered\n   * @return {!ViewCache}\n   */\n  updateEventSnap(\n    eventSnap: Node,\n    complete: boolean,\n    filtered: boolean\n  ): ViewCache {\n    return new ViewCache(\n      new CacheNode(eventSnap, complete, filtered),\n      this.serverCache_\n    );\n  }\n\n  /**\n   * @param {!Node} serverSnap\n   * @param {boolean} complete\n   * @param {boolean} filtered\n   * @return {!ViewCache}\n   */\n  updateServerSnap(\n    serverSnap: Node,\n    complete: boolean,\n    filtered: boolean\n  ): ViewCache {\n    return new ViewCache(\n      this.eventCache_,\n      new CacheNode(serverSnap, complete, filtered)\n    );\n  }\n\n  /**\n   * @return {!CacheNode}\n   */\n  getEventCache(): CacheNode {\n    return this.eventCache_;\n  }\n\n  /**\n   * @return {?Node}\n   */\n  getCompleteEventSnap(): Node | null {\n    return this.eventCache_.isFullyInitialized()\n      ? this.eventCache_.getNode()\n      : null;\n  }\n\n  /**\n   * @return {!CacheNode}\n   */\n  getServerCache(): CacheNode {\n    return this.serverCache_;\n  }\n\n  /**\n   * @return {?Node}\n   */\n  getCompleteServerSnap(): Node | null {\n    return this.serverCache_.isFullyInitialized()\n      ? this.serverCache_.getNode()\n      : null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\n\n/**\n * @constructor\n * @struct\n * @param {!string} type The event type\n * @param {!Node} snapshotNode The data\n * @param {string=} childName The name for this child, if it's a child event\n * @param {Node=} oldSnap Used for intermediate processing of child changed events\n * @param {string=} prevName The name for the previous child, if applicable\n */\nexport class Change {\n  constructor(\n    public type: string,\n    public snapshotNode: Node,\n    public childName?: string,\n    public oldSnap?: Node,\n    public prevName?: string | null\n  ) {}\n\n  /**\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static valueChange(snapshot: Node): Change {\n    return new Change(Change.VALUE, snapshot);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static childAddedChange(childKey: string, snapshot: Node): Change {\n    return new Change(Change.CHILD_ADDED, snapshot, childKey);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static childRemovedChange(childKey: string, snapshot: Node): Change {\n    return new Change(Change.CHILD_REMOVED, snapshot, childKey);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} newSnapshot\n   * @param {!Node} oldSnapshot\n   * @return {!Change}\n   */\n  static childChangedChange(\n    childKey: string,\n    newSnapshot: Node,\n    oldSnapshot: Node\n  ): Change {\n    return new Change(Change.CHILD_CHANGED, newSnapshot, childKey, oldSnapshot);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static childMovedChange(childKey: string, snapshot: Node): Change {\n    return new Change(Change.CHILD_MOVED, snapshot, childKey);\n  }\n\n  //event types\n  /** Event type for a child added */\n  static CHILD_ADDED = 'child_added';\n\n  /** Event type for a child removed */\n  static CHILD_REMOVED = 'child_removed';\n\n  /** Event type for a child changed */\n  static CHILD_CHANGED = 'child_changed';\n\n  /** Event type for a child moved */\n  static CHILD_MOVED = 'child_moved';\n\n  /** Event type for a value change */\n  static VALUE = 'value';\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Change } from '../Change';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { PRIORITY_INDEX } from '../../snap/indexes/PriorityIndex';\nimport { NodeFilter } from './NodeFilter';\nimport { Index } from '../../snap/indexes/Index';\nimport { Path } from '../../util/Path';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\nimport { Node } from '../../snap/Node';\n\n/**\n * Doesn't really filter nodes but applies an index to the node and keeps track of any changes\n *\n * @constructor\n * @implements {NodeFilter}\n * @param {!Index} index\n */\nexport class IndexedFilter implements NodeFilter {\n  constructor(private readonly index_: Index) {}\n\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    assert(\n      snap.isIndexed(this.index_),\n      'A node must be indexed if only a child is updated'\n    );\n    const oldChild = snap.getImmediateChild(key);\n    // Check if anything actually changed.\n    if (\n      oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))\n    ) {\n      // There's an edge case where a child can enter or leave the view because affectedPath was set to null.\n      // In this case, affectedPath will appear null in both the old and new snapshots.  So we need\n      // to avoid treating these cases as \"nothing changed.\"\n      if (oldChild.isEmpty() === newChild.isEmpty()) {\n        // Nothing changed.\n\n        // This assert should be valid, but it's expensive (can dominate perf testing) so don't actually do it.\n        //assert(oldChild.equals(newChild), 'Old and new snapshots should be equal.');\n        return snap;\n      }\n    }\n\n    if (optChangeAccumulator != null) {\n      if (newChild.isEmpty()) {\n        if (snap.hasChild(key)) {\n          optChangeAccumulator.trackChildChange(\n            Change.childRemovedChange(key, oldChild)\n          );\n        } else {\n          assert(\n            snap.isLeafNode(),\n            'A child remove without an old child only makes sense on a leaf node'\n          );\n        }\n      } else if (oldChild.isEmpty()) {\n        optChangeAccumulator.trackChildChange(\n          Change.childAddedChange(key, newChild)\n        );\n      } else {\n        optChangeAccumulator.trackChildChange(\n          Change.childChangedChange(key, newChild, oldChild)\n        );\n      }\n    }\n    if (snap.isLeafNode() && newChild.isEmpty()) {\n      return snap;\n    } else {\n      // Make sure the node is indexed\n      return snap.updateImmediateChild(key, newChild).withIndex(this.index_);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (optChangeAccumulator != null) {\n      if (!oldSnap.isLeafNode()) {\n        oldSnap.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n          if (!newSnap.hasChild(key)) {\n            optChangeAccumulator.trackChildChange(\n              Change.childRemovedChange(key, childNode)\n            );\n          }\n        });\n      }\n      if (!newSnap.isLeafNode()) {\n        newSnap.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n          if (oldSnap.hasChild(key)) {\n            const oldChild = oldSnap.getImmediateChild(key);\n            if (!oldChild.equals(childNode)) {\n              optChangeAccumulator.trackChildChange(\n                Change.childChangedChange(key, childNode, oldChild)\n              );\n            }\n          } else {\n            optChangeAccumulator.trackChildChange(\n              Change.childAddedChange(key, childNode)\n            );\n          }\n        });\n      }\n    }\n    return newSnap.withIndex(this.index_);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    if (oldSnap.isEmpty()) {\n      return ChildrenNode.EMPTY_NODE;\n    } else {\n      return oldSnap.updatePriority(newPriority);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  filtersNodes(): boolean {\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndexedFilter(): IndexedFilter {\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Change } from './Change';\nimport { assert, assertionError } from '@firebase/util';\n\nexport class ChildChangeAccumulator {\n  private readonly changeMap: Map<string, Change> = new Map();\n\n  trackChildChange(change: Change) {\n    const type = change.type;\n    const childKey = change.childName!;\n    assert(\n      type === Change.CHILD_ADDED ||\n        type === Change.CHILD_CHANGED ||\n        type === Change.CHILD_REMOVED,\n      'Only child changes supported for tracking'\n    );\n    assert(\n      childKey !== '.priority',\n      'Only non-priority child changes can be tracked.'\n    );\n    const oldChange = this.changeMap.get(childKey);\n    if (oldChange) {\n      const oldType = oldChange.type;\n      if (type === Change.CHILD_ADDED && oldType === Change.CHILD_REMOVED) {\n        this.changeMap.set(\n          childKey,\n          Change.childChangedChange(\n            childKey,\n            change.snapshotNode,\n            oldChange.snapshotNode\n          )\n        );\n      } else if (\n        type === Change.CHILD_REMOVED &&\n        oldType === Change.CHILD_ADDED\n      ) {\n        this.changeMap.delete(childKey);\n      } else if (\n        type === Change.CHILD_REMOVED &&\n        oldType === Change.CHILD_CHANGED\n      ) {\n        this.changeMap.set(\n          childKey,\n          Change.childRemovedChange(childKey, oldChange.oldSnap)\n        );\n      } else if (\n        type === Change.CHILD_CHANGED &&\n        oldType === Change.CHILD_ADDED\n      ) {\n        this.changeMap.set(\n          childKey,\n          Change.childAddedChange(childKey, change.snapshotNode)\n        );\n      } else if (\n        type === Change.CHILD_CHANGED &&\n        oldType === Change.CHILD_CHANGED\n      ) {\n        this.changeMap.set(\n          childKey,\n          Change.childChangedChange(\n            childKey,\n            change.snapshotNode,\n            oldChange.oldSnap\n          )\n        );\n      } else {\n        throw assertionError(\n          'Illegal combination of changes: ' +\n            change +\n            ' occurred after ' +\n            oldChange\n        );\n      }\n    } else {\n      this.changeMap.set(childKey, change);\n    }\n  }\n\n  getChanges(): Change[] {\n    return Array.from(this.changeMap.values());\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CacheNode } from './CacheNode';\nimport { NamedNode, Node } from '../snap/Node';\nimport { Index } from '../snap/indexes/Index';\nimport { WriteTreeRef } from '../WriteTree';\nimport { ViewCache } from './ViewCache';\n\n/**\n * Since updates to filtered nodes might require nodes to be pulled in from \"outside\" the node, this interface\n * can help to get complete children that can be pulled in.\n * A class implementing this interface takes potentially multiple sources (e.g. user writes, server data from\n * other views etc.) to try it's best to get a complete child that might be useful in pulling into the view.\n *\n * @interface\n */\nexport interface CompleteChildSource {\n  /**\n   * @param {!string} childKey\n   * @return {?Node}\n   */\n  getCompleteChild(childKey: string): Node | null;\n\n  /**\n   * @param {!Index} index\n   * @param {!NamedNode} child\n   * @param {boolean} reverse\n   * @return {?NamedNode}\n   */\n  getChildAfterChild(\n    index: Index,\n    child: NamedNode,\n    reverse: boolean\n  ): NamedNode | null;\n}\n\n/**\n * An implementation of CompleteChildSource that never returns any additional children\n *\n * @private\n * @constructor\n * @implements CompleteChildSource\n */\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nexport class NoCompleteChildSource_ implements CompleteChildSource {\n  /**\n   * @inheritDoc\n   */\n  getCompleteChild(childKey?: string): Node | null {\n    return null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getChildAfterChild(\n    index?: Index,\n    child?: NamedNode,\n    reverse?: boolean\n  ): NamedNode | null {\n    return null;\n  }\n}\n\n/**\n * Singleton instance.\n * @const\n * @type {!CompleteChildSource}\n */\nexport const NO_COMPLETE_CHILD_SOURCE = new NoCompleteChildSource_();\n\n/**\n * An implementation of CompleteChildSource that uses a WriteTree in addition to any other server data or\n * old event caches available to calculate complete children.\n *\n *\n * @implements CompleteChildSource\n */\nexport class WriteTreeCompleteChildSource implements CompleteChildSource {\n  /**\n   * @param {!WriteTreeRef} writes_\n   * @param {!ViewCache} viewCache_\n   * @param {?Node} optCompleteServerCache_\n   */\n  constructor(\n    private writes_: WriteTreeRef,\n    private viewCache_: ViewCache,\n    private optCompleteServerCache_: Node | null = null\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  getCompleteChild(childKey: string): Node | null {\n    const node = this.viewCache_.getEventCache();\n    if (node.isCompleteForChild(childKey)) {\n      return node.getNode().getImmediateChild(childKey);\n    } else {\n      const serverNode =\n        this.optCompleteServerCache_ != null\n          ? new CacheNode(this.optCompleteServerCache_, true, false)\n          : this.viewCache_.getServerCache();\n      return this.writes_.calcCompleteChild(childKey, serverNode);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getChildAfterChild(\n    index: Index,\n    child: NamedNode,\n    reverse: boolean\n  ): NamedNode | null {\n    const completeServerData =\n      this.optCompleteServerCache_ != null\n        ? this.optCompleteServerCache_\n        : this.viewCache_.getCompleteServerSnap();\n    const nodes = this.writes_.calcIndexedSlice(\n      completeServerData,\n      child,\n      1,\n      reverse,\n      index\n    );\n    if (nodes.length === 0) {\n      return null;\n    } else {\n      return nodes[0];\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Operation, OperationType } from '../operation/Operation';\nimport { assert, assertionError } from '@firebase/util';\nimport { ChildChangeAccumulator } from './ChildChangeAccumulator';\nimport { Change } from './Change';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { KEY_INDEX } from '../snap/indexes/KeyIndex';\nimport { ImmutableTree } from '../util/ImmutableTree';\nimport { Path } from '../util/Path';\nimport {\n  WriteTreeCompleteChildSource,\n  NO_COMPLETE_CHILD_SOURCE,\n  CompleteChildSource\n} from './CompleteChildSource';\nimport { ViewCache } from './ViewCache';\nimport { NodeFilter } from './filter/NodeFilter';\nimport { WriteTreeRef } from '../WriteTree';\nimport { Overwrite } from '../operation/Overwrite';\nimport { Merge } from '../operation/Merge';\nimport { AckUserWrite } from '../operation/AckUserWrite';\nimport { Node } from '../snap/Node';\n\n/**\n * @constructor\n * @struct\n */\nexport class ProcessorResult {\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Array.<!Change>} changes\n   */\n  constructor(\n    public readonly viewCache: ViewCache,\n    public readonly changes: Change[]\n  ) {}\n}\n\n/**\n * @constructor\n */\nexport class ViewProcessor {\n  /**\n   * @param {!NodeFilter} filter_\n   */\n  constructor(private readonly filter_: NodeFilter) {}\n\n  /**\n   * @param {!ViewCache} viewCache\n   */\n  assertIndexed(viewCache: ViewCache) {\n    assert(\n      viewCache\n        .getEventCache()\n        .getNode()\n        .isIndexed(this.filter_.getIndex()),\n      'Event snap not indexed'\n    );\n    assert(\n      viewCache\n        .getServerCache()\n        .getNode()\n        .isIndexed(this.filter_.getIndex()),\n      'Server snap not indexed'\n    );\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!Operation} operation\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @return {!ProcessorResult}\n   */\n  applyOperation(\n    oldViewCache: ViewCache,\n    operation: Operation,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null\n  ): ProcessorResult {\n    const accumulator = new ChildChangeAccumulator();\n    let newViewCache, filterServerNode;\n    if (operation.type === OperationType.OVERWRITE) {\n      const overwrite = operation as Overwrite;\n      if (overwrite.source.fromUser) {\n        newViewCache = this.applyUserOverwrite_(\n          oldViewCache,\n          overwrite.path,\n          overwrite.snap,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      } else {\n        assert(overwrite.source.fromServer, 'Unknown source.');\n        // We filter the node if it's a tagged update or the node has been previously filtered  and the\n        // update is not at the root in which case it is ok (and necessary) to mark the node unfiltered\n        // again\n        filterServerNode =\n          overwrite.source.tagged ||\n          (oldViewCache.getServerCache().isFiltered() &&\n            !overwrite.path.isEmpty());\n        newViewCache = this.applyServerOverwrite_(\n          oldViewCache,\n          overwrite.path,\n          overwrite.snap,\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    } else if (operation.type === OperationType.MERGE) {\n      const merge = operation as Merge;\n      if (merge.source.fromUser) {\n        newViewCache = this.applyUserMerge_(\n          oldViewCache,\n          merge.path,\n          merge.children,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      } else {\n        assert(merge.source.fromServer, 'Unknown source.');\n        // We filter the node if it's a tagged update or the node has been previously filtered\n        filterServerNode =\n          merge.source.tagged || oldViewCache.getServerCache().isFiltered();\n        newViewCache = this.applyServerMerge_(\n          oldViewCache,\n          merge.path,\n          merge.children,\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    } else if (operation.type === OperationType.ACK_USER_WRITE) {\n      const ackUserWrite = operation as AckUserWrite;\n      if (!ackUserWrite.revert) {\n        newViewCache = this.ackUserWrite_(\n          oldViewCache,\n          ackUserWrite.path,\n          ackUserWrite.affectedTree,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      } else {\n        newViewCache = this.revertUserWrite_(\n          oldViewCache,\n          ackUserWrite.path,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      }\n    } else if (operation.type === OperationType.LISTEN_COMPLETE) {\n      newViewCache = this.listenComplete_(\n        oldViewCache,\n        operation.path,\n        writesCache,\n        accumulator\n      );\n    } else {\n      throw assertionError('Unknown operation type: ' + operation.type);\n    }\n    const changes = accumulator.getChanges();\n    ViewProcessor.maybeAddValueEvent_(oldViewCache, newViewCache, changes);\n    return new ProcessorResult(newViewCache, changes);\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!ViewCache} newViewCache\n   * @param {!Array.<!Change>} accumulator\n   * @private\n   */\n  private static maybeAddValueEvent_(\n    oldViewCache: ViewCache,\n    newViewCache: ViewCache,\n    accumulator: Change[]\n  ) {\n    const eventSnap = newViewCache.getEventCache();\n    if (eventSnap.isFullyInitialized()) {\n      const isLeafOrEmpty =\n        eventSnap.getNode().isLeafNode() || eventSnap.getNode().isEmpty();\n      const oldCompleteSnap = oldViewCache.getCompleteEventSnap();\n      if (\n        accumulator.length > 0 ||\n        !oldViewCache.getEventCache().isFullyInitialized() ||\n        (isLeafOrEmpty &&\n          !eventSnap.getNode().equals(/** @type {!Node} */ oldCompleteSnap)) ||\n        !eventSnap\n          .getNode()\n          .getPriority()\n          .equals(oldCompleteSnap.getPriority())\n      ) {\n        accumulator.push(\n          Change.valueChange(\n            /** @type {!Node} */ newViewCache.getCompleteEventSnap()\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} changePath\n   * @param {!WriteTreeRef} writesCache\n   * @param {!CompleteChildSource} source\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private generateEventCacheAfterServerEvent_(\n    viewCache: ViewCache,\n    changePath: Path,\n    writesCache: WriteTreeRef,\n    source: CompleteChildSource,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldEventSnap = viewCache.getEventCache();\n    if (writesCache.shadowingWrite(changePath) != null) {\n      // we have a shadowing write, ignore changes\n      return viewCache;\n    } else {\n      let newEventCache, serverNode;\n      if (changePath.isEmpty()) {\n        // TODO: figure out how this plays with \"sliding ack windows\"\n        assert(\n          viewCache.getServerCache().isFullyInitialized(),\n          'If change path is empty, we must have complete server data'\n        );\n        if (viewCache.getServerCache().isFiltered()) {\n          // We need to special case this, because we need to only apply writes to complete children, or\n          // we might end up raising events for incomplete children. If the server data is filtered deep\n          // writes cannot be guaranteed to be complete\n          const serverCache = viewCache.getCompleteServerSnap();\n          const completeChildren =\n            serverCache instanceof ChildrenNode\n              ? serverCache\n              : ChildrenNode.EMPTY_NODE;\n          const completeEventChildren = writesCache.calcCompleteEventChildren(\n            completeChildren\n          );\n          newEventCache = this.filter_.updateFullNode(\n            viewCache.getEventCache().getNode(),\n            completeEventChildren,\n            accumulator\n          );\n        } else {\n          const completeNode = writesCache.calcCompleteEventCache(\n            viewCache.getCompleteServerSnap()\n          );\n          newEventCache = this.filter_.updateFullNode(\n            viewCache.getEventCache().getNode(),\n            completeNode,\n            accumulator\n          );\n        }\n      } else {\n        const childKey = changePath.getFront();\n        if (childKey === '.priority') {\n          assert(\n            changePath.getLength() === 1,\n            \"Can't have a priority with additional path components\"\n          );\n          const oldEventNode = oldEventSnap.getNode();\n          serverNode = viewCache.getServerCache().getNode();\n          // we might have overwrites for this priority\n          const updatedPriority = writesCache.calcEventCacheAfterServerOverwrite(\n            changePath,\n            oldEventNode,\n            serverNode\n          );\n          if (updatedPriority != null) {\n            newEventCache = this.filter_.updatePriority(\n              oldEventNode,\n              updatedPriority\n            );\n          } else {\n            // priority didn't change, keep old node\n            newEventCache = oldEventSnap.getNode();\n          }\n        } else {\n          const childChangePath = changePath.popFront();\n          // update child\n          let newEventChild;\n          if (oldEventSnap.isCompleteForChild(childKey)) {\n            serverNode = viewCache.getServerCache().getNode();\n            const eventChildUpdate = writesCache.calcEventCacheAfterServerOverwrite(\n              changePath,\n              oldEventSnap.getNode(),\n              serverNode\n            );\n            if (eventChildUpdate != null) {\n              newEventChild = oldEventSnap\n                .getNode()\n                .getImmediateChild(childKey)\n                .updateChild(childChangePath, eventChildUpdate);\n            } else {\n              // Nothing changed, just keep the old child\n              newEventChild = oldEventSnap\n                .getNode()\n                .getImmediateChild(childKey);\n            }\n          } else {\n            newEventChild = writesCache.calcCompleteChild(\n              childKey,\n              viewCache.getServerCache()\n            );\n          }\n          if (newEventChild != null) {\n            newEventCache = this.filter_.updateChild(\n              oldEventSnap.getNode(),\n              childKey,\n              newEventChild,\n              childChangePath,\n              source,\n              accumulator\n            );\n          } else {\n            // no complete child available or no change\n            newEventCache = oldEventSnap.getNode();\n          }\n        }\n      }\n      return viewCache.updateEventSnap(\n        newEventCache,\n        oldEventSnap.isFullyInitialized() || changePath.isEmpty(),\n        this.filter_.filtersNodes()\n      );\n    }\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!Path} changePath\n   * @param {!Node} changedSnap\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @param {boolean} filterServerNode\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  applyServerOverwrite_(\n    oldViewCache: ViewCache,\n    changePath: Path,\n    changedSnap: Node,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null,\n    filterServerNode: boolean,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldServerSnap = oldViewCache.getServerCache();\n    let newServerCache;\n    const serverFilter = filterServerNode\n      ? this.filter_\n      : this.filter_.getIndexedFilter();\n    if (changePath.isEmpty()) {\n      newServerCache = serverFilter.updateFullNode(\n        oldServerSnap.getNode(),\n        changedSnap,\n        null\n      );\n    } else if (serverFilter.filtersNodes() && !oldServerSnap.isFiltered()) {\n      // we want to filter the server node, but we didn't filter the server node yet, so simulate a full update\n      const newServerNode = oldServerSnap\n        .getNode()\n        .updateChild(changePath, changedSnap);\n      newServerCache = serverFilter.updateFullNode(\n        oldServerSnap.getNode(),\n        newServerNode,\n        null\n      );\n    } else {\n      const childKey = changePath.getFront();\n      if (\n        !oldServerSnap.isCompleteForPath(changePath) &&\n        changePath.getLength() > 1\n      ) {\n        // We don't update incomplete nodes with updates intended for other listeners\n        return oldViewCache;\n      }\n      const childChangePath = changePath.popFront();\n      const childNode = oldServerSnap.getNode().getImmediateChild(childKey);\n      const newChildNode = childNode.updateChild(childChangePath, changedSnap);\n      if (childKey === '.priority') {\n        newServerCache = serverFilter.updatePriority(\n          oldServerSnap.getNode(),\n          newChildNode\n        );\n      } else {\n        newServerCache = serverFilter.updateChild(\n          oldServerSnap.getNode(),\n          childKey,\n          newChildNode,\n          childChangePath,\n          NO_COMPLETE_CHILD_SOURCE,\n          null\n        );\n      }\n    }\n    const newViewCache = oldViewCache.updateServerSnap(\n      newServerCache,\n      oldServerSnap.isFullyInitialized() || changePath.isEmpty(),\n      serverFilter.filtersNodes()\n    );\n    const source = new WriteTreeCompleteChildSource(\n      writesCache,\n      newViewCache,\n      completeCache\n    );\n    return this.generateEventCacheAfterServerEvent_(\n      newViewCache,\n      changePath,\n      writesCache,\n      source,\n      accumulator\n    );\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!Path} changePath\n   * @param {!Node} changedSnap\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  applyUserOverwrite_(\n    oldViewCache: ViewCache,\n    changePath: Path,\n    changedSnap: Node,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldEventSnap = oldViewCache.getEventCache();\n    let newViewCache, newEventCache;\n    const source = new WriteTreeCompleteChildSource(\n      writesCache,\n      oldViewCache,\n      completeCache\n    );\n    if (changePath.isEmpty()) {\n      newEventCache = this.filter_.updateFullNode(\n        oldViewCache.getEventCache().getNode(),\n        changedSnap,\n        accumulator\n      );\n      newViewCache = oldViewCache.updateEventSnap(\n        newEventCache,\n        true,\n        this.filter_.filtersNodes()\n      );\n    } else {\n      const childKey = changePath.getFront();\n      if (childKey === '.priority') {\n        newEventCache = this.filter_.updatePriority(\n          oldViewCache.getEventCache().getNode(),\n          changedSnap\n        );\n        newViewCache = oldViewCache.updateEventSnap(\n          newEventCache,\n          oldEventSnap.isFullyInitialized(),\n          oldEventSnap.isFiltered()\n        );\n      } else {\n        const childChangePath = changePath.popFront();\n        const oldChild = oldEventSnap.getNode().getImmediateChild(childKey);\n        let newChild;\n        if (childChangePath.isEmpty()) {\n          // Child overwrite, we can replace the child\n          newChild = changedSnap;\n        } else {\n          const childNode = source.getCompleteChild(childKey);\n          if (childNode != null) {\n            if (\n              childChangePath.getBack() === '.priority' &&\n              childNode.getChild(childChangePath.parent()).isEmpty()\n            ) {\n              // This is a priority update on an empty node. If this node exists on the server, the\n              // server will send down the priority in the update, so ignore for now\n              newChild = childNode;\n            } else {\n              newChild = childNode.updateChild(childChangePath, changedSnap);\n            }\n          } else {\n            // There is no complete child node available\n            newChild = ChildrenNode.EMPTY_NODE;\n          }\n        }\n        if (!oldChild.equals(newChild)) {\n          const newEventSnap = this.filter_.updateChild(\n            oldEventSnap.getNode(),\n            childKey,\n            newChild,\n            childChangePath,\n            source,\n            accumulator\n          );\n          newViewCache = oldViewCache.updateEventSnap(\n            newEventSnap,\n            oldEventSnap.isFullyInitialized(),\n            this.filter_.filtersNodes()\n          );\n        } else {\n          newViewCache = oldViewCache;\n        }\n      }\n    }\n    return newViewCache;\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {string} childKey\n   * @return {boolean}\n   * @private\n   */\n  private static cacheHasChild_(\n    viewCache: ViewCache,\n    childKey: string\n  ): boolean {\n    return viewCache.getEventCache().isCompleteForChild(childKey);\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {ImmutableTree.<!Node>} changedChildren\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} serverCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private applyUserMerge_(\n    viewCache: ViewCache,\n    path: Path,\n    changedChildren: ImmutableTree<Node>,\n    writesCache: WriteTreeRef,\n    serverCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    // HACK: In the case of a limit query, there may be some changes that bump things out of the\n    // window leaving room for new items.  It's important we process these changes first, so we\n    // iterate the changes twice, first processing any that affect items currently in view.\n    // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\n    // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\n    // not the other.\n    let curViewCache = viewCache;\n    changedChildren.foreach((relativePath, childNode) => {\n      const writePath = path.child(relativePath);\n      if (ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\n        curViewCache = this.applyUserOverwrite_(\n          curViewCache,\n          writePath,\n          childNode,\n          writesCache,\n          serverCache,\n          accumulator\n        );\n      }\n    });\n\n    changedChildren.foreach((relativePath, childNode) => {\n      const writePath = path.child(relativePath);\n      if (!ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\n        curViewCache = this.applyUserOverwrite_(\n          curViewCache,\n          writePath,\n          childNode,\n          writesCache,\n          serverCache,\n          accumulator\n        );\n      }\n    });\n\n    return curViewCache;\n  }\n\n  /**\n   * @param {!Node} node\n   * @param {ImmutableTree.<!Node>} merge\n   * @return {!Node}\n   * @private\n   */\n  private applyMerge_(node: Node, merge: ImmutableTree<Node>): Node {\n    merge.foreach((relativePath, childNode) => {\n      node = node.updateChild(relativePath, childNode);\n    });\n    return node;\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {!ImmutableTree.<!Node>} changedChildren\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} serverCache\n   * @param {boolean} filterServerNode\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private applyServerMerge_(\n    viewCache: ViewCache,\n    path: Path,\n    changedChildren: ImmutableTree<Node>,\n    writesCache: WriteTreeRef,\n    serverCache: Node | null,\n    filterServerNode: boolean,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    // If we don't have a cache yet, this merge was intended for a previously listen in the same location. Ignore it and\n    // wait for the complete data update coming soon.\n    if (\n      viewCache\n        .getServerCache()\n        .getNode()\n        .isEmpty() &&\n      !viewCache.getServerCache().isFullyInitialized()\n    ) {\n      return viewCache;\n    }\n\n    // HACK: In the case of a limit query, there may be some changes that bump things out of the\n    // window leaving room for new items.  It's important we process these changes first, so we\n    // iterate the changes twice, first processing any that affect items currently in view.\n    // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\n    // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\n    // not the other.\n    let curViewCache = viewCache;\n    let viewMergeTree;\n    if (path.isEmpty()) {\n      viewMergeTree = changedChildren;\n    } else {\n      viewMergeTree = ImmutableTree.Empty.setTree(path, changedChildren);\n    }\n    const serverNode = viewCache.getServerCache().getNode();\n    viewMergeTree.children.inorderTraversal((childKey, childTree) => {\n      if (serverNode.hasChild(childKey)) {\n        const serverChild = viewCache\n          .getServerCache()\n          .getNode()\n          .getImmediateChild(childKey);\n        const newChild = this.applyMerge_(serverChild, childTree);\n        curViewCache = this.applyServerOverwrite_(\n          curViewCache,\n          new Path(childKey),\n          newChild,\n          writesCache,\n          serverCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    });\n    viewMergeTree.children.inorderTraversal((childKey, childMergeTree) => {\n      const isUnknownDeepMerge =\n        !viewCache.getServerCache().isCompleteForChild(childKey) &&\n        childMergeTree.value == null;\n      if (!serverNode.hasChild(childKey) && !isUnknownDeepMerge) {\n        const serverChild = viewCache\n          .getServerCache()\n          .getNode()\n          .getImmediateChild(childKey);\n        const newChild = this.applyMerge_(serverChild, childMergeTree);\n        curViewCache = this.applyServerOverwrite_(\n          curViewCache,\n          new Path(childKey),\n          newChild,\n          writesCache,\n          serverCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    });\n\n    return curViewCache;\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} ackPath\n   * @param {!ImmutableTree<!boolean>} affectedTree\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private ackUserWrite_(\n    viewCache: ViewCache,\n    ackPath: Path,\n    affectedTree: ImmutableTree<boolean>,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    if (writesCache.shadowingWrite(ackPath) != null) {\n      return viewCache;\n    }\n\n    // Only filter server node if it is currently filtered\n    const filterServerNode = viewCache.getServerCache().isFiltered();\n\n    // Essentially we'll just get our existing server cache for the affected paths and re-apply it as a server update\n    // now that it won't be shadowed.\n    const serverCache = viewCache.getServerCache();\n    if (affectedTree.value != null) {\n      // This is an overwrite.\n      if (\n        (ackPath.isEmpty() && serverCache.isFullyInitialized()) ||\n        serverCache.isCompleteForPath(ackPath)\n      ) {\n        return this.applyServerOverwrite_(\n          viewCache,\n          ackPath,\n          serverCache.getNode().getChild(ackPath),\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      } else if (ackPath.isEmpty()) {\n        // This is a goofy edge case where we are acking data at this location but don't have full data.  We\n        // should just re-apply whatever we have in our cache as a merge.\n        let changedChildren = ImmutableTree.Empty;\n        serverCache.getNode().forEachChild(KEY_INDEX, (name, node) => {\n          changedChildren = changedChildren.set(new Path(name), node);\n        });\n        return this.applyServerMerge_(\n          viewCache,\n          ackPath,\n          changedChildren,\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      } else {\n        return viewCache;\n      }\n    } else {\n      // This is a merge.\n      let changedChildren = ImmutableTree.Empty;\n      affectedTree.foreach((mergePath, value) => {\n        const serverCachePath = ackPath.child(mergePath);\n        if (serverCache.isCompleteForPath(serverCachePath)) {\n          changedChildren = changedChildren.set(\n            mergePath,\n            serverCache.getNode().getChild(serverCachePath)\n          );\n        }\n      });\n      return this.applyServerMerge_(\n        viewCache,\n        ackPath,\n        changedChildren,\n        writesCache,\n        completeCache,\n        filterServerNode,\n        accumulator\n      );\n    }\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {!WriteTreeRef} writesCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private listenComplete_(\n    viewCache: ViewCache,\n    path: Path,\n    writesCache: WriteTreeRef,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldServerNode = viewCache.getServerCache();\n    const newViewCache = viewCache.updateServerSnap(\n      oldServerNode.getNode(),\n      oldServerNode.isFullyInitialized() || path.isEmpty(),\n      oldServerNode.isFiltered()\n    );\n    return this.generateEventCacheAfterServerEvent_(\n      newViewCache,\n      path,\n      writesCache,\n      NO_COMPLETE_CHILD_SOURCE,\n      accumulator\n    );\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeServerCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private revertUserWrite_(\n    viewCache: ViewCache,\n    path: Path,\n    writesCache: WriteTreeRef,\n    completeServerCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    let complete;\n    if (writesCache.shadowingWrite(path) != null) {\n      return viewCache;\n    } else {\n      const source = new WriteTreeCompleteChildSource(\n        writesCache,\n        viewCache,\n        completeServerCache\n      );\n      const oldEventCache = viewCache.getEventCache().getNode();\n      let newEventCache;\n      if (path.isEmpty() || path.getFront() === '.priority') {\n        let newNode;\n        if (viewCache.getServerCache().isFullyInitialized()) {\n          newNode = writesCache.calcCompleteEventCache(\n            viewCache.getCompleteServerSnap()\n          );\n        } else {\n          const serverChildren = viewCache.getServerCache().getNode();\n          assert(\n            serverChildren instanceof ChildrenNode,\n            'serverChildren would be complete if leaf node'\n          );\n          newNode = writesCache.calcCompleteEventChildren(\n            serverChildren as ChildrenNode\n          );\n        }\n        newNode = newNode as Node;\n        newEventCache = this.filter_.updateFullNode(\n          oldEventCache,\n          newNode,\n          accumulator\n        );\n      } else {\n        const childKey = path.getFront();\n        let newChild = writesCache.calcCompleteChild(\n          childKey,\n          viewCache.getServerCache()\n        );\n        if (\n          newChild == null &&\n          viewCache.getServerCache().isCompleteForChild(childKey)\n        ) {\n          newChild = oldEventCache.getImmediateChild(childKey);\n        }\n        if (newChild != null) {\n          newEventCache = this.filter_.updateChild(\n            oldEventCache,\n            childKey,\n            newChild,\n            path.popFront(),\n            source,\n            accumulator\n          );\n        } else if (\n          viewCache\n            .getEventCache()\n            .getNode()\n            .hasChild(childKey)\n        ) {\n          // No complete child available, delete the existing one, if any\n          newEventCache = this.filter_.updateChild(\n            oldEventCache,\n            childKey,\n            ChildrenNode.EMPTY_NODE,\n            path.popFront(),\n            source,\n            accumulator\n          );\n        } else {\n          newEventCache = oldEventCache;\n        }\n        if (\n          newEventCache.isEmpty() &&\n          viewCache.getServerCache().isFullyInitialized()\n        ) {\n          // We might have reverted all child writes. Maybe the old event was a leaf node\n          complete = writesCache.calcCompleteEventCache(\n            viewCache.getCompleteServerSnap()\n          );\n          if (complete.isLeafNode()) {\n            newEventCache = this.filter_.updateFullNode(\n              newEventCache,\n              complete,\n              accumulator\n            );\n          }\n        }\n      }\n      complete =\n        viewCache.getServerCache().isFullyInitialized() ||\n        writesCache.shadowingWrite(Path.Empty) != null;\n      return viewCache.updateEventSnap(\n        newEventCache,\n        complete,\n        this.filter_.filtersNodes()\n      );\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NamedNode, Node } from '../snap/Node';\nimport { Change } from './Change';\nimport { assertionError } from '@firebase/util';\nimport { Query } from '../../api/Query';\nimport { Index } from '../snap/indexes/Index';\nimport { EventRegistration } from './EventRegistration';\nimport { Event } from './Event';\n\n/**\n * An EventGenerator is used to convert \"raw\" changes (Change) as computed by the\n * CacheDiffer into actual events (Event) that can be raised.  See generateEventsForChanges()\n * for details.\n *\n * @constructor\n */\nexport class EventGenerator {\n  private index_: Index;\n\n  /**\n   *\n   * @param {!Query} query_\n   */\n  constructor(private query_: Query) {\n    /**\n     * @private\n     * @type {!Index}\n     */\n    this.index_ = this.query_.getQueryParams().getIndex();\n  }\n\n  /**\n   * Given a set of raw changes (no moved events and prevName not specified yet), and a set of\n   * EventRegistrations that should be notified of these changes, generate the actual events to be raised.\n   *\n   * Notes:\n   *  - child_moved events will be synthesized at this time for any child_changed events that affect\n   *    our index.\n   *  - prevName will be calculated based on the index ordering.\n   *\n   * @param {!Array.<!Change>} changes\n   * @param {!Node} eventCache\n   * @param {!Array.<!EventRegistration>} eventRegistrations\n   * @return {!Array.<!Event>}\n   */\n  generateEventsForChanges(\n    changes: Change[],\n    eventCache: Node,\n    eventRegistrations: EventRegistration[]\n  ): Event[] {\n    const events: Event[] = [];\n    const moves: Change[] = [];\n\n    changes.forEach(change => {\n      if (\n        change.type === Change.CHILD_CHANGED &&\n        this.index_.indexedValueChanged(\n          change.oldSnap as Node,\n          change.snapshotNode\n        )\n      ) {\n        moves.push(\n          Change.childMovedChange(\n            change.childName as string,\n            change.snapshotNode\n          )\n        );\n      }\n    });\n\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_REMOVED,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_ADDED,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_MOVED,\n      moves,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_CHANGED,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.VALUE,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n\n    return events;\n  }\n\n  /**\n   * Given changes of a single change type, generate the corresponding events.\n   *\n   * @param {!Array.<!Event>} events\n   * @param {!string} eventType\n   * @param {!Array.<!Change>} changes\n   * @param {!Array.<!EventRegistration>} registrations\n   * @param {!Node} eventCache\n   * @private\n   */\n  private generateEventsForType_(\n    events: Event[],\n    eventType: string,\n    changes: Change[],\n    registrations: EventRegistration[],\n    eventCache: Node\n  ) {\n    const filteredChanges = changes.filter(change => change.type === eventType);\n\n    filteredChanges.sort(this.compareChanges_.bind(this));\n    filteredChanges.forEach(change => {\n      const materializedChange = this.materializeSingleChange_(\n        change,\n        eventCache\n      );\n      registrations.forEach(registration => {\n        if (registration.respondsTo(change.type)) {\n          events.push(\n            registration.createEvent(materializedChange, this.query_)\n          );\n        }\n      });\n    });\n  }\n\n  /**\n   * @param {!Change} change\n   * @param {!Node} eventCache\n   * @return {!Change}\n   * @private\n   */\n  private materializeSingleChange_(change: Change, eventCache: Node): Change {\n    if (change.type === 'value' || change.type === 'child_removed') {\n      return change;\n    } else {\n      change.prevName = eventCache.getPredecessorChildName(\n        /** @type {!string} */\n        change.childName,\n        change.snapshotNode,\n        this.index_\n      );\n      return change;\n    }\n  }\n\n  /**\n   * @param {!Change} a\n   * @param {!Change} b\n   * @return {number}\n   * @private\n   */\n  private compareChanges_(a: Change, b: Change) {\n    if (a.childName == null || b.childName == null) {\n      throw assertionError('Should only compare child_ events.');\n    }\n    const aWrapped = new NamedNode(a.childName, a.snapshotNode);\n    const bWrapped = new NamedNode(b.childName, b.snapshotNode);\n    return this.index_.compare(aWrapped, bWrapped);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IndexedFilter } from './filter/IndexedFilter';\nimport { ViewProcessor } from './ViewProcessor';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { CacheNode } from './CacheNode';\nimport { ViewCache } from './ViewCache';\nimport { EventGenerator } from './EventGenerator';\nimport { assert } from '@firebase/util';\nimport { Operation, OperationType } from '../operation/Operation';\nimport { Change } from './Change';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { Query } from '../../api/Query';\nimport { EventRegistration } from './EventRegistration';\nimport { Node } from '../snap/Node';\nimport { Path } from '../util/Path';\nimport { WriteTreeRef } from '../WriteTree';\nimport { CancelEvent, Event } from './Event';\n\n/**\n * A view represents a specific location and query that has 1 or more event registrations.\n *\n * It does several things:\n *  - Maintains the list of event registrations for this location/query.\n *  - Maintains a cache of the data visible for this location/query.\n *  - Applies new operations (via applyOperation), updates the cache, and based on the event\n *    registrations returns the set of events to be raised.\n * @constructor\n */\nexport class View {\n  private processor_: ViewProcessor;\n  private viewCache_: ViewCache;\n  private eventRegistrations_: EventRegistration[] = [];\n  private eventGenerator_: EventGenerator;\n\n  /**\n   *\n   * @param {!Query} query_\n   * @param {!ViewCache} initialViewCache\n   */\n  constructor(private query_: Query, initialViewCache: ViewCache) {\n    const params = this.query_.getQueryParams();\n\n    const indexFilter = new IndexedFilter(params.getIndex());\n    const filter = params.getNodeFilter();\n\n    /**\n     * @type {ViewProcessor}\n     * @private\n     */\n    this.processor_ = new ViewProcessor(filter);\n\n    const initialServerCache = initialViewCache.getServerCache();\n    const initialEventCache = initialViewCache.getEventCache();\n\n    // Don't filter server node with other filter than index, wait for tagged listen\n    const serverSnap = indexFilter.updateFullNode(\n      ChildrenNode.EMPTY_NODE,\n      initialServerCache.getNode(),\n      null\n    );\n    const eventSnap = filter.updateFullNode(\n      ChildrenNode.EMPTY_NODE,\n      initialEventCache.getNode(),\n      null\n    );\n    const newServerCache = new CacheNode(\n      serverSnap,\n      initialServerCache.isFullyInitialized(),\n      indexFilter.filtersNodes()\n    );\n    const newEventCache = new CacheNode(\n      eventSnap,\n      initialEventCache.isFullyInitialized(),\n      filter.filtersNodes()\n    );\n\n    /**\n     * @type {!ViewCache}\n     * @private\n     */\n    this.viewCache_ = new ViewCache(newEventCache, newServerCache);\n\n    /**\n     * @type {!EventGenerator}\n     * @private\n     */\n    this.eventGenerator_ = new EventGenerator(this.query_);\n  }\n\n  /**\n   * @return {!Query}\n   */\n  getQuery(): Query {\n    return this.query_;\n  }\n\n  /**\n   * @return {?Node}\n   */\n  getServerCache(): Node | null {\n    return this.viewCache_.getServerCache().getNode();\n  }\n\n  /**\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  getCompleteServerCache(path: Path): Node | null {\n    const cache = this.viewCache_.getCompleteServerSnap();\n    if (cache) {\n      // If this isn't a \"loadsAllData\" view, then cache isn't actually a complete cache and\n      // we need to see if it contains the child we're interested in.\n      if (\n        this.query_.getQueryParams().loadsAllData() ||\n        (!path.isEmpty() && !cache.getImmediateChild(path.getFront()).isEmpty())\n      ) {\n        return cache.getChild(path);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isEmpty(): boolean {\n    return this.eventRegistrations_.length === 0;\n  }\n\n  /**\n   * @param {!EventRegistration} eventRegistration\n   */\n  addEventRegistration(eventRegistration: EventRegistration) {\n    this.eventRegistrations_.push(eventRegistration);\n  }\n\n  /**\n   * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\n   * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\n   * @return {!Array.<!Event>} Cancel events, if cancelError was provided.\n   */\n  removeEventRegistration(\n    eventRegistration: EventRegistration | null,\n    cancelError?: Error\n  ): Event[] {\n    const cancelEvents: CancelEvent[] = [];\n    if (cancelError) {\n      assert(\n        eventRegistration == null,\n        'A cancel should cancel all event registrations.'\n      );\n      const path = this.query_.path;\n      this.eventRegistrations_.forEach(registration => {\n        cancelError /** @type {!Error} */ = cancelError;\n        const maybeEvent = registration.createCancelEvent(cancelError, path);\n        if (maybeEvent) {\n          cancelEvents.push(maybeEvent);\n        }\n      });\n    }\n\n    if (eventRegistration) {\n      let remaining = [];\n      for (let i = 0; i < this.eventRegistrations_.length; ++i) {\n        const existing = this.eventRegistrations_[i];\n        if (!existing.matches(eventRegistration)) {\n          remaining.push(existing);\n        } else if (eventRegistration.hasAnyCallback()) {\n          // We're removing just this one\n          remaining = remaining.concat(this.eventRegistrations_.slice(i + 1));\n          break;\n        }\n      }\n      this.eventRegistrations_ = remaining;\n    } else {\n      this.eventRegistrations_ = [];\n    }\n    return cancelEvents;\n  }\n\n  /**\n   * Applies the given Operation, updates our cache, and returns the appropriate events.\n   *\n   * @param {!Operation} operation\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeServerCache\n   * @return {!Array.<!Event>}\n   */\n  applyOperation(\n    operation: Operation,\n    writesCache: WriteTreeRef,\n    completeServerCache: Node | null\n  ): Event[] {\n    if (\n      operation.type === OperationType.MERGE &&\n      operation.source.queryId !== null\n    ) {\n      assert(\n        this.viewCache_.getCompleteServerSnap(),\n        'We should always have a full cache before handling merges'\n      );\n      assert(\n        this.viewCache_.getCompleteEventSnap(),\n        'Missing event cache, even though we have a server cache'\n      );\n    }\n\n    const oldViewCache = this.viewCache_;\n    const result = this.processor_.applyOperation(\n      oldViewCache,\n      operation,\n      writesCache,\n      completeServerCache\n    );\n    this.processor_.assertIndexed(result.viewCache);\n\n    assert(\n      result.viewCache.getServerCache().isFullyInitialized() ||\n        !oldViewCache.getServerCache().isFullyInitialized(),\n      'Once a server snap is complete, it should never go back'\n    );\n\n    this.viewCache_ = result.viewCache;\n\n    return this.generateEventsForChanges_(\n      result.changes,\n      result.viewCache.getEventCache().getNode(),\n      null\n    );\n  }\n\n  /**\n   * @param {!EventRegistration} registration\n   * @return {!Array.<!Event>}\n   */\n  getInitialEvents(registration: EventRegistration): Event[] {\n    const eventSnap = this.viewCache_.getEventCache();\n    const initialChanges: Change[] = [];\n    if (!eventSnap.getNode().isLeafNode()) {\n      const eventNode = eventSnap.getNode() as ChildrenNode;\n      eventNode.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n        initialChanges.push(Change.childAddedChange(key, childNode));\n      });\n    }\n    if (eventSnap.isFullyInitialized()) {\n      initialChanges.push(Change.valueChange(eventSnap.getNode()));\n    }\n    return this.generateEventsForChanges_(\n      initialChanges,\n      eventSnap.getNode(),\n      registration\n    );\n  }\n\n  /**\n   * @private\n   * @param {!Array.<!Change>} changes\n   * @param {!Node} eventCache\n   * @param {EventRegistration=} eventRegistration\n   * @return {!Array.<!Event>}\n   */\n  generateEventsForChanges_(\n    changes: Change[],\n    eventCache: Node,\n    eventRegistration?: EventRegistration\n  ): Event[] {\n    const registrations = eventRegistration\n      ? [eventRegistration]\n      : this.eventRegistrations_;\n    return this.eventGenerator_.generateEventsForChanges(\n      changes,\n      eventCache,\n      registrations\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ImmutableTree } from './util/ImmutableTree';\nimport { Path } from './util/Path';\nimport { Node, NamedNode } from './snap/Node';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { assert } from '@firebase/util';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { each } from './util/util';\n\n/**\n * This class holds a collection of writes that can be applied to nodes in unison. It abstracts away the logic with\n * dealing with priority writes and multiple nested writes. At any given path there is only allowed to be one write\n * modifying that path. Any write to an existing path or shadowing an existing path will modify that existing write\n * to reflect the write added.\n */\nexport class CompoundWrite {\n  constructor(private writeTree_: ImmutableTree<Node>) {}\n\n  static Empty = new CompoundWrite(new ImmutableTree(null));\n\n  addWrite(path: Path, node: Node): CompoundWrite {\n    if (path.isEmpty()) {\n      return new CompoundWrite(new ImmutableTree(node));\n    } else {\n      const rootmost = this.writeTree_.findRootMostValueAndPath(path);\n      if (rootmost != null) {\n        const rootMostPath = rootmost.path;\n        let value = rootmost.value;\n        const relativePath = Path.relativePath(rootMostPath, path);\n        value = value.updateChild(relativePath, node);\n        return new CompoundWrite(this.writeTree_.set(rootMostPath, value));\n      } else {\n        const subtree = new ImmutableTree(node);\n        const newWriteTree = this.writeTree_.setTree(path, subtree);\n        return new CompoundWrite(newWriteTree);\n      }\n    }\n  }\n\n  addWrites(path: Path, updates: { [name: string]: Node }): CompoundWrite {\n    let newWrite = this as CompoundWrite;\n    each(updates, (childKey: string, node: Node) => {\n      newWrite = newWrite.addWrite(path.child(childKey), node);\n    });\n    return newWrite;\n  }\n\n  /**\n   * Will remove a write at the given path and deeper paths. This will <em>not</em> modify a write at a higher\n   * location, which must be removed by calling this method with that path.\n   *\n   * @param path The path at which a write and all deeper writes should be removed\n   * @return {!CompoundWrite} The new CompoundWrite with the removed path\n   */\n  removeWrite(path: Path): CompoundWrite {\n    if (path.isEmpty()) {\n      return CompoundWrite.Empty;\n    } else {\n      const newWriteTree = this.writeTree_.setTree(path, ImmutableTree.Empty);\n      return new CompoundWrite(newWriteTree);\n    }\n  }\n\n  /**\n   * Returns whether this CompoundWrite will fully overwrite a node at a given location and can therefore be\n   * considered \"complete\".\n   *\n   * @param path The path to check for\n   * @return Whether there is a complete write at that path\n   */\n  hasCompleteWrite(path: Path): boolean {\n    return this.getCompleteNode(path) != null;\n  }\n\n  /**\n   * Returns a node for a path if and only if the node is a \"complete\" overwrite at that path. This will not aggregate\n   * writes from deeper paths, but will return child nodes from a more shallow path.\n   *\n   * @param path The path to get a complete write\n   * @return The node if complete at that path, or null otherwise.\n   */\n  getCompleteNode(path: Path): Node | null {\n    const rootmost = this.writeTree_.findRootMostValueAndPath(path);\n    if (rootmost != null) {\n      return this.writeTree_\n        .get(rootmost.path)\n        .getChild(Path.relativePath(rootmost.path, path));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Returns all children that are guaranteed to be a complete overwrite.\n   *\n   * @return A list of all complete children.\n   */\n  getCompleteChildren(): NamedNode[] {\n    const children: NamedNode[] = [];\n    const node = this.writeTree_.value;\n    if (node != null) {\n      // If it's a leaf node, it has no children; so nothing to do.\n      if (!node.isLeafNode()) {\n        (node as ChildrenNode).forEachChild(\n          PRIORITY_INDEX,\n          (childName, childNode) => {\n            children.push(new NamedNode(childName, childNode));\n          }\n        );\n      }\n    } else {\n      this.writeTree_.children.inorderTraversal((childName, childTree) => {\n        if (childTree.value != null) {\n          children.push(new NamedNode(childName, childTree.value));\n        }\n      });\n    }\n    return children;\n  }\n\n  childCompoundWrite(path: Path): CompoundWrite {\n    if (path.isEmpty()) {\n      return this;\n    } else {\n      const shadowingNode = this.getCompleteNode(path);\n      if (shadowingNode != null) {\n        return new CompoundWrite(new ImmutableTree(shadowingNode));\n      } else {\n        return new CompoundWrite(this.writeTree_.subtree(path));\n      }\n    }\n  }\n\n  /**\n   * Returns true if this CompoundWrite is empty and therefore does not modify any nodes.\n   * @return Whether this CompoundWrite is empty\n   */\n  isEmpty(): boolean {\n    return this.writeTree_.isEmpty();\n  }\n\n  /**\n   * Applies this CompoundWrite to a node. The node is returned with all writes from this CompoundWrite applied to the\n   * node\n   * @param node The node to apply this CompoundWrite to\n   * @return The node with all writes applied\n   */\n  apply(node: Node): Node {\n    return applySubtreeWrite(Path.Empty, this.writeTree_, node);\n  }\n}\n\nfunction applySubtreeWrite(\n  relativePath: Path,\n  writeTree: ImmutableTree<Node>,\n  node: Node\n): Node {\n  if (writeTree.value != null) {\n    // Since there a write is always a leaf, we're done here\n    return node.updateChild(relativePath, writeTree.value);\n  } else {\n    let priorityWrite = null;\n    writeTree.children.inorderTraversal((childKey, childTree) => {\n      if (childKey === '.priority') {\n        // Apply priorities at the end so we don't update priorities for either empty nodes or forget\n        // to apply priorities to empty nodes that are later filled\n        assert(\n          childTree.value !== null,\n          'Priority writes must always be leaf nodes'\n        );\n        priorityWrite = childTree.value;\n      } else {\n        node = applySubtreeWrite(relativePath.child(childKey), childTree, node);\n      }\n    });\n    // If there was a priority write, we only apply it if the node is not empty\n    if (!node.getChild(relativePath).isEmpty() && priorityWrite !== null) {\n      node = node.updateChild(relativePath.child('.priority'), priorityWrite);\n    }\n    return node;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { safeGet, assert, assertionError } from '@firebase/util';\n\nimport { Path } from './util/Path';\nimport { CompoundWrite } from './CompoundWrite';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { NamedNode, Node } from './snap/Node';\nimport { CacheNode } from './view/CacheNode';\nimport { Index } from './snap/indexes/Index';\nimport { each } from './util/util';\n\n/**\n * Defines a single user-initiated write operation. May be the result of a set(), transaction(), or update() call. In\n * the case of a set() or transaction, snap wil be non-null.  In the case of an update(), children will be non-null.\n */\nexport interface WriteRecord {\n  writeId: number;\n  path: Path;\n  snap?: Node | null;\n  children?: { [k: string]: Node } | null;\n  visible: boolean;\n}\n\n/**\n * WriteTree tracks all pending user-initiated writes and has methods to calculate the result of merging them\n * with underlying server data (to create \"event cache\" data).  Pending writes are added with addOverwrite()\n * and addMerge(), and removed with removeWrite().\n *\n * @constructor\n */\nexport class WriteTree {\n  /**\n   * A tree tracking the result of applying all visible writes.  This does not include transactions with\n   * applyLocally=false or writes that are completely shadowed by other writes.\n   *\n   * @type {!CompoundWrite}\n   * @private\n   */\n  private visibleWrites_: CompoundWrite = CompoundWrite.Empty;\n\n  /**\n   * A list of all pending writes, regardless of visibility and shadowed-ness.  Used to calculate arbitrary\n   * sets of the changed data, such as hidden writes (from transactions) or changes with certain writes excluded (also\n   * used by transactions).\n   *\n   * @type {!Array.<!WriteRecord>}\n   * @private\n   */\n  private allWrites_: WriteRecord[] = [];\n\n  private lastWriteId_ = -1;\n\n  /**\n   * Create a new WriteTreeRef for the given path. For use with a new sync point at the given path.\n   *\n   * @param {!Path} path\n   * @return {!WriteTreeRef}\n   */\n  childWrites(path: Path): WriteTreeRef {\n    return new WriteTreeRef(path, this);\n  }\n\n  /**\n   * Record a new overwrite from user code.\n   *\n   * @param {!Path} path\n   * @param {!Node} snap\n   * @param {!number} writeId\n   * @param {boolean=} visible This is set to false by some transactions. It should be excluded from event caches\n   */\n  addOverwrite(path: Path, snap: Node, writeId: number, visible?: boolean) {\n    assert(\n      writeId > this.lastWriteId_,\n      'Stacking an older write on top of newer ones'\n    );\n    if (visible === undefined) {\n      visible = true;\n    }\n    this.allWrites_.push({\n      path,\n      snap,\n      writeId,\n      visible\n    });\n\n    if (visible) {\n      this.visibleWrites_ = this.visibleWrites_.addWrite(path, snap);\n    }\n    this.lastWriteId_ = writeId;\n  }\n\n  /**\n   * Record a new merge from user code.\n   *\n   * @param {!Path} path\n   * @param {!Object.<string, !Node>} changedChildren\n   * @param {!number} writeId\n   */\n  addMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node },\n    writeId: number\n  ) {\n    assert(\n      writeId > this.lastWriteId_,\n      'Stacking an older merge on top of newer ones'\n    );\n    this.allWrites_.push({\n      path,\n      children: changedChildren,\n      writeId,\n      visible: true\n    });\n\n    this.visibleWrites_ = this.visibleWrites_.addWrites(path, changedChildren);\n    this.lastWriteId_ = writeId;\n  }\n\n  /**\n   * @param {!number} writeId\n   * @return {?WriteRecord}\n   */\n  getWrite(writeId: number): WriteRecord | null {\n    for (let i = 0; i < this.allWrites_.length; i++) {\n      const record = this.allWrites_[i];\n      if (record.writeId === writeId) {\n        return record;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Remove a write (either an overwrite or merge) that has been successfully acknowledge by the server. Recalculates\n   * the tree if necessary.  We return true if it may have been visible, meaning views need to reevaluate.\n   *\n   * @param {!number} writeId\n   * @return {boolean} true if the write may have been visible (meaning we'll need to reevaluate / raise\n   * events as a result).\n   */\n  removeWrite(writeId: number): boolean {\n    // Note: disabling this check. It could be a transaction that preempted another transaction, and thus was applied\n    // out of order.\n    //const validClear = revert || this.allWrites_.length === 0 || writeId <= this.allWrites_[0].writeId;\n    //assert(validClear, \"Either we don't have this write, or it's the first one in the queue\");\n\n    const idx = this.allWrites_.findIndex(s => {\n      return s.writeId === writeId;\n    });\n    assert(idx >= 0, 'removeWrite called with nonexistent writeId.');\n    const writeToRemove = this.allWrites_[idx];\n    this.allWrites_.splice(idx, 1);\n\n    let removedWriteWasVisible = writeToRemove.visible;\n    let removedWriteOverlapsWithOtherWrites = false;\n\n    let i = this.allWrites_.length - 1;\n\n    while (removedWriteWasVisible && i >= 0) {\n      const currentWrite = this.allWrites_[i];\n      if (currentWrite.visible) {\n        if (\n          i >= idx &&\n          this.recordContainsPath_(currentWrite, writeToRemove.path)\n        ) {\n          // The removed write was completely shadowed by a subsequent write.\n          removedWriteWasVisible = false;\n        } else if (writeToRemove.path.contains(currentWrite.path)) {\n          // Either we're covering some writes or they're covering part of us (depending on which came first).\n          removedWriteOverlapsWithOtherWrites = true;\n        }\n      }\n      i--;\n    }\n\n    if (!removedWriteWasVisible) {\n      return false;\n    } else if (removedWriteOverlapsWithOtherWrites) {\n      // There's some shadowing going on. Just rebuild the visible writes from scratch.\n      this.resetTree_();\n      return true;\n    } else {\n      // There's no shadowing.  We can safely just remove the write(s) from visibleWrites.\n      if (writeToRemove.snap) {\n        this.visibleWrites_ = this.visibleWrites_.removeWrite(\n          writeToRemove.path\n        );\n      } else {\n        const children = writeToRemove.children;\n        each(children, (childName: string) => {\n          this.visibleWrites_ = this.visibleWrites_.removeWrite(\n            writeToRemove.path.child(childName)\n          );\n        });\n      }\n      return true;\n    }\n  }\n\n  /**\n   * Return a complete snapshot for the given path if there's visible write data at that path, else null.\n   * No server data is considered.\n   *\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  getCompleteWriteData(path: Path): Node | null {\n    return this.visibleWrites_.getCompleteNode(path);\n  }\n\n  /**\n   * Given optional, underlying server data, and an optional set of constraints (exclude some sets, include hidden\n   * writes), attempt to calculate a complete snapshot for the given path\n   *\n   * @param {!Path} treePath\n   * @param {?Node} completeServerCache\n   * @param {Array.<number>=} writeIdsToExclude An optional set to be excluded\n   * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\n   * @return {?Node}\n   */\n  calcCompleteEventCache(\n    treePath: Path,\n    completeServerCache: Node | null,\n    writeIdsToExclude?: number[],\n    includeHiddenWrites?: boolean\n  ): Node | null {\n    if (!writeIdsToExclude && !includeHiddenWrites) {\n      const shadowingNode = this.visibleWrites_.getCompleteNode(treePath);\n      if (shadowingNode != null) {\n        return shadowingNode;\n      } else {\n        const subMerge = this.visibleWrites_.childCompoundWrite(treePath);\n        if (subMerge.isEmpty()) {\n          return completeServerCache;\n        } else if (\n          completeServerCache == null &&\n          !subMerge.hasCompleteWrite(Path.Empty)\n        ) {\n          // We wouldn't have a complete snapshot, since there's no underlying data and no complete shadow\n          return null;\n        } else {\n          const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\n          return subMerge.apply(layeredCache);\n        }\n      }\n    } else {\n      const merge = this.visibleWrites_.childCompoundWrite(treePath);\n      if (!includeHiddenWrites && merge.isEmpty()) {\n        return completeServerCache;\n      } else {\n        // If the server cache is null, and we don't have a complete cache, we need to return null\n        if (\n          !includeHiddenWrites &&\n          completeServerCache == null &&\n          !merge.hasCompleteWrite(Path.Empty)\n        ) {\n          return null;\n        } else {\n          const filter = function(write: WriteRecord) {\n            return (\n              (write.visible || includeHiddenWrites) &&\n              (!writeIdsToExclude ||\n                !~writeIdsToExclude.indexOf(write.writeId)) &&\n              (write.path.contains(treePath) || treePath.contains(write.path))\n            );\n          };\n          const mergeAtPath = WriteTree.layerTree_(\n            this.allWrites_,\n            filter,\n            treePath\n          );\n          const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\n          return mergeAtPath.apply(layeredCache);\n        }\n      }\n    }\n  }\n\n  /**\n   * With optional, underlying server data, attempt to return a children node of children that we have complete data for.\n   * Used when creating new views, to pre-fill their complete event children snapshot.\n   *\n   * @param {!Path} treePath\n   * @param {?ChildrenNode} completeServerChildren\n   * @return {!ChildrenNode}\n   */\n  calcCompleteEventChildren(\n    treePath: Path,\n    completeServerChildren: ChildrenNode | null\n  ) {\n    let completeChildren = ChildrenNode.EMPTY_NODE as Node;\n    const topLevelSet = this.visibleWrites_.getCompleteNode(treePath);\n    if (topLevelSet) {\n      if (!topLevelSet.isLeafNode()) {\n        // we're shadowing everything. Return the children.\n        topLevelSet.forEachChild(PRIORITY_INDEX, (childName, childSnap) => {\n          completeChildren = completeChildren.updateImmediateChild(\n            childName,\n            childSnap\n          );\n        });\n      }\n      return completeChildren;\n    } else if (completeServerChildren) {\n      // Layer any children we have on top of this\n      // We know we don't have a top-level set, so just enumerate existing children\n      const merge = this.visibleWrites_.childCompoundWrite(treePath);\n      completeServerChildren.forEachChild(\n        PRIORITY_INDEX,\n        (childName, childNode) => {\n          const node = merge\n            .childCompoundWrite(new Path(childName))\n            .apply(childNode);\n          completeChildren = completeChildren.updateImmediateChild(\n            childName,\n            node\n          );\n        }\n      );\n      // Add any complete children we have from the set\n      merge.getCompleteChildren().forEach(namedNode => {\n        completeChildren = completeChildren.updateImmediateChild(\n          namedNode.name,\n          namedNode.node\n        );\n      });\n      return completeChildren;\n    } else {\n      // We don't have anything to layer on top of. Layer on any children we have\n      // Note that we can return an empty snap if we have a defined delete\n      const merge = this.visibleWrites_.childCompoundWrite(treePath);\n      merge.getCompleteChildren().forEach(namedNode => {\n        completeChildren = completeChildren.updateImmediateChild(\n          namedNode.name,\n          namedNode.node\n        );\n      });\n      return completeChildren;\n    }\n  }\n\n  /**\n   * Given that the underlying server data has updated, determine what, if anything, needs to be\n   * applied to the event cache.\n   *\n   * Possibilities:\n   *\n   * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\n   *\n   * 2. Some write is completely shadowing. No events to be raised\n   *\n   * 3. Is partially shadowed. Events\n   *\n   * Either existingEventSnap or existingServerSnap must exist\n   *\n   * @param {!Path} treePath\n   * @param {!Path} childPath\n   * @param {?Node} existingEventSnap\n   * @param {?Node} existingServerSnap\n   * @return {?Node}\n   */\n  calcEventCacheAfterServerOverwrite(\n    treePath: Path,\n    childPath: Path,\n    existingEventSnap: Node | null,\n    existingServerSnap: Node | null\n  ): Node | null {\n    assert(\n      existingEventSnap || existingServerSnap,\n      'Either existingEventSnap or existingServerSnap must exist'\n    );\n    const path = treePath.child(childPath);\n    if (this.visibleWrites_.hasCompleteWrite(path)) {\n      // At this point we can probably guarantee that we're in case 2, meaning no events\n      // May need to check visibility while doing the findRootMostValueAndPath call\n      return null;\n    } else {\n      // No complete shadowing. We're either partially shadowing or not shadowing at all.\n      const childMerge = this.visibleWrites_.childCompoundWrite(path);\n      if (childMerge.isEmpty()) {\n        // We're not shadowing at all. Case 1\n        return existingServerSnap.getChild(childPath);\n      } else {\n        // This could be more efficient if the serverNode + updates doesn't change the eventSnap\n        // However this is tricky to find out, since user updates don't necessary change the server\n        // snap, e.g. priority updates on empty nodes, or deep deletes. Another special case is if the server\n        // adds nodes, but doesn't change any existing writes. It is therefore not enough to\n        // only check if the updates change the serverNode.\n        // Maybe check if the merge tree contains these special cases and only do a full overwrite in that case?\n        return childMerge.apply(existingServerSnap.getChild(childPath));\n      }\n    }\n  }\n\n  /**\n   * Returns a complete child for a given server snap after applying all user writes or null if there is no\n   * complete child for this ChildKey.\n   *\n   * @param {!Path} treePath\n   * @param {!string} childKey\n   * @param {!CacheNode} existingServerSnap\n   * @return {?Node}\n   */\n  calcCompleteChild(\n    treePath: Path,\n    childKey: string,\n    existingServerSnap: CacheNode\n  ): Node | null {\n    const path = treePath.child(childKey);\n    const shadowingNode = this.visibleWrites_.getCompleteNode(path);\n    if (shadowingNode != null) {\n      return shadowingNode;\n    } else {\n      if (existingServerSnap.isCompleteForChild(childKey)) {\n        const childMerge = this.visibleWrites_.childCompoundWrite(path);\n        return childMerge.apply(\n          existingServerSnap.getNode().getImmediateChild(childKey)\n        );\n      } else {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\n   * a higher path, this will return the child of that write relative to the write and this path.\n   * Returns null if there is no write at this path.\n   */\n  shadowingWrite(path: Path): Node | null {\n    return this.visibleWrites_.getCompleteNode(path);\n  }\n\n  /**\n   * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\n   * the window, but may now be in the window.\n   */\n  calcIndexedSlice(\n    treePath: Path,\n    completeServerData: Node | null,\n    startPost: NamedNode,\n    count: number,\n    reverse: boolean,\n    index: Index\n  ): NamedNode[] {\n    let toIterate: Node;\n    const merge = this.visibleWrites_.childCompoundWrite(treePath);\n    const shadowingNode = merge.getCompleteNode(Path.Empty);\n    if (shadowingNode != null) {\n      toIterate = shadowingNode;\n    } else if (completeServerData != null) {\n      toIterate = merge.apply(completeServerData);\n    } else {\n      // no children to iterate on\n      return [];\n    }\n    toIterate = toIterate.withIndex(index);\n    if (!toIterate.isEmpty() && !toIterate.isLeafNode()) {\n      const nodes = [];\n      const cmp = index.getCompare();\n      const iter = reverse\n        ? (toIterate as ChildrenNode).getReverseIteratorFrom(startPost, index)\n        : (toIterate as ChildrenNode).getIteratorFrom(startPost, index);\n      let next = iter.getNext();\n      while (next && nodes.length < count) {\n        if (cmp(next, startPost) !== 0) {\n          nodes.push(next);\n        }\n        next = iter.getNext();\n      }\n      return nodes;\n    } else {\n      return [];\n    }\n  }\n\n  private recordContainsPath_(writeRecord: WriteRecord, path: Path): boolean {\n    if (writeRecord.snap) {\n      return writeRecord.path.contains(path);\n    } else {\n      for (const childName in writeRecord.children) {\n        if (\n          writeRecord.children.hasOwnProperty(childName) &&\n          writeRecord.path.child(childName).contains(path)\n        ) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n\n  /**\n   * Re-layer the writes and merges into a tree so we can efficiently calculate event snapshots\n   */\n  private resetTree_() {\n    this.visibleWrites_ = WriteTree.layerTree_(\n      this.allWrites_,\n      WriteTree.DefaultFilter_,\n      Path.Empty\n    );\n    if (this.allWrites_.length > 0) {\n      this.lastWriteId_ = this.allWrites_[this.allWrites_.length - 1].writeId;\n    } else {\n      this.lastWriteId_ = -1;\n    }\n  }\n\n  /**\n   * The default filter used when constructing the tree. Keep everything that's visible.\n   */\n  private static DefaultFilter_(write: WriteRecord) {\n    return write.visible;\n  }\n\n  /**\n   * Static method. Given an array of WriteRecords, a filter for which ones to include, and a path, construct the tree of\n   * event data at that path.\n   */\n  private static layerTree_(\n    writes: WriteRecord[],\n    filter: (w: WriteRecord) => boolean,\n    treeRoot: Path\n  ): CompoundWrite {\n    let compoundWrite = CompoundWrite.Empty;\n    for (let i = 0; i < writes.length; ++i) {\n      const write = writes[i];\n      // Theory, a later set will either:\n      // a) abort a relevant transaction, so no need to worry about excluding it from calculating that transaction\n      // b) not be relevant to a transaction (separate branch), so again will not affect the data for that transaction\n      if (filter(write)) {\n        const writePath = write.path;\n        let relativePath;\n        if (write.snap) {\n          if (treeRoot.contains(writePath)) {\n            relativePath = Path.relativePath(treeRoot, writePath);\n            compoundWrite = compoundWrite.addWrite(relativePath, write.snap);\n          } else if (writePath.contains(treeRoot)) {\n            relativePath = Path.relativePath(writePath, treeRoot);\n            compoundWrite = compoundWrite.addWrite(\n              Path.Empty,\n              write.snap.getChild(relativePath)\n            );\n          } else {\n            // There is no overlap between root path and write path, ignore write\n          }\n        } else if (write.children) {\n          if (treeRoot.contains(writePath)) {\n            relativePath = Path.relativePath(treeRoot, writePath);\n            compoundWrite = compoundWrite.addWrites(\n              relativePath,\n              write.children\n            );\n          } else if (writePath.contains(treeRoot)) {\n            relativePath = Path.relativePath(writePath, treeRoot);\n            if (relativePath.isEmpty()) {\n              compoundWrite = compoundWrite.addWrites(\n                Path.Empty,\n                write.children\n              );\n            } else {\n              const child = safeGet(write.children, relativePath.getFront());\n              if (child) {\n                // There exists a child in this node that matches the root path\n                const deepNode = child.getChild(relativePath.popFront());\n                compoundWrite = compoundWrite.addWrite(Path.Empty, deepNode);\n              }\n            }\n          } else {\n            // There is no overlap between root path and write path, ignore write\n          }\n        } else {\n          throw assertionError('WriteRecord should have .snap or .children');\n        }\n      }\n    }\n    return compoundWrite;\n  }\n}\n\n/**\n * A WriteTreeRef wraps a WriteTree and a path, for convenient access to a particular subtree.  All of the methods\n * just proxy to the underlying WriteTree.\n *\n * @constructor\n */\nexport class WriteTreeRef {\n  /**\n   * The path to this particular write tree ref. Used for calling methods on writeTree_ while exposing a simpler\n   * interface to callers.\n   *\n   * @type {!Path}\n   * @private\n   * @const\n   */\n  private readonly treePath_: Path;\n\n  /**\n   * * A reference to the actual tree of write data. All methods are pass-through to the tree, but with the appropriate\n   * path prefixed.\n   *\n   * This lets us make cheap references to points in the tree for sync points without having to copy and maintain all of\n   * the data.\n   *\n   * @type {!WriteTree}\n   * @private\n   * @const\n   */\n  private readonly writeTree_: WriteTree;\n\n  /**\n   * @param {!Path} path\n   * @param {!WriteTree} writeTree\n   */\n  constructor(path: Path, writeTree: WriteTree) {\n    this.treePath_ = path;\n    this.writeTree_ = writeTree;\n  }\n\n  /**\n   * If possible, returns a complete event cache, using the underlying server data if possible. In addition, can be used\n   * to get a cache that includes hidden writes, and excludes arbitrary writes. Note that customizing the returned node\n   * can lead to a more expensive calculation.\n   *\n   * @param {?Node} completeServerCache\n   * @param {Array.<number>=} writeIdsToExclude Optional writes to exclude.\n   * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\n   * @return {?Node}\n   */\n  calcCompleteEventCache(\n    completeServerCache: Node | null,\n    writeIdsToExclude?: number[],\n    includeHiddenWrites?: boolean\n  ): Node | null {\n    return this.writeTree_.calcCompleteEventCache(\n      this.treePath_,\n      completeServerCache,\n      writeIdsToExclude,\n      includeHiddenWrites\n    );\n  }\n\n  /**\n   * If possible, returns a children node containing all of the complete children we have data for. The returned data is a\n   * mix of the given server data and write data.\n   *\n   * @param {?ChildrenNode} completeServerChildren\n   * @return {!ChildrenNode}\n   */\n  calcCompleteEventChildren(\n    completeServerChildren: ChildrenNode | null\n  ): ChildrenNode {\n    return this.writeTree_.calcCompleteEventChildren(\n      this.treePath_,\n      completeServerChildren\n    ) as ChildrenNode;\n  }\n\n  /**\n   * Given that either the underlying server data has updated or the outstanding writes have updated, determine what,\n   * if anything, needs to be applied to the event cache.\n   *\n   * Possibilities:\n   *\n   * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\n   *\n   * 2. Some write is completely shadowing. No events to be raised\n   *\n   * 3. Is partially shadowed. Events should be raised\n   *\n   * Either existingEventSnap or existingServerSnap must exist, this is validated via an assert\n   *\n   * @param {!Path} path\n   * @param {?Node} existingEventSnap\n   * @param {?Node} existingServerSnap\n   * @return {?Node}\n   */\n  calcEventCacheAfterServerOverwrite(\n    path: Path,\n    existingEventSnap: Node | null,\n    existingServerSnap: Node | null\n  ): Node | null {\n    return this.writeTree_.calcEventCacheAfterServerOverwrite(\n      this.treePath_,\n      path,\n      existingEventSnap,\n      existingServerSnap\n    );\n  }\n\n  /**\n   * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\n   * a higher path, this will return the child of that write relative to the write and this path.\n   * Returns null if there is no write at this path.\n   *\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  shadowingWrite(path: Path): Node | null {\n    return this.writeTree_.shadowingWrite(this.treePath_.child(path));\n  }\n\n  /**\n   * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\n   * the window, but may now be in the window\n   *\n   * @param {?Node} completeServerData\n   * @param {!NamedNode} startPost\n   * @param {!number} count\n   * @param {boolean} reverse\n   * @param {!Index} index\n   * @return {!Array.<!NamedNode>}\n   */\n  calcIndexedSlice(\n    completeServerData: Node | null,\n    startPost: NamedNode,\n    count: number,\n    reverse: boolean,\n    index: Index\n  ): NamedNode[] {\n    return this.writeTree_.calcIndexedSlice(\n      this.treePath_,\n      completeServerData,\n      startPost,\n      count,\n      reverse,\n      index\n    );\n  }\n\n  /**\n   * Returns a complete child for a given server snap after applying all user writes or null if there is no\n   * complete child for this ChildKey.\n   *\n   * @param {!string} childKey\n   * @param {!CacheNode} existingServerCache\n   * @return {?Node}\n   */\n  calcCompleteChild(\n    childKey: string,\n    existingServerCache: CacheNode\n  ): Node | null {\n    return this.writeTree_.calcCompleteChild(\n      this.treePath_,\n      childKey,\n      existingServerCache\n    );\n  }\n\n  /**\n   * Return a WriteTreeRef for a child.\n   *\n   * @param {string} childName\n   * @return {!WriteTreeRef}\n   */\n  child(childName: string): WriteTreeRef {\n    return new WriteTreeRef(this.treePath_.child(childName), this.writeTree_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { errorForServerCode, each } from './util/util';\nimport { AckUserWrite } from './operation/AckUserWrite';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { ImmutableTree } from './util/ImmutableTree';\nimport { ListenComplete } from './operation/ListenComplete';\nimport { Merge } from './operation/Merge';\nimport { Operation, OperationSource } from './operation/Operation';\nimport { Overwrite } from './operation/Overwrite';\nimport { Path } from './util/Path';\nimport { SyncPoint } from './SyncPoint';\nimport { WriteTree, WriteTreeRef } from './WriteTree';\nimport { Query } from '../api/Query';\nimport { Node } from './snap/Node';\nimport { Event } from './view/Event';\nimport { EventRegistration } from './view/EventRegistration';\nimport { View } from './view/View';\n\n/**\n * @typedef {{\n *   startListening: function(\n *     !Query,\n *     ?number,\n *     function():string,\n *     function(!string, *):!Array.<!Event>\n *   ):!Array.<!Event>,\n *\n *   stopListening: function(!Query, ?number)\n * }}\n */\nexport interface ListenProvider {\n  startListening(\n    query: Query,\n    tag: number | null,\n    hashFn: () => string,\n    onComplete: (a: string, b?: unknown) => Event[]\n  ): Event[];\n\n  stopListening(a: Query, b: number | null): void;\n}\n\n/**\n * SyncTree is the central class for managing event callback registration, data caching, views\n * (query processing), and event generation.  There are typically two SyncTree instances for\n * each Repo, one for the normal Firebase data, and one for the .info data.\n *\n * It has a number of responsibilities, including:\n *  - Tracking all user event callbacks (registered via addEventRegistration() and removeEventRegistration()).\n *  - Applying and caching data changes for user set(), transaction(), and update() calls\n *    (applyUserOverwrite(), applyUserMerge()).\n *  - Applying and caching data changes for server data changes (applyServerOverwrite(),\n *    applyServerMerge()).\n *  - Generating user-facing events for server and user changes (all of the apply* methods\n *    return the set of events that need to be raised as a result).\n *  - Maintaining the appropriate set of server listens to ensure we are always subscribed\n *    to the correct set of paths and queries to satisfy the current set of user event\n *    callbacks (listens are started/stopped using the provided listenProvider).\n *\n * NOTE: Although SyncTree tracks event callbacks and calculates events to raise, the actual\n * events are returned to the caller rather than raised synchronously.\n *\n * @constructor\n */\nexport class SyncTree {\n  /**\n   * Tree of SyncPoints.  There's a SyncPoint at any location that has 1 or more views.\n   */\n  private syncPointTree_: ImmutableTree<SyncPoint> = ImmutableTree.Empty;\n\n  /**\n   * A tree of all pending user writes (user-initiated set()'s, transaction()'s, update()'s, etc.).\n   */\n  private pendingWriteTree_ = new WriteTree();\n\n  private readonly tagToQueryMap: Map<number, string> = new Map();\n  private readonly queryToTagMap: Map<string, number> = new Map();\n\n  /**\n   * @param {!ListenProvider} listenProvider_ Used by SyncTree to start / stop listening\n   *   to server data.\n   */\n  constructor(private listenProvider_: ListenProvider) {}\n\n  /**\n   * Apply the data changes for a user-generated set() or transaction() call.\n   *\n   * @return Events to raise.\n   */\n  applyUserOverwrite(\n    path: Path,\n    newData: Node,\n    writeId: number,\n    visible?: boolean\n  ): Event[] {\n    // Record pending write.\n    this.pendingWriteTree_.addOverwrite(path, newData, writeId, visible);\n\n    if (!visible) {\n      return [];\n    } else {\n      return this.applyOperationToSyncPoints_(\n        new Overwrite(OperationSource.User, path, newData)\n      );\n    }\n  }\n\n  /**\n   * Apply the data from a user-generated update() call\n   *\n   * @return Events to raise.\n   */\n  applyUserMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node },\n    writeId: number\n  ): Event[] {\n    // Record pending merge.\n    this.pendingWriteTree_.addMerge(path, changedChildren, writeId);\n\n    const changeTree = ImmutableTree.fromObject(changedChildren);\n\n    return this.applyOperationToSyncPoints_(\n      new Merge(OperationSource.User, path, changeTree)\n    );\n  }\n\n  /**\n   * Acknowledge a pending user write that was previously registered with applyUserOverwrite() or applyUserMerge().\n   *\n   * @param revert True if the given write failed and needs to be reverted\n   * @return Events to raise.\n   */\n  ackUserWrite(writeId: number, revert: boolean = false) {\n    const write = this.pendingWriteTree_.getWrite(writeId);\n    const needToReevaluate = this.pendingWriteTree_.removeWrite(writeId);\n    if (!needToReevaluate) {\n      return [];\n    } else {\n      let affectedTree = ImmutableTree.Empty;\n      if (write.snap != null) {\n        // overwrite\n        affectedTree = affectedTree.set(Path.Empty, true);\n      } else {\n        each(write.children, (pathString: string, node: Node) => {\n          affectedTree = affectedTree.set(new Path(pathString), node);\n        });\n      }\n      return this.applyOperationToSyncPoints_(\n        new AckUserWrite(write.path, affectedTree, revert)\n      );\n    }\n  }\n\n  /**\n   * Apply new server data for the specified path..\n   *\n   * @return Events to raise.\n   */\n  applyServerOverwrite(path: Path, newData: Node): Event[] {\n    return this.applyOperationToSyncPoints_(\n      new Overwrite(OperationSource.Server, path, newData)\n    );\n  }\n\n  /**\n   * Apply new server data to be merged in at the specified path.\n   *\n   * @return Events to raise.\n   */\n  applyServerMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node }\n  ): Event[] {\n    const changeTree = ImmutableTree.fromObject(changedChildren);\n\n    return this.applyOperationToSyncPoints_(\n      new Merge(OperationSource.Server, path, changeTree)\n    );\n  }\n\n  /**\n   * Apply a listen complete for a query\n   *\n   * @return Events to raise.\n   */\n  applyListenComplete(path: Path): Event[] {\n    return this.applyOperationToSyncPoints_(\n      new ListenComplete(OperationSource.Server, path)\n    );\n  }\n\n  /**\n   * Apply new server data for the specified tagged query.\n   *\n   * @return Events to raise.\n   */\n  applyTaggedQueryOverwrite(path: Path, snap: Node, tag: number): Event[] {\n    const queryKey = this.queryKeyForTag_(tag);\n    if (queryKey != null) {\n      const r = SyncTree.parseQueryKey_(queryKey);\n      const queryPath = r.path,\n        queryId = r.queryId;\n      const relativePath = Path.relativePath(queryPath, path);\n      const op = new Overwrite(\n        OperationSource.forServerTaggedQuery(queryId),\n        relativePath,\n        snap\n      );\n      return this.applyTaggedOperation_(queryPath, op);\n    } else {\n      // Query must have been removed already\n      return [];\n    }\n  }\n\n  /**\n   * Apply server data to be merged in for the specified tagged query.\n   *\n   * @return Events to raise.\n   */\n  applyTaggedQueryMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node },\n    tag: number\n  ): Event[] {\n    const queryKey = this.queryKeyForTag_(tag);\n    if (queryKey) {\n      const r = SyncTree.parseQueryKey_(queryKey);\n      const queryPath = r.path,\n        queryId = r.queryId;\n      const relativePath = Path.relativePath(queryPath, path);\n      const changeTree = ImmutableTree.fromObject(changedChildren);\n      const op = new Merge(\n        OperationSource.forServerTaggedQuery(queryId),\n        relativePath,\n        changeTree\n      );\n      return this.applyTaggedOperation_(queryPath, op);\n    } else {\n      // We've already removed the query. No big deal, ignore the update\n      return [];\n    }\n  }\n\n  /**\n   * Apply a listen complete for a tagged query\n   *\n   * @return Events to raise.\n   */\n  applyTaggedListenComplete(path: Path, tag: number): Event[] {\n    const queryKey = this.queryKeyForTag_(tag);\n    if (queryKey) {\n      const r = SyncTree.parseQueryKey_(queryKey);\n      const queryPath = r.path,\n        queryId = r.queryId;\n      const relativePath = Path.relativePath(queryPath, path);\n      const op = new ListenComplete(\n        OperationSource.forServerTaggedQuery(queryId),\n        relativePath\n      );\n      return this.applyTaggedOperation_(queryPath, op);\n    } else {\n      // We've already removed the query. No big deal, ignore the update\n      return [];\n    }\n  }\n\n  /**\n   * Add an event callback for the specified query.\n   *\n   * @return Events to raise.\n   */\n  addEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration\n  ): Event[] {\n    const path = query.path;\n\n    let serverCache: Node | null = null;\n    let foundAncestorDefaultView = false;\n    // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.\n    // Consider optimizing this once there's a better understanding of what actual behavior will be.\n    this.syncPointTree_.foreachOnPath(path, (pathToSyncPoint, sp) => {\n      const relativePath = Path.relativePath(pathToSyncPoint, path);\n      serverCache = serverCache || sp.getCompleteServerCache(relativePath);\n      foundAncestorDefaultView =\n        foundAncestorDefaultView || sp.hasCompleteView();\n    });\n    let syncPoint = this.syncPointTree_.get(path);\n    if (!syncPoint) {\n      syncPoint = new SyncPoint();\n      this.syncPointTree_ = this.syncPointTree_.set(path, syncPoint);\n    } else {\n      foundAncestorDefaultView =\n        foundAncestorDefaultView || syncPoint.hasCompleteView();\n      serverCache = serverCache || syncPoint.getCompleteServerCache(Path.Empty);\n    }\n\n    let serverCacheComplete;\n    if (serverCache != null) {\n      serverCacheComplete = true;\n    } else {\n      serverCacheComplete = false;\n      serverCache = ChildrenNode.EMPTY_NODE;\n      const subtree = this.syncPointTree_.subtree(path);\n      subtree.foreachChild((childName, childSyncPoint) => {\n        const completeCache = childSyncPoint.getCompleteServerCache(Path.Empty);\n        if (completeCache) {\n          serverCache = serverCache.updateImmediateChild(\n            childName,\n            completeCache\n          );\n        }\n      });\n    }\n\n    const viewAlreadyExists = syncPoint.viewExistsForQuery(query);\n    if (!viewAlreadyExists && !query.getQueryParams().loadsAllData()) {\n      // We need to track a tag for this query\n      const queryKey = SyncTree.makeQueryKey_(query);\n      assert(\n        !this.queryToTagMap.has(queryKey),\n        'View does not exist, but we have a tag'\n      );\n      const tag = SyncTree.getNextQueryTag_();\n      this.queryToTagMap.set(queryKey, tag);\n      this.tagToQueryMap.set(tag, queryKey);\n    }\n    const writesCache = this.pendingWriteTree_.childWrites(path);\n    let events = syncPoint.addEventRegistration(\n      query,\n      eventRegistration,\n      writesCache,\n      serverCache,\n      serverCacheComplete\n    );\n    if (!viewAlreadyExists && !foundAncestorDefaultView) {\n      const view /** @type !View */ = syncPoint.viewForQuery(query);\n      events = events.concat(this.setupListener_(query, view));\n    }\n    return events;\n  }\n\n  /**\n   * Remove event callback(s).\n   *\n   * If query is the default query, we'll check all queries for the specified eventRegistration.\n   * If eventRegistration is null, we'll remove all callbacks for the specified query/queries.\n   *\n   * @param eventRegistration If null, all callbacks are removed.\n   * @param cancelError If a cancelError is provided, appropriate cancel events will be returned.\n   * @return Cancel events, if cancelError was provided.\n   */\n  removeEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration | null,\n    cancelError?: Error\n  ): Event[] {\n    // Find the syncPoint first. Then deal with whether or not it has matching listeners\n    const path = query.path;\n    const maybeSyncPoint = this.syncPointTree_.get(path);\n    let cancelEvents: Event[] = [];\n    // A removal on a default query affects all queries at that location. A removal on an indexed query, even one without\n    // other query constraints, does *not* affect all queries at that location. So this check must be for 'default', and\n    // not loadsAllData().\n    if (\n      maybeSyncPoint &&\n      (query.queryIdentifier() === 'default' ||\n        maybeSyncPoint.viewExistsForQuery(query))\n    ) {\n      /**\n       * @type {{removed: !Array.<!Query>, events: !Array.<!Event>}}\n       */\n      const removedAndEvents = maybeSyncPoint.removeEventRegistration(\n        query,\n        eventRegistration,\n        cancelError\n      );\n      if (maybeSyncPoint.isEmpty()) {\n        this.syncPointTree_ = this.syncPointTree_.remove(path);\n      }\n      const removed = removedAndEvents.removed;\n      cancelEvents = removedAndEvents.events;\n      // We may have just removed one of many listeners and can short-circuit this whole process\n      // We may also not have removed a default listener, in which case all of the descendant listeners should already be\n      // properly set up.\n      //\n      // Since indexed queries can shadow if they don't have other query constraints, check for loadsAllData(), instead of\n      // queryId === 'default'\n      const removingDefault =\n        -1 !==\n        removed.findIndex(query => {\n          return query.getQueryParams().loadsAllData();\n        });\n      const covered = this.syncPointTree_.findOnPath(\n        path,\n        (relativePath, parentSyncPoint) => {\n          return parentSyncPoint.hasCompleteView();\n        }\n      );\n\n      if (removingDefault && !covered) {\n        const subtree = this.syncPointTree_.subtree(path);\n        // There are potentially child listeners. Determine what if any listens we need to send before executing the\n        // removal\n        if (!subtree.isEmpty()) {\n          // We need to fold over our subtree and collect the listeners to send\n          const newViews = this.collectDistinctViewsForSubTree_(subtree);\n\n          // Ok, we've collected all the listens we need. Set them up.\n          for (let i = 0; i < newViews.length; ++i) {\n            const view = newViews[i],\n              newQuery = view.getQuery();\n            const listener = this.createListenerForView_(view);\n            this.listenProvider_.startListening(\n              SyncTree.queryForListening_(newQuery),\n              this.tagForQuery_(newQuery),\n              listener.hashFn,\n              listener.onComplete\n            );\n          }\n        } else {\n          // There's nothing below us, so nothing we need to start listening on\n        }\n      }\n      // If we removed anything and we're not covered by a higher up listen, we need to stop listening on this query\n      // The above block has us covered in terms of making sure we're set up on listens lower in the tree.\n      // Also, note that if we have a cancelError, it's already been removed at the provider level.\n      if (!covered && removed.length > 0 && !cancelError) {\n        // If we removed a default, then we weren't listening on any of the other queries here. Just cancel the one\n        // default. Otherwise, we need to iterate through and cancel each individual query\n        if (removingDefault) {\n          // We don't tag default listeners\n          const defaultTag: number | null = null;\n          this.listenProvider_.stopListening(\n            SyncTree.queryForListening_(query),\n            defaultTag\n          );\n        } else {\n          removed.forEach((queryToRemove: Query) => {\n            const tagToRemove = this.queryToTagMap.get(\n              SyncTree.makeQueryKey_(queryToRemove)\n            );\n            this.listenProvider_.stopListening(\n              SyncTree.queryForListening_(queryToRemove),\n              tagToRemove\n            );\n          });\n        }\n      }\n      // Now, clear all of the tags we're tracking for the removed listens\n      this.removeTags_(removed);\n    } else {\n      // No-op, this listener must've been already removed\n    }\n    return cancelEvents;\n  }\n\n  /**\n   * Returns a complete cache, if we have one, of the data at a particular path. The location must have a listener above\n   * it, but as this is only used by transaction code, that should always be the case anyways.\n   *\n   * Note: this method will *include* hidden writes from transaction with applyLocally set to false.\n   *\n   * @param path The path to the data we want\n   * @param writeIdsToExclude A specific set to be excluded\n   */\n  calcCompleteEventCache(\n    path: Path,\n    writeIdsToExclude?: number[]\n  ): Node | null {\n    const includeHiddenSets = true;\n    const writeTree = this.pendingWriteTree_;\n    const serverCache = this.syncPointTree_.findOnPath(\n      path,\n      (pathSoFar, syncPoint) => {\n        const relativePath = Path.relativePath(pathSoFar, path);\n        const serverCache = syncPoint.getCompleteServerCache(relativePath);\n        if (serverCache) {\n          return serverCache;\n        }\n      }\n    );\n    return writeTree.calcCompleteEventCache(\n      path,\n      serverCache,\n      writeIdsToExclude,\n      includeHiddenSets\n    );\n  }\n\n  /**\n   * This collapses multiple unfiltered views into a single view, since we only need a single\n   * listener for them.\n   */\n  private collectDistinctViewsForSubTree_(\n    subtree: ImmutableTree<SyncPoint>\n  ): View[] {\n    return subtree.fold<View[]>(\n      (relativePath, maybeChildSyncPoint, childMap) => {\n        if (maybeChildSyncPoint && maybeChildSyncPoint.hasCompleteView()) {\n          const completeView = maybeChildSyncPoint.getCompleteView();\n          return [completeView];\n        } else {\n          // No complete view here, flatten any deeper listens into an array\n          let views: View[] = [];\n          if (maybeChildSyncPoint) {\n            views = maybeChildSyncPoint.getQueryViews();\n          }\n          each(childMap, (_key: string, childViews: View[]) => {\n            views = views.concat(childViews);\n          });\n          return views;\n        }\n      }\n    );\n  }\n\n  private removeTags_(queries: Query[]) {\n    for (let j = 0; j < queries.length; ++j) {\n      const removedQuery = queries[j];\n      if (!removedQuery.getQueryParams().loadsAllData()) {\n        // We should have a tag for this\n        const removedQueryKey = SyncTree.makeQueryKey_(removedQuery);\n        const removedQueryTag = this.queryToTagMap.get(removedQueryKey);\n        this.queryToTagMap.delete(removedQueryKey);\n        this.tagToQueryMap.delete(removedQueryTag);\n      }\n    }\n  }\n\n  /**\n   * Normalizes a query to a query we send the server for listening\n   *\n   * @return The normalized query\n   */\n  private static queryForListening_(query: Query): Query {\n    if (\n      query.getQueryParams().loadsAllData() &&\n      !query.getQueryParams().isDefault()\n    ) {\n      // We treat queries that load all data as default queries\n      // Cast is necessary because ref() technically returns Firebase which is actually fb.api.Firebase which inherits\n      // from Query\n      return query.getRef()!;\n    } else {\n      return query;\n    }\n  }\n\n  /**\n   * For a given new listen, manage the de-duplication of outstanding subscriptions.\n   *\n   * @return This method can return events to support synchronous data sources\n   */\n  private setupListener_(query: Query, view: View): Event[] {\n    const path = query.path;\n    const tag = this.tagForQuery_(query);\n    const listener = this.createListenerForView_(view);\n\n    const events = this.listenProvider_.startListening(\n      SyncTree.queryForListening_(query),\n      tag,\n      listener.hashFn,\n      listener.onComplete\n    );\n\n    const subtree = this.syncPointTree_.subtree(path);\n    // The root of this subtree has our query. We're here because we definitely need to send a listen for that, but we\n    // may need to shadow other listens as well.\n    if (tag) {\n      assert(\n        !subtree.value.hasCompleteView(),\n        \"If we're adding a query, it shouldn't be shadowed\"\n      );\n    } else {\n      // Shadow everything at or below this location, this is a default listener.\n      const queriesToStop = subtree.fold<Query[]>(\n        (relativePath, maybeChildSyncPoint, childMap) => {\n          if (\n            !relativePath.isEmpty() &&\n            maybeChildSyncPoint &&\n            maybeChildSyncPoint.hasCompleteView()\n          ) {\n            return [maybeChildSyncPoint.getCompleteView().getQuery()];\n          } else {\n            // No default listener here, flatten any deeper queries into an array\n            let queries: Query[] = [];\n            if (maybeChildSyncPoint) {\n              queries = queries.concat(\n                maybeChildSyncPoint.getQueryViews().map(view => view.getQuery())\n              );\n            }\n            each(childMap, (_key: string, childQueries: Query[]) => {\n              queries = queries.concat(childQueries);\n            });\n            return queries;\n          }\n        }\n      );\n      for (let i = 0; i < queriesToStop.length; ++i) {\n        const queryToStop = queriesToStop[i];\n        this.listenProvider_.stopListening(\n          SyncTree.queryForListening_(queryToStop),\n          this.tagForQuery_(queryToStop)\n        );\n      }\n    }\n    return events;\n  }\n\n  private createListenerForView_(\n    view: View\n  ): { hashFn(): string; onComplete(a: string, b?: unknown): Event[] } {\n    const query = view.getQuery();\n    const tag = this.tagForQuery_(query);\n\n    return {\n      hashFn: () => {\n        const cache = view.getServerCache() || ChildrenNode.EMPTY_NODE;\n        return cache.hash();\n      },\n      onComplete: (status: string): Event[] => {\n        if (status === 'ok') {\n          if (tag) {\n            return this.applyTaggedListenComplete(query.path, tag);\n          } else {\n            return this.applyListenComplete(query.path);\n          }\n        } else {\n          // If a listen failed, kill all of the listeners here, not just the one that triggered the error.\n          // Note that this may need to be scoped to just this listener if we change permissions on filtered children\n          const error = errorForServerCode(status, query);\n          return this.removeEventRegistration(\n            query,\n            /*eventRegistration*/ null,\n            error\n          );\n        }\n      }\n    };\n  }\n\n  /**\n   * Given a query, computes a \"queryKey\" suitable for use in our queryToTagMap_.\n   */\n  private static makeQueryKey_(query: Query): string {\n    return query.path.toString() + '$' + query.queryIdentifier();\n  }\n\n  /**\n   * Given a queryKey (created by makeQueryKey), parse it back into a path and queryId.\n   */\n  private static parseQueryKey_(\n    queryKey: string\n  ): { queryId: string; path: Path } {\n    const splitIndex = queryKey.indexOf('$');\n    assert(\n      splitIndex !== -1 && splitIndex < queryKey.length - 1,\n      'Bad queryKey.'\n    );\n    return {\n      queryId: queryKey.substr(splitIndex + 1),\n      path: new Path(queryKey.substr(0, splitIndex))\n    };\n  }\n\n  /**\n   * Return the query associated with the given tag, if we have one\n   */\n  private queryKeyForTag_(tag: number): string | null {\n    return this.tagToQueryMap.get(tag);\n  }\n\n  /**\n   * Return the tag associated with the given query.\n   */\n  private tagForQuery_(query: Query): number | null {\n    const queryKey = SyncTree.makeQueryKey_(query);\n    return this.queryToTagMap.get(queryKey);\n  }\n\n  /**\n   * Static tracker for next query tag.\n   */\n  private static nextQueryTag_ = 1;\n\n  /**\n   * Static accessor for query tags.\n   */\n  private static getNextQueryTag_(): number {\n    return SyncTree.nextQueryTag_++;\n  }\n\n  /**\n   * A helper method to apply tagged operations\n   */\n  private applyTaggedOperation_(\n    queryPath: Path,\n    operation: Operation\n  ): Event[] {\n    const syncPoint = this.syncPointTree_.get(queryPath);\n    assert(syncPoint, \"Missing sync point for query tag that we're tracking\");\n    const writesCache = this.pendingWriteTree_.childWrites(queryPath);\n    return syncPoint.applyOperation(\n      operation,\n      writesCache,\n      /*serverCache=*/ null\n    );\n  }\n\n  /**\n   * A helper method that visits all descendant and ancestor SyncPoints, applying the operation.\n   *\n   * NOTES:\n   * - Descendant SyncPoints will be visited first (since we raise events depth-first).\n   *\n   * - We call applyOperation() on each SyncPoint passing three things:\n   *   1. A version of the Operation that has been made relative to the SyncPoint location.\n   *   2. A WriteTreeRef of any writes we have cached at the SyncPoint location.\n   *   3. A snapshot Node with cached server data, if we have it.\n   *\n   * - We concatenate all of the events returned by each SyncPoint and return the result.\n   */\n  private applyOperationToSyncPoints_(operation: Operation): Event[] {\n    return this.applyOperationHelper_(\n      operation,\n      this.syncPointTree_,\n      /*serverCache=*/ null,\n      this.pendingWriteTree_.childWrites(Path.Empty)\n    );\n  }\n\n  /**\n   * Recursive helper for applyOperationToSyncPoints_\n   */\n  private applyOperationHelper_(\n    operation: Operation,\n    syncPointTree: ImmutableTree<SyncPoint>,\n    serverCache: Node | null,\n    writesCache: WriteTreeRef\n  ): Event[] {\n    if (operation.path.isEmpty()) {\n      return this.applyOperationDescendantsHelper_(\n        operation,\n        syncPointTree,\n        serverCache,\n        writesCache\n      );\n    } else {\n      const syncPoint = syncPointTree.get(Path.Empty);\n\n      // If we don't have cached server data, see if we can get it from this SyncPoint.\n      if (serverCache == null && syncPoint != null) {\n        serverCache = syncPoint.getCompleteServerCache(Path.Empty);\n      }\n\n      let events: Event[] = [];\n      const childName = operation.path.getFront();\n      const childOperation = operation.operationForChild(childName);\n      const childTree = syncPointTree.children.get(childName);\n      if (childTree && childOperation) {\n        const childServerCache = serverCache\n          ? serverCache.getImmediateChild(childName)\n          : null;\n        const childWritesCache = writesCache.child(childName);\n        events = events.concat(\n          this.applyOperationHelper_(\n            childOperation,\n            childTree,\n            childServerCache,\n            childWritesCache\n          )\n        );\n      }\n\n      if (syncPoint) {\n        events = events.concat(\n          syncPoint.applyOperation(operation, writesCache, serverCache)\n        );\n      }\n\n      return events;\n    }\n  }\n\n  /**\n   * Recursive helper for applyOperationToSyncPoints_\n   */\n  private applyOperationDescendantsHelper_(\n    operation: Operation,\n    syncPointTree: ImmutableTree<SyncPoint>,\n    serverCache: Node | null,\n    writesCache: WriteTreeRef\n  ): Event[] {\n    const syncPoint = syncPointTree.get(Path.Empty);\n\n    // If we don't have cached server data, see if we can get it from this SyncPoint.\n    if (serverCache == null && syncPoint != null) {\n      serverCache = syncPoint.getCompleteServerCache(Path.Empty);\n    }\n\n    let events: Event[] = [];\n    syncPointTree.children.inorderTraversal((childName, childTree) => {\n      const childServerCache = serverCache\n        ? serverCache.getImmediateChild(childName)\n        : null;\n      const childWritesCache = writesCache.child(childName);\n      const childOperation = operation.operationForChild(childName);\n      if (childOperation) {\n        events = events.concat(\n          this.applyOperationDescendantsHelper_(\n            childOperation,\n            childTree,\n            childServerCache,\n            childWritesCache\n          )\n        );\n      }\n    });\n\n    if (syncPoint) {\n      events = events.concat(\n        syncPoint.applyOperation(operation, writesCache, serverCache)\n      );\n    }\n\n    return events;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Path } from './util/Path';\nimport { Node } from './snap/Node';\n\n/**\n * Mutable object which basically just stores a reference to the \"latest\" immutable snapshot.\n *\n * @constructor\n */\nexport class SnapshotHolder {\n  private rootNode_: Node = ChildrenNode.EMPTY_NODE;\n\n  getNode(path: Path): Node {\n    return this.rootNode_.getChild(path);\n  }\n\n  updateSnapshot(path: Path, newSnapshotNode: Node) {\n    this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseAuthTokenData } from '@firebase/app-types/private';\nimport {\n  FirebaseAuthInternal,\n  FirebaseAuthInternalName\n} from '@firebase/auth-interop-types';\nimport { Provider } from '@firebase/component';\nimport { log, warn } from './util/util';\nimport { FirebaseApp } from '@firebase/app-types';\n\n/**\n * Abstraction around FirebaseApp's token fetching capabilities.\n */\nexport class AuthTokenProvider {\n  private auth_: FirebaseAuthInternal | null = null;\n  constructor(\n    private app_: FirebaseApp,\n    private authProvider_: Provider<FirebaseAuthInternalName>\n  ) {\n    this.auth_ = authProvider_.getImmediate({ optional: true });\n    if (!this.auth_) {\n      authProvider_.get().then(auth => (this.auth_ = auth));\n    }\n  }\n\n  /**\n   * @param {boolean} forceRefresh\n   * @return {!Promise<FirebaseAuthTokenData>}\n   */\n  getToken(forceRefresh: boolean): Promise<FirebaseAuthTokenData> {\n    if (!this.auth_) {\n      return Promise.resolve(null);\n    }\n\n    return this.auth_.getToken(forceRefresh).catch(error => {\n      // TODO: Need to figure out all the cases this is raised and whether\n      // this makes sense.\n      if (error && error.code === 'auth/token-not-initialized') {\n        log('Got auth/token-not-initialized error.  Treating as null token.');\n        return null;\n      } else {\n        return Promise.reject(error);\n      }\n    });\n  }\n\n  addTokenChangeListener(listener: (token: string | null) => void) {\n    // TODO: We might want to wrap the listener and call it with no args to\n    // avoid a leaky abstraction, but that makes removing the listener harder.\n    if (this.auth_) {\n      this.auth_.addAuthTokenListener(listener);\n    } else {\n      setTimeout(() => listener(null), 0);\n      this.authProvider_\n        .get()\n        .then(auth => auth.addAuthTokenListener(listener));\n    }\n  }\n\n  removeTokenChangeListener(listener: (token: string | null) => void) {\n    this.authProvider_\n      .get()\n      .then(auth => auth.removeAuthTokenListener(listener));\n  }\n\n  notifyForInvalidToken() {\n    let errorMessage =\n      'Provided authentication credentials for the app named \"' +\n      this.app_.name +\n      '\" are invalid. This usually indicates your app was not ' +\n      'initialized correctly. ';\n    if ('credential' in this.app_.options) {\n      errorMessage +=\n        'Make sure the \"credential\" property provided to initializeApp() ' +\n        'is authorized to access the specified \"databaseURL\" and is from the correct ' +\n        'project.';\n    } else if ('serviceAccount' in this.app_.options) {\n      errorMessage +=\n        'Make sure the \"serviceAccount\" property provided to initializeApp() ' +\n        'is authorized to access the specified \"databaseURL\" and is from the correct ' +\n        'project.';\n    } else {\n      errorMessage +=\n        'Make sure the \"apiKey\" and \"databaseURL\" properties provided to ' +\n        'initializeApp() match the values provided for your app at ' +\n        'https://console.firebase.google.com/.';\n    }\n    warn(errorMessage);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { deepCopy, contains } from '@firebase/util';\n\n/**\n * Tracks a collection of stats.\n *\n * @constructor\n */\nexport class StatsCollection {\n  private counters_: { [k: string]: number } = {};\n\n  incrementCounter(name: string, amount: number = 1) {\n    if (!contains(this.counters_, name)) {\n      this.counters_[name] = 0;\n    }\n\n    this.counters_[name] += amount;\n  }\n\n  get() {\n    return deepCopy(this.counters_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { StatsCollection } from './StatsCollection';\nimport { RepoInfo } from '../RepoInfo';\n\nexport class StatsManager {\n  private static collections_: { [k: string]: StatsCollection } = {};\n  private static reporters_: { [k: string]: unknown } = {};\n\n  static getCollection(repoInfo: RepoInfo): StatsCollection {\n    const hashString = repoInfo.toString();\n\n    if (!this.collections_[hashString]) {\n      this.collections_[hashString] = new StatsCollection();\n    }\n\n    return this.collections_[hashString];\n  }\n\n  static getOrCreateReporter<T>(\n    repoInfo: RepoInfo,\n    creatorFunction: () => T\n  ): T {\n    const hashString = repoInfo.toString();\n\n    if (!this.reporters_[hashString]) {\n      this.reporters_[hashString] = creatorFunction();\n    }\n\n    return this.reporters_[hashString] as T;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { StatsCollection } from './StatsCollection';\nimport { each } from '../util/util';\n\n/**\n * Returns the delta from the previous call to get stats.\n *\n * @param collection_ The collection to \"listen\" to.\n * @constructor\n */\nexport class StatsListener {\n  private last_: { [k: string]: number } | null = null;\n\n  constructor(private collection_: StatsCollection) {}\n\n  get(): { [k: string]: number } {\n    const newStats = this.collection_.get();\n\n    const delta = { ...newStats };\n    if (this.last_) {\n      each(this.last_, (stat: string, value: number) => {\n        delta[stat] = delta[stat] - value;\n      });\n    }\n    this.last_ = newStats;\n\n    return delta;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains } from '@firebase/util';\nimport { setTimeoutNonBlocking, each } from '../util/util';\nimport { StatsListener } from './StatsListener';\nimport { StatsCollection } from './StatsCollection';\nimport { ServerActions } from '../ServerActions';\n\n// Assuming some apps may have a short amount of time on page, and a bulk of firebase operations probably\n// happen on page load, we try to report our first set of stats pretty quickly, but we wait at least 10\n// seconds to try to ensure the Firebase connection is established / settled.\nconst FIRST_STATS_MIN_TIME = 10 * 1000;\nconst FIRST_STATS_MAX_TIME = 30 * 1000;\n\n// We'll continue to report stats on average every 5 minutes.\nconst REPORT_STATS_INTERVAL = 5 * 60 * 1000;\n\n/**\n * @constructor\n */\nexport class StatsReporter {\n  private statsListener_: StatsListener;\n  private statsToReport_: { [k: string]: boolean } = {};\n\n  /**\n   * @param collection\n   * @param server_\n   */\n  constructor(collection: StatsCollection, private server_: ServerActions) {\n    this.statsListener_ = new StatsListener(collection);\n\n    const timeout =\n      FIRST_STATS_MIN_TIME +\n      (FIRST_STATS_MAX_TIME - FIRST_STATS_MIN_TIME) * Math.random();\n    setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(timeout));\n  }\n\n  includeStat(stat: string) {\n    this.statsToReport_[stat] = true;\n  }\n\n  private reportStats_() {\n    const stats = this.statsListener_.get();\n    const reportedStats: typeof stats = {};\n    let haveStatsToReport = false;\n\n    each(stats, (stat: string, value: number) => {\n      if (value > 0 && contains(this.statsToReport_, stat)) {\n        reportedStats[stat] = value;\n        haveStatsToReport = true;\n      }\n    });\n\n    if (haveStatsToReport) {\n      this.server_.reportStats(reportedStats);\n    }\n\n    // queue our next run.\n    setTimeoutNonBlocking(\n      this.reportStats_.bind(this),\n      Math.floor(Math.random() * 2 * REPORT_STATS_INTERVAL)\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\nimport { log, logger, exceptionGuard } from '../util/util';\nimport { Event } from './Event';\n\n/**\n * The event queue serves a few purposes:\n * 1. It ensures we maintain event order in the face of event callbacks doing operations that result in more\n *    events being queued.\n * 2. raiseQueuedEvents() handles being called reentrantly nicely.  That is, if in the course of raising events,\n *    raiseQueuedEvents() is called again, the \"inner\" call will pick up raising events where the \"outer\" call\n *    left off, ensuring that the events are still raised synchronously and in order.\n * 3. You can use raiseEventsAtPath and raiseEventsForChangedPath to ensure only relevant previously-queued\n *    events are raised synchronously.\n *\n * NOTE: This can all go away if/when we move to async events.\n *\n * @constructor\n */\nexport class EventQueue {\n  /**\n   * @private\n   * @type {!Array.<EventList>}\n   */\n  private eventLists_: EventList[] = [];\n\n  /**\n   * Tracks recursion depth of raiseQueuedEvents_, for debugging purposes.\n   * @private\n   * @type {!number}\n   */\n  private recursionDepth_ = 0;\n\n  /**\n   * @param {!Array.<Event>} eventDataList The new events to queue.\n   */\n  queueEvents(eventDataList: Event[]) {\n    // We group events by path, storing them in a single EventList, to make it easier to skip over them quickly.\n    let currList = null;\n    for (let i = 0; i < eventDataList.length; i++) {\n      const eventData = eventDataList[i];\n      const eventPath = eventData.getPath();\n      if (currList !== null && !eventPath.equals(currList.getPath())) {\n        this.eventLists_.push(currList);\n        currList = null;\n      }\n\n      if (currList === null) {\n        currList = new EventList(eventPath);\n      }\n\n      currList.add(eventData);\n    }\n    if (currList) {\n      this.eventLists_.push(currList);\n    }\n  }\n\n  /**\n   * Queues the specified events and synchronously raises all events (including previously queued ones)\n   * for the specified path.\n   *\n   * It is assumed that the new events are all for the specified path.\n   *\n   * @param {!Path} path The path to raise events for.\n   * @param {!Array.<Event>} eventDataList The new events to raise.\n   */\n  raiseEventsAtPath(path: Path, eventDataList: Event[]) {\n    this.queueEvents(eventDataList);\n    this.raiseQueuedEventsMatchingPredicate_((eventPath: Path) =>\n      eventPath.equals(path)\n    );\n  }\n\n  /**\n   * Queues the specified events and synchronously raises all events (including previously queued ones) for\n   * locations related to the specified change path (i.e. all ancestors and descendants).\n   *\n   * It is assumed that the new events are all related (ancestor or descendant) to the specified path.\n   *\n   * @param {!Path} changedPath The path to raise events for.\n   * @param {!Array.<!Event>} eventDataList The events to raise\n   */\n  raiseEventsForChangedPath(changedPath: Path, eventDataList: Event[]) {\n    this.queueEvents(eventDataList);\n\n    this.raiseQueuedEventsMatchingPredicate_((eventPath: Path) => {\n      return eventPath.contains(changedPath) || changedPath.contains(eventPath);\n    });\n  }\n\n  /**\n   * @param {!function(!Path):boolean} predicate\n   * @private\n   */\n  private raiseQueuedEventsMatchingPredicate_(\n    predicate: (path: Path) => boolean\n  ) {\n    this.recursionDepth_++;\n\n    let sentAll = true;\n    for (let i = 0; i < this.eventLists_.length; i++) {\n      const eventList = this.eventLists_[i];\n      if (eventList) {\n        const eventPath = eventList.getPath();\n        if (predicate(eventPath)) {\n          this.eventLists_[i].raise();\n          this.eventLists_[i] = null;\n        } else {\n          sentAll = false;\n        }\n      }\n    }\n\n    if (sentAll) {\n      this.eventLists_ = [];\n    }\n\n    this.recursionDepth_--;\n  }\n}\n\n/**\n * @param {!Path} path\n * @constructor\n */\nexport class EventList {\n  /**\n   * @type {!Array.<Event>}\n   * @private\n   */\n  private events_: Event[] = [];\n\n  constructor(private readonly path_: Path) {}\n\n  /**\n   * @param {!Event} eventData\n   */\n  add(eventData: Event) {\n    this.events_.push(eventData);\n  }\n\n  /**\n   * Iterates through the list and raises each event\n   */\n  raise() {\n    for (let i = 0; i < this.events_.length; i++) {\n      const eventData = this.events_[i];\n      if (eventData !== null) {\n        this.events_[i] = null;\n        const eventFn = eventData.getEventRunner();\n        if (logger) {\n          log('event: ' + eventData.toString());\n        }\n        exceptionGuard(eventFn);\n      }\n    }\n  }\n\n  /**\n   * @return {!Path}\n   */\n  getPath(): Path {\n    return this.path_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\n/**\n * Base class to be used if you want to emit events. Call the constructor with\n * the set of allowed event names.\n */\nexport abstract class EventEmitter {\n  private listeners_: {\n    [eventType: string]: Array<{\n      callback(...args: unknown[]): void;\n      context: unknown;\n    }>;\n  } = {};\n\n  /**\n   * @param {!Array.<string>} allowedEvents_\n   */\n  constructor(private allowedEvents_: string[]) {\n    assert(\n      Array.isArray(allowedEvents_) && allowedEvents_.length > 0,\n      'Requires a non-empty array'\n    );\n  }\n\n  /**\n   * To be overridden by derived classes in order to fire an initial event when\n   * somebody subscribes for data.\n   *\n   * @param {!string} eventType\n   * @return {Array.<*>} Array of parameters to trigger initial event with.\n   */\n  abstract getInitialEvent(eventType: string): unknown[];\n\n  /**\n   * To be called by derived classes to trigger events.\n   * @param {!string} eventType\n   * @param {...*} varArgs\n   */\n  protected trigger(eventType: string, ...varArgs: unknown[]) {\n    if (Array.isArray(this.listeners_[eventType])) {\n      // Clone the list, since callbacks could add/remove listeners.\n      const listeners = [...this.listeners_[eventType]];\n\n      for (let i = 0; i < listeners.length; i++) {\n        listeners[i].callback.apply(listeners[i].context, varArgs);\n      }\n    }\n  }\n\n  on(eventType: string, callback: (a: unknown) => void, context: unknown) {\n    this.validateEventType_(eventType);\n    this.listeners_[eventType] = this.listeners_[eventType] || [];\n    this.listeners_[eventType].push({ callback, context });\n\n    const eventData = this.getInitialEvent(eventType);\n    if (eventData) {\n      callback.apply(context, eventData);\n    }\n  }\n\n  off(eventType: string, callback: (a: unknown) => void, context: unknown) {\n    this.validateEventType_(eventType);\n    const listeners = this.listeners_[eventType] || [];\n    for (let i = 0; i < listeners.length; i++) {\n      if (\n        listeners[i].callback === callback &&\n        (!context || context === listeners[i].context)\n      ) {\n        listeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  private validateEventType_(eventType: string) {\n    assert(\n      this.allowedEvents_.find(et => {\n        return et === eventType;\n      }),\n      'Unknown event: ' + eventType\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from './EventEmitter';\nimport { assert } from '@firebase/util';\n\ndeclare const document: Document;\n\n/**\n * @extends {EventEmitter}\n */\nexport class VisibilityMonitor extends EventEmitter {\n  private visible_: boolean;\n\n  static getInstance() {\n    return new VisibilityMonitor();\n  }\n\n  constructor() {\n    super(['visible']);\n    let hidden: string;\n    let visibilityChange: string;\n    if (\n      typeof document !== 'undefined' &&\n      typeof document.addEventListener !== 'undefined'\n    ) {\n      if (typeof document['hidden'] !== 'undefined') {\n        // Opera 12.10 and Firefox 18 and later support\n        visibilityChange = 'visibilitychange';\n        hidden = 'hidden';\n      } else if (typeof document['mozHidden'] !== 'undefined') {\n        visibilityChange = 'mozvisibilitychange';\n        hidden = 'mozHidden';\n      } else if (typeof document['msHidden'] !== 'undefined') {\n        visibilityChange = 'msvisibilitychange';\n        hidden = 'msHidden';\n      } else if (typeof document['webkitHidden'] !== 'undefined') {\n        visibilityChange = 'webkitvisibilitychange';\n        hidden = 'webkitHidden';\n      }\n    }\n\n    // Initially, we always assume we are visible. This ensures that in browsers\n    // without page visibility support or in cases where we are never visible\n    // (e.g. chrome extension), we act as if we are visible, i.e. don't delay\n    // reconnects\n    this.visible_ = true;\n\n    if (visibilityChange) {\n      document.addEventListener(\n        visibilityChange,\n        () => {\n          const visible = !document[hidden];\n          if (visible !== this.visible_) {\n            this.visible_ = visible;\n            this.trigger('visible', visible);\n          }\n        },\n        false\n      );\n    }\n  }\n\n  /**\n   * @param {!string} eventType\n   * @return {Array.<boolean>}\n   */\n  getInitialEvent(eventType: string): boolean[] {\n    assert(eventType === 'visible', 'Unknown event type: ' + eventType);\n    return [this.visible_];\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, isMobileCordova } from '@firebase/util';\nimport { EventEmitter } from './EventEmitter';\n\n/**\n * Monitors online state (as reported by window.online/offline events).\n *\n * The expectation is that this could have many false positives (thinks we are online\n * when we're not), but no false negatives.  So we can safely use it to determine when\n * we definitely cannot reach the internet.\n *\n * @extends {EventEmitter}\n */\nexport class OnlineMonitor extends EventEmitter {\n  private online_ = true;\n\n  static getInstance() {\n    return new OnlineMonitor();\n  }\n\n  constructor() {\n    super(['online']);\n\n    // We've had repeated complaints that Cordova apps can get stuck \"offline\", e.g.\n    // https://forum.ionicframework.com/t/firebase-connection-is-lost-and-never-come-back/43810\n    // It would seem that the 'online' event does not always fire consistently. So we disable it\n    // for Cordova.\n    if (\n      typeof window !== 'undefined' &&\n      typeof window.addEventListener !== 'undefined' &&\n      !isMobileCordova()\n    ) {\n      window.addEventListener(\n        'online',\n        () => {\n          if (!this.online_) {\n            this.online_ = true;\n            this.trigger('online', true);\n          }\n        },\n        false\n      );\n\n      window.addEventListener(\n        'offline',\n        () => {\n          if (this.online_) {\n            this.online_ = false;\n            this.trigger('online', false);\n          }\n        },\n        false\n      );\n    }\n  }\n\n  /**\n   * @param {!string} eventType\n   * @return {Array.<boolean>}\n   */\n  getInitialEvent(eventType: string): boolean[] {\n    assert(eventType === 'online', 'Unknown event type: ' + eventType);\n    return [this.online_];\n  }\n\n  /**\n   * @return {boolean}\n   */\n  currentlyOnline(): boolean {\n    return this.online_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { exceptionGuard } from '../../core/util/util';\n\n/**\n * This class ensures the packets from the server arrive in order\n * This class takes data from the server and ensures it gets passed into the callbacks in order.\n * @constructor\n */\nexport class PacketReceiver {\n  pendingResponses: unknown[] = [];\n  currentResponseNum = 0;\n  closeAfterResponse = -1;\n  onClose: (() => void) | null = null;\n\n  /**\n   * @param onMessage_\n   */\n  constructor(private onMessage_: (a: {}) => void) {}\n\n  closeAfter(responseNum: number, callback: () => void) {\n    this.closeAfterResponse = responseNum;\n    this.onClose = callback;\n    if (this.closeAfterResponse < this.currentResponseNum) {\n      this.onClose();\n      this.onClose = null;\n    }\n  }\n\n  /**\n   * Each message from the server comes with a response number, and an array of data. The responseNumber\n   * allows us to ensure that we process them in the right order, since we can't be guaranteed that all\n   * browsers will respond in the same order as the requests we sent\n   * @param {number} requestNum\n   * @param {Array} data\n   */\n  handleResponse(requestNum: number, data: unknown[]) {\n    this.pendingResponses[requestNum] = data;\n    while (this.pendingResponses[this.currentResponseNum]) {\n      const toProcess = this.pendingResponses[\n        this.currentResponseNum\n      ] as unknown[];\n      delete this.pendingResponses[this.currentResponseNum];\n      for (let i = 0; i < toProcess.length; ++i) {\n        if (toProcess[i]) {\n          exceptionGuard(() => {\n            this.onMessage_(toProcess[i]);\n          });\n        }\n      }\n      if (this.currentResponseNum === this.closeAfterResponse) {\n        if (this.onClose) {\n          this.onClose();\n          this.onClose = null;\n        }\n        break;\n      }\n      this.currentResponseNum++;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  executeWhenDOMReady,\n  isChromeExtensionContentScript,\n  isWindowsStoreApp,\n  log,\n  logWrapper,\n  LUIDGenerator,\n  splitStringBySize\n} from '../core/util/util';\nimport { StatsManager } from '../core/stats/StatsManager';\nimport { PacketReceiver } from './polling/PacketReceiver';\nimport {\n  FORGE_DOMAIN,\n  FORGE_REF,\n  LAST_SESSION_PARAM,\n  LONG_POLLING,\n  PROTOCOL_VERSION,\n  REFERER_PARAM,\n  TRANSPORT_SESSION_PARAM,\n  VERSION_PARAM\n} from './Constants';\nimport { base64Encode, stringify, isNodeSdk } from '@firebase/util';\n\nimport { Transport } from './Transport';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { StatsCollection } from '../core/stats/StatsCollection';\n\n// URL query parameters associated with longpolling\nexport const FIREBASE_LONGPOLL_START_PARAM = 'start';\nexport const FIREBASE_LONGPOLL_CLOSE_COMMAND = 'close';\nexport const FIREBASE_LONGPOLL_COMMAND_CB_NAME = 'pLPCommand';\nexport const FIREBASE_LONGPOLL_DATA_CB_NAME = 'pRTLPCB';\nexport const FIREBASE_LONGPOLL_ID_PARAM = 'id';\nexport const FIREBASE_LONGPOLL_PW_PARAM = 'pw';\nexport const FIREBASE_LONGPOLL_SERIAL_PARAM = 'ser';\nexport const FIREBASE_LONGPOLL_CALLBACK_ID_PARAM = 'cb';\nexport const FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM = 'seg';\nexport const FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET = 'ts';\nexport const FIREBASE_LONGPOLL_DATA_PARAM = 'd';\nexport const FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM = 'disconn';\nexport const FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM = 'dframe';\n\n//Data size constants.\n//TODO: Perf: the maximum length actually differs from browser to browser.\n// We should check what browser we're on and set accordingly.\nconst MAX_URL_DATA_SIZE = 1870;\nconst SEG_HEADER_SIZE = 30; //ie: &seg=8299234&ts=982389123&d=\nconst MAX_PAYLOAD_SIZE = MAX_URL_DATA_SIZE - SEG_HEADER_SIZE;\n\n/**\n * Keepalive period\n * send a fresh request at minimum every 25 seconds. Opera has a maximum request\n * length of 30 seconds that we can't exceed.\n * @const\n * @type {number}\n */\nconst KEEPALIVE_REQUEST_INTERVAL = 25000;\n\n/**\n * How long to wait before aborting a long-polling connection attempt.\n * @const\n * @type {number}\n */\nconst LP_CONNECT_TIMEOUT = 30000;\n\n/**\n * This class manages a single long-polling connection.\n *\n * @constructor\n * @implements {Transport}\n */\nexport class BrowserPollConnection implements Transport {\n  bytesSent = 0;\n  bytesReceived = 0;\n  urlFn: (params: object) => string;\n  scriptTagHolder: FirebaseIFrameScriptHolder;\n  myDisconnFrame: HTMLIFrameElement;\n  curSegmentNum: number;\n  myPacketOrderer: PacketReceiver;\n  id: string;\n  password: string;\n  private log_: (...a: unknown[]) => void;\n  private stats_: StatsCollection;\n  private everConnected_ = false;\n  private isClosed_: boolean;\n  private connectTimeoutTimer_: number | null;\n  private onDisconnect_: ((a?: boolean) => void) | null;\n\n  /**\n   * @param {string} connId An identifier for this connection, used for logging\n   * @param {RepoInfo} repoInfo The info for the endpoint to send data to.\n   * @param {string=} transportSessionId Optional transportSessionid if we are reconnecting for an existing\n   *                                         transport session\n   * @param {string=}  lastSessionId Optional lastSessionId if the PersistentConnection has already created a\n   *                                     connection previously\n   */\n  constructor(\n    public connId: string,\n    public repoInfo: RepoInfo,\n    public transportSessionId?: string,\n    public lastSessionId?: string\n  ) {\n    this.log_ = logWrapper(connId);\n    this.stats_ = StatsManager.getCollection(repoInfo);\n    this.urlFn = (params: { [k: string]: string }) =>\n      repoInfo.connectionURL(LONG_POLLING, params);\n  }\n\n  /**\n   *\n   * @param {function(Object)} onMessage Callback when messages arrive\n   * @param {function()} onDisconnect Callback with connection lost.\n   */\n  open(onMessage: (msg: {}) => void, onDisconnect: (a?: boolean) => void) {\n    this.curSegmentNum = 0;\n    this.onDisconnect_ = onDisconnect;\n    this.myPacketOrderer = new PacketReceiver(onMessage);\n    this.isClosed_ = false;\n\n    this.connectTimeoutTimer_ = setTimeout(() => {\n      this.log_('Timed out trying to connect.');\n      // Make sure we clear the host cache\n      this.onClosed_();\n      this.connectTimeoutTimer_ = null;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    }, Math.floor(LP_CONNECT_TIMEOUT)) as any;\n\n    // Ensure we delay the creation of the iframe until the DOM is loaded.\n    executeWhenDOMReady(() => {\n      if (this.isClosed_) {\n        return;\n      }\n\n      //Set up a callback that gets triggered once a connection is set up.\n      this.scriptTagHolder = new FirebaseIFrameScriptHolder(\n        (...args) => {\n          const [command, arg1, arg2, arg3, arg4] = args;\n          this.incrementIncomingBytes_(args);\n          if (!this.scriptTagHolder) {\n            return; // we closed the connection.\n          }\n\n          if (this.connectTimeoutTimer_) {\n            clearTimeout(this.connectTimeoutTimer_);\n            this.connectTimeoutTimer_ = null;\n          }\n          this.everConnected_ = true;\n          if (command === FIREBASE_LONGPOLL_START_PARAM) {\n            this.id = arg1 as string;\n            this.password = arg2 as string;\n          } else if (command === FIREBASE_LONGPOLL_CLOSE_COMMAND) {\n            // Don't clear the host cache. We got a response from the server, so we know it's reachable\n            if (arg1) {\n              // We aren't expecting any more data (other than what the server's already in the process of sending us\n              // through our already open polls), so don't send any more.\n              this.scriptTagHolder.sendNewPolls = false;\n\n              // arg1 in this case is the last response number sent by the server. We should try to receive\n              // all of the responses up to this one before closing\n              this.myPacketOrderer.closeAfter(arg1 as number, () => {\n                this.onClosed_();\n              });\n            } else {\n              this.onClosed_();\n            }\n          } else {\n            throw new Error('Unrecognized command received: ' + command);\n          }\n        },\n        (...args) => {\n          const [pN, data] = args;\n          this.incrementIncomingBytes_(args);\n          this.myPacketOrderer.handleResponse(pN as number, data as unknown[]);\n        },\n        () => {\n          this.onClosed_();\n        },\n        this.urlFn\n      );\n\n      //Send the initial request to connect. The serial number is simply to keep the browser from pulling previous results\n      //from cache.\n      const urlParams: { [k: string]: string | number } = {};\n      urlParams[FIREBASE_LONGPOLL_START_PARAM] = 't';\n      urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = Math.floor(\n        Math.random() * 100000000\n      );\n      if (this.scriptTagHolder.uniqueCallbackIdentifier) {\n        urlParams[\n          FIREBASE_LONGPOLL_CALLBACK_ID_PARAM\n        ] = this.scriptTagHolder.uniqueCallbackIdentifier;\n      }\n      urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\n      if (this.transportSessionId) {\n        urlParams[TRANSPORT_SESSION_PARAM] = this.transportSessionId;\n      }\n      if (this.lastSessionId) {\n        urlParams[LAST_SESSION_PARAM] = this.lastSessionId;\n      }\n      if (\n        typeof location !== 'undefined' &&\n        location.href &&\n        location.href.indexOf(FORGE_DOMAIN) !== -1\n      ) {\n        urlParams[REFERER_PARAM] = FORGE_REF;\n      }\n      const connectURL = this.urlFn(urlParams);\n      this.log_('Connecting via long-poll to ' + connectURL);\n      this.scriptTagHolder.addTag(connectURL, () => {\n        /* do nothing */\n      });\n    });\n  }\n\n  /**\n   * Call this when a handshake has completed successfully and we want to consider the connection established\n   */\n  start() {\n    this.scriptTagHolder.startLongPoll(this.id, this.password);\n    this.addDisconnectPingFrame(this.id, this.password);\n  }\n\n  private static forceAllow_: boolean;\n\n  /**\n   * Forces long polling to be considered as a potential transport\n   */\n  static forceAllow() {\n    BrowserPollConnection.forceAllow_ = true;\n  }\n\n  private static forceDisallow_: boolean;\n\n  /**\n   * Forces longpolling to not be considered as a potential transport\n   */\n  static forceDisallow() {\n    BrowserPollConnection.forceDisallow_ = true;\n  }\n\n  // Static method, use string literal so it can be accessed in a generic way\n  static isAvailable() {\n    if (isNodeSdk()) {\n      return false;\n    } else if (BrowserPollConnection.forceAllow_) {\n      return true;\n    } else {\n      // NOTE: In React-Native there's normally no 'document', but if you debug a React-Native app in\n      // the Chrome debugger, 'document' is defined, but document.createElement is null (2015/06/08).\n      return (\n        !BrowserPollConnection.forceDisallow_ &&\n        typeof document !== 'undefined' &&\n        document.createElement != null &&\n        !isChromeExtensionContentScript() &&\n        !isWindowsStoreApp()\n      );\n    }\n  }\n\n  /**\n   * No-op for polling\n   */\n  markConnectionHealthy() {}\n\n  /**\n   * Stops polling and cleans up the iframe\n   * @private\n   */\n  private shutdown_() {\n    this.isClosed_ = true;\n\n    if (this.scriptTagHolder) {\n      this.scriptTagHolder.close();\n      this.scriptTagHolder = null;\n    }\n\n    //remove the disconnect frame, which will trigger an XHR call to the server to tell it we're leaving.\n    if (this.myDisconnFrame) {\n      document.body.removeChild(this.myDisconnFrame);\n      this.myDisconnFrame = null;\n    }\n\n    if (this.connectTimeoutTimer_) {\n      clearTimeout(this.connectTimeoutTimer_);\n      this.connectTimeoutTimer_ = null;\n    }\n  }\n\n  /**\n   * Triggered when this transport is closed\n   * @private\n   */\n  private onClosed_() {\n    if (!this.isClosed_) {\n      this.log_('Longpoll is closing itself');\n      this.shutdown_();\n\n      if (this.onDisconnect_) {\n        this.onDisconnect_(this.everConnected_);\n        this.onDisconnect_ = null;\n      }\n    }\n  }\n\n  /**\n   * External-facing close handler. RealTime has requested we shut down. Kill our connection and tell the server\n   * that we've left.\n   */\n  close() {\n    if (!this.isClosed_) {\n      this.log_('Longpoll is being closed.');\n      this.shutdown_();\n    }\n  }\n\n  /**\n   * Send the JSON object down to the server. It will need to be stringified, base64 encoded, and then\n   * broken into chunks (since URLs have a small maximum length).\n   * @param {!Object} data The JSON data to transmit.\n   */\n  send(data: {}) {\n    const dataStr = stringify(data);\n    this.bytesSent += dataStr.length;\n    this.stats_.incrementCounter('bytes_sent', dataStr.length);\n\n    //first, lets get the base64-encoded data\n    const base64data = base64Encode(dataStr);\n\n    //We can only fit a certain amount in each URL, so we need to split this request\n    //up into multiple pieces if it doesn't fit in one request.\n    const dataSegs = splitStringBySize(base64data, MAX_PAYLOAD_SIZE);\n\n    //Enqueue each segment for transmission. We assign each chunk a sequential ID and a total number\n    //of segments so that we can reassemble the packet on the server.\n    for (let i = 0; i < dataSegs.length; i++) {\n      this.scriptTagHolder.enqueueSegment(\n        this.curSegmentNum,\n        dataSegs.length,\n        dataSegs[i]\n      );\n      this.curSegmentNum++;\n    }\n  }\n\n  /**\n   * This is how we notify the server that we're leaving.\n   * We aren't able to send requests with DHTML on a window close event, but we can\n   * trigger XHR requests in some browsers (everything but Opera basically).\n   * @param {!string} id\n   * @param {!string} pw\n   */\n  addDisconnectPingFrame(id: string, pw: string) {\n    if (isNodeSdk()) {\n      return;\n    }\n    this.myDisconnFrame = document.createElement('iframe');\n    const urlParams: { [k: string]: string } = {};\n    urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM] = 't';\n    urlParams[FIREBASE_LONGPOLL_ID_PARAM] = id;\n    urlParams[FIREBASE_LONGPOLL_PW_PARAM] = pw;\n    this.myDisconnFrame.src = this.urlFn(urlParams);\n    this.myDisconnFrame.style.display = 'none';\n\n    document.body.appendChild(this.myDisconnFrame);\n  }\n\n  /**\n   * Used to track the bytes received by this client\n   * @param {*} args\n   * @private\n   */\n  private incrementIncomingBytes_(args: unknown) {\n    // TODO: This is an annoying perf hit just to track the number of incoming bytes.  Maybe it should be opt-in.\n    const bytesReceived = stringify(args).length;\n    this.bytesReceived += bytesReceived;\n    this.stats_.incrementCounter('bytes_received', bytesReceived);\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/interface-name-prefix\nexport interface IFrameElement extends HTMLIFrameElement {\n  doc: Document;\n}\n\n/*********************************************************************************************\n * A wrapper around an iframe that is used as a long-polling script holder.\n * @constructor\n *********************************************************************************************/\nexport class FirebaseIFrameScriptHolder {\n  //We maintain a count of all of the outstanding requests, because if we have too many active at once it can cause\n  //problems in some browsers.\n  outstandingRequests = new Set<number>();\n\n  //A queue of the pending segments waiting for transmission to the server.\n  pendingSegs: Array<{ seg: number; ts: number; d: unknown }> = [];\n\n  //A serial number. We use this for two things:\n  // 1) A way to ensure the browser doesn't cache responses to polls\n  // 2) A way to make the server aware when long-polls arrive in a different order than we started them. The\n  //    server needs to release both polls in this case or it will cause problems in Opera since Opera can only execute\n  //    JSONP code in the order it was added to the iframe.\n  currentSerial = Math.floor(Math.random() * 100000000);\n\n  // This gets set to false when we're \"closing down\" the connection (e.g. we're switching transports but there's still\n  // incoming data from the server that we're waiting for).\n  sendNewPolls = true;\n\n  uniqueCallbackIdentifier: number;\n  myIFrame: IFrameElement;\n  alive: boolean;\n  myID: string;\n  myPW: string;\n  commandCB: (command: string, ...args: unknown[]) => void;\n  onMessageCB: (...args: unknown[]) => void;\n\n  /**\n   * @param commandCB - The callback to be called when control commands are recevied from the server.\n   * @param onMessageCB - The callback to be triggered when responses arrive from the server.\n   * @param onDisconnect - The callback to be triggered when this tag holder is closed\n   * @param urlFn - A function that provides the URL of the endpoint to send data to.\n   */\n  constructor(\n    commandCB: (command: string, ...args: unknown[]) => void,\n    onMessageCB: (...args: unknown[]) => void,\n    public onDisconnect: () => void,\n    public urlFn: (a: object) => string\n  ) {\n    if (!isNodeSdk()) {\n      //Each script holder registers a couple of uniquely named callbacks with the window. These are called from the\n      //iframes where we put the long-polling script tags. We have two callbacks:\n      //   1) Command Callback - Triggered for control issues, like starting a connection.\n      //   2) Message Callback - Triggered when new data arrives.\n      this.uniqueCallbackIdentifier = LUIDGenerator();\n      window[\n        FIREBASE_LONGPOLL_COMMAND_CB_NAME + this.uniqueCallbackIdentifier\n      ] = commandCB;\n      window[\n        FIREBASE_LONGPOLL_DATA_CB_NAME + this.uniqueCallbackIdentifier\n      ] = onMessageCB;\n\n      //Create an iframe for us to add script tags to.\n      this.myIFrame = FirebaseIFrameScriptHolder.createIFrame_();\n\n      // Set the iframe's contents.\n      let script = '';\n      // if we set a javascript url, it's IE and we need to set the document domain. The javascript url is sufficient\n      // for ie9, but ie8 needs to do it again in the document itself.\n      if (\n        this.myIFrame.src &&\n        this.myIFrame.src.substr(0, 'javascript:'.length) === 'javascript:'\n      ) {\n        const currentDomain = document.domain;\n        script = '<script>document.domain=\"' + currentDomain + '\";</script>';\n      }\n      const iframeContents = '<html><body>' + script + '</body></html>';\n      try {\n        this.myIFrame.doc.open();\n        this.myIFrame.doc.write(iframeContents);\n        this.myIFrame.doc.close();\n      } catch (e) {\n        log('frame writing exception');\n        if (e.stack) {\n          log(e.stack);\n        }\n        log(e);\n      }\n    } else {\n      this.commandCB = commandCB;\n      this.onMessageCB = onMessageCB;\n    }\n  }\n\n  /**\n   * Each browser has its own funny way to handle iframes. Here we mush them all together into one object that I can\n   * actually use.\n   * @private\n   * @return {Element}\n   */\n  private static createIFrame_(): IFrameElement {\n    const iframe = document.createElement('iframe') as IFrameElement;\n    iframe.style.display = 'none';\n\n    // This is necessary in order to initialize the document inside the iframe\n    if (document.body) {\n      document.body.appendChild(iframe);\n      try {\n        // If document.domain has been modified in IE, this will throw an error, and we need to set the\n        // domain of the iframe's document manually. We can do this via a javascript: url as the src attribute\n        // Also note that we must do this *after* the iframe has been appended to the page. Otherwise it doesn't work.\n        const a = iframe.contentWindow.document;\n        if (!a) {\n          // Apologies for the log-spam, I need to do something to keep closure from optimizing out the assignment above.\n          log('No IE domain setting required');\n        }\n      } catch (e) {\n        const domain = document.domain;\n        iframe.src =\n          \"javascript:void((function(){document.open();document.domain='\" +\n          domain +\n          \"';document.close();})())\";\n      }\n    } else {\n      // LongPollConnection attempts to delay initialization until the document is ready, so hopefully this\n      // never gets hit.\n      throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';\n    }\n\n    // Get the document of the iframe in a browser-specific way.\n    if (iframe.contentDocument) {\n      iframe.doc = iframe.contentDocument; // Firefox, Opera, Safari\n    } else if (iframe.contentWindow) {\n      iframe.doc = iframe.contentWindow.document; // Internet Explorer\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } else if ((iframe as any).document) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      iframe.doc = (iframe as any).document; //others?\n    }\n\n    return iframe;\n  }\n\n  /**\n   * Cancel all outstanding queries and remove the frame.\n   */\n  close() {\n    //Mark this iframe as dead, so no new requests are sent.\n    this.alive = false;\n\n    if (this.myIFrame) {\n      //We have to actually remove all of the html inside this iframe before removing it from the\n      //window, or IE will continue loading and executing the script tags we've already added, which\n      //can lead to some errors being thrown. Setting innerHTML seems to be the easiest way to do this.\n      this.myIFrame.doc.body.innerHTML = '';\n      setTimeout(() => {\n        if (this.myIFrame !== null) {\n          document.body.removeChild(this.myIFrame);\n          this.myIFrame = null;\n        }\n      }, Math.floor(0));\n    }\n\n    // Protect from being called recursively.\n    const onDisconnect = this.onDisconnect;\n    if (onDisconnect) {\n      this.onDisconnect = null;\n      onDisconnect();\n    }\n  }\n\n  /**\n   * Actually start the long-polling session by adding the first script tag(s) to the iframe.\n   * @param {!string} id - The ID of this connection\n   * @param {!string} pw - The password for this connection\n   */\n  startLongPoll(id: string, pw: string) {\n    this.myID = id;\n    this.myPW = pw;\n    this.alive = true;\n\n    //send the initial request. If there are requests queued, make sure that we transmit as many as we are currently able to.\n    while (this.newRequest_()) {}\n  }\n\n  /**\n   * This is called any time someone might want a script tag to be added. It adds a script tag when there aren't\n   * too many outstanding requests and we are still alive.\n   *\n   * If there are outstanding packet segments to send, it sends one. If there aren't, it sends a long-poll anyways if\n   * needed.\n   */\n  private newRequest_() {\n    // We keep one outstanding request open all the time to receive data, but if we need to send data\n    // (pendingSegs.length > 0) then we create a new request to send the data.  The server will automatically\n    // close the old request.\n    if (\n      this.alive &&\n      this.sendNewPolls &&\n      this.outstandingRequests.size < (this.pendingSegs.length > 0 ? 2 : 1)\n    ) {\n      //construct our url\n      this.currentSerial++;\n      const urlParams: { [k: string]: string | number } = {};\n      urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\n      urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\n      urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = this.currentSerial;\n      let theURL = this.urlFn(urlParams);\n      //Now add as much data as we can.\n      let curDataString = '';\n      let i = 0;\n\n      while (this.pendingSegs.length > 0) {\n        //first, lets see if the next segment will fit.\n        const nextSeg = this.pendingSegs[0];\n        if (\n          (nextSeg.d as unknown[]).length +\n            SEG_HEADER_SIZE +\n            curDataString.length <=\n          MAX_URL_DATA_SIZE\n        ) {\n          //great, the segment will fit. Lets append it.\n          const theSeg = this.pendingSegs.shift();\n          curDataString =\n            curDataString +\n            '&' +\n            FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM +\n            i +\n            '=' +\n            theSeg.seg +\n            '&' +\n            FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET +\n            i +\n            '=' +\n            theSeg.ts +\n            '&' +\n            FIREBASE_LONGPOLL_DATA_PARAM +\n            i +\n            '=' +\n            theSeg.d;\n          i++;\n        } else {\n          break;\n        }\n      }\n\n      theURL = theURL + curDataString;\n      this.addLongPollTag_(theURL, this.currentSerial);\n\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Queue a packet for transmission to the server.\n   * @param segnum - A sequential id for this packet segment used for reassembly\n   * @param totalsegs - The total number of segments in this packet\n   * @param data - The data for this segment.\n   */\n  enqueueSegment(segnum: number, totalsegs: number, data: unknown) {\n    //add this to the queue of segments to send.\n    this.pendingSegs.push({ seg: segnum, ts: totalsegs, d: data });\n\n    //send the data immediately if there isn't already data being transmitted, unless\n    //startLongPoll hasn't been called yet.\n    if (this.alive) {\n      this.newRequest_();\n    }\n  }\n\n  /**\n   * Add a script tag for a regular long-poll request.\n   * @param {!string} url - The URL of the script tag.\n   * @param {!number} serial - The serial number of the request.\n   * @private\n   */\n  private addLongPollTag_(url: string, serial: number) {\n    //remember that we sent this request.\n    this.outstandingRequests.add(serial);\n\n    const doNewRequest = () => {\n      this.outstandingRequests.delete(serial);\n      this.newRequest_();\n    };\n\n    // If this request doesn't return on its own accord (by the server sending us some data), we'll\n    // create a new one after the KEEPALIVE interval to make sure we always keep a fresh request open.\n    const keepaliveTimeout = setTimeout(\n      doNewRequest,\n      Math.floor(KEEPALIVE_REQUEST_INTERVAL)\n    );\n\n    const readyStateCB = () => {\n      // Request completed.  Cancel the keepalive.\n      clearTimeout(keepaliveTimeout);\n\n      // Trigger a new request so we can continue receiving data.\n      doNewRequest();\n    };\n\n    this.addTag(url, readyStateCB);\n  }\n\n  /**\n   * Add an arbitrary script tag to the iframe.\n   * @param {!string} url - The URL for the script tag source.\n   * @param {!function()} loadCB - A callback to be triggered once the script has loaded.\n   */\n  addTag(url: string, loadCB: () => void) {\n    if (isNodeSdk()) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (this as any).doNodeLongPoll(url, loadCB);\n    } else {\n      setTimeout(() => {\n        try {\n          // if we're already closed, don't add this poll\n          if (!this.sendNewPolls) {\n            return;\n          }\n          const newScript = this.myIFrame.doc.createElement('script');\n          newScript.type = 'text/javascript';\n          newScript.async = true;\n          newScript.src = url;\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          newScript.onload = (newScript as any).onreadystatechange = function() {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const rstate = (newScript as any).readyState;\n            if (!rstate || rstate === 'loaded' || rstate === 'complete') {\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              newScript.onload = (newScript as any).onreadystatechange = null;\n              if (newScript.parentNode) {\n                newScript.parentNode.removeChild(newScript);\n              }\n              loadCB();\n            }\n          };\n          newScript.onerror = () => {\n            log('Long-poll script failed to load: ' + url);\n            this.sendNewPolls = false;\n            this.close();\n          };\n          this.myIFrame.doc.body.appendChild(newScript);\n        } catch (e) {\n          // TODO: we should make this error visible somehow\n        }\n      }, Math.floor(1));\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** The semver (www.semver.org) version of the SDK. */\nexport let SDK_VERSION = '';\n\n// SDK_VERSION should be set before any database instance is created\nexport function setSDKVersion(version: string): void {\n  SDK_VERSION = version;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../core/RepoInfo';\nimport {\n  assert,\n  CONSTANTS as ENV_CONSTANTS,\n  jsonEval,\n  stringify,\n  isNodeSdk\n} from '@firebase/util';\nimport { logWrapper, splitStringBySize } from '../core/util/util';\nimport { StatsManager } from '../core/stats/StatsManager';\nimport {\n  FORGE_DOMAIN,\n  FORGE_REF,\n  LAST_SESSION_PARAM,\n  PROTOCOL_VERSION,\n  REFERER_PARAM,\n  TRANSPORT_SESSION_PARAM,\n  VERSION_PARAM,\n  WEBSOCKET\n} from './Constants';\nimport { PersistentStorage } from '../core/storage/storage';\nimport { Transport } from './Transport';\nimport { StatsCollection } from '../core/stats/StatsCollection';\nimport { SDK_VERSION } from '../core/version';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare const MozWebSocket: any;\n\nconst WEBSOCKET_MAX_FRAME_SIZE = 16384;\nconst WEBSOCKET_KEEPALIVE_INTERVAL = 45000;\n\nlet WebSocketImpl = null;\nif (typeof MozWebSocket !== 'undefined') {\n  WebSocketImpl = MozWebSocket;\n} else if (typeof WebSocket !== 'undefined') {\n  WebSocketImpl = WebSocket;\n}\n\nexport function setWebSocketImpl(impl) {\n  WebSocketImpl = impl;\n}\n\n/**\n * Create a new websocket connection with the given callbacks.\n * @constructor\n * @implements {Transport}\n */\nexport class WebSocketConnection implements Transport {\n  keepaliveTimer: number | null = null;\n  frames: string[] | null = null;\n  totalFrames = 0;\n  bytesSent = 0;\n  bytesReceived = 0;\n  connURL: string;\n  onDisconnect: (a?: boolean) => void;\n  onMessage: (msg: {}) => void;\n  mySock: WebSocket | null;\n  private log_: (...a: unknown[]) => void;\n  private stats_: StatsCollection;\n  private everConnected_: boolean;\n  private isClosed_: boolean;\n\n  /**\n   * @param {string} connId identifier for this transport\n   * @param {RepoInfo} repoInfo The info for the websocket endpoint.\n   * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\n   *                                         session\n   * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\n   */\n  constructor(\n    public connId: string,\n    repoInfo: RepoInfo,\n    transportSessionId?: string,\n    lastSessionId?: string\n  ) {\n    this.log_ = logWrapper(this.connId);\n    this.stats_ = StatsManager.getCollection(repoInfo);\n    this.connURL = WebSocketConnection.connectionURL_(\n      repoInfo,\n      transportSessionId,\n      lastSessionId\n    );\n  }\n\n  /**\n   * @param {RepoInfo} repoInfo The info for the websocket endpoint.\n   * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\n   *                                         session\n   * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\n   * @return {string} connection url\n   * @private\n   */\n  private static connectionURL_(\n    repoInfo: RepoInfo,\n    transportSessionId?: string,\n    lastSessionId?: string\n  ): string {\n    const urlParams: { [k: string]: string } = {};\n    urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\n\n    if (\n      !isNodeSdk() &&\n      typeof location !== 'undefined' &&\n      location.href &&\n      location.href.indexOf(FORGE_DOMAIN) !== -1\n    ) {\n      urlParams[REFERER_PARAM] = FORGE_REF;\n    }\n    if (transportSessionId) {\n      urlParams[TRANSPORT_SESSION_PARAM] = transportSessionId;\n    }\n    if (lastSessionId) {\n      urlParams[LAST_SESSION_PARAM] = lastSessionId;\n    }\n    return repoInfo.connectionURL(WEBSOCKET, urlParams);\n  }\n\n  /**\n   *\n   * @param onMessage Callback when messages arrive\n   * @param onDisconnect Callback with connection lost.\n   */\n  open(onMessage: (msg: {}) => void, onDisconnect: (a?: boolean) => void) {\n    this.onDisconnect = onDisconnect;\n    this.onMessage = onMessage;\n\n    this.log_('Websocket connecting to ' + this.connURL);\n\n    this.everConnected_ = false;\n    // Assume failure until proven otherwise.\n    PersistentStorage.set('previous_websocket_failure', true);\n\n    try {\n      if (isNodeSdk()) {\n        const device = ENV_CONSTANTS.NODE_ADMIN ? 'AdminNode' : 'Node';\n        // UA Format: Firebase/<wire_protocol>/<sdk_version>/<platform>/<device>\n        const options: { [k: string]: object } = {\n          headers: {\n            'User-Agent': `Firebase/${PROTOCOL_VERSION}/${SDK_VERSION}/${process.platform}/${device}`\n          }\n        };\n\n        // Plumb appropriate http_proxy environment variable into faye-websocket if it exists.\n        const env = process['env'];\n        const proxy =\n          this.connURL.indexOf('wss://') === 0\n            ? env['HTTPS_PROXY'] || env['https_proxy']\n            : env['HTTP_PROXY'] || env['http_proxy'];\n\n        if (proxy) {\n          options['proxy'] = { origin: proxy };\n        }\n\n        this.mySock = new WebSocketImpl(this.connURL, [], options);\n      } else {\n        this.mySock = new WebSocketImpl(this.connURL);\n      }\n    } catch (e) {\n      this.log_('Error instantiating WebSocket.');\n      const error = e.message || e.data;\n      if (error) {\n        this.log_(error);\n      }\n      this.onClosed_();\n      return;\n    }\n\n    this.mySock.onopen = () => {\n      this.log_('Websocket connected.');\n      this.everConnected_ = true;\n    };\n\n    this.mySock.onclose = () => {\n      this.log_('Websocket connection was disconnected.');\n      this.mySock = null;\n      this.onClosed_();\n    };\n\n    this.mySock.onmessage = m => {\n      this.handleIncomingFrame(m as {});\n    };\n\n    this.mySock.onerror = e => {\n      this.log_('WebSocket error.  Closing connection.');\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const error = (e as any).message || (e as any).data;\n      if (error) {\n        this.log_(error);\n      }\n      this.onClosed_();\n    };\n  }\n\n  /**\n   * No-op for websockets, we don't need to do anything once the connection is confirmed as open\n   */\n  start() {}\n\n  static forceDisallow_: boolean;\n\n  static forceDisallow() {\n    WebSocketConnection.forceDisallow_ = true;\n  }\n\n  static isAvailable(): boolean {\n    let isOldAndroid = false;\n    if (typeof navigator !== 'undefined' && navigator.userAgent) {\n      const oldAndroidRegex = /Android ([0-9]{0,}\\.[0-9]{0,})/;\n      const oldAndroidMatch = navigator.userAgent.match(oldAndroidRegex);\n      if (oldAndroidMatch && oldAndroidMatch.length > 1) {\n        if (parseFloat(oldAndroidMatch[1]) < 4.4) {\n          isOldAndroid = true;\n        }\n      }\n    }\n\n    return (\n      !isOldAndroid &&\n      WebSocketImpl !== null &&\n      !WebSocketConnection.forceDisallow_\n    );\n  }\n\n  /**\n   * Number of response before we consider the connection \"healthy.\"\n   * @type {number}\n   */\n  static responsesRequiredToBeHealthy = 2;\n\n  /**\n   * Time to wait for the connection te become healthy before giving up.\n   * @type {number}\n   */\n  static healthyTimeout = 30000;\n\n  /**\n   * Returns true if we previously failed to connect with this transport.\n   * @return {boolean}\n   */\n  static previouslyFailed(): boolean {\n    // If our persistent storage is actually only in-memory storage,\n    // we default to assuming that it previously failed to be safe.\n    return (\n      PersistentStorage.isInMemoryStorage ||\n      PersistentStorage.get('previous_websocket_failure') === true\n    );\n  }\n\n  markConnectionHealthy() {\n    PersistentStorage.remove('previous_websocket_failure');\n  }\n\n  private appendFrame_(data: string) {\n    this.frames.push(data);\n    if (this.frames.length === this.totalFrames) {\n      const fullMess = this.frames.join('');\n      this.frames = null;\n      const jsonMess = jsonEval(fullMess) as object;\n\n      //handle the message\n      this.onMessage(jsonMess);\n    }\n  }\n\n  /**\n   * @param {number} frameCount The number of frames we are expecting from the server\n   * @private\n   */\n  private handleNewFrameCount_(frameCount: number) {\n    this.totalFrames = frameCount;\n    this.frames = [];\n  }\n\n  /**\n   * Attempts to parse a frame count out of some text. If it can't, assumes a value of 1\n   * @param {!String} data\n   * @return {?String} Any remaining data to be process, or null if there is none\n   * @private\n   */\n  private extractFrameCount_(data: string): string | null {\n    assert(this.frames === null, 'We already have a frame buffer');\n    // TODO: The server is only supposed to send up to 9999 frames (i.e. length <= 4), but that isn't being enforced\n    // currently.  So allowing larger frame counts (length <= 6).  See https://app.asana.com/0/search/8688598998380/8237608042508\n    if (data.length <= 6) {\n      const frameCount = Number(data);\n      if (!isNaN(frameCount)) {\n        this.handleNewFrameCount_(frameCount);\n        return null;\n      }\n    }\n    this.handleNewFrameCount_(1);\n    return data;\n  }\n\n  /**\n   * Process a websocket frame that has arrived from the server.\n   * @param mess The frame data\n   */\n  handleIncomingFrame(mess: { [k: string]: unknown }) {\n    if (this.mySock === null) {\n      return; // Chrome apparently delivers incoming packets even after we .close() the connection sometimes.\n    }\n    const data = mess['data'] as string;\n    this.bytesReceived += data.length;\n    this.stats_.incrementCounter('bytes_received', data.length);\n\n    this.resetKeepAlive();\n\n    if (this.frames !== null) {\n      // we're buffering\n      this.appendFrame_(data);\n    } else {\n      // try to parse out a frame count, otherwise, assume 1 and process it\n      const remainingData = this.extractFrameCount_(data);\n      if (remainingData !== null) {\n        this.appendFrame_(remainingData);\n      }\n    }\n  }\n\n  /**\n   * Send a message to the server\n   * @param {Object} data The JSON object to transmit\n   */\n  send(data: {}) {\n    this.resetKeepAlive();\n\n    const dataStr = stringify(data);\n    this.bytesSent += dataStr.length;\n    this.stats_.incrementCounter('bytes_sent', dataStr.length);\n\n    //We can only fit a certain amount in each websocket frame, so we need to split this request\n    //up into multiple pieces if it doesn't fit in one request.\n\n    const dataSegs = splitStringBySize(dataStr, WEBSOCKET_MAX_FRAME_SIZE);\n\n    //Send the length header\n    if (dataSegs.length > 1) {\n      this.sendString_(String(dataSegs.length));\n    }\n\n    //Send the actual data in segments.\n    for (let i = 0; i < dataSegs.length; i++) {\n      this.sendString_(dataSegs[i]);\n    }\n  }\n\n  private shutdown_() {\n    this.isClosed_ = true;\n    if (this.keepaliveTimer) {\n      clearInterval(this.keepaliveTimer);\n      this.keepaliveTimer = null;\n    }\n\n    if (this.mySock) {\n      this.mySock.close();\n      this.mySock = null;\n    }\n  }\n\n  private onClosed_() {\n    if (!this.isClosed_) {\n      this.log_('WebSocket is closing itself');\n      this.shutdown_();\n\n      // since this is an internal close, trigger the close listener\n      if (this.onDisconnect) {\n        this.onDisconnect(this.everConnected_);\n        this.onDisconnect = null;\n      }\n    }\n  }\n\n  /**\n   * External-facing close handler.\n   * Close the websocket and kill the connection.\n   */\n  close() {\n    if (!this.isClosed_) {\n      this.log_('WebSocket is being closed');\n      this.shutdown_();\n    }\n  }\n\n  /**\n   * Kill the current keepalive timer and start a new one, to ensure that it always fires N seconds after\n   * the last activity.\n   */\n  resetKeepAlive() {\n    clearInterval(this.keepaliveTimer);\n    this.keepaliveTimer = setInterval(() => {\n      //If there has been no websocket activity for a while, send a no-op\n      if (this.mySock) {\n        this.sendString_('0');\n      }\n      this.resetKeepAlive();\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    }, Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL)) as any;\n  }\n\n  /**\n   * Send a string over the websocket.\n   *\n   * @param {string} str String to send.\n   * @private\n   */\n  private sendString_(str: string) {\n    // Firefox seems to sometimes throw exceptions (NS_ERROR_UNEXPECTED) from websocket .send()\n    // calls for some unknown reason.  We treat these as an error and disconnect.\n    // See https://app.asana.com/0/58926111402292/68021340250410\n    try {\n      this.mySock.send(str);\n    } catch (e) {\n      this.log_(\n        'Exception thrown from WebSocket.send():',\n        e.message || e.data,\n        'Closing connection.'\n      );\n      setTimeout(this.onClosed_.bind(this), 0);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BrowserPollConnection } from './BrowserPollConnection';\nimport { WebSocketConnection } from './WebSocketConnection';\nimport { warn, each } from '../core/util/util';\nimport { TransportConstructor } from './Transport';\nimport { RepoInfo } from '../core/RepoInfo';\n\n/**\n * Currently simplistic, this class manages what transport a Connection should use at various stages of its\n * lifecycle.\n *\n * It starts with longpolling in a browser, and httppolling on node. It then upgrades to websockets if\n * they are available.\n * @constructor\n */\nexport class TransportManager {\n  private transports_: TransportConstructor[];\n\n  /**\n   * @const\n   * @type {!Array.<function(new:Transport, string, RepoInfo, string=)>}\n   */\n  static get ALL_TRANSPORTS() {\n    return [BrowserPollConnection, WebSocketConnection];\n  }\n\n  /**\n   * @param {!RepoInfo} repoInfo Metadata around the namespace we're connecting to\n   */\n  constructor(repoInfo: RepoInfo) {\n    this.initTransports_(repoInfo);\n  }\n\n  /**\n   * @param {!RepoInfo} repoInfo\n   * @private\n   */\n  private initTransports_(repoInfo: RepoInfo) {\n    const isWebSocketsAvailable: boolean =\n      WebSocketConnection && WebSocketConnection['isAvailable']();\n    let isSkipPollConnection =\n      isWebSocketsAvailable && !WebSocketConnection.previouslyFailed();\n\n    if (repoInfo.webSocketOnly) {\n      if (!isWebSocketsAvailable) {\n        warn(\n          \"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"\n        );\n      }\n\n      isSkipPollConnection = true;\n    }\n\n    if (isSkipPollConnection) {\n      this.transports_ = [WebSocketConnection];\n    } else {\n      const transports = (this.transports_ = [] as TransportConstructor[]);\n      for (const transport of TransportManager.ALL_TRANSPORTS) {\n        if (transport && transport['isAvailable']()) {\n          transports.push(transport);\n        }\n      }\n    }\n  }\n\n  /**\n   * @return {function(new:Transport, !string, !RepoInfo, string=, string=)} The constructor for the\n   * initial transport to use\n   */\n  initialTransport(): TransportConstructor {\n    if (this.transports_.length > 0) {\n      return this.transports_[0];\n    } else {\n      throw new Error('No transports available');\n    }\n  }\n\n  /**\n   * @return {?function(new:Transport, function(),function(), string=)} The constructor for the next\n   * transport, or null\n   */\n  upgradeTransport(): TransportConstructor | null {\n    if (this.transports_.length > 1) {\n      return this.transports_[1];\n    } else {\n      return null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  error,\n  logWrapper,\n  requireKey,\n  setTimeoutNonBlocking,\n  warn\n} from '../core/util/util';\nimport { PersistentStorage } from '../core/storage/storage';\nimport { PROTOCOL_VERSION } from './Constants';\nimport { TransportManager } from './TransportManager';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { Transport, TransportConstructor } from './Transport';\nimport { Indexable } from '../core/util/misc';\n\n// Abort upgrade attempt if it takes longer than 60s.\nconst UPGRADE_TIMEOUT = 60000;\n\n// For some transports (WebSockets), we need to \"validate\" the transport by exchanging a few requests and responses.\n// If we haven't sent enough requests within 5s, we'll start sending noop ping requests.\nconst DELAY_BEFORE_SENDING_EXTRA_REQUESTS = 5000;\n\n// If the initial data sent triggers a lot of bandwidth (i.e. it's a large put or a listen for a large amount of data)\n// then we may not be able to exchange our ping/pong requests within the healthy timeout.  So if we reach the timeout\n// but we've sent/received enough bytes, we don't cancel the connection.\nconst BYTES_SENT_HEALTHY_OVERRIDE = 10 * 1024;\nconst BYTES_RECEIVED_HEALTHY_OVERRIDE = 100 * 1024;\n\nconst enum RealtimeState {\n  CONNECTING,\n  CONNECTED,\n  DISCONNECTED\n}\n\nconst MESSAGE_TYPE = 't';\nconst MESSAGE_DATA = 'd';\nconst CONTROL_SHUTDOWN = 's';\nconst CONTROL_RESET = 'r';\nconst CONTROL_ERROR = 'e';\nconst CONTROL_PONG = 'o';\nconst SWITCH_ACK = 'a';\nconst END_TRANSMISSION = 'n';\nconst PING = 'p';\n\nconst SERVER_HELLO = 'h';\n\n/**\n * Creates a new real-time connection to the server using whichever method works\n * best in the current browser.\n *\n * @constructor\n */\nexport class Connection {\n  connectionCount = 0;\n  pendingDataMessages: unknown[] = [];\n  sessionId: string;\n\n  private conn_: Transport;\n  private healthyTimeout_: number;\n  private isHealthy_: boolean;\n  private log_: (...args: unknown[]) => void;\n  private primaryResponsesRequired_: number;\n  private rx_: Transport;\n  private secondaryConn_: Transport;\n  private secondaryResponsesRequired_: number;\n  private state_ = RealtimeState.CONNECTING;\n  private transportManager_: TransportManager;\n  private tx_: Transport;\n\n  /**\n   * @param {!string} id - an id for this connection\n   * @param {!RepoInfo} repoInfo_ - the info for the endpoint to connect to\n   * @param {function(Object)} onMessage_ - the callback to be triggered when a server-push message arrives\n   * @param {function(number, string)} onReady_ - the callback to be triggered when this connection is ready to send messages.\n   * @param {function()} onDisconnect_ - the callback to be triggered when a connection was lost\n   * @param {function(string)} onKill_ - the callback to be triggered when this connection has permanently shut down.\n   * @param {string=} lastSessionId - last session id in persistent connection. is used to clean up old session in real-time server\n   */\n  constructor(\n    public id: string,\n    private repoInfo_: RepoInfo,\n    private onMessage_: (a: {}) => void,\n    private onReady_: (a: number, b: string) => void,\n    private onDisconnect_: () => void,\n    private onKill_: (a: string) => void,\n    public lastSessionId?: string\n  ) {\n    this.log_ = logWrapper('c:' + this.id + ':');\n    this.transportManager_ = new TransportManager(repoInfo_);\n    this.log_('Connection created');\n    this.start_();\n  }\n\n  /**\n   * Starts a connection attempt\n   * @private\n   */\n  private start_(): void {\n    const conn = this.transportManager_.initialTransport();\n    this.conn_ = new conn(\n      this.nextTransportId_(),\n      this.repoInfo_,\n      undefined,\n      this.lastSessionId\n    );\n\n    // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\n    // can consider the transport healthy.\n    this.primaryResponsesRequired_ = conn['responsesRequiredToBeHealthy'] || 0;\n\n    const onMessageReceived = this.connReceiver_(this.conn_);\n    const onConnectionLost = this.disconnReceiver_(this.conn_);\n    this.tx_ = this.conn_;\n    this.rx_ = this.conn_;\n    this.secondaryConn_ = null;\n    this.isHealthy_ = false;\n\n    /*\n     * Firefox doesn't like when code from one iframe tries to create another iframe by way of the parent frame.\n     * This can occur in the case of a redirect, i.e. we guessed wrong on what server to connect to and received a reset.\n     * Somehow, setTimeout seems to make this ok. That doesn't make sense from a security perspective, since you should\n     * still have the context of your originating frame.\n     */\n    setTimeout(() => {\n      // this.conn_ gets set to null in some of the tests. Check to make sure it still exists before using it\n      this.conn_ && this.conn_.open(onMessageReceived, onConnectionLost);\n    }, Math.floor(0));\n\n    const healthyTimeoutMS = conn['healthyTimeout'] || 0;\n    if (healthyTimeoutMS > 0) {\n      this.healthyTimeout_ = setTimeoutNonBlocking(() => {\n        this.healthyTimeout_ = null;\n        if (!this.isHealthy_) {\n          if (\n            this.conn_ &&\n            this.conn_.bytesReceived > BYTES_RECEIVED_HEALTHY_OVERRIDE\n          ) {\n            this.log_(\n              'Connection exceeded healthy timeout but has received ' +\n                this.conn_.bytesReceived +\n                ' bytes.  Marking connection healthy.'\n            );\n            this.isHealthy_ = true;\n            this.conn_.markConnectionHealthy();\n          } else if (\n            this.conn_ &&\n            this.conn_.bytesSent > BYTES_SENT_HEALTHY_OVERRIDE\n          ) {\n            this.log_(\n              'Connection exceeded healthy timeout but has sent ' +\n                this.conn_.bytesSent +\n                ' bytes.  Leaving connection alive.'\n            );\n            // NOTE: We don't want to mark it healthy, since we have no guarantee that the bytes have made it to\n            // the server.\n          } else {\n            this.log_('Closing unhealthy connection after timeout.');\n            this.close();\n          }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      }, Math.floor(healthyTimeoutMS)) as any;\n    }\n  }\n\n  /**\n   * @return {!string}\n   * @private\n   */\n  private nextTransportId_(): string {\n    return 'c:' + this.id + ':' + this.connectionCount++;\n  }\n\n  private disconnReceiver_(conn) {\n    return everConnected => {\n      if (conn === this.conn_) {\n        this.onConnectionLost_(everConnected);\n      } else if (conn === this.secondaryConn_) {\n        this.log_('Secondary connection lost.');\n        this.onSecondaryConnectionLost_();\n      } else {\n        this.log_('closing an old connection');\n      }\n    };\n  }\n\n  private connReceiver_(conn: Transport) {\n    return (message: Indexable) => {\n      if (this.state_ !== RealtimeState.DISCONNECTED) {\n        if (conn === this.rx_) {\n          this.onPrimaryMessageReceived_(message);\n        } else if (conn === this.secondaryConn_) {\n          this.onSecondaryMessageReceived_(message);\n        } else {\n          this.log_('message on old connection');\n        }\n      }\n    };\n  }\n\n  /**\n   *\n   * @param {Object} dataMsg An arbitrary data message to be sent to the server\n   */\n  sendRequest(dataMsg: object) {\n    // wrap in a data message envelope and send it on\n    const msg = { t: 'd', d: dataMsg };\n    this.sendData_(msg);\n  }\n\n  tryCleanupConnection() {\n    if (this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_) {\n      this.log_(\n        'cleaning up and promoting a connection: ' + this.secondaryConn_.connId\n      );\n      this.conn_ = this.secondaryConn_;\n      this.secondaryConn_ = null;\n      // the server will shutdown the old connection\n    }\n  }\n\n  private onSecondaryControl_(controlData: { [k: string]: unknown }) {\n    if (MESSAGE_TYPE in controlData) {\n      const cmd = controlData[MESSAGE_TYPE] as string;\n      if (cmd === SWITCH_ACK) {\n        this.upgradeIfSecondaryHealthy_();\n      } else if (cmd === CONTROL_RESET) {\n        // Most likely the session wasn't valid. Abandon the switch attempt\n        this.log_('Got a reset on secondary, closing it');\n        this.secondaryConn_.close();\n        // If we were already using this connection for something, than we need to fully close\n        if (\n          this.tx_ === this.secondaryConn_ ||\n          this.rx_ === this.secondaryConn_\n        ) {\n          this.close();\n        }\n      } else if (cmd === CONTROL_PONG) {\n        this.log_('got pong on secondary.');\n        this.secondaryResponsesRequired_--;\n        this.upgradeIfSecondaryHealthy_();\n      }\n    }\n  }\n\n  private onSecondaryMessageReceived_(parsedData: Indexable) {\n    const layer: string = requireKey('t', parsedData) as string;\n    const data: unknown = requireKey('d', parsedData);\n    if (layer === 'c') {\n      this.onSecondaryControl_(data as Indexable);\n    } else if (layer === 'd') {\n      // got a data message, but we're still second connection. Need to buffer it up\n      this.pendingDataMessages.push(data);\n    } else {\n      throw new Error('Unknown protocol layer: ' + layer);\n    }\n  }\n\n  private upgradeIfSecondaryHealthy_() {\n    if (this.secondaryResponsesRequired_ <= 0) {\n      this.log_('Secondary connection is healthy.');\n      this.isHealthy_ = true;\n      this.secondaryConn_.markConnectionHealthy();\n      this.proceedWithUpgrade_();\n    } else {\n      // Send a ping to make sure the connection is healthy.\n      this.log_('sending ping on secondary.');\n      this.secondaryConn_.send({ t: 'c', d: { t: PING, d: {} } });\n    }\n  }\n\n  private proceedWithUpgrade_() {\n    // tell this connection to consider itself open\n    this.secondaryConn_.start();\n    // send ack\n    this.log_('sending client ack on secondary');\n    this.secondaryConn_.send({ t: 'c', d: { t: SWITCH_ACK, d: {} } });\n\n    // send end packet on primary transport, switch to sending on this one\n    // can receive on this one, buffer responses until end received on primary transport\n    this.log_('Ending transmission on primary');\n    this.conn_.send({ t: 'c', d: { t: END_TRANSMISSION, d: {} } });\n    this.tx_ = this.secondaryConn_;\n\n    this.tryCleanupConnection();\n  }\n\n  private onPrimaryMessageReceived_(parsedData: { [k: string]: unknown }) {\n    // Must refer to parsedData properties in quotes, so closure doesn't touch them.\n    const layer: string = requireKey('t', parsedData) as string;\n    const data: unknown = requireKey('d', parsedData);\n    if (layer === 'c') {\n      this.onControl_(data as { [k: string]: unknown });\n    } else if (layer === 'd') {\n      this.onDataMessage_(data);\n    }\n  }\n\n  private onDataMessage_(message: unknown) {\n    this.onPrimaryResponse_();\n\n    // We don't do anything with data messages, just kick them up a level\n    this.onMessage_(message);\n  }\n\n  private onPrimaryResponse_() {\n    if (!this.isHealthy_) {\n      this.primaryResponsesRequired_--;\n      if (this.primaryResponsesRequired_ <= 0) {\n        this.log_('Primary connection is healthy.');\n        this.isHealthy_ = true;\n        this.conn_.markConnectionHealthy();\n      }\n    }\n  }\n\n  private onControl_(controlData: { [k: string]: unknown }) {\n    const cmd: string = requireKey(MESSAGE_TYPE, controlData) as string;\n    if (MESSAGE_DATA in controlData) {\n      const payload = controlData[MESSAGE_DATA];\n      if (cmd === SERVER_HELLO) {\n        this.onHandshake_(\n          payload as {\n            ts: number;\n            v: string;\n            h: string;\n            s: string;\n          }\n        );\n      } else if (cmd === END_TRANSMISSION) {\n        this.log_('recvd end transmission on primary');\n        this.rx_ = this.secondaryConn_;\n        for (let i = 0; i < this.pendingDataMessages.length; ++i) {\n          this.onDataMessage_(this.pendingDataMessages[i]);\n        }\n        this.pendingDataMessages = [];\n        this.tryCleanupConnection();\n      } else if (cmd === CONTROL_SHUTDOWN) {\n        // This was previously the 'onKill' callback passed to the lower-level connection\n        // payload in this case is the reason for the shutdown. Generally a human-readable error\n        this.onConnectionShutdown_(payload as string);\n      } else if (cmd === CONTROL_RESET) {\n        // payload in this case is the host we should contact\n        this.onReset_(payload as string);\n      } else if (cmd === CONTROL_ERROR) {\n        error('Server Error: ' + payload);\n      } else if (cmd === CONTROL_PONG) {\n        this.log_('got pong on primary.');\n        this.onPrimaryResponse_();\n        this.sendPingOnPrimaryIfNecessary_();\n      } else {\n        error('Unknown control packet command: ' + cmd);\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {Object} handshake The handshake data returned from the server\n   * @private\n   */\n  private onHandshake_(handshake: {\n    ts: number;\n    v: string;\n    h: string;\n    s: string;\n  }): void {\n    const timestamp = handshake.ts;\n    const version = handshake.v;\n    const host = handshake.h;\n    this.sessionId = handshake.s;\n    this.repoInfo_.updateHost(host);\n    // if we've already closed the connection, then don't bother trying to progress further\n    if (this.state_ === RealtimeState.CONNECTING) {\n      this.conn_.start();\n      this.onConnectionEstablished_(this.conn_, timestamp);\n      if (PROTOCOL_VERSION !== version) {\n        warn('Protocol version mismatch detected');\n      }\n      // TODO: do we want to upgrade? when? maybe a delay?\n      this.tryStartUpgrade_();\n    }\n  }\n\n  private tryStartUpgrade_() {\n    const conn = this.transportManager_.upgradeTransport();\n    if (conn) {\n      this.startUpgrade_(conn);\n    }\n  }\n\n  private startUpgrade_(conn: TransportConstructor) {\n    this.secondaryConn_ = new conn(\n      this.nextTransportId_(),\n      this.repoInfo_,\n      this.sessionId\n    );\n    // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\n    // can consider the transport healthy.\n    this.secondaryResponsesRequired_ =\n      conn['responsesRequiredToBeHealthy'] || 0;\n\n    const onMessage = this.connReceiver_(this.secondaryConn_);\n    const onDisconnect = this.disconnReceiver_(this.secondaryConn_);\n    this.secondaryConn_.open(onMessage, onDisconnect);\n\n    // If we haven't successfully upgraded after UPGRADE_TIMEOUT, give up and kill the secondary.\n    setTimeoutNonBlocking(() => {\n      if (this.secondaryConn_) {\n        this.log_('Timed out trying to upgrade.');\n        this.secondaryConn_.close();\n      }\n    }, Math.floor(UPGRADE_TIMEOUT));\n  }\n\n  private onReset_(host: string) {\n    this.log_('Reset packet received.  New host: ' + host);\n    this.repoInfo_.updateHost(host);\n    // TODO: if we're already \"connected\", we need to trigger a disconnect at the next layer up.\n    // We don't currently support resets after the connection has already been established\n    if (this.state_ === RealtimeState.CONNECTED) {\n      this.close();\n    } else {\n      // Close whatever connections we have open and start again.\n      this.closeConnections_();\n      this.start_();\n    }\n  }\n\n  private onConnectionEstablished_(conn: Transport, timestamp: number) {\n    this.log_('Realtime connection established.');\n    this.conn_ = conn;\n    this.state_ = RealtimeState.CONNECTED;\n\n    if (this.onReady_) {\n      this.onReady_(timestamp, this.sessionId);\n      this.onReady_ = null;\n    }\n\n    // If after 5 seconds we haven't sent enough requests to the server to get the connection healthy,\n    // send some pings.\n    if (this.primaryResponsesRequired_ === 0) {\n      this.log_('Primary connection is healthy.');\n      this.isHealthy_ = true;\n    } else {\n      setTimeoutNonBlocking(() => {\n        this.sendPingOnPrimaryIfNecessary_();\n      }, Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS));\n    }\n  }\n\n  private sendPingOnPrimaryIfNecessary_() {\n    // If the connection isn't considered healthy yet, we'll send a noop ping packet request.\n    if (!this.isHealthy_ && this.state_ === RealtimeState.CONNECTED) {\n      this.log_('sending ping on primary.');\n      this.sendData_({ t: 'c', d: { t: PING, d: {} } });\n    }\n  }\n\n  private onSecondaryConnectionLost_() {\n    const conn = this.secondaryConn_;\n    this.secondaryConn_ = null;\n    if (this.tx_ === conn || this.rx_ === conn) {\n      // we are relying on this connection already in some capacity. Therefore, a failure is real\n      this.close();\n    }\n  }\n\n  /**\n   *\n   * @param {boolean} everConnected Whether or not the connection ever reached a server. Used to determine if\n   * we should flush the host cache\n   * @private\n   */\n  private onConnectionLost_(everConnected: boolean) {\n    this.conn_ = null;\n\n    // NOTE: IF you're seeing a Firefox error for this line, I think it might be because it's getting\n    // called on window close and RealtimeState.CONNECTING is no longer defined.  Just a guess.\n    if (!everConnected && this.state_ === RealtimeState.CONNECTING) {\n      this.log_('Realtime connection failed.');\n      // Since we failed to connect at all, clear any cached entry for this namespace in case the machine went away\n      if (this.repoInfo_.isCacheableHost()) {\n        PersistentStorage.remove('host:' + this.repoInfo_.host);\n        // reset the internal host to what we would show the user, i.e. <ns>.firebaseio.com\n        this.repoInfo_.internalHost = this.repoInfo_.host;\n      }\n    } else if (this.state_ === RealtimeState.CONNECTED) {\n      this.log_('Realtime connection lost.');\n    }\n\n    this.close();\n  }\n\n  /**\n   *\n   * @param {string} reason\n   * @private\n   */\n  private onConnectionShutdown_(reason: string) {\n    this.log_('Connection shutdown command received. Shutting down...');\n\n    if (this.onKill_) {\n      this.onKill_(reason);\n      this.onKill_ = null;\n    }\n\n    // We intentionally don't want to fire onDisconnect (kill is a different case),\n    // so clear the callback.\n    this.onDisconnect_ = null;\n\n    this.close();\n  }\n\n  private sendData_(data: object) {\n    if (this.state_ !== RealtimeState.CONNECTED) {\n      throw 'Connection is not connected';\n    } else {\n      this.tx_.send(data);\n    }\n  }\n\n  /**\n   * Cleans up this connection, calling the appropriate callbacks\n   */\n  close() {\n    if (this.state_ !== RealtimeState.DISCONNECTED) {\n      this.log_('Closing realtime connection.');\n      this.state_ = RealtimeState.DISCONNECTED;\n\n      this.closeConnections_();\n\n      if (this.onDisconnect_) {\n        this.onDisconnect_();\n        this.onDisconnect_ = null;\n      }\n    }\n  }\n\n  /**\n   *\n   * @private\n   */\n  private closeConnections_() {\n    this.log_('Shutting down all connections');\n    if (this.conn_) {\n      this.conn_.close();\n      this.conn_ = null;\n    }\n\n    if (this.secondaryConn_) {\n      this.secondaryConn_.close();\n      this.secondaryConn_ = null;\n    }\n\n    if (this.healthyTimeout_) {\n      clearTimeout(this.healthyTimeout_);\n      this.healthyTimeout_ = null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Query } from '../api/Query';\n\n/**\n * Interface defining the set of actions that can be performed against the Firebase server\n * (basically corresponds to our wire protocol).\n *\n * @interface\n */\nexport abstract class ServerActions {\n  /**\n   * @param {!Query} query\n   * @param {function():string} currentHashFn\n   * @param {?number} tag\n   * @param {function(string, *)} onComplete\n   */\n  abstract listen(\n    query: Query,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: unknown) => void\n  ): void;\n\n  /**\n   * Remove a listen.\n   *\n   * @param {!Query} query\n   * @param {?number} tag\n   */\n  abstract unlisten(query: Query, tag: number | null): void;\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, string)=} onComplete\n   * @param {string=} hash\n   */\n  put(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void,\n    hash?: string\n  ) {}\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, ?string)} onComplete\n   * @param {string=} hash\n   */\n  merge(\n    pathString: string,\n    data: unknown,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {}\n\n  /**\n   * Refreshes the auth token for the current connection.\n   * @param {string} token The authentication token\n   */\n  refreshAuthToken(token: string) {}\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, string)=} onComplete\n   */\n  onDisconnectPut(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, string)=} onComplete\n   */\n  onDisconnectMerge(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  /**\n   * @param {string} pathString\n   * @param {function(string, string)=} onComplete\n   */\n  onDisconnectCancel(\n    pathString: string,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  /**\n   * @param {Object.<string, *>} stats\n   */\n  reportStats(stats: { [k: string]: unknown }) {}\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  contains,\n  isEmpty,\n  safeGet,\n  CONSTANTS,\n  stringify,\n  assert,\n  isAdmin,\n  isValidFormat,\n  isMobileCordova,\n  isReactNative,\n  isNodeSdk\n} from '@firebase/util';\n\nimport { error, log, logWrapper, warn, ObjectToUniqueKey } from './util/util';\nimport { Path } from './util/Path';\nimport { VisibilityMonitor } from './util/VisibilityMonitor';\nimport { OnlineMonitor } from './util/OnlineMonitor';\n\nimport { Connection } from '../realtime/Connection';\n\nimport { ServerActions } from './ServerActions';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { RepoInfo } from './RepoInfo';\nimport { Query } from '../api/Query';\nimport { SDK_VERSION } from './version';\n\nconst RECONNECT_MIN_DELAY = 1000;\nconst RECONNECT_MAX_DELAY_DEFAULT = 60 * 5 * 1000; // 5 minutes in milliseconds (Case: 1858)\nconst RECONNECT_MAX_DELAY_FOR_ADMINS = 30 * 1000; // 30 seconds for admin clients (likely to be a backend server)\nconst RECONNECT_DELAY_MULTIPLIER = 1.3;\nconst RECONNECT_DELAY_RESET_TIMEOUT = 30000; // Reset delay back to MIN_DELAY after being connected for 30sec.\nconst SERVER_KILL_INTERRUPT_REASON = 'server_kill';\n\n// If auth fails repeatedly, we'll assume something is wrong and log a warning / back off.\nconst INVALID_AUTH_TOKEN_THRESHOLD = 3;\n\ninterface ListenSpec {\n  onComplete(s: string, p?: unknown): void;\n\n  hashFn(): string;\n\n  query: Query;\n  tag: number | null;\n}\n\ninterface OnDisconnectRequest {\n  pathString: string;\n  action: string;\n  data: unknown;\n  onComplete?: (a: string, b: string) => void;\n}\n\ninterface OutstandingPut {\n  action: string;\n  request: object;\n  queued?: boolean;\n  onComplete: (a: string, b?: string) => void;\n}\n\n/**\n * Firebase connection.  Abstracts wire protocol and handles reconnecting.\n *\n * NOTE: All JSON objects sent to the realtime connection must have property names enclosed\n * in quotes to make sure the closure compiler does not minify them.\n */\nexport class PersistentConnection extends ServerActions {\n  // Used for diagnostic logging.\n  id = PersistentConnection.nextPersistentConnectionId_++;\n  private log_ = logWrapper('p:' + this.id + ':');\n\n  private interruptReasons_: { [reason: string]: boolean } = {};\n  /** Map<path, Map<queryId, ListenSpec>> */\n  private readonly listens: Map<\n    /* path */ string,\n    Map</* queryId */ string, ListenSpec>\n  > = new Map();\n  private outstandingPuts_: OutstandingPut[] = [];\n  private outstandingPutCount_ = 0;\n  private onDisconnectRequestQueue_: OnDisconnectRequest[] = [];\n  private connected_ = false;\n  private reconnectDelay_ = RECONNECT_MIN_DELAY;\n  private maxReconnectDelay_ = RECONNECT_MAX_DELAY_DEFAULT;\n  private securityDebugCallback_: ((a: object) => void) | null = null;\n  lastSessionId: string | null = null;\n\n  private establishConnectionTimer_: number | null = null;\n\n  private visible_: boolean = false;\n\n  // Before we get connected, we keep a queue of pending messages to send.\n  private requestCBHash_: { [k: number]: (a: unknown) => void } = {};\n  private requestNumber_ = 0;\n\n  private realtime_: {\n    sendRequest(a: object): void;\n    close(): void;\n  } | null = null;\n\n  private authToken_: string | null = null;\n  private forceTokenRefresh_ = false;\n  private invalidAuthTokenCount_ = 0;\n\n  private firstConnection_ = true;\n  private lastConnectionAttemptTime_: number | null = null;\n  private lastConnectionEstablishedTime_: number | null = null;\n\n  private static nextPersistentConnectionId_ = 0;\n\n  /**\n   * Counter for number of connections created. Mainly used for tagging in the logs\n   */\n  private static nextConnectionId_ = 0;\n\n  /**\n   * @implements {ServerActions}\n   * @param repoInfo_ Data about the namespace we are connecting to\n   * @param onDataUpdate_ A callback for new data from the server\n   */\n  constructor(\n    private repoInfo_: RepoInfo,\n    private onDataUpdate_: (\n      a: string,\n      b: unknown,\n      c: boolean,\n      d: number | null\n    ) => void,\n    private onConnectStatus_: (a: boolean) => void,\n    private onServerInfoUpdate_: (a: unknown) => void,\n    private authTokenProvider_: AuthTokenProvider,\n    private authOverride_?: object | null\n  ) {\n    super();\n\n    if (authOverride_ && !isNodeSdk()) {\n      throw new Error(\n        'Auth override specified in options, but not supported on non Node.js platforms'\n      );\n    }\n    this.scheduleConnect_(0);\n\n    VisibilityMonitor.getInstance().on('visible', this.onVisible_, this);\n\n    if (repoInfo_.host.indexOf('fblocal') === -1) {\n      OnlineMonitor.getInstance().on('online', this.onOnline_, this);\n    }\n  }\n\n  protected sendRequest(\n    action: string,\n    body: unknown,\n    onResponse?: (a: unknown) => void\n  ) {\n    const curReqNum = ++this.requestNumber_;\n\n    const msg = { r: curReqNum, a: action, b: body };\n    this.log_(stringify(msg));\n    assert(\n      this.connected_,\n      \"sendRequest call when we're not connected not allowed.\"\n    );\n    this.realtime_.sendRequest(msg);\n    if (onResponse) {\n      this.requestCBHash_[curReqNum] = onResponse;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  listen(\n    query: Query,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: unknown) => void\n  ) {\n    const queryId = query.queryIdentifier();\n    const pathString = query.path.toString();\n    this.log_('Listen called for ' + pathString + ' ' + queryId);\n    if (!this.listens.has(pathString)) {\n      this.listens.set(pathString, new Map());\n    }\n    assert(\n      query.getQueryParams().isDefault() ||\n        !query.getQueryParams().loadsAllData(),\n      'listen() called for non-default but complete query'\n    );\n    assert(\n      !this.listens.get(pathString)!.has(queryId),\n      'listen() called twice for same path/queryId.'\n    );\n    const listenSpec: ListenSpec = {\n      onComplete,\n      hashFn: currentHashFn,\n      query,\n      tag\n    };\n    this.listens.get(pathString)!.set(queryId, listenSpec);\n\n    if (this.connected_) {\n      this.sendListen_(listenSpec);\n    }\n  }\n\n  private sendListen_(listenSpec: ListenSpec) {\n    const query = listenSpec.query;\n    const pathString = query.path.toString();\n    const queryId = query.queryIdentifier();\n    this.log_('Listen on ' + pathString + ' for ' + queryId);\n    const req: { [k: string]: unknown } = { /*path*/ p: pathString };\n\n    const action = 'q';\n\n    // Only bother to send query if it's non-default.\n    if (listenSpec.tag) {\n      req['q'] = query.queryObject();\n      req['t'] = listenSpec.tag;\n    }\n\n    req[/*hash*/ 'h'] = listenSpec.hashFn();\n\n    this.sendRequest(action, req, (message: { [k: string]: unknown }) => {\n      const payload: unknown = message[/*data*/ 'd'];\n      const status = message[/*status*/ 's'] as string;\n\n      // print warnings in any case...\n      PersistentConnection.warnOnListenWarnings_(payload, query);\n\n      const currentListenSpec =\n        this.listens.get(pathString) &&\n        this.listens.get(pathString)!.get(queryId);\n      // only trigger actions if the listen hasn't been removed and readded\n      if (currentListenSpec === listenSpec) {\n        this.log_('listen response', message);\n\n        if (status !== 'ok') {\n          this.removeListen_(pathString, queryId);\n        }\n\n        if (listenSpec.onComplete) {\n          listenSpec.onComplete(status, payload);\n        }\n      }\n    });\n  }\n\n  private static warnOnListenWarnings_(payload: unknown, query: Query) {\n    if (payload && typeof payload === 'object' && contains(payload, 'w')) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const warnings = safeGet(payload as any, 'w');\n      if (Array.isArray(warnings) && ~warnings.indexOf('no_index')) {\n        const indexSpec =\n          '\".indexOn\": \"' +\n          query\n            .getQueryParams()\n            .getIndex()\n            .toString() +\n          '\"';\n        const indexPath = query.path.toString();\n        warn(\n          `Using an unspecified index. Your data will be downloaded and ` +\n            `filtered on the client. Consider adding ${indexSpec} at ` +\n            `${indexPath} to your security rules for better performance.`\n        );\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  refreshAuthToken(token: string) {\n    this.authToken_ = token;\n    this.log_('Auth token refreshed');\n    if (this.authToken_) {\n      this.tryAuth();\n    } else {\n      //If we're connected we want to let the server know to unauthenticate us. If we're not connected, simply delete\n      //the credential so we dont become authenticated next time we connect.\n      if (this.connected_) {\n        this.sendRequest('unauth', {}, () => {});\n      }\n    }\n\n    this.reduceReconnectDelayIfAdminCredential_(token);\n  }\n\n  private reduceReconnectDelayIfAdminCredential_(credential: string) {\n    // NOTE: This isn't intended to be bulletproof (a malicious developer can always just modify the client).\n    // Additionally, we don't bother resetting the max delay back to the default if auth fails / expires.\n    const isFirebaseSecret = credential && credential.length === 40;\n    if (isFirebaseSecret || isAdmin(credential)) {\n      this.log_(\n        'Admin auth credential detected.  Reducing max reconnect time.'\n      );\n      this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\n    }\n  }\n\n  /**\n   * Attempts to authenticate with the given credentials. If the authentication attempt fails, it's triggered like\n   * a auth revoked (the connection is closed).\n   */\n  tryAuth() {\n    if (this.connected_ && this.authToken_) {\n      const token = this.authToken_;\n      const authMethod = isValidFormat(token) ? 'auth' : 'gauth';\n      const requestData: { [k: string]: unknown } = { cred: token };\n      if (this.authOverride_ === null) {\n        requestData['noauth'] = true;\n      } else if (typeof this.authOverride_ === 'object') {\n        requestData['authvar'] = this.authOverride_;\n      }\n      this.sendRequest(\n        authMethod,\n        requestData,\n        (res: { [k: string]: unknown }) => {\n          const status = res[/*status*/ 's'] as string;\n          const data = (res[/*data*/ 'd'] as string) || 'error';\n\n          if (this.authToken_ === token) {\n            if (status === 'ok') {\n              this.invalidAuthTokenCount_ = 0;\n            } else {\n              // Triggers reconnect and force refresh for auth token\n              this.onAuthRevoked_(status, data);\n            }\n          }\n        }\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  unlisten(query: Query, tag: number | null) {\n    const pathString = query.path.toString();\n    const queryId = query.queryIdentifier();\n\n    this.log_('Unlisten called for ' + pathString + ' ' + queryId);\n\n    assert(\n      query.getQueryParams().isDefault() ||\n        !query.getQueryParams().loadsAllData(),\n      'unlisten() called for non-default but complete query'\n    );\n    const listen = this.removeListen_(pathString, queryId);\n    if (listen && this.connected_) {\n      this.sendUnlisten_(pathString, queryId, query.queryObject(), tag);\n    }\n  }\n\n  private sendUnlisten_(\n    pathString: string,\n    queryId: string,\n    queryObj: object,\n    tag: number | null\n  ) {\n    this.log_('Unlisten on ' + pathString + ' for ' + queryId);\n\n    const req: { [k: string]: unknown } = { /*path*/ p: pathString };\n    const action = 'n';\n    // Only bother sending queryId if it's non-default.\n    if (tag) {\n      req['q'] = queryObj;\n      req['t'] = tag;\n    }\n\n    this.sendRequest(action, req);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  onDisconnectPut(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    if (this.connected_) {\n      this.sendOnDisconnect_('o', pathString, data, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'o',\n        data,\n        onComplete\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  onDisconnectMerge(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    if (this.connected_) {\n      this.sendOnDisconnect_('om', pathString, data, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'om',\n        data,\n        onComplete\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  onDisconnectCancel(\n    pathString: string,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    if (this.connected_) {\n      this.sendOnDisconnect_('oc', pathString, null, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'oc',\n        data: null,\n        onComplete\n      });\n    }\n  }\n\n  private sendOnDisconnect_(\n    action: string,\n    pathString: string,\n    data: unknown,\n    onComplete: (a: string, b: string) => void\n  ) {\n    const request = { /*path*/ p: pathString, /*data*/ d: data };\n    this.log_('onDisconnect ' + action, request);\n    this.sendRequest(action, request, (response: { [k: string]: unknown }) => {\n      if (onComplete) {\n        setTimeout(() => {\n          onComplete(\n            response[/*status*/ 's'] as string,\n            response[/* data */ 'd'] as string\n          );\n        }, Math.floor(0));\n      }\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  put(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void,\n    hash?: string\n  ) {\n    this.putInternal('p', pathString, data, onComplete, hash);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  merge(\n    pathString: string,\n    data: unknown,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {\n    this.putInternal('m', pathString, data, onComplete, hash);\n  }\n\n  putInternal(\n    action: string,\n    pathString: string,\n    data: unknown,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {\n    const request: { [k: string]: unknown } = {\n      /*path*/ p: pathString,\n      /*data*/ d: data\n    };\n\n    if (hash !== undefined) {\n      request[/*hash*/ 'h'] = hash;\n    }\n\n    // TODO: Only keep track of the most recent put for a given path?\n    this.outstandingPuts_.push({\n      action,\n      request,\n      onComplete\n    });\n\n    this.outstandingPutCount_++;\n    const index = this.outstandingPuts_.length - 1;\n\n    if (this.connected_) {\n      this.sendPut_(index);\n    } else {\n      this.log_('Buffering put: ' + pathString);\n    }\n  }\n\n  private sendPut_(index: number) {\n    const action = this.outstandingPuts_[index].action;\n    const request = this.outstandingPuts_[index].request;\n    const onComplete = this.outstandingPuts_[index].onComplete;\n    this.outstandingPuts_[index].queued = this.connected_;\n\n    this.sendRequest(action, request, (message: { [k: string]: unknown }) => {\n      this.log_(action + ' response', message);\n\n      delete this.outstandingPuts_[index];\n      this.outstandingPutCount_--;\n\n      // Clean up array occasionally.\n      if (this.outstandingPutCount_ === 0) {\n        this.outstandingPuts_ = [];\n      }\n\n      if (onComplete) {\n        onComplete(\n          message[/*status*/ 's'] as string,\n          message[/* data */ 'd'] as string\n        );\n      }\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  reportStats(stats: { [k: string]: unknown }) {\n    // If we're not connected, we just drop the stats.\n    if (this.connected_) {\n      const request = { /*counters*/ c: stats };\n      this.log_('reportStats', request);\n\n      this.sendRequest(/*stats*/ 's', request, result => {\n        const status = result[/*status*/ 's'];\n        if (status !== 'ok') {\n          const errorReason = result[/* data */ 'd'];\n          this.log_('reportStats', 'Error sending stats: ' + errorReason);\n        }\n      });\n    }\n  }\n\n  private onDataMessage_(message: { [k: string]: unknown }) {\n    if ('r' in message) {\n      // this is a response\n      this.log_('from server: ' + stringify(message));\n      const reqNum = message['r'] as string;\n      const onResponse = this.requestCBHash_[reqNum];\n      if (onResponse) {\n        delete this.requestCBHash_[reqNum];\n        onResponse(message[/*body*/ 'b']);\n      }\n    } else if ('error' in message) {\n      throw 'A server-side error has occurred: ' + message['error'];\n    } else if ('a' in message) {\n      // a and b are action and body, respectively\n      this.onDataPush_(message['a'] as string, message['b'] as {});\n    }\n  }\n\n  private onDataPush_(action: string, body: { [k: string]: unknown }) {\n    this.log_('handleServerMessage', action, body);\n    if (action === 'd') {\n      this.onDataUpdate_(\n        body[/*path*/ 'p'] as string,\n        body[/*data*/ 'd'],\n        /*isMerge*/ false,\n        body['t'] as number\n      );\n    } else if (action === 'm') {\n      this.onDataUpdate_(\n        body[/*path*/ 'p'] as string,\n        body[/*data*/ 'd'],\n        /*isMerge=*/ true,\n        body['t'] as number\n      );\n    } else if (action === 'c') {\n      this.onListenRevoked_(\n        body[/*path*/ 'p'] as string,\n        body[/*query*/ 'q'] as unknown[]\n      );\n    } else if (action === 'ac') {\n      this.onAuthRevoked_(\n        body[/*status code*/ 's'] as string,\n        body[/* explanation */ 'd'] as string\n      );\n    } else if (action === 'sd') {\n      this.onSecurityDebugPacket_(body);\n    } else {\n      error(\n        'Unrecognized action received from server: ' +\n          stringify(action) +\n          '\\nAre you using the latest client?'\n      );\n    }\n  }\n\n  private onReady_(timestamp: number, sessionId: string) {\n    this.log_('connection ready');\n    this.connected_ = true;\n    this.lastConnectionEstablishedTime_ = new Date().getTime();\n    this.handleTimestamp_(timestamp);\n    this.lastSessionId = sessionId;\n    if (this.firstConnection_) {\n      this.sendConnectStats_();\n    }\n    this.restoreState_();\n    this.firstConnection_ = false;\n    this.onConnectStatus_(true);\n  }\n\n  private scheduleConnect_(timeout: number) {\n    assert(\n      !this.realtime_,\n      \"Scheduling a connect when we're already connected/ing?\"\n    );\n\n    if (this.establishConnectionTimer_) {\n      clearTimeout(this.establishConnectionTimer_);\n    }\n\n    // NOTE: Even when timeout is 0, it's important to do a setTimeout to work around an infuriating \"Security Error\" in\n    // Firefox when trying to write to our long-polling iframe in some scenarios (e.g. Forge or our unit tests).\n\n    this.establishConnectionTimer_ = setTimeout(() => {\n      this.establishConnectionTimer_ = null;\n      this.establishConnection_();\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    }, Math.floor(timeout)) as any;\n  }\n\n  private onVisible_(visible: boolean) {\n    // NOTE: Tabbing away and back to a window will defeat our reconnect backoff, but I think that's fine.\n    if (\n      visible &&\n      !this.visible_ &&\n      this.reconnectDelay_ === this.maxReconnectDelay_\n    ) {\n      this.log_('Window became visible.  Reducing delay.');\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    }\n    this.visible_ = visible;\n  }\n\n  private onOnline_(online: boolean) {\n    if (online) {\n      this.log_('Browser went online.');\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    } else {\n      this.log_('Browser went offline.  Killing connection.');\n      if (this.realtime_) {\n        this.realtime_.close();\n      }\n    }\n  }\n\n  private onRealtimeDisconnect_() {\n    this.log_('data client disconnected');\n    this.connected_ = false;\n    this.realtime_ = null;\n\n    // Since we don't know if our sent transactions succeeded or not, we need to cancel them.\n    this.cancelSentTransactions_();\n\n    // Clear out the pending requests.\n    this.requestCBHash_ = {};\n\n    if (this.shouldReconnect_()) {\n      if (!this.visible_) {\n        this.log_(\"Window isn't visible.  Delaying reconnect.\");\n        this.reconnectDelay_ = this.maxReconnectDelay_;\n        this.lastConnectionAttemptTime_ = new Date().getTime();\n      } else if (this.lastConnectionEstablishedTime_) {\n        // If we've been connected long enough, reset reconnect delay to minimum.\n        const timeSinceLastConnectSucceeded =\n          new Date().getTime() - this.lastConnectionEstablishedTime_;\n        if (timeSinceLastConnectSucceeded > RECONNECT_DELAY_RESET_TIMEOUT) {\n          this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n        }\n        this.lastConnectionEstablishedTime_ = null;\n      }\n\n      const timeSinceLastConnectAttempt =\n        new Date().getTime() - this.lastConnectionAttemptTime_;\n      let reconnectDelay = Math.max(\n        0,\n        this.reconnectDelay_ - timeSinceLastConnectAttempt\n      );\n      reconnectDelay = Math.random() * reconnectDelay;\n\n      this.log_('Trying to reconnect in ' + reconnectDelay + 'ms');\n      this.scheduleConnect_(reconnectDelay);\n\n      // Adjust reconnect delay for next time.\n      this.reconnectDelay_ = Math.min(\n        this.maxReconnectDelay_,\n        this.reconnectDelay_ * RECONNECT_DELAY_MULTIPLIER\n      );\n    }\n    this.onConnectStatus_(false);\n  }\n\n  private establishConnection_() {\n    if (this.shouldReconnect_()) {\n      this.log_('Making a connection attempt');\n      this.lastConnectionAttemptTime_ = new Date().getTime();\n      this.lastConnectionEstablishedTime_ = null;\n      const onDataMessage = this.onDataMessage_.bind(this);\n      const onReady = this.onReady_.bind(this);\n      const onDisconnect = this.onRealtimeDisconnect_.bind(this);\n      const connId = this.id + ':' + PersistentConnection.nextConnectionId_++;\n      const self = this;\n      const lastSessionId = this.lastSessionId;\n      let canceled = false;\n      let connection: Connection | null = null;\n      const closeFn = function() {\n        if (connection) {\n          connection.close();\n        } else {\n          canceled = true;\n          onDisconnect();\n        }\n      };\n      const sendRequestFn = function(msg: object) {\n        assert(\n          connection,\n          \"sendRequest call when we're not connected not allowed.\"\n        );\n        connection.sendRequest(msg);\n      };\n\n      this.realtime_ = {\n        close: closeFn,\n        sendRequest: sendRequestFn\n      };\n\n      const forceRefresh = this.forceTokenRefresh_;\n      this.forceTokenRefresh_ = false;\n\n      // First fetch auth token, and establish connection after fetching the token was successful\n      this.authTokenProvider_\n        .getToken(forceRefresh)\n        .then(result => {\n          if (!canceled) {\n            log('getToken() completed. Creating connection.');\n            self.authToken_ = result && result.accessToken;\n            connection = new Connection(\n              connId,\n              self.repoInfo_,\n              onDataMessage,\n              onReady,\n              onDisconnect,\n              /* onKill= */ reason => {\n                warn(reason + ' (' + self.repoInfo_.toString() + ')');\n                self.interrupt(SERVER_KILL_INTERRUPT_REASON);\n              },\n              lastSessionId\n            );\n          } else {\n            log('getToken() completed but was canceled');\n          }\n        })\n        .then(null, error => {\n          self.log_('Failed to get token: ' + error);\n          if (!canceled) {\n            if (CONSTANTS.NODE_ADMIN) {\n              // This may be a critical error for the Admin Node.js SDK, so log a warning.\n              // But getToken() may also just have temporarily failed, so we still want to\n              // continue retrying.\n              warn(error);\n            }\n            closeFn();\n          }\n        });\n    }\n  }\n\n  interrupt(reason: string) {\n    log('Interrupting connection for reason: ' + reason);\n    this.interruptReasons_[reason] = true;\n    if (this.realtime_) {\n      this.realtime_.close();\n    } else {\n      if (this.establishConnectionTimer_) {\n        clearTimeout(this.establishConnectionTimer_);\n        this.establishConnectionTimer_ = null;\n      }\n      if (this.connected_) {\n        this.onRealtimeDisconnect_();\n      }\n    }\n  }\n\n  resume(reason: string) {\n    log('Resuming connection for reason: ' + reason);\n    delete this.interruptReasons_[reason];\n    if (isEmpty(this.interruptReasons_)) {\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    }\n  }\n\n  private handleTimestamp_(timestamp: number) {\n    const delta = timestamp - new Date().getTime();\n    this.onServerInfoUpdate_({ serverTimeOffset: delta });\n  }\n\n  private cancelSentTransactions_() {\n    for (let i = 0; i < this.outstandingPuts_.length; i++) {\n      const put = this.outstandingPuts_[i];\n      if (put && /*hash*/ 'h' in put.request && put.queued) {\n        if (put.onComplete) {\n          put.onComplete('disconnect');\n        }\n\n        delete this.outstandingPuts_[i];\n        this.outstandingPutCount_--;\n      }\n    }\n\n    // Clean up array occasionally.\n    if (this.outstandingPutCount_ === 0) {\n      this.outstandingPuts_ = [];\n    }\n  }\n\n  private onListenRevoked_(pathString: string, query?: unknown[]) {\n    // Remove the listen and manufacture a \"permission_denied\" error for the failed listen.\n    let queryId;\n    if (!query) {\n      queryId = 'default';\n    } else {\n      queryId = query.map(q => ObjectToUniqueKey(q)).join('$');\n    }\n    const listen = this.removeListen_(pathString, queryId);\n    if (listen && listen.onComplete) {\n      listen.onComplete('permission_denied');\n    }\n  }\n\n  private removeListen_(pathString: string, queryId: string): ListenSpec {\n    const normalizedPathString = new Path(pathString).toString(); // normalize path.\n    let listen;\n    if (this.listens.has(normalizedPathString)) {\n      const map = this.listens.get(normalizedPathString)!;\n      listen = map.get(queryId);\n      map.delete(queryId);\n      if (map.size === 0) {\n        this.listens.delete(normalizedPathString);\n      }\n    } else {\n      // all listens for this path has already been removed\n      listen = undefined;\n    }\n    return listen;\n  }\n\n  private onAuthRevoked_(statusCode: string, explanation: string) {\n    log('Auth token revoked: ' + statusCode + '/' + explanation);\n    this.authToken_ = null;\n    this.forceTokenRefresh_ = true;\n    this.realtime_.close();\n    if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {\n      // We'll wait a couple times before logging the warning / increasing the\n      // retry period since oauth tokens will report as \"invalid\" if they're\n      // just expired. Plus there may be transient issues that resolve themselves.\n      this.invalidAuthTokenCount_++;\n      if (this.invalidAuthTokenCount_ >= INVALID_AUTH_TOKEN_THRESHOLD) {\n        // Set a long reconnect delay because recovery is unlikely\n        this.reconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\n\n        // Notify the auth token provider that the token is invalid, which will log\n        // a warning\n        this.authTokenProvider_.notifyForInvalidToken();\n      }\n    }\n  }\n\n  private onSecurityDebugPacket_(body: { [k: string]: unknown }) {\n    if (this.securityDebugCallback_) {\n      this.securityDebugCallback_(body);\n    } else {\n      if ('msg' in body) {\n        console.log(\n          'FIREBASE: ' + (body['msg'] as string).replace('\\n', '\\nFIREBASE: ')\n        );\n      }\n    }\n  }\n\n  private restoreState_() {\n    //Re-authenticate ourselves if we have a credential stored.\n    this.tryAuth();\n\n    // Puts depend on having received the corresponding data update from the server before they complete, so we must\n    // make sure to send listens before puts.\n    for (const queries of this.listens.values()) {\n      for (const listenSpec of queries.values()) {\n        this.sendListen_(listenSpec);\n      }\n    }\n\n    for (let i = 0; i < this.outstandingPuts_.length; i++) {\n      if (this.outstandingPuts_[i]) {\n        this.sendPut_(i);\n      }\n    }\n\n    while (this.onDisconnectRequestQueue_.length) {\n      const request = this.onDisconnectRequestQueue_.shift();\n      this.sendOnDisconnect_(\n        request.action,\n        request.pathString,\n        request.data,\n        request.onComplete\n      );\n    }\n  }\n\n  /**\n   * Sends client stats for first connection\n   */\n  private sendConnectStats_() {\n    const stats: { [k: string]: number } = {};\n\n    let clientName = 'js';\n    if (CONSTANTS.NODE_ADMIN) {\n      clientName = 'admin_node';\n    } else if (CONSTANTS.NODE_CLIENT) {\n      clientName = 'node';\n    }\n\n    stats['sdk.' + clientName + '.' + SDK_VERSION.replace(/\\./g, '-')] = 1;\n\n    if (isMobileCordova()) {\n      stats['framework.cordova'] = 1;\n    } else if (isReactNative()) {\n      stats['framework.reactnative'] = 1;\n    }\n    this.reportStats(stats);\n  }\n\n  private shouldReconnect_(): boolean {\n    const online = OnlineMonitor.getInstance().currentlyOnline();\n    return isEmpty(this.interruptReasons_) && online;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, jsonEval, safeGet, querystring } from '@firebase/util';\nimport { logWrapper, warn } from './util/util';\n\nimport { ServerActions } from './ServerActions';\nimport { RepoInfo } from './RepoInfo';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { Query } from '../api/Query';\n\n/**\n * An implementation of ServerActions that communicates with the server via REST requests.\n * This is mostly useful for compatibility with crawlers, where we don't want to spin up a full\n * persistent connection (using WebSockets or long-polling)\n */\nexport class ReadonlyRestClient extends ServerActions {\n  reportStats(stats: { [k: string]: unknown }): void {\n    throw new Error('Method not implemented.');\n  }\n\n  /** @private {function(...[*])} */\n  private log_: (...args: unknown[]) => void = logWrapper('p:rest:');\n\n  /**\n   * We don't actually need to track listens, except to prevent us calling an onComplete for a listen\n   * that's been removed. :-/\n   *\n   * @private {!Object.<string, !Object>}\n   */\n  private listens_: { [k: string]: object } = {};\n\n  /**\n   * @param {!Query} query\n   * @param {?number=} tag\n   * @return {string}\n   * @private\n   */\n  static getListenId_(query: Query, tag?: number | null): string {\n    if (tag !== undefined) {\n      return 'tag$' + tag;\n    } else {\n      assert(\n        query.getQueryParams().isDefault(),\n        \"should have a tag if it's not a default query.\"\n      );\n      return query.path.toString();\n    }\n  }\n\n  /**\n   * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to\n   * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server\n   * @param {AuthTokenProvider} authTokenProvider_\n   * @implements {ServerActions}\n   */\n  constructor(\n    private repoInfo_: RepoInfo,\n    private onDataUpdate_: (\n      a: string,\n      b: unknown,\n      c: boolean,\n      d: number | null\n    ) => void,\n    private authTokenProvider_: AuthTokenProvider\n  ) {\n    super();\n  }\n\n  /** @inheritDoc */\n  listen(\n    query: Query,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: unknown) => void\n  ) {\n    const pathString = query.path.toString();\n    this.log_(\n      'Listen called for ' + pathString + ' ' + query.queryIdentifier()\n    );\n\n    // Mark this listener so we can tell if it's removed.\n    const listenId = ReadonlyRestClient.getListenId_(query, tag);\n    const thisListen = {};\n    this.listens_[listenId] = thisListen;\n\n    const queryStringParameters = query\n      .getQueryParams()\n      .toRestQueryStringParameters();\n\n    this.restRequest_(\n      pathString + '.json',\n      queryStringParameters,\n      (error, result) => {\n        let data = result;\n\n        if (error === 404) {\n          data = null;\n          error = null;\n        }\n\n        if (error === null) {\n          this.onDataUpdate_(pathString, data, /*isMerge=*/ false, tag);\n        }\n\n        if (safeGet(this.listens_, listenId) === thisListen) {\n          let status;\n          if (!error) {\n            status = 'ok';\n          } else if (error === 401) {\n            status = 'permission_denied';\n          } else {\n            status = 'rest_error:' + error;\n          }\n\n          onComplete(status, null);\n        }\n      }\n    );\n  }\n\n  /** @inheritDoc */\n  unlisten(query: Query, tag: number | null) {\n    const listenId = ReadonlyRestClient.getListenId_(query, tag);\n    delete this.listens_[listenId];\n  }\n\n  /** @inheritDoc */\n  refreshAuthToken(token: string) {\n    // no-op since we just always call getToken.\n  }\n\n  /**\n   * Performs a REST request to the given path, with the provided query string parameters,\n   * and any auth credentials we have.\n   *\n   * @param {!string} pathString\n   * @param {!Object.<string, *>} queryStringParameters\n   * @param {?function(?number, *=)} callback\n   * @private\n   */\n  private restRequest_(\n    pathString: string,\n    queryStringParameters: { [k: string]: string | number } = {},\n    callback: ((a: number | null, b?: unknown) => void) | null\n  ) {\n    queryStringParameters['format'] = 'export';\n\n    this.authTokenProvider_\n      .getToken(/*forceRefresh=*/ false)\n      .then(authTokenData => {\n        const authToken = authTokenData && authTokenData.accessToken;\n        if (authToken) {\n          queryStringParameters['auth'] = authToken;\n        }\n\n        const url =\n          (this.repoInfo_.secure ? 'https://' : 'http://') +\n          this.repoInfo_.host +\n          pathString +\n          '?' +\n          'ns=' +\n          this.repoInfo_.namespace +\n          querystring(queryStringParameters);\n\n        this.log_('Sending REST request for ' + url);\n        const xhr = new XMLHttpRequest();\n        xhr.onreadystatechange = () => {\n          if (callback && xhr.readyState === 4) {\n            this.log_(\n              'REST Response for ' + url + ' received. status:',\n              xhr.status,\n              'response:',\n              xhr.responseText\n            );\n            let res = null;\n            if (xhr.status >= 200 && xhr.status < 300) {\n              try {\n                res = jsonEval(xhr.responseText);\n              } catch (e) {\n                warn(\n                  'Failed to parse JSON response for ' +\n                    url +\n                    ': ' +\n                    xhr.responseText\n                );\n              }\n              callback(null, res);\n            } else {\n              // 401 and 404 are expected.\n              if (xhr.status !== 401 && xhr.status !== 404) {\n                warn(\n                  'Got unsuccessful REST response for ' +\n                    url +\n                    ' Status: ' +\n                    xhr.status\n                );\n              }\n              callback(xhr.status);\n            }\n            callback = null;\n          }\n        };\n\n        xhr.open('GET', url, /*asynchronous=*/ true);\n        xhr.send();\n      });\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  generateWithValues,\n  resolveDeferredValueSnapshot,\n  resolveDeferredValueTree\n} from './util/ServerValues';\nimport { nodeFromJSON } from './snap/nodeFromJSON';\nimport { Path } from './util/Path';\nimport { SparseSnapshotTree } from './SparseSnapshotTree';\nimport { SyncTree } from './SyncTree';\nimport { SnapshotHolder } from './SnapshotHolder';\nimport { stringify, map, isEmpty } from '@firebase/util';\nimport { beingCrawled, each, exceptionGuard, warn, log } from './util/util';\n\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { StatsManager } from './stats/StatsManager';\nimport { StatsReporter } from './stats/StatsReporter';\nimport { StatsListener } from './stats/StatsListener';\nimport { EventQueue } from './view/EventQueue';\nimport { PersistentConnection } from './PersistentConnection';\nimport { ReadonlyRestClient } from './ReadonlyRestClient';\nimport { FirebaseApp } from '@firebase/app-types';\nimport { RepoInfo } from './RepoInfo';\nimport { Database } from '../api/Database';\nimport { ServerActions } from './ServerActions';\nimport { Query } from '../api/Query';\nimport { EventRegistration } from './view/EventRegistration';\nimport { StatsCollection } from './stats/StatsCollection';\nimport { Event } from './view/Event';\nimport { Node } from './snap/Node';\nimport { FirebaseAuthInternalName } from '@firebase/auth-interop-types';\nimport { Provider } from '@firebase/component';\nimport { Indexable } from './util/misc';\n\nconst INTERRUPT_REASON = 'repo_interrupt';\n\n/**\n * A connection to a single data repository.\n */\nexport class Repo {\n  dataUpdateCount = 0;\n  private infoSyncTree_: SyncTree;\n  private serverSyncTree_: SyncTree;\n\n  private stats_: StatsCollection;\n  private statsListener_: StatsListener | null = null;\n  private eventQueue_ = new EventQueue();\n  private nextWriteId_ = 1;\n  private server_: ServerActions;\n  private statsReporter_: StatsReporter;\n  private transactionsInit_: () => void;\n  private infoData_: SnapshotHolder;\n  private abortTransactions_: (path: Path) => Path;\n  private rerunTransactions_: (changedPath: Path) => Path;\n  private interceptServerDataCallback_:\n    | ((a: string, b: unknown) => void)\n    | null = null;\n  private __database: Database;\n\n  /** A list of data pieces and paths to be set when this client disconnects. */\n  private onDisconnect_ = new SparseSnapshotTree();\n\n  // TODO: This should be @private but it's used by test_access.js and internal.js\n  persistentConnection_: PersistentConnection | null = null;\n\n  constructor(\n    public repoInfo_: RepoInfo,\n    forceRestClient: boolean,\n    public app: FirebaseApp,\n    authProvider: Provider<FirebaseAuthInternalName>\n  ) {\n    const authTokenProvider = new AuthTokenProvider(app, authProvider);\n\n    this.stats_ = StatsManager.getCollection(repoInfo_);\n\n    if (forceRestClient || beingCrawled()) {\n      this.server_ = new ReadonlyRestClient(\n        this.repoInfo_,\n        this.onDataUpdate_.bind(this),\n        authTokenProvider\n      );\n\n      // Minor hack: Fire onConnect immediately, since there's no actual connection.\n      setTimeout(this.onConnectStatus_.bind(this, true), 0);\n    } else {\n      const authOverride = app.options['databaseAuthVariableOverride'];\n      // Validate authOverride\n      if (typeof authOverride !== 'undefined' && authOverride !== null) {\n        if (typeof authOverride !== 'object') {\n          throw new Error(\n            'Only objects are supported for option databaseAuthVariableOverride'\n          );\n        }\n        try {\n          stringify(authOverride);\n        } catch (e) {\n          throw new Error('Invalid authOverride provided: ' + e);\n        }\n      }\n\n      this.persistentConnection_ = new PersistentConnection(\n        this.repoInfo_,\n        this.onDataUpdate_.bind(this),\n        this.onConnectStatus_.bind(this),\n        this.onServerInfoUpdate_.bind(this),\n        authTokenProvider,\n        authOverride\n      );\n\n      this.server_ = this.persistentConnection_;\n    }\n\n    authTokenProvider.addTokenChangeListener(token => {\n      this.server_.refreshAuthToken(token);\n    });\n\n    // In the case of multiple Repos for the same repoInfo (i.e. there are multiple Firebase.Contexts being used),\n    // we only want to create one StatsReporter.  As such, we'll report stats over the first Repo created.\n    this.statsReporter_ = StatsManager.getOrCreateReporter(\n      repoInfo_,\n      () => new StatsReporter(this.stats_, this.server_)\n    );\n\n    this.transactionsInit_();\n\n    // Used for .info.\n    this.infoData_ = new SnapshotHolder();\n    this.infoSyncTree_ = new SyncTree({\n      startListening: (query, tag, currentHashFn, onComplete) => {\n        let infoEvents: Event[] = [];\n        const node = this.infoData_.getNode(query.path);\n        // This is possibly a hack, but we have different semantics for .info endpoints. We don't raise null events\n        // on initial data...\n        if (!node.isEmpty()) {\n          infoEvents = this.infoSyncTree_.applyServerOverwrite(\n            query.path,\n            node\n          );\n          setTimeout(() => {\n            onComplete('ok');\n          }, 0);\n        }\n        return infoEvents;\n      },\n      stopListening: () => {}\n    });\n    this.updateInfo_('connected', false);\n\n    this.serverSyncTree_ = new SyncTree({\n      startListening: (query, tag, currentHashFn, onComplete) => {\n        this.server_.listen(query, currentHashFn, tag, (status, data) => {\n          const events = onComplete(status, data);\n          this.eventQueue_.raiseEventsForChangedPath(query.path, events);\n        });\n        // No synchronous events for network-backed sync trees\n        return [];\n      },\n      stopListening: (query, tag) => {\n        this.server_.unlisten(query, tag);\n      }\n    });\n  }\n\n  /**\n   * @return The URL corresponding to the root of this Firebase.\n   */\n  toString(): string {\n    return (\n      (this.repoInfo_.secure ? 'https://' : 'http://') + this.repoInfo_.host\n    );\n  }\n\n  /**\n   * @return The namespace represented by the repo.\n   */\n  name(): string {\n    return this.repoInfo_.namespace;\n  }\n\n  /**\n   * @return The time in milliseconds, taking the server offset into account if we have one.\n   */\n  serverTime(): number {\n    const offsetNode = this.infoData_.getNode(\n      new Path('.info/serverTimeOffset')\n    );\n    const offset = (offsetNode.val() as number) || 0;\n    return new Date().getTime() + offset;\n  }\n\n  /**\n   * Generate ServerValues using some variables from the repo object.\n   */\n  generateServerValues(): Indexable {\n    return generateWithValues({\n      timestamp: this.serverTime()\n    });\n  }\n\n  /**\n   * Called by realtime when we get new messages from the server.\n   */\n  private onDataUpdate_(\n    pathString: string,\n    data: unknown,\n    isMerge: boolean,\n    tag: number | null\n  ) {\n    // For testing.\n    this.dataUpdateCount++;\n    const path = new Path(pathString);\n    data = this.interceptServerDataCallback_\n      ? this.interceptServerDataCallback_(pathString, data)\n      : data;\n    let events = [];\n    if (tag) {\n      if (isMerge) {\n        const taggedChildren = map(\n          data as { [k: string]: unknown },\n          (raw: unknown) => nodeFromJSON(raw)\n        );\n        events = this.serverSyncTree_.applyTaggedQueryMerge(\n          path,\n          taggedChildren,\n          tag\n        );\n      } else {\n        const taggedSnap = nodeFromJSON(data);\n        events = this.serverSyncTree_.applyTaggedQueryOverwrite(\n          path,\n          taggedSnap,\n          tag\n        );\n      }\n    } else if (isMerge) {\n      const changedChildren = map(\n        data as { [k: string]: unknown },\n        (raw: unknown) => nodeFromJSON(raw)\n      );\n      events = this.serverSyncTree_.applyServerMerge(path, changedChildren);\n    } else {\n      const snap = nodeFromJSON(data);\n      events = this.serverSyncTree_.applyServerOverwrite(path, snap);\n    }\n    let affectedPath = path;\n    if (events.length > 0) {\n      // Since we have a listener outstanding for each transaction, receiving any events\n      // is a proxy for some change having occurred.\n      affectedPath = this.rerunTransactions_(path);\n    }\n    this.eventQueue_.raiseEventsForChangedPath(affectedPath, events);\n  }\n\n  // TODO: This should be @private but it's used by test_access.js and internal.js\n  interceptServerData_(callback: ((a: string, b: unknown) => unknown) | null) {\n    this.interceptServerDataCallback_ = callback;\n  }\n\n  private onConnectStatus_(connectStatus: boolean) {\n    this.updateInfo_('connected', connectStatus);\n    if (connectStatus === false) {\n      this.runOnDisconnectEvents_();\n    }\n  }\n\n  private onServerInfoUpdate_(updates: object) {\n    each(updates, (key: string, value: unknown) => {\n      this.updateInfo_(key, value);\n    });\n  }\n\n  private updateInfo_(pathString: string, value: unknown) {\n    const path = new Path('/.info/' + pathString);\n    const newNode = nodeFromJSON(value);\n    this.infoData_.updateSnapshot(path, newNode);\n    const events = this.infoSyncTree_.applyServerOverwrite(path, newNode);\n    this.eventQueue_.raiseEventsForChangedPath(path, events);\n  }\n\n  private getNextWriteId_(): number {\n    return this.nextWriteId_++;\n  }\n\n  setWithPriority(\n    path: Path,\n    newVal: unknown,\n    newPriority: number | string | null,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    this.log_('set', {\n      path: path.toString(),\n      value: newVal,\n      priority: newPriority\n    });\n\n    // TODO: Optimize this behavior to either (a) store flag to skip resolving where possible and / or\n    // (b) store unresolved paths on JSON parse\n    const serverValues = this.generateServerValues();\n    const newNodeUnresolved = nodeFromJSON(newVal, newPriority);\n    const newNode = resolveDeferredValueSnapshot(\n      newNodeUnresolved,\n      serverValues\n    );\n\n    const writeId = this.getNextWriteId_();\n    const events = this.serverSyncTree_.applyUserOverwrite(\n      path,\n      newNode,\n      writeId,\n      true\n    );\n    this.eventQueue_.queueEvents(events);\n    this.server_.put(\n      path.toString(),\n      newNodeUnresolved.val(/*export=*/ true),\n      (status, errorReason) => {\n        const success = status === 'ok';\n        if (!success) {\n          warn('set at ' + path + ' failed: ' + status);\n        }\n\n        const clearEvents = this.serverSyncTree_.ackUserWrite(\n          writeId,\n          !success\n        );\n        this.eventQueue_.raiseEventsForChangedPath(path, clearEvents);\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n    const affectedPath = this.abortTransactions_(path);\n    this.rerunTransactions_(affectedPath);\n    // We queued the events above, so just flush the queue here\n    this.eventQueue_.raiseEventsForChangedPath(affectedPath, []);\n  }\n\n  update(\n    path: Path,\n    childrenToMerge: { [k: string]: unknown },\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    this.log_('update', { path: path.toString(), value: childrenToMerge });\n\n    // Start with our existing data and merge each child into it.\n    let empty = true;\n    const serverValues = this.generateServerValues();\n    const changedChildren: { [k: string]: Node } = {};\n    each(childrenToMerge, (changedKey: string, changedValue: unknown) => {\n      empty = false;\n      const newNodeUnresolved = nodeFromJSON(changedValue);\n      changedChildren[changedKey] = resolveDeferredValueSnapshot(\n        newNodeUnresolved,\n        serverValues\n      );\n    });\n\n    if (!empty) {\n      const writeId = this.getNextWriteId_();\n      const events = this.serverSyncTree_.applyUserMerge(\n        path,\n        changedChildren,\n        writeId\n      );\n      this.eventQueue_.queueEvents(events);\n      this.server_.merge(\n        path.toString(),\n        childrenToMerge,\n        (status, errorReason) => {\n          const success = status === 'ok';\n          if (!success) {\n            warn('update at ' + path + ' failed: ' + status);\n          }\n\n          const clearEvents = this.serverSyncTree_.ackUserWrite(\n            writeId,\n            !success\n          );\n          const affectedPath =\n            clearEvents.length > 0 ? this.rerunTransactions_(path) : path;\n          this.eventQueue_.raiseEventsForChangedPath(affectedPath, clearEvents);\n          this.callOnCompleteCallback(onComplete, status, errorReason);\n        }\n      );\n\n      each(childrenToMerge, (changedPath: string) => {\n        const affectedPath = this.abortTransactions_(path.child(changedPath));\n        this.rerunTransactions_(affectedPath);\n      });\n\n      // We queued the events above, so just flush the queue here\n      this.eventQueue_.raiseEventsForChangedPath(path, []);\n    } else {\n      log(\"update() called with empty data.  Don't do anything.\");\n      this.callOnCompleteCallback(onComplete, 'ok');\n    }\n  }\n\n  /**\n   * Applies all of the changes stored up in the onDisconnect_ tree.\n   */\n  private runOnDisconnectEvents_() {\n    this.log_('onDisconnectEvents');\n\n    const serverValues = this.generateServerValues();\n    const resolvedOnDisconnectTree = resolveDeferredValueTree(\n      this.onDisconnect_,\n      serverValues\n    );\n    let events: Event[] = [];\n\n    resolvedOnDisconnectTree.forEachTree(Path.Empty, (path, snap) => {\n      events = events.concat(\n        this.serverSyncTree_.applyServerOverwrite(path, snap)\n      );\n      const affectedPath = this.abortTransactions_(path);\n      this.rerunTransactions_(affectedPath);\n    });\n\n    this.onDisconnect_ = new SparseSnapshotTree();\n    this.eventQueue_.raiseEventsForChangedPath(Path.Empty, events);\n  }\n\n  onDisconnectCancel(\n    path: Path,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    this.server_.onDisconnectCancel(path.toString(), (status, errorReason) => {\n      if (status === 'ok') {\n        this.onDisconnect_.forget(path);\n      }\n      this.callOnCompleteCallback(onComplete, status, errorReason);\n    });\n  }\n\n  onDisconnectSet(\n    path: Path,\n    value: unknown,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    const newNode = nodeFromJSON(value);\n    this.server_.onDisconnectPut(\n      path.toString(),\n      newNode.val(/*export=*/ true),\n      (status, errorReason) => {\n        if (status === 'ok') {\n          this.onDisconnect_.remember(path, newNode);\n        }\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n  }\n\n  onDisconnectSetWithPriority(\n    path: Path,\n    value: unknown,\n    priority: unknown,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    const newNode = nodeFromJSON(value, priority);\n    this.server_.onDisconnectPut(\n      path.toString(),\n      newNode.val(/*export=*/ true),\n      (status, errorReason) => {\n        if (status === 'ok') {\n          this.onDisconnect_.remember(path, newNode);\n        }\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n  }\n\n  onDisconnectUpdate(\n    path: Path,\n    childrenToMerge: { [k: string]: unknown },\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    if (isEmpty(childrenToMerge)) {\n      log(\n        \"onDisconnect().update() called with empty data.  Don't do anything.\"\n      );\n      this.callOnCompleteCallback(onComplete, 'ok');\n      return;\n    }\n\n    this.server_.onDisconnectMerge(\n      path.toString(),\n      childrenToMerge,\n      (status, errorReason) => {\n        if (status === 'ok') {\n          each(childrenToMerge, (childName: string, childNode: unknown) => {\n            const newChildNode = nodeFromJSON(childNode);\n            this.onDisconnect_.remember(path.child(childName), newChildNode);\n          });\n        }\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n  }\n\n  addEventCallbackForQuery(query: Query, eventRegistration: EventRegistration) {\n    let events;\n    if (query.path.getFront() === '.info') {\n      events = this.infoSyncTree_.addEventRegistration(\n        query,\n        eventRegistration\n      );\n    } else {\n      events = this.serverSyncTree_.addEventRegistration(\n        query,\n        eventRegistration\n      );\n    }\n    this.eventQueue_.raiseEventsAtPath(query.path, events);\n  }\n\n  removeEventCallbackForQuery(\n    query: Query,\n    eventRegistration: EventRegistration\n  ) {\n    // These are guaranteed not to raise events, since we're not passing in a cancelError. However, we can future-proof\n    // a little bit by handling the return values anyways.\n    let events;\n    if (query.path.getFront() === '.info') {\n      events = this.infoSyncTree_.removeEventRegistration(\n        query,\n        eventRegistration\n      );\n    } else {\n      events = this.serverSyncTree_.removeEventRegistration(\n        query,\n        eventRegistration\n      );\n    }\n    this.eventQueue_.raiseEventsAtPath(query.path, events);\n  }\n\n  interrupt() {\n    if (this.persistentConnection_) {\n      this.persistentConnection_.interrupt(INTERRUPT_REASON);\n    }\n  }\n\n  resume() {\n    if (this.persistentConnection_) {\n      this.persistentConnection_.resume(INTERRUPT_REASON);\n    }\n  }\n\n  stats(showDelta: boolean = false) {\n    if (typeof console === 'undefined') {\n      return;\n    }\n\n    let stats: { [k: string]: unknown };\n    if (showDelta) {\n      if (!this.statsListener_) {\n        this.statsListener_ = new StatsListener(this.stats_);\n      }\n      stats = this.statsListener_.get();\n    } else {\n      stats = this.stats_.get();\n    }\n\n    const longestName = Object.keys(stats).reduce(\n      (previousValue, currentValue) =>\n        Math.max(currentValue.length, previousValue),\n      0\n    );\n\n    each(stats, (stat: string, value: unknown) => {\n      let paddedStat = stat;\n      // pad stat names to be the same length (plus 2 extra spaces).\n      for (let i = stat.length; i < longestName + 2; i++) {\n        paddedStat += ' ';\n      }\n      console.log(paddedStat + value);\n    });\n  }\n\n  statsIncrementCounter(metric: string) {\n    this.stats_.incrementCounter(metric);\n    this.statsReporter_.includeStat(metric);\n  }\n\n  private log_(...varArgs: unknown[]) {\n    let prefix = '';\n    if (this.persistentConnection_) {\n      prefix = this.persistentConnection_.id + ':';\n    }\n    log(prefix, ...varArgs);\n  }\n\n  callOnCompleteCallback(\n    callback: ((status: Error | null, errorReason?: string) => void) | null,\n    status: string,\n    errorReason?: string | null\n  ) {\n    if (callback) {\n      exceptionGuard(() => {\n        if (status === 'ok') {\n          callback(null);\n        } else {\n          const code = (status || 'error').toUpperCase();\n          let message = code;\n          if (errorReason) {\n            message += ': ' + errorReason;\n          }\n\n          const error = new Error(message);\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (error as any).code = code;\n          callback(error);\n        }\n      });\n    }\n  }\n\n  get database(): Database {\n    return this.__database || (this.__database = new Database(this));\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IndexedFilter } from './IndexedFilter';\nimport { PRIORITY_INDEX } from '../../snap/indexes/PriorityIndex';\nimport { NamedNode, Node } from '../../../core/snap/Node';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { NodeFilter } from './NodeFilter';\nimport { QueryParams } from '../QueryParams';\nimport { Index } from '../../snap/indexes/Index';\nimport { Path } from '../../util/Path';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\n\n/**\n * Filters nodes by range and uses an IndexFilter to track any changes after filtering the node\n *\n * @constructor\n * @implements {NodeFilter}\n */\nexport class RangedFilter implements NodeFilter {\n  /**\n   * @type {!IndexedFilter}\n   * @const\n   * @private\n   */\n  private indexedFilter_: IndexedFilter;\n\n  /**\n   * @const\n   * @type {!Index}\n   * @private\n   */\n  private index_: Index;\n\n  /**\n   * @const\n   * @type {!NamedNode}\n   * @private\n   */\n  private startPost_: NamedNode;\n\n  /**\n   * @const\n   * @type {!NamedNode}\n   * @private\n   */\n  private endPost_: NamedNode;\n\n  /**\n   * @param {!QueryParams} params\n   */\n  constructor(params: QueryParams) {\n    this.indexedFilter_ = new IndexedFilter(params.getIndex());\n    this.index_ = params.getIndex();\n    this.startPost_ = RangedFilter.getStartPost_(params);\n    this.endPost_ = RangedFilter.getEndPost_(params);\n  }\n\n  /**\n   * @return {!NamedNode}\n   */\n  getStartPost(): NamedNode {\n    return this.startPost_;\n  }\n\n  /**\n   * @return {!NamedNode}\n   */\n  getEndPost(): NamedNode {\n    return this.endPost_;\n  }\n\n  /**\n   * @param {!NamedNode} node\n   * @return {boolean}\n   */\n  matches(node: NamedNode): boolean {\n    return (\n      this.index_.compare(this.getStartPost(), node) <= 0 &&\n      this.index_.compare(node, this.getEndPost()) <= 0\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (!this.matches(new NamedNode(key, newChild))) {\n      newChild = ChildrenNode.EMPTY_NODE;\n    }\n    return this.indexedFilter_.updateChild(\n      snap,\n      key,\n      newChild,\n      affectedPath,\n      source,\n      optChangeAccumulator\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (newSnap.isLeafNode()) {\n      // Make sure we have a children node with the correct index, not a leaf node;\n      newSnap = ChildrenNode.EMPTY_NODE;\n    }\n    let filtered = newSnap.withIndex(this.index_);\n    // Don't support priorities on queries\n    filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\n    const self = this;\n    newSnap.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n      if (!self.matches(new NamedNode(key, childNode))) {\n        filtered = filtered.updateImmediateChild(key, ChildrenNode.EMPTY_NODE);\n      }\n    });\n    return this.indexedFilter_.updateFullNode(\n      oldSnap,\n      filtered,\n      optChangeAccumulator\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    // Don't support priorities on queries\n    return oldSnap;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  filtersNodes(): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndexedFilter(): IndexedFilter {\n    return this.indexedFilter_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  /**\n   * @param {!QueryParams} params\n   * @return {!NamedNode}\n   * @private\n   */\n  private static getStartPost_(params: QueryParams): NamedNode {\n    if (params.hasStart()) {\n      const startName = params.getIndexStartName();\n      return params.getIndex().makePost(params.getIndexStartValue(), startName);\n    } else {\n      return params.getIndex().minPost();\n    }\n  }\n\n  /**\n   * @param {!QueryParams} params\n   * @return {!NamedNode}\n   * @private\n   */\n  private static getEndPost_(params: QueryParams): NamedNode {\n    if (params.hasEnd()) {\n      const endName = params.getIndexEndName();\n      return params.getIndex().makePost(params.getIndexEndValue(), endName);\n    } else {\n      return params.getIndex().maxPost();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RangedFilter } from './RangedFilter';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { Node, NamedNode } from '../../snap/Node';\nimport { assert } from '@firebase/util';\nimport { Change } from '../Change';\nimport { NodeFilter } from './NodeFilter';\nimport { Index } from '../../snap/indexes/Index';\nimport { IndexedFilter } from './IndexedFilter';\nimport { QueryParams } from '../QueryParams';\nimport { Path } from '../../util/Path';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\n\n/**\n * Applies a limit and a range to a node and uses RangedFilter to do the heavy lifting where possible\n *\n * @constructor\n * @implements {NodeFilter}\n */\nexport class LimitedFilter implements NodeFilter {\n  /**\n   * @const\n   * @type {RangedFilter}\n   * @private\n   */\n  private readonly rangedFilter_: RangedFilter;\n\n  /**\n   * @const\n   * @type {!Index}\n   * @private\n   */\n  private readonly index_: Index;\n\n  /**\n   * @const\n   * @type {number}\n   * @private\n   */\n  private readonly limit_: number;\n\n  /**\n   * @const\n   * @type {boolean}\n   * @private\n   */\n  private readonly reverse_: boolean;\n\n  /**\n   * @param {!QueryParams} params\n   */\n  constructor(params: QueryParams) {\n    this.rangedFilter_ = new RangedFilter(params);\n    this.index_ = params.getIndex();\n    this.limit_ = params.getLimit();\n    this.reverse_ = !params.isViewFromLeft();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (!this.rangedFilter_.matches(new NamedNode(key, newChild))) {\n      newChild = ChildrenNode.EMPTY_NODE;\n    }\n    if (snap.getImmediateChild(key).equals(newChild)) {\n      // No change\n      return snap;\n    } else if (snap.numChildren() < this.limit_) {\n      return this.rangedFilter_\n        .getIndexedFilter()\n        .updateChild(\n          snap,\n          key,\n          newChild,\n          affectedPath,\n          source,\n          optChangeAccumulator\n        );\n    } else {\n      return this.fullLimitUpdateChild_(\n        snap,\n        key,\n        newChild,\n        source,\n        optChangeAccumulator\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    let filtered;\n    if (newSnap.isLeafNode() || newSnap.isEmpty()) {\n      // Make sure we have a children node with the correct index, not a leaf node;\n      filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\n    } else {\n      if (\n        this.limit_ * 2 < newSnap.numChildren() &&\n        newSnap.isIndexed(this.index_)\n      ) {\n        // Easier to build up a snapshot, since what we're given has more than twice the elements we want\n        filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\n        // anchor to the startPost, endPost, or last element as appropriate\n        let iterator;\n        if (this.reverse_) {\n          iterator = (newSnap as ChildrenNode).getReverseIteratorFrom(\n            this.rangedFilter_.getEndPost(),\n            this.index_\n          );\n        } else {\n          iterator = (newSnap as ChildrenNode).getIteratorFrom(\n            this.rangedFilter_.getStartPost(),\n            this.index_\n          );\n        }\n        let count = 0;\n        while (iterator.hasNext() && count < this.limit_) {\n          const next = iterator.getNext();\n          let inRange;\n          if (this.reverse_) {\n            inRange =\n              this.index_.compare(this.rangedFilter_.getStartPost(), next) <= 0;\n          } else {\n            inRange =\n              this.index_.compare(next, this.rangedFilter_.getEndPost()) <= 0;\n          }\n          if (inRange) {\n            filtered = filtered.updateImmediateChild(next.name, next.node);\n            count++;\n          } else {\n            // if we have reached the end post, we cannot keep adding elemments\n            break;\n          }\n        }\n      } else {\n        // The snap contains less than twice the limit. Faster to delete from the snap than build up a new one\n        filtered = newSnap.withIndex(this.index_);\n        // Don't support priorities on queries\n        filtered = filtered.updatePriority(\n          ChildrenNode.EMPTY_NODE\n        ) as ChildrenNode;\n        let startPost;\n        let endPost;\n        let cmp;\n        let iterator;\n        if (this.reverse_) {\n          iterator = filtered.getReverseIterator(this.index_);\n          startPost = this.rangedFilter_.getEndPost();\n          endPost = this.rangedFilter_.getStartPost();\n          const indexCompare = this.index_.getCompare();\n          cmp = (a: NamedNode, b: NamedNode) => indexCompare(b, a);\n        } else {\n          iterator = filtered.getIterator(this.index_);\n          startPost = this.rangedFilter_.getStartPost();\n          endPost = this.rangedFilter_.getEndPost();\n          cmp = this.index_.getCompare();\n        }\n\n        let count = 0;\n        let foundStartPost = false;\n        while (iterator.hasNext()) {\n          const next = iterator.getNext();\n          if (!foundStartPost && cmp(startPost, next) <= 0) {\n            // start adding\n            foundStartPost = true;\n          }\n          const inRange =\n            foundStartPost && count < this.limit_ && cmp(next, endPost) <= 0;\n          if (inRange) {\n            count++;\n          } else {\n            filtered = filtered.updateImmediateChild(\n              next.name,\n              ChildrenNode.EMPTY_NODE\n            );\n          }\n        }\n      }\n    }\n    return this.rangedFilter_\n      .getIndexedFilter()\n      .updateFullNode(oldSnap, filtered, optChangeAccumulator);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    // Don't support priorities on queries\n    return oldSnap;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  filtersNodes(): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndexedFilter(): IndexedFilter {\n    return this.rangedFilter_.getIndexedFilter();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  /**\n   * @param {!Node} snap\n   * @param {string} childKey\n   * @param {!Node} childSnap\n   * @param {!CompleteChildSource} source\n   * @param {?ChildChangeAccumulator} changeAccumulator\n   * @return {!Node}\n   * @private\n   */\n  private fullLimitUpdateChild_(\n    snap: Node,\n    childKey: string,\n    childSnap: Node,\n    source: CompleteChildSource,\n    changeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    // TODO: rename all cache stuff etc to general snap terminology\n    let cmp;\n    if (this.reverse_) {\n      const indexCmp = this.index_.getCompare();\n      cmp = (a: NamedNode, b: NamedNode) => indexCmp(b, a);\n    } else {\n      cmp = this.index_.getCompare();\n    }\n    const oldEventCache = snap as ChildrenNode;\n    assert(oldEventCache.numChildren() === this.limit_, '');\n    const newChildNamedNode = new NamedNode(childKey, childSnap);\n    const windowBoundary = this.reverse_\n      ? oldEventCache.getFirstChild(this.index_)\n      : (oldEventCache.getLastChild(this.index_) as NamedNode);\n    const inRange = this.rangedFilter_.matches(newChildNamedNode);\n    if (oldEventCache.hasChild(childKey)) {\n      const oldChildSnap = oldEventCache.getImmediateChild(childKey);\n      let nextChild = source.getChildAfterChild(\n        this.index_,\n        windowBoundary,\n        this.reverse_\n      );\n      while (\n        nextChild != null &&\n        (nextChild.name === childKey || oldEventCache.hasChild(nextChild.name))\n      ) {\n        // There is a weird edge case where a node is updated as part of a merge in the write tree, but hasn't\n        // been applied to the limited filter yet. Ignore this next child which will be updated later in\n        // the limited filter...\n        nextChild = source.getChildAfterChild(\n          this.index_,\n          nextChild,\n          this.reverse_\n        );\n      }\n      const compareNext =\n        nextChild == null ? 1 : cmp(nextChild, newChildNamedNode);\n      const remainsInWindow =\n        inRange && !childSnap.isEmpty() && compareNext >= 0;\n      if (remainsInWindow) {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            Change.childChangedChange(childKey, childSnap, oldChildSnap)\n          );\n        }\n        return oldEventCache.updateImmediateChild(childKey, childSnap);\n      } else {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            Change.childRemovedChange(childKey, oldChildSnap)\n          );\n        }\n        const newEventCache = oldEventCache.updateImmediateChild(\n          childKey,\n          ChildrenNode.EMPTY_NODE\n        );\n        const nextChildInRange =\n          nextChild != null && this.rangedFilter_.matches(nextChild);\n        if (nextChildInRange) {\n          if (changeAccumulator != null) {\n            changeAccumulator.trackChildChange(\n              Change.childAddedChange(nextChild.name, nextChild.node)\n            );\n          }\n          return newEventCache.updateImmediateChild(\n            nextChild.name,\n            nextChild.node\n          );\n        } else {\n          return newEventCache;\n        }\n      }\n    } else if (childSnap.isEmpty()) {\n      // we're deleting a node, but it was not in the window, so ignore it\n      return snap;\n    } else if (inRange) {\n      if (cmp(windowBoundary, newChildNamedNode) >= 0) {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            Change.childRemovedChange(windowBoundary.name, windowBoundary.node)\n          );\n          changeAccumulator.trackChildChange(\n            Change.childAddedChange(childKey, childSnap)\n          );\n        }\n        return oldEventCache\n          .updateImmediateChild(childKey, childSnap)\n          .updateImmediateChild(windowBoundary.name, ChildrenNode.EMPTY_NODE);\n      } else {\n        return snap;\n      }\n    } else {\n      return snap;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, stringify } from '@firebase/util';\nimport { MIN_NAME, MAX_NAME } from '../util/util';\nimport { KEY_INDEX } from '../snap/indexes/KeyIndex';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { VALUE_INDEX } from '../snap/indexes/ValueIndex';\nimport { PathIndex } from '../snap/indexes/PathIndex';\nimport { IndexedFilter } from './filter/IndexedFilter';\nimport { LimitedFilter } from './filter/LimitedFilter';\nimport { RangedFilter } from './filter/RangedFilter';\nimport { NodeFilter } from './filter/NodeFilter';\nimport { Index } from '../snap/indexes/Index';\n\n/**\n * This class is an immutable-from-the-public-api struct containing a set of query parameters defining a\n * range to be returned for a particular location. It is assumed that validation of parameters is done at the\n * user-facing API level, so it is not done here.\n * @constructor\n */\nexport class QueryParams {\n  private limitSet_ = false;\n  private startSet_ = false;\n  private startNameSet_ = false;\n  private endSet_ = false;\n  private endNameSet_ = false;\n\n  private limit_ = 0;\n  private viewFrom_ = '';\n  private indexStartValue_: unknown | null = null;\n  private indexStartName_ = '';\n  private indexEndValue_: unknown | null = null;\n  private indexEndName_ = '';\n\n  private index_ = PRIORITY_INDEX;\n\n  /**\n   * Wire Protocol Constants\n   * @const\n   * @enum {string}\n   * @private\n   */\n  private static readonly WIRE_PROTOCOL_CONSTANTS_ = {\n    INDEX_START_VALUE: 'sp',\n    INDEX_START_NAME: 'sn',\n    INDEX_END_VALUE: 'ep',\n    INDEX_END_NAME: 'en',\n    LIMIT: 'l',\n    VIEW_FROM: 'vf',\n    VIEW_FROM_LEFT: 'l',\n    VIEW_FROM_RIGHT: 'r',\n    INDEX: 'i'\n  };\n\n  /**\n   * REST Query Constants\n   * @const\n   * @enum {string}\n   * @private\n   */\n  private static readonly REST_QUERY_CONSTANTS_ = {\n    ORDER_BY: 'orderBy',\n    PRIORITY_INDEX: '$priority',\n    VALUE_INDEX: '$value',\n    KEY_INDEX: '$key',\n    START_AT: 'startAt',\n    END_AT: 'endAt',\n    LIMIT_TO_FIRST: 'limitToFirst',\n    LIMIT_TO_LAST: 'limitToLast'\n  };\n\n  /**\n   * Default, empty query parameters\n   * @type {!QueryParams}\n   * @const\n   */\n  static readonly DEFAULT = new QueryParams();\n\n  /**\n   * @return {boolean}\n   */\n  hasStart(): boolean {\n    return this.startSet_;\n  }\n\n  /**\n   * @return {boolean} True if it would return from left.\n   */\n  isViewFromLeft(): boolean {\n    if (this.viewFrom_ === '') {\n      // limit(), rather than limitToFirst or limitToLast was called.\n      // This means that only one of startSet_ and endSet_ is true. Use them\n      // to calculate which side of the view to anchor to. If neither is set,\n      // anchor to the end.\n      return this.startSet_;\n    } else {\n      return (\n        this.viewFrom_ === QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT\n      );\n    }\n  }\n\n  /**\n   * Only valid to call if hasStart() returns true\n   * @return {*}\n   */\n  getIndexStartValue(): unknown {\n    assert(this.startSet_, 'Only valid if start has been set');\n    return this.indexStartValue_;\n  }\n\n  /**\n   * Only valid to call if hasStart() returns true.\n   * Returns the starting key name for the range defined by these query parameters\n   * @return {!string}\n   */\n  getIndexStartName(): string {\n    assert(this.startSet_, 'Only valid if start has been set');\n    if (this.startNameSet_) {\n      return this.indexStartName_;\n    } else {\n      return MIN_NAME;\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasEnd(): boolean {\n    return this.endSet_;\n  }\n\n  /**\n   * Only valid to call if hasEnd() returns true.\n   * @return {*}\n   */\n  getIndexEndValue(): unknown {\n    assert(this.endSet_, 'Only valid if end has been set');\n    return this.indexEndValue_;\n  }\n\n  /**\n   * Only valid to call if hasEnd() returns true.\n   * Returns the end key name for the range defined by these query parameters\n   * @return {!string}\n   */\n  getIndexEndName(): string {\n    assert(this.endSet_, 'Only valid if end has been set');\n    if (this.endNameSet_) {\n      return this.indexEndName_;\n    } else {\n      return MAX_NAME;\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasLimit(): boolean {\n    return this.limitSet_;\n  }\n\n  /**\n   * @return {boolean} True if a limit has been set and it has been explicitly anchored\n   */\n  hasAnchoredLimit(): boolean {\n    return this.limitSet_ && this.viewFrom_ !== '';\n  }\n\n  /**\n   * Only valid to call if hasLimit() returns true\n   * @return {!number}\n   */\n  getLimit(): number {\n    assert(this.limitSet_, 'Only valid if limit has been set');\n    return this.limit_;\n  }\n\n  /**\n   * @return {!Index}\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  /**\n   * @return {!QueryParams}\n   * @private\n   */\n  private copy_(): QueryParams {\n    const copy = new QueryParams();\n    copy.limitSet_ = this.limitSet_;\n    copy.limit_ = this.limit_;\n    copy.startSet_ = this.startSet_;\n    copy.indexStartValue_ = this.indexStartValue_;\n    copy.startNameSet_ = this.startNameSet_;\n    copy.indexStartName_ = this.indexStartName_;\n    copy.endSet_ = this.endSet_;\n    copy.indexEndValue_ = this.indexEndValue_;\n    copy.endNameSet_ = this.endNameSet_;\n    copy.indexEndName_ = this.indexEndName_;\n    copy.index_ = this.index_;\n    copy.viewFrom_ = this.viewFrom_;\n    return copy;\n  }\n\n  /**\n   * @param {!number} newLimit\n   * @return {!QueryParams}\n   */\n  limit(newLimit: number): QueryParams {\n    const newParams = this.copy_();\n    newParams.limitSet_ = true;\n    newParams.limit_ = newLimit;\n    newParams.viewFrom_ = '';\n    return newParams;\n  }\n\n  /**\n   * @param {!number} newLimit\n   * @return {!QueryParams}\n   */\n  limitToFirst(newLimit: number): QueryParams {\n    const newParams = this.copy_();\n    newParams.limitSet_ = true;\n    newParams.limit_ = newLimit;\n    newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;\n    return newParams;\n  }\n\n  /**\n   * @param {!number} newLimit\n   * @return {!QueryParams}\n   */\n  limitToLast(newLimit: number): QueryParams {\n    const newParams = this.copy_();\n    newParams.limitSet_ = true;\n    newParams.limit_ = newLimit;\n    newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT;\n    return newParams;\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {?string=} key\n   * @return {!QueryParams}\n   */\n  startAt(indexValue: unknown, key?: string | null): QueryParams {\n    const newParams = this.copy_();\n    newParams.startSet_ = true;\n    if (indexValue === undefined) {\n      indexValue = null;\n    }\n    newParams.indexStartValue_ = indexValue;\n    if (key != null) {\n      newParams.startNameSet_ = true;\n      newParams.indexStartName_ = key;\n    } else {\n      newParams.startNameSet_ = false;\n      newParams.indexStartName_ = '';\n    }\n    return newParams;\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {?string=} key\n   * @return {!QueryParams}\n   */\n  endAt(indexValue: unknown, key?: string | null): QueryParams {\n    const newParams = this.copy_();\n    newParams.endSet_ = true;\n    if (indexValue === undefined) {\n      indexValue = null;\n    }\n    newParams.indexEndValue_ = indexValue;\n    if (key !== undefined) {\n      newParams.endNameSet_ = true;\n      newParams.indexEndName_ = key;\n    } else {\n      newParams.endNameSet_ = false;\n      newParams.indexEndName_ = '';\n    }\n    return newParams;\n  }\n\n  /**\n   * @param {!Index} index\n   * @return {!QueryParams}\n   */\n  orderBy(index: Index): QueryParams {\n    const newParams = this.copy_();\n    newParams.index_ = index;\n    return newParams;\n  }\n\n  /**\n   * @return {!Object}\n   */\n  getQueryObject(): {} {\n    const WIRE_PROTOCOL_CONSTANTS = QueryParams.WIRE_PROTOCOL_CONSTANTS_;\n    const obj: { [k: string]: unknown } = {};\n    if (this.startSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_VALUE] = this.indexStartValue_;\n      if (this.startNameSet_) {\n        obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_NAME] = this.indexStartName_;\n      }\n    }\n    if (this.endSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_VALUE] = this.indexEndValue_;\n      if (this.endNameSet_) {\n        obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_NAME] = this.indexEndName_;\n      }\n    }\n    if (this.limitSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.LIMIT] = this.limit_;\n      let viewFrom = this.viewFrom_;\n      if (viewFrom === '') {\n        if (this.isViewFromLeft()) {\n          viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT;\n        } else {\n          viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT;\n        }\n      }\n      obj[WIRE_PROTOCOL_CONSTANTS.VIEW_FROM] = viewFrom;\n    }\n    // For now, priority index is the default, so we only specify if it's some other index\n    if (this.index_ !== PRIORITY_INDEX) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX] = this.index_.toString();\n    }\n    return obj;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  loadsAllData(): boolean {\n    return !(this.startSet_ || this.endSet_ || this.limitSet_);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isDefault(): boolean {\n    return this.loadsAllData() && this.index_ === PRIORITY_INDEX;\n  }\n\n  /**\n   * @return {!NodeFilter}\n   */\n  getNodeFilter(): NodeFilter {\n    if (this.loadsAllData()) {\n      return new IndexedFilter(this.getIndex());\n    } else if (this.hasLimit()) {\n      return new LimitedFilter(this);\n    } else {\n      return new RangedFilter(this);\n    }\n  }\n\n  /**\n   * Returns a set of REST query string parameters representing this query.\n   *\n   * @return {!Object.<string,*>} query string parameters\n   */\n  toRestQueryStringParameters(): { [k: string]: string | number } {\n    const REST_CONSTANTS = QueryParams.REST_QUERY_CONSTANTS_;\n    const qs: { [k: string]: string | number } = {};\n\n    if (this.isDefault()) {\n      return qs;\n    }\n\n    let orderBy;\n    if (this.index_ === PRIORITY_INDEX) {\n      orderBy = REST_CONSTANTS.PRIORITY_INDEX;\n    } else if (this.index_ === VALUE_INDEX) {\n      orderBy = REST_CONSTANTS.VALUE_INDEX;\n    } else if (this.index_ === KEY_INDEX) {\n      orderBy = REST_CONSTANTS.KEY_INDEX;\n    } else {\n      assert(this.index_ instanceof PathIndex, 'Unrecognized index type!');\n      orderBy = this.index_.toString();\n    }\n    qs[REST_CONSTANTS.ORDER_BY] = stringify(orderBy);\n\n    if (this.startSet_) {\n      qs[REST_CONSTANTS.START_AT] = stringify(this.indexStartValue_);\n      if (this.startNameSet_) {\n        qs[REST_CONSTANTS.START_AT] += ',' + stringify(this.indexStartName_);\n      }\n    }\n\n    if (this.endSet_) {\n      qs[REST_CONSTANTS.END_AT] = stringify(this.indexEndValue_);\n      if (this.endNameSet_) {\n        qs[REST_CONSTANTS.END_AT] += ',' + stringify(this.indexEndName_);\n      }\n    }\n\n    if (this.limitSet_) {\n      if (this.isViewFromLeft()) {\n        qs[REST_CONSTANTS.LIMIT_TO_FIRST] = this.limit_;\n      } else {\n        qs[REST_CONSTANTS.LIMIT_TO_LAST] = this.limit_;\n      }\n    }\n\n    return qs;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { OnDisconnect } from './onDisconnect';\nimport { TransactionResult } from './TransactionResult';\nimport { warn } from '../core/util/util';\nimport { nextPushId } from '../core/util/NextPushId';\nimport { Query } from './Query';\nimport { Repo } from '../core/Repo';\nimport { Path } from '../core/util/Path';\nimport { QueryParams } from '../core/view/QueryParams';\nimport {\n  validateRootPathString,\n  validatePathString,\n  validateFirebaseMergeDataArg,\n  validateBoolean,\n  validatePriority,\n  validateFirebaseDataArg,\n  validateWritablePath\n} from '../core/util/validation';\nimport { validateArgCount, validateCallback, Deferred } from '@firebase/util';\n\nimport { SyncPoint } from '../core/SyncPoint';\nimport { Database } from './Database';\nimport { DataSnapshot } from './DataSnapshot';\nimport * as types from '@firebase/database-types';\n\nexport interface ReferenceConstructor {\n  new (repo: Repo, path: Path): Reference;\n}\n\nexport class Reference extends Query {\n  then: Promise<Reference>['then'];\n  catch: Promise<Reference>['catch'];\n\n  /**\n   * Call options:\n   *   new Reference(Repo, Path) or\n   *   new Reference(url: string, string|RepoManager)\n   *\n   * Externally - this is the firebase.database.Reference type.\n   *\n   * @param {!Repo} repo\n   * @param {(!Path)} path\n   * @extends {Query}\n   */\n  constructor(repo: Repo, path: Path) {\n    if (!(repo instanceof Repo)) {\n      throw new Error(\n        'new Reference() no longer supported - use app.database().'\n      );\n    }\n\n    // call Query's constructor, passing in the repo and path.\n    super(repo, path, QueryParams.DEFAULT, false);\n  }\n\n  /** @return {?string} */\n  getKey(): string | null {\n    validateArgCount('Reference.key', 0, 0, arguments.length);\n\n    if (this.path.isEmpty()) {\n      return null;\n    } else {\n      return this.path.getBack();\n    }\n  }\n\n  /**\n   * @param {!(string|Path)} pathString\n   * @return {!Reference}\n   */\n  child(pathString: string | Path): Reference {\n    validateArgCount('Reference.child', 1, 1, arguments.length);\n    if (typeof pathString === 'number') {\n      pathString = String(pathString);\n    } else if (!(pathString instanceof Path)) {\n      if (this.path.getFront() === null) {\n        validateRootPathString('Reference.child', 1, pathString, false);\n      } else {\n        validatePathString('Reference.child', 1, pathString, false);\n      }\n    }\n\n    return new Reference(this.repo, this.path.child(pathString));\n  }\n\n  /** @return {?Reference} */\n  getParent(): Reference | null {\n    validateArgCount('Reference.parent', 0, 0, arguments.length);\n\n    const parentPath = this.path.parent();\n    return parentPath === null ? null : new Reference(this.repo, parentPath);\n  }\n\n  /** @return {!Reference} */\n  getRoot(): Reference {\n    validateArgCount('Reference.root', 0, 0, arguments.length);\n\n    let ref: Reference = this;\n    while (ref.getParent() !== null) {\n      ref = ref.getParent();\n    }\n    return ref;\n  }\n\n  /** @return {!Database} */\n  databaseProp(): Database {\n    return this.repo.database;\n  }\n\n  /**\n   * @param {*} newVal\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  set(\n    newVal: unknown,\n    onComplete?: (a: Error | null) => void\n  ): Promise<unknown> {\n    validateArgCount('Reference.set', 1, 2, arguments.length);\n    validateWritablePath('Reference.set', this.path);\n    validateFirebaseDataArg('Reference.set', 1, newVal, this.path, false);\n    validateCallback('Reference.set', 2, onComplete, true);\n\n    const deferred = new Deferred();\n    this.repo.setWithPriority(\n      this.path,\n      newVal,\n      /*priority=*/ null,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {!Object} objectToMerge\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  update(\n    objectToMerge: object,\n    onComplete?: (a: Error | null) => void\n  ): Promise<unknown> {\n    validateArgCount('Reference.update', 1, 2, arguments.length);\n    validateWritablePath('Reference.update', this.path);\n\n    if (Array.isArray(objectToMerge)) {\n      const newObjectToMerge: { [k: string]: unknown } = {};\n      for (let i = 0; i < objectToMerge.length; ++i) {\n        newObjectToMerge['' + i] = objectToMerge[i];\n      }\n      objectToMerge = newObjectToMerge;\n      warn(\n        'Passing an Array to Firebase.update() is deprecated. ' +\n          'Use set() if you want to overwrite the existing data, or ' +\n          'an Object with integer keys if you really do want to ' +\n          'only update some of the children.'\n      );\n    }\n    validateFirebaseMergeDataArg(\n      'Reference.update',\n      1,\n      objectToMerge,\n      this.path,\n      false\n    );\n    validateCallback('Reference.update', 2, onComplete, true);\n    const deferred = new Deferred();\n    this.repo.update(\n      this.path,\n      objectToMerge as { [k: string]: unknown },\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*} newVal\n   * @param {string|number|null} newPriority\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  setWithPriority(\n    newVal: unknown,\n    newPriority: string | number | null,\n    onComplete?: (a: Error | null) => void\n  ): Promise<unknown> {\n    validateArgCount('Reference.setWithPriority', 2, 3, arguments.length);\n    validateWritablePath('Reference.setWithPriority', this.path);\n    validateFirebaseDataArg(\n      'Reference.setWithPriority',\n      1,\n      newVal,\n      this.path,\n      false\n    );\n    validatePriority('Reference.setWithPriority', 2, newPriority, false);\n    validateCallback('Reference.setWithPriority', 3, onComplete, true);\n\n    if (this.getKey() === '.length' || this.getKey() === '.keys') {\n      throw 'Reference.setWithPriority failed: ' +\n        this.getKey() +\n        ' is a read-only object.';\n    }\n\n    const deferred = new Deferred();\n    this.repo.setWithPriority(\n      this.path,\n      newVal,\n      newPriority,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  remove(onComplete?: (a: Error | null) => void): Promise<unknown> {\n    validateArgCount('Reference.remove', 0, 1, arguments.length);\n    validateWritablePath('Reference.remove', this.path);\n    validateCallback('Reference.remove', 1, onComplete, true);\n\n    return this.set(null, onComplete);\n  }\n\n  /**\n   * @param {function(*):*} transactionUpdate\n   * @param {(function(?Error, boolean, ?DataSnapshot))=} onComplete\n   * @param {boolean=} applyLocally\n   * @return {!Promise}\n   */\n  transaction(\n    transactionUpdate: (a: unknown) => unknown,\n    onComplete?: (a: Error | null, b: boolean, c: DataSnapshot | null) => void,\n    applyLocally?: boolean\n  ): Promise<TransactionResult> {\n    validateArgCount('Reference.transaction', 1, 3, arguments.length);\n    validateWritablePath('Reference.transaction', this.path);\n    validateCallback('Reference.transaction', 1, transactionUpdate, false);\n    validateCallback('Reference.transaction', 2, onComplete, true);\n    // NOTE: applyLocally is an internal-only option for now.  We need to decide if we want to keep it and how\n    // to expose it.\n    validateBoolean('Reference.transaction', 3, applyLocally, true);\n\n    if (this.getKey() === '.length' || this.getKey() === '.keys') {\n      throw 'Reference.transaction failed: ' +\n        this.getKey() +\n        ' is a read-only object.';\n    }\n\n    if (applyLocally === undefined) {\n      applyLocally = true;\n    }\n\n    const deferred = new Deferred<TransactionResult>();\n    if (typeof onComplete === 'function') {\n      deferred.promise.catch(() => {});\n    }\n\n    const promiseComplete = function(\n      error: Error,\n      committed: boolean,\n      snapshot: DataSnapshot\n    ) {\n      if (error) {\n        deferred.reject(error);\n      } else {\n        deferred.resolve(new TransactionResult(committed, snapshot));\n      }\n      if (typeof onComplete === 'function') {\n        onComplete(error, committed, snapshot);\n      }\n    };\n    this.repo.startTransaction(\n      this.path,\n      transactionUpdate,\n      promiseComplete,\n      applyLocally\n    );\n\n    return deferred.promise;\n  }\n\n  /**\n   * @param {string|number|null} priority\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  setPriority(\n    priority: string | number | null,\n    onComplete?: (a: Error | null) => void\n  ): Promise<unknown> {\n    validateArgCount('Reference.setPriority', 1, 2, arguments.length);\n    validateWritablePath('Reference.setPriority', this.path);\n    validatePriority('Reference.setPriority', 1, priority, false);\n    validateCallback('Reference.setPriority', 2, onComplete, true);\n\n    const deferred = new Deferred();\n    this.repo.setWithPriority(\n      this.path.child('.priority'),\n      priority,\n      null,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*=} value\n   * @param {function(?Error)=} onComplete\n   * @return {!Reference}\n   */\n  push(value?: unknown, onComplete?: (a: Error | null) => void): Reference {\n    validateArgCount('Reference.push', 0, 2, arguments.length);\n    validateWritablePath('Reference.push', this.path);\n    validateFirebaseDataArg('Reference.push', 1, value, this.path, true);\n    validateCallback('Reference.push', 2, onComplete, true);\n\n    const now = this.repo.serverTime();\n    const name = nextPushId(now);\n\n    // push() returns a ThennableReference whose promise is fulfilled with a regular Reference.\n    // We use child() to create handles to two different references. The first is turned into a\n    // ThennableReference below by adding then() and catch() methods and is used as the\n    // return value of push(). The second remains a regular Reference and is used as the fulfilled\n    // value of the first ThennableReference.\n    const thennablePushRef = this.child(name);\n    const pushRef = this.child(name);\n\n    let promise;\n    if (value != null) {\n      promise = thennablePushRef.set(value, onComplete).then(() => pushRef);\n    } else {\n      promise = Promise.resolve(pushRef);\n    }\n\n    thennablePushRef.then = promise.then.bind(promise);\n    thennablePushRef.catch = promise.then.bind(promise, undefined);\n\n    if (typeof onComplete === 'function') {\n      promise.catch(() => {});\n    }\n\n    return thennablePushRef;\n  }\n\n  /**\n   * @return {!OnDisconnect}\n   */\n  onDisconnect(): OnDisconnect {\n    validateWritablePath('Reference.onDisconnect', this.path);\n    return new OnDisconnect(this.repo, this.path);\n  }\n\n  get database(): Database {\n    return this.databaseProp();\n  }\n\n  get key(): string | null {\n    return this.getKey();\n  }\n\n  get parent(): Reference | null {\n    return this.getParent();\n  }\n\n  get root(): Reference {\n    return this.getRoot();\n  }\n}\n\n/**\n * Define reference constructor in various modules\n *\n * We are doing this here to avoid several circular\n * dependency issues\n */\nQuery.__referenceConstructor = Reference;\nSyncPoint.__referenceConstructor = Reference;\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, contains, safeGet } from '@firebase/util';\nimport { Path } from './Path';\n\nimport { each } from './util';\n\n/**\n * Node in a Tree.\n */\nexport class TreeNode<T> {\n  // TODO: Consider making accessors that create children and value lazily or\n  // separate Internal / Leaf 'types'.\n  children: { [name: string]: TreeNode<T> } = {};\n  childCount = 0;\n  value: T | null = null;\n}\n\n/**\n * A light-weight tree, traversable by path.  Nodes can have both values and children.\n * Nodes are not enumerated (by forEachChild) unless they have a value or non-empty\n * children.\n */\nexport class Tree<T> {\n  /**\n   * @template T\n   * @param {string=} name_ Optional name of the node.\n   * @param {Tree=} parent_ Optional parent node.\n   * @param {TreeNode=} node_ Optional node to wrap.\n   */\n  constructor(\n    private name_: string = '',\n    private parent_: Tree<T> | null = null,\n    private node_: TreeNode<T> = new TreeNode<T>()\n  ) {}\n\n  /**\n   * Returns a sub-Tree for the given path.\n   *\n   * @param {!(string|Path)} pathObj Path to look up.\n   * @return {!Tree.<T>} Tree for path.\n   */\n  subTree(pathObj: string | Path): Tree<T> {\n    // TODO: Require pathObj to be Path?\n    let path = pathObj instanceof Path ? pathObj : new Path(pathObj);\n    let child = this as Tree<T>,\n      next = path.getFront();\n    while (next !== null) {\n      const childNode = safeGet(child.node_.children, next) || new TreeNode();\n      child = new Tree(next, child, childNode);\n      path = path.popFront();\n      next = path.getFront();\n    }\n\n    return child;\n  }\n\n  /**\n   * Returns the data associated with this tree node.\n   *\n   * @return {?T} The data or null if no data exists.\n   */\n  getValue(): T | null {\n    return this.node_.value;\n  }\n\n  /**\n   * Sets data to this tree node.\n   *\n   * @param {!T} value Value to set.\n   */\n  setValue(value: T) {\n    assert(typeof value !== 'undefined', 'Cannot set value to undefined');\n    this.node_.value = value;\n    this.updateParents_();\n  }\n\n  /**\n   * Clears the contents of the tree node (its value and all children).\n   */\n  clear() {\n    this.node_.value = null;\n    this.node_.children = {};\n    this.node_.childCount = 0;\n    this.updateParents_();\n  }\n\n  /**\n   * @return {boolean} Whether the tree has any children.\n   */\n  hasChildren(): boolean {\n    return this.node_.childCount > 0;\n  }\n\n  /**\n   * @return {boolean} Whether the tree is empty (no value or children).\n   */\n  isEmpty(): boolean {\n    return this.getValue() === null && !this.hasChildren();\n  }\n\n  /**\n   * Calls action for each child of this tree node.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called for each child.\n   */\n  forEachChild(action: (tree: Tree<T>) => void) {\n    each(this.node_.children, (child: string, childTree: TreeNode<T>) => {\n      action(new Tree<T>(child, this, childTree));\n    });\n  }\n\n  /**\n   * Does a depth-first traversal of this node's descendants, calling action for each one.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called for each child.\n   * @param {boolean=} includeSelf Whether to call action on this node as well. Defaults to\n   *   false.\n   * @param {boolean=} childrenFirst Whether to call action on children before calling it on\n   *   parent.\n   */\n  forEachDescendant(\n    action: (tree: Tree<T>) => void,\n    includeSelf?: boolean,\n    childrenFirst?: boolean\n  ) {\n    if (includeSelf && !childrenFirst) {\n      action(this);\n    }\n\n    this.forEachChild(child => {\n      child.forEachDescendant(action, /*includeSelf=*/ true, childrenFirst);\n    });\n\n    if (includeSelf && childrenFirst) {\n      action(this);\n    }\n  }\n\n  /**\n   * Calls action on each ancestor node.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called on each parent; return\n   *   true to abort.\n   * @param {boolean=} includeSelf Whether to call action on this node as well.\n   * @return {boolean} true if the action callback returned true.\n   */\n  forEachAncestor(\n    action: (tree: Tree<T>) => unknown,\n    includeSelf?: boolean\n  ): boolean {\n    let node = includeSelf ? this : this.parent();\n    while (node !== null) {\n      if (action(node)) {\n        return true;\n      }\n      node = node.parent();\n    }\n    return false;\n  }\n\n  /**\n   * Does a depth-first traversal of this node's descendants.  When a descendant with a value\n   * is found, action is called on it and traversal does not continue inside the node.\n   * Action is *not* called on this node.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called for each child.\n   */\n  forEachImmediateDescendantWithValue(action: (tree: Tree<T>) => void) {\n    this.forEachChild(child => {\n      if (child.getValue() !== null) {\n        action(child);\n      } else {\n        child.forEachImmediateDescendantWithValue(action);\n      }\n    });\n  }\n\n  /**\n   * @return {!Path} The path of this tree node, as a Path.\n   */\n  path(): Path {\n    return new Path(\n      this.parent_ === null\n        ? this.name_\n        : this.parent_.path() + '/' + this.name_\n    );\n  }\n\n  /**\n   * @return {string} The name of the tree node.\n   */\n  name(): string {\n    return this.name_;\n  }\n\n  /**\n   * @return {?Tree} The parent tree node, or null if this is the root of the tree.\n   */\n  parent(): Tree<T> | null {\n    return this.parent_;\n  }\n\n  /**\n   * Adds or removes this child from its parent based on whether it's empty or not.\n   *\n   * @private\n   */\n  private updateParents_() {\n    if (this.parent_ !== null) {\n      this.parent_.updateChild_(this.name_, this);\n    }\n  }\n\n  /**\n   * Adds or removes the passed child to this tree node, depending on whether it's empty.\n   *\n   * @param {string} childName The name of the child to update.\n   * @param {!Tree.<T>} child The child to update.\n   * @private\n   */\n  private updateChild_(childName: string, child: Tree<T>) {\n    const childEmpty = child.isEmpty();\n    const childExists = contains(this.node_.children, childName);\n    if (childEmpty && childExists) {\n      delete this.node_.children[childName];\n      this.node_.childCount--;\n      this.updateParents_();\n    } else if (!childEmpty && !childExists) {\n      this.node_.children[childName] = child.node_;\n      this.node_.childCount++;\n      this.updateParents_();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, contains, safeGet } from '@firebase/util';\nimport { Reference } from '../api/Reference';\nimport { DataSnapshot } from '../api/DataSnapshot';\nimport { Path } from './util/Path';\nimport { Tree } from './util/Tree';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { Node } from './snap/Node';\nimport { LUIDGenerator, warn, exceptionGuard } from './util/util';\nimport { resolveDeferredValueSnapshot } from './util/ServerValues';\nimport { isValidPriority, validateFirebaseData } from './util/validation';\n\nimport { nodeFromJSON } from './snap/nodeFromJSON';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Repo } from './Repo';\nimport { Event } from './view/Event';\n\n// TODO: This is pretty messy.  Ideally, a lot of this would move into FirebaseData, or a transaction-specific\n// component used by FirebaseData, but it has ties to user callbacks (transaction update and onComplete) as well\n// as the realtime connection (to send transactions to the server).  So that all needs to be decoupled first.\n// For now it's part of Repo, but in its own file.\n\n/**\n * @enum {number}\n */\nexport enum TransactionStatus {\n  // We've run the transaction and updated transactionResultData_ with the result, but it isn't currently sent to the\n  // server. A transaction will go from RUN -> SENT -> RUN if it comes back from the server as rejected due to\n  // mismatched hash.\n  RUN,\n\n  // We've run the transaction and sent it to the server and it's currently outstanding (hasn't come back as accepted\n  // or rejected yet).\n  SENT,\n\n  // Temporary state used to mark completed transactions (whether successful or aborted).  The transaction will be\n  // removed when we get a chance to prune completed ones.\n  COMPLETED,\n\n  // Used when an already-sent transaction needs to be aborted (e.g. due to a conflicting set() call that was made).\n  // If it comes back as unsuccessful, we'll abort it.\n  SENT_NEEDS_ABORT,\n\n  // Temporary state used to mark transactions that need to be aborted.\n  NEEDS_ABORT\n}\n\n/**\n * If a transaction does not succeed after 25 retries, we abort it.  Among other things this ensure that if there's\n * ever a bug causing a mismatch between client / server hashes for some data, we won't retry indefinitely.\n * @type {number}\n * @const\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo as any).MAX_TRANSACTION_RETRIES_ = 25;\n\n/**\n * @typedef {{\n *   path: !Path,\n *   update: function(*):*,\n *   onComplete: ?function(?Error, boolean, ?DataSnapshot),\n *   status: ?TransactionStatus,\n *   order: !number,\n *   applyLocally: boolean,\n *   retryCount: !number,\n *   unwatcher: function(),\n *   abortReason: ?string,\n *   currentWriteId: !number,\n *   currentInputSnapshot: ?Node,\n *   currentOutputSnapshotRaw: ?Node,\n *   currentOutputSnapshotResolved: ?Node\n * }}\n */\ninterface Transaction {\n  path: Path;\n  update: (a: unknown) => unknown;\n  onComplete: (a: Error | null, b: boolean, c: DataSnapshot | null) => void;\n  status: TransactionStatus;\n  order: number;\n  applyLocally: boolean;\n  retryCount: number;\n  unwatcher: () => void;\n  abortReason: string | null;\n  currentWriteId: number;\n  currentInputSnapshot: Node | null;\n  currentOutputSnapshotRaw: Node | null;\n  currentOutputSnapshotResolved: Node | null;\n}\n\n/**\n * Setup the transaction data structures\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).transactionsInit_ = function() {\n  /**\n   * Stores queues of outstanding transactions for Firebase locations.\n   *\n   * @type {!Tree.<Array.<!Transaction>>}\n   * @private\n   */\n  this.transactionQueueTree_ = new Tree<Transaction[]>();\n};\n\ndeclare module './Repo' {\n  interface Repo {\n    startTransaction(\n      path: Path,\n      transactionUpdate: (a: unknown) => void,\n      onComplete: ((a: Error, b: boolean, c: DataSnapshot) => void) | null,\n      applyLocally: boolean\n    ): void;\n  }\n}\n\n/**\n * Creates a new transaction, adds it to the transactions we're tracking, and sends it to the server if possible.\n *\n * @param {!Path} path Path at which to do transaction.\n * @param {function(*):*} transactionUpdate Update callback.\n * @param {?function(?Error, boolean, ?DataSnapshot)} onComplete Completion callback.\n * @param {boolean} applyLocally Whether or not to make intermediate results visible\n */\nRepo.prototype.startTransaction = function(\n  path: Path,\n  transactionUpdate: (a: unknown) => unknown,\n  onComplete: ((a: Error, b: boolean, c: DataSnapshot) => void) | null,\n  applyLocally: boolean\n) {\n  this.log_('transaction on ' + path);\n\n  // Add a watch to make sure we get server updates.\n  const valueCallback = function() {};\n  const watchRef = new Reference(this, path);\n  watchRef.on('value', valueCallback);\n  const unwatcher = function() {\n    watchRef.off('value', valueCallback);\n  };\n\n  // Initialize transaction.\n  const transaction: Transaction = {\n    path,\n    update: transactionUpdate,\n    onComplete,\n\n    // One of TransactionStatus enums.\n    status: null,\n\n    // Used when combining transactions at different locations to figure out which one goes first.\n    order: LUIDGenerator(),\n\n    // Whether to raise local events for this transaction.\n    applyLocally,\n\n    // Count of how many times we've retried the transaction.\n    retryCount: 0,\n\n    // Function to call to clean up our .on() listener.\n    unwatcher,\n\n    // Stores why a transaction was aborted.\n    abortReason: null,\n\n    currentWriteId: null,\n\n    currentInputSnapshot: null,\n\n    currentOutputSnapshotRaw: null,\n\n    currentOutputSnapshotResolved: null\n  };\n\n  // Run transaction initially.\n  const currentState = this.getLatestState_(path);\n  transaction.currentInputSnapshot = currentState;\n  const newVal = transaction.update(currentState.val());\n  if (newVal === undefined) {\n    // Abort transaction.\n    transaction.unwatcher();\n    transaction.currentOutputSnapshotRaw = null;\n    transaction.currentOutputSnapshotResolved = null;\n    if (transaction.onComplete) {\n      // We just set the input snapshot, so this cast should be safe\n      const snapshot = new DataSnapshot(\n        transaction.currentInputSnapshot,\n        new Reference(this, transaction.path),\n        PRIORITY_INDEX\n      );\n      transaction.onComplete(null, false, snapshot);\n    }\n  } else {\n    validateFirebaseData(\n      'transaction failed: Data returned ',\n      newVal,\n      transaction.path\n    );\n\n    // Mark as run and add to our queue.\n    transaction.status = TransactionStatus.RUN;\n    const queueNode = this.transactionQueueTree_.subTree(path);\n    const nodeQueue = queueNode.getValue() || [];\n    nodeQueue.push(transaction);\n\n    queueNode.setValue(nodeQueue);\n\n    // Update visibleData and raise events\n    // Note: We intentionally raise events after updating all of our transaction state, since the user could\n    // start new transactions from the event callbacks.\n    let priorityForNode;\n    if (\n      typeof newVal === 'object' &&\n      newVal !== null &&\n      contains(newVal, '.priority')\n    ) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      priorityForNode = safeGet(newVal as any, '.priority');\n      assert(\n        isValidPriority(priorityForNode),\n        'Invalid priority returned by transaction. ' +\n          'Priority must be a valid string, finite number, server value, or null.'\n      );\n    } else {\n      const currentNode =\n        this.serverSyncTree_.calcCompleteEventCache(path) ||\n        ChildrenNode.EMPTY_NODE;\n      priorityForNode = currentNode.getPriority().val();\n    }\n    priorityForNode /** @type {null|number|string} */ = priorityForNode;\n\n    const serverValues = this.generateServerValues();\n    const newNodeUnresolved = nodeFromJSON(newVal, priorityForNode);\n    const newNode = resolveDeferredValueSnapshot(\n      newNodeUnresolved,\n      serverValues\n    );\n    transaction.currentOutputSnapshotRaw = newNodeUnresolved;\n    transaction.currentOutputSnapshotResolved = newNode;\n    transaction.currentWriteId = this.getNextWriteId_();\n\n    const events = this.serverSyncTree_.applyUserOverwrite(\n      path,\n      newNode,\n      transaction.currentWriteId,\n      transaction.applyLocally\n    );\n    this.eventQueue_.raiseEventsForChangedPath(path, events);\n\n    this.sendReadyTransactions_();\n  }\n};\n\n/**\n * @param {!Path} path\n * @param {Array.<number>=} excludeSets A specific set to exclude\n * @return {Node}\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).getLatestState_ = function(\n  path: Path,\n  excludeSets?: number[]\n): Node {\n  return (\n    this.serverSyncTree_.calcCompleteEventCache(path, excludeSets) ||\n    ChildrenNode.EMPTY_NODE\n  );\n};\n\n/**\n * Sends any already-run transactions that aren't waiting for outstanding transactions to\n * complete.\n *\n * Externally it's called with no arguments, but it calls itself recursively with a particular\n * transactionQueueTree node to recurse through the tree.\n *\n * @param {Tree.<Array.<Transaction>>=} node  transactionQueueTree node to start at.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).sendReadyTransactions_ = function(\n  node: Tree<Transaction[]> = this.transactionQueueTree_\n) {\n  // Before recursing, make sure any completed transactions are removed.\n  if (!node) {\n    this.pruneCompletedTransactionsBelowNode_(node);\n  }\n\n  if (node.getValue() !== null) {\n    const queue = this.buildTransactionQueue_(node);\n    assert(queue.length > 0, 'Sending zero length transaction queue');\n\n    const allRun = queue.every(\n      (transaction: Transaction) => transaction.status === TransactionStatus.RUN\n    );\n\n    // If they're all run (and not sent), we can send them.  Else, we must wait.\n    if (allRun) {\n      this.sendTransactionQueue_(node.path(), queue);\n    }\n  } else if (node.hasChildren()) {\n    node.forEachChild(childNode => {\n      this.sendReadyTransactions_(childNode);\n    });\n  }\n};\n\n/**\n * Given a list of run transactions, send them to the server and then handle the result (success or failure).\n *\n * @param {!Path} path The location of the queue.\n * @param {!Array.<Transaction>} queue Queue of transactions under the specified location.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).sendTransactionQueue_ = function(\n  path: Path,\n  queue: Transaction[]\n) {\n  // Mark transactions as sent and increment retry count!\n  const setsToIgnore = queue.map(txn => {\n    return txn.currentWriteId;\n  });\n  const latestState = this.getLatestState_(path, setsToIgnore);\n  let snapToSend = latestState;\n  const latestHash = latestState.hash();\n  for (let i = 0; i < queue.length; i++) {\n    const txn = queue[i];\n    assert(\n      txn.status === TransactionStatus.RUN,\n      'tryToSendTransactionQueue_: items in queue should all be run.'\n    );\n    txn.status = TransactionStatus.SENT;\n    txn.retryCount++;\n    const relativePath = Path.relativePath(path, txn.path);\n    // If we've gotten to this point, the output snapshot must be defined.\n    snapToSend = snapToSend.updateChild(\n      relativePath /** @type {!Node} */,\n      txn.currentOutputSnapshotRaw\n    );\n  }\n\n  const dataToSend = snapToSend.val(true);\n  const pathToSend = path;\n\n  // Send the put.\n  this.server_.put(\n    pathToSend.toString(),\n    dataToSend,\n    (status: string) => {\n      this.log_('transaction put response', {\n        path: pathToSend.toString(),\n        status\n      });\n\n      let events: Event[] = [];\n      if (status === 'ok') {\n        // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\n        // the callback could trigger more transactions or sets.\n        const callbacks = [];\n        for (let i = 0; i < queue.length; i++) {\n          queue[i].status = TransactionStatus.COMPLETED;\n          events = events.concat(\n            this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId)\n          );\n          if (queue[i].onComplete) {\n            // We never unset the output snapshot, and given that this transaction is complete, it should be set\n            const node = queue[i].currentOutputSnapshotResolved as Node;\n            const ref = new Reference(this, queue[i].path);\n            const snapshot = new DataSnapshot(node, ref, PRIORITY_INDEX);\n            callbacks.push(\n              queue[i].onComplete.bind(null, null, true, snapshot)\n            );\n          }\n          queue[i].unwatcher();\n        }\n\n        // Now remove the completed transactions.\n        this.pruneCompletedTransactionsBelowNode_(\n          this.transactionQueueTree_.subTree(path)\n        );\n        // There may be pending transactions that we can now send.\n        this.sendReadyTransactions_();\n\n        this.eventQueue_.raiseEventsForChangedPath(path, events);\n\n        // Finally, trigger onComplete callbacks.\n        for (let i = 0; i < callbacks.length; i++) {\n          exceptionGuard(callbacks[i]);\n        }\n      } else {\n        // transactions are no longer sent.  Update their status appropriately.\n        if (status === 'datastale') {\n          for (let i = 0; i < queue.length; i++) {\n            if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT) {\n              queue[i].status = TransactionStatus.NEEDS_ABORT;\n            } else {\n              queue[i].status = TransactionStatus.RUN;\n            }\n          }\n        } else {\n          warn(\n            'transaction at ' + pathToSend.toString() + ' failed: ' + status\n          );\n          for (let i = 0; i < queue.length; i++) {\n            queue[i].status = TransactionStatus.NEEDS_ABORT;\n            queue[i].abortReason = status;\n          }\n        }\n\n        this.rerunTransactions_(path);\n      }\n    },\n    latestHash\n  );\n};\n\n/**\n * Finds all transactions dependent on the data at changedPath and reruns them.\n *\n * Should be called any time cached data changes.\n *\n * Return the highest path that was affected by rerunning transactions.  This is the path at which events need to\n * be raised for.\n *\n * @param {!Path} changedPath The path in mergedData that changed.\n * @return {!Path} The rootmost path that was affected by rerunning transactions.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).rerunTransactions_ = function(changedPath: Path): Path {\n  const rootMostTransactionNode = this.getAncestorTransactionNode_(changedPath);\n  const path = rootMostTransactionNode.path();\n\n  const queue = this.buildTransactionQueue_(rootMostTransactionNode);\n  this.rerunTransactionQueue_(queue, path);\n\n  return path;\n};\n\n/**\n * Does all the work of rerunning transactions (as well as cleans up aborted transactions and whatnot).\n *\n * @param {Array.<Transaction>} queue The queue of transactions to run.\n * @param {!Path} path The path the queue is for.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).rerunTransactionQueue_ = function(\n  queue: Transaction[],\n  path: Path\n) {\n  if (queue.length === 0) {\n    return; // Nothing to do!\n  }\n\n  // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\n  // the callback could trigger more transactions or sets.\n  const callbacks = [];\n  let events: Event[] = [];\n  // Ignore all of the sets we're going to re-run.\n  const txnsToRerun = queue.filter(q => {\n    return q.status === TransactionStatus.RUN;\n  });\n  const setsToIgnore = txnsToRerun.map(q => {\n    return q.currentWriteId;\n  });\n  for (let i = 0; i < queue.length; i++) {\n    const transaction = queue[i];\n    const relativePath = Path.relativePath(path, transaction.path);\n    let abortTransaction = false,\n      abortReason;\n    assert(\n      relativePath !== null,\n      'rerunTransactionsUnderNode_: relativePath should not be null.'\n    );\n\n    if (transaction.status === TransactionStatus.NEEDS_ABORT) {\n      abortTransaction = true;\n      abortReason = transaction.abortReason;\n      events = events.concat(\n        this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true)\n      );\n    } else if (transaction.status === TransactionStatus.RUN) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      if (transaction.retryCount >= (Repo as any).MAX_TRANSACTION_RETRIES_) {\n        abortTransaction = true;\n        abortReason = 'maxretry';\n        events = events.concat(\n          this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true)\n        );\n      } else {\n        // This code reruns a transaction\n        const currentNode = this.getLatestState_(\n          transaction.path,\n          setsToIgnore\n        );\n        transaction.currentInputSnapshot = currentNode;\n        const newData = queue[i].update(currentNode.val());\n        if (newData !== undefined) {\n          validateFirebaseData(\n            'transaction failed: Data returned ',\n            newData,\n            transaction.path\n          );\n          let newDataNode = nodeFromJSON(newData);\n          const hasExplicitPriority =\n            typeof newData === 'object' &&\n            newData != null &&\n            contains(newData, '.priority');\n          if (!hasExplicitPriority) {\n            // Keep the old priority if there wasn't a priority explicitly specified.\n            newDataNode = newDataNode.updatePriority(currentNode.getPriority());\n          }\n\n          const oldWriteId = transaction.currentWriteId;\n          const serverValues = this.generateServerValues();\n          const newNodeResolved = resolveDeferredValueSnapshot(\n            newDataNode,\n            serverValues\n          );\n\n          transaction.currentOutputSnapshotRaw = newDataNode;\n          transaction.currentOutputSnapshotResolved = newNodeResolved;\n          transaction.currentWriteId = this.getNextWriteId_();\n          // Mutates setsToIgnore in place\n          setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId), 1);\n          events = events.concat(\n            this.serverSyncTree_.applyUserOverwrite(\n              transaction.path,\n              newNodeResolved,\n              transaction.currentWriteId,\n              transaction.applyLocally\n            )\n          );\n          events = events.concat(\n            this.serverSyncTree_.ackUserWrite(oldWriteId, true)\n          );\n        } else {\n          abortTransaction = true;\n          abortReason = 'nodata';\n          events = events.concat(\n            this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true)\n          );\n        }\n      }\n    }\n    this.eventQueue_.raiseEventsForChangedPath(path, events);\n    events = [];\n    if (abortTransaction) {\n      // Abort.\n      queue[i].status = TransactionStatus.COMPLETED;\n\n      // Removing a listener can trigger pruning which can muck with mergedData/visibleData (as it prunes data).\n      // So defer the unwatcher until we're done.\n      (function(unwatcher) {\n        setTimeout(unwatcher, Math.floor(0));\n      })(queue[i].unwatcher);\n\n      if (queue[i].onComplete) {\n        if (abortReason === 'nodata') {\n          const ref = new Reference(this, queue[i].path);\n          // We set this field immediately, so it's safe to cast to an actual snapshot\n          const lastInput /** @type {!Node} */ = queue[i].currentInputSnapshot;\n          const snapshot = new DataSnapshot(lastInput, ref, PRIORITY_INDEX);\n          callbacks.push(queue[i].onComplete.bind(null, null, false, snapshot));\n        } else {\n          callbacks.push(\n            queue[i].onComplete.bind(null, new Error(abortReason), false, null)\n          );\n        }\n      }\n    }\n  }\n\n  // Clean up completed transactions.\n  this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);\n\n  // Now fire callbacks, now that we're in a good, known state.\n  for (let i = 0; i < callbacks.length; i++) {\n    exceptionGuard(callbacks[i]);\n  }\n\n  // Try to send the transaction result to the server.\n  this.sendReadyTransactions_();\n};\n\n/**\n * Returns the rootmost ancestor node of the specified path that has a pending transaction on it, or just returns\n * the node for the given path if there are no pending transactions on any ancestor.\n *\n * @param {!Path} path The location to start at.\n * @return {!Tree.<Array.<!Transaction>>} The rootmost node with a transaction.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).getAncestorTransactionNode_ = function(\n  path: Path\n): Tree<Transaction[]> {\n  let front;\n\n  // Start at the root and walk deeper into the tree towards path until we find a node with pending transactions.\n  let transactionNode = this.transactionQueueTree_;\n  front = path.getFront();\n  while (front !== null && transactionNode.getValue() === null) {\n    transactionNode = transactionNode.subTree(front);\n    path = path.popFront();\n    front = path.getFront();\n  }\n\n  return transactionNode;\n};\n\n/**\n * Builds the queue of all transactions at or below the specified transactionNode.\n *\n * @param {!Tree.<Array.<Transaction>>} transactionNode\n * @return {Array.<Transaction>} The generated queue.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).buildTransactionQueue_ = function(\n  transactionNode: Tree<Transaction[]>\n): Transaction[] {\n  // Walk any child transaction queues and aggregate them into a single queue.\n  const transactionQueue: Transaction[] = [];\n  this.aggregateTransactionQueuesForNode_(transactionNode, transactionQueue);\n\n  // Sort them by the order the transactions were created.\n  transactionQueue.sort((a, b) => {\n    return a.order - b.order;\n  });\n\n  return transactionQueue;\n};\n\n/**\n * @param {!Tree.<Array.<Transaction>>} node\n * @param {Array.<Transaction>} queue\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).aggregateTransactionQueuesForNode_ = function(\n  node: Tree<Transaction[]>,\n  queue: Transaction[]\n) {\n  const nodeQueue = node.getValue();\n  if (nodeQueue !== null) {\n    for (let i = 0; i < nodeQueue.length; i++) {\n      queue.push(nodeQueue[i]);\n    }\n  }\n\n  node.forEachChild(child => {\n    this.aggregateTransactionQueuesForNode_(child, queue);\n  });\n};\n\n/**\n * Remove COMPLETED transactions at or below this node in the transactionQueueTree_.\n *\n * @param {!Tree.<Array.<!Transaction>>} node\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).pruneCompletedTransactionsBelowNode_ = function(\n  node: Tree<Transaction[]>\n) {\n  const queue = node.getValue();\n  if (queue) {\n    let to = 0;\n    for (let from = 0; from < queue.length; from++) {\n      if (queue[from].status !== TransactionStatus.COMPLETED) {\n        queue[to] = queue[from];\n        to++;\n      }\n    }\n    queue.length = to;\n    node.setValue(queue.length > 0 ? queue : null);\n  }\n\n  node.forEachChild(childNode => {\n    this.pruneCompletedTransactionsBelowNode_(childNode);\n  });\n};\n\n/**\n * Aborts all transactions on ancestors or descendants of the specified path.  Called when doing a set() or update()\n * since we consider them incompatible with transactions.\n *\n * @param {!Path} path Path for which we want to abort related transactions.\n * @return {!Path}\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).abortTransactions_ = function(path: Path): Path {\n  const affectedPath = this.getAncestorTransactionNode_(path).path();\n\n  const transactionNode = this.transactionQueueTree_.subTree(path);\n\n  transactionNode.forEachAncestor((node: Tree<Transaction[]>) => {\n    this.abortTransactionsOnNode_(node);\n  });\n\n  this.abortTransactionsOnNode_(transactionNode);\n\n  transactionNode.forEachDescendant((node: Tree<Transaction[]>) => {\n    this.abortTransactionsOnNode_(node);\n  });\n\n  return affectedPath;\n};\n\n/**\n * Abort transactions stored in this transaction queue node.\n *\n * @param {!Tree.<Array.<Transaction>>} node Node to abort transactions for.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Repo.prototype as any).abortTransactionsOnNode_ = function(\n  node: Tree<Transaction[]>\n) {\n  const queue = node.getValue();\n  if (queue !== null) {\n    // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\n    // the callback could trigger more transactions or sets.\n    const callbacks = [];\n\n    // Go through queue.  Any already-sent transactions must be marked for abort, while the unsent ones\n    // can be immediately aborted and removed.\n    let events: Event[] = [];\n    let lastSent = -1;\n    for (let i = 0; i < queue.length; i++) {\n      if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT) {\n        // Already marked.  No action needed.\n      } else if (queue[i].status === TransactionStatus.SENT) {\n        assert(\n          lastSent === i - 1,\n          'All SENT items should be at beginning of queue.'\n        );\n        lastSent = i;\n        // Mark transaction for abort when it comes back.\n        queue[i].status = TransactionStatus.SENT_NEEDS_ABORT;\n        queue[i].abortReason = 'set';\n      } else {\n        assert(\n          queue[i].status === TransactionStatus.RUN,\n          'Unexpected transaction status in abort'\n        );\n        // We can abort it immediately.\n        queue[i].unwatcher();\n        events = events.concat(\n          this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId, true)\n        );\n        if (queue[i].onComplete) {\n          const snapshot: DataSnapshot | null = null;\n          callbacks.push(\n            queue[i].onComplete.bind(null, new Error('set'), false, snapshot)\n          );\n        }\n      }\n    }\n    if (lastSent === -1) {\n      // We're not waiting for any sent transactions.  We can clear the queue.\n      node.setValue(null);\n    } else {\n      // Remove the transactions we aborted.\n      queue.length = lastSent + 1;\n    }\n\n    // Now fire the callbacks.\n    this.eventQueue_.raiseEventsForChangedPath(node.path(), events);\n    for (let i = 0; i < callbacks.length; i++) {\n      exceptionGuard(callbacks[i]);\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp } from '@firebase/app-types';\nimport { safeGet } from '@firebase/util';\nimport { Repo } from './Repo';\nimport { fatal } from './util/util';\nimport { parseRepoInfo } from './util/libs/parser';\nimport { validateUrl } from './util/validation';\nimport './Repo_transaction';\nimport { Database } from '../api/Database';\nimport { RepoInfo } from './RepoInfo';\nimport { FirebaseAuthInternalName } from '@firebase/auth-interop-types';\nimport { Provider } from '@firebase/component';\n\n/** @const {string} */\nconst DATABASE_URL_OPTION = 'databaseURL';\n\n/**\n * This variable is also defined in the firebase node.js admin SDK. Before\n * modifying this definition, consult the definition in:\n *\n * https://github.com/firebase/firebase-admin-node\n *\n * and make sure the two are consistent.\n */\nconst FIREBASE_DATABASE_EMULATOR_HOST_VAR = 'FIREBASE_DATABASE_EMULATOR_HOST';\n\nlet _staticInstance: RepoManager;\n\n/**\n * Creates and caches Repo instances.\n */\nexport class RepoManager {\n  /**\n   * @private {!Object.<string, Object<string, !fb.core.Repo>>}\n   */\n  private repos_: {\n    [appName: string]: {\n      [dbUrl: string]: Repo;\n    };\n  } = {};\n\n  /**\n   * If true, new Repos will be created to use ReadonlyRestClient (for testing purposes).\n   * @private {boolean}\n   */\n  private useRestClient_: boolean = false;\n\n  static getInstance(): RepoManager {\n    if (!_staticInstance) {\n      _staticInstance = new RepoManager();\n    }\n    return _staticInstance;\n  }\n\n  // TODO(koss): Remove these functions unless used in tests?\n  interrupt() {\n    for (const appName of Object.keys(this.repos_)) {\n      for (const dbUrl of Object.keys(this.repos_[appName])) {\n        this.repos_[appName][dbUrl].interrupt();\n      }\n    }\n  }\n\n  resume() {\n    for (const appName of Object.keys(this.repos_)) {\n      for (const dbUrl of Object.keys(this.repos_[appName])) {\n        this.repos_[appName][dbUrl].resume();\n      }\n    }\n  }\n\n  /**\n   * This function should only ever be called to CREATE a new database instance.\n   *\n   * @param {!FirebaseApp} app\n   * @return {!Database}\n   */\n  databaseFromApp(\n    app: FirebaseApp,\n    authProvider: Provider<FirebaseAuthInternalName>,\n    url?: string\n  ): Database {\n    let dbUrl: string | undefined = url || app.options[DATABASE_URL_OPTION];\n    if (dbUrl === undefined) {\n      fatal(\n        \"Can't determine Firebase Database URL.  Be sure to include \" +\n          DATABASE_URL_OPTION +\n          ' option when calling firebase.initializeApp().'\n      );\n    }\n\n    let parsedUrl = parseRepoInfo(dbUrl);\n    let repoInfo = parsedUrl.repoInfo;\n\n    let dbEmulatorHost: string | undefined = undefined;\n    if (typeof process !== 'undefined') {\n      dbEmulatorHost = process.env[FIREBASE_DATABASE_EMULATOR_HOST_VAR];\n    }\n    if (dbEmulatorHost) {\n      dbUrl = `http://${dbEmulatorHost}?ns=${repoInfo.namespace}`;\n      parsedUrl = parseRepoInfo(dbUrl);\n      repoInfo = parsedUrl.repoInfo;\n    }\n\n    validateUrl('Invalid Firebase Database URL', 1, parsedUrl);\n    if (!parsedUrl.path.isEmpty()) {\n      fatal(\n        'Database URL must point to the root of a Firebase Database ' +\n          '(not including a child path).'\n      );\n    }\n\n    const repo = this.createRepo(repoInfo, app, authProvider);\n\n    return repo.database;\n  }\n\n  /**\n   * Remove the repo and make sure it is disconnected.\n   *\n   * @param {!Repo} repo\n   */\n  deleteRepo(repo: Repo) {\n    const appRepos = safeGet(this.repos_, repo.app.name);\n    // This should never happen...\n    if (!appRepos || safeGet(appRepos, repo.repoInfo_.toURLString()) !== repo) {\n      fatal(\n        `Database ${repo.app.name}(${repo.repoInfo_}) has already been deleted.`\n      );\n    }\n    repo.interrupt();\n    delete appRepos[repo.repoInfo_.toURLString()];\n  }\n\n  /**\n   * Ensures a repo doesn't already exist and then creates one using the\n   * provided app.\n   *\n   * @param {!RepoInfo} repoInfo The metadata about the Repo\n   * @param {!FirebaseApp} app\n   * @return {!Repo} The Repo object for the specified server / repoName.\n   */\n  createRepo(\n    repoInfo: RepoInfo,\n    app: FirebaseApp,\n    authProvider: Provider<FirebaseAuthInternalName>\n  ): Repo {\n    let appRepos = safeGet(this.repos_, app.name);\n\n    if (!appRepos) {\n      appRepos = {};\n      this.repos_[app.name] = appRepos;\n    }\n\n    let repo = safeGet(appRepos, repoInfo.toURLString());\n    if (repo) {\n      fatal(\n        'Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.'\n      );\n    }\n    repo = new Repo(repoInfo, this.useRestClient_, app, authProvider);\n    appRepos[repoInfo.toURLString()] = repo;\n\n    return repo;\n  }\n\n  /**\n   * Forces us to use ReadonlyRestClient instead of PersistentConnection for new Repos.\n   * @param {boolean} forceRestClient\n   */\n  forceRestClient(forceRestClient: boolean) {\n    this.useRestClient_ = forceRestClient;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { fatal } from '../core/util/util';\nimport { parseRepoInfo } from '../core/util/libs/parser';\nimport { Path } from '../core/util/Path';\nimport { Reference } from './Reference';\nimport { Repo } from '../core/Repo';\nimport { RepoManager } from '../core/RepoManager';\nimport { validateArgCount } from '@firebase/util';\nimport { validateUrl } from '../core/util/validation';\nimport { FirebaseApp } from '@firebase/app-types';\nimport { FirebaseService } from '@firebase/app-types/private';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { FirebaseDatabase } from '@firebase/database-types';\n\n/**\n * Class representing a firebase database.\n * @implements {FirebaseService}\n */\nexport class Database implements FirebaseService {\n  INTERNAL: DatabaseInternals;\n  private root_: Reference;\n\n  static readonly ServerValue = {\n    TIMESTAMP: {\n      '.sv': 'timestamp'\n    }\n  };\n\n  /**\n   * The constructor should not be called by users of our public API.\n   * @param {!Repo} repo_\n   */\n  constructor(private repo_: Repo) {\n    if (!(repo_ instanceof Repo)) {\n      fatal(\n        \"Don't call new Database() directly - please use firebase.database().\"\n      );\n    }\n\n    /** @type {Reference} */\n    this.root_ = new Reference(repo_, Path.Empty);\n\n    this.INTERNAL = new DatabaseInternals(this);\n  }\n\n  get app(): FirebaseApp {\n    return this.repo_.app;\n  }\n\n  /**\n   * Returns a reference to the root or to the path specified in the provided\n   * argument.\n   *\n   * @param {string|Reference=} path The relative string path or an existing\n   * Reference to a database location.\n   * @throws If a Reference is provided, throws if it does not belong to the\n   * same project.\n   * @return {!Reference} Firebase reference.\n   */\n  ref(path?: string): Reference;\n  ref(path?: Reference): Reference;\n  ref(path?: string | Reference): Reference {\n    this.checkDeleted_('ref');\n    validateArgCount('database.ref', 0, 1, arguments.length);\n\n    if (path instanceof Reference) {\n      return this.refFromURL(path.toString());\n    }\n\n    return path !== undefined ? this.root_.child(path) : this.root_;\n  }\n\n  /**\n   * Returns a reference to the root or the path specified in url.\n   * We throw a exception if the url is not in the same domain as the\n   * current repo.\n   * @param {string} url\n   * @return {!Reference} Firebase reference.\n   */\n  refFromURL(url: string): Reference {\n    /** @const {string} */\n    const apiName = 'database.refFromURL';\n    this.checkDeleted_(apiName);\n    validateArgCount(apiName, 1, 1, arguments.length);\n    const parsedURL = parseRepoInfo(url);\n    validateUrl(apiName, 1, parsedURL);\n\n    const repoInfo = parsedURL.repoInfo;\n    if (repoInfo.host !== (this.repo_.repoInfo_ as RepoInfo).host) {\n      fatal(\n        apiName +\n          ': Host name does not match the current database: ' +\n          '(found ' +\n          repoInfo.host +\n          ' but expected ' +\n          (this.repo_.repoInfo_ as RepoInfo).host +\n          ')'\n      );\n    }\n\n    return this.ref(parsedURL.path.toString());\n  }\n\n  /**\n   * @param {string} apiName\n   */\n  private checkDeleted_(apiName: string) {\n    if (this.repo_ === null) {\n      fatal('Cannot call ' + apiName + ' on a deleted database.');\n    }\n  }\n\n  // Make individual repo go offline.\n  goOffline() {\n    validateArgCount('database.goOffline', 0, 0, arguments.length);\n    this.checkDeleted_('goOffline');\n    this.repo_.interrupt();\n  }\n\n  goOnline() {\n    validateArgCount('database.goOnline', 0, 0, arguments.length);\n    this.checkDeleted_('goOnline');\n    this.repo_.resume();\n  }\n}\n\nexport class DatabaseInternals {\n  /** @param {!Database} database */\n  constructor(public database: Database) {}\n\n  /** @return {Promise<void>} */\n  async delete(): Promise<void> {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (this.database as any).checkDeleted_('delete');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RepoManager.getInstance().deleteRepo((this.database as any).repo_ as Repo);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (this.database as any).repo_ = null;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (this.database as any).root_ = null;\n    this.database.INTERNAL = null;\n    this.database = null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { WebSocketConnection } from '../realtime/WebSocketConnection';\nimport { BrowserPollConnection } from '../realtime/BrowserPollConnection';\nimport { Reference } from './Reference';\n\n/**\n * INTERNAL methods for internal-use only (tests, etc.).\n *\n * Customers shouldn't use these or else should be aware that they could break at any time.\n *\n * @const\n */\n\nexport const forceLongPolling = function() {\n  WebSocketConnection.forceDisallow();\n  BrowserPollConnection.forceAllow();\n};\n\nexport const forceWebSockets = function() {\n  BrowserPollConnection.forceDisallow();\n};\n\n/* Used by App Manager */\nexport const isWebSocketsAvailable = function(): boolean {\n  return WebSocketConnection['isAvailable']();\n};\n\nexport const setSecurityDebugCallback = function(\n  ref: Reference,\n  callback: (a: object) => void\n) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (ref.repo.persistentConnection_ as any).securityDebugCallback_ = callback;\n};\n\nexport const stats = function(ref: Reference, showDelta?: boolean) {\n  ref.repo.stats(showDelta);\n};\n\nexport const statsIncrementCounter = function(ref: Reference, metric: string) {\n  ref.repo.statsIncrementCounter(metric);\n};\n\nexport const dataUpdateCount = function(ref: Reference): number {\n  return ref.repo.dataUpdateCount;\n};\n\nexport const interceptServerData = function(\n  ref: Reference,\n  callback: ((a: string, b: unknown) => void) | null\n) {\n  return ref.repo.interceptServerData_(callback);\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../core/RepoInfo';\nimport { PersistentConnection } from '../core/PersistentConnection';\nimport { RepoManager } from '../core/RepoManager';\nimport { Connection } from '../realtime/Connection';\nimport { Query } from './Query';\n\nexport const DataConnection = PersistentConnection;\n\n/**\n * @param {!string} pathString\n * @param {function(*)} onComplete\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(PersistentConnection.prototype as any).simpleListen = function(\n  pathString: string,\n  onComplete: (a: unknown) => void\n) {\n  this.sendRequest('q', { p: pathString }, onComplete);\n};\n\n/**\n * @param {*} data\n * @param {function(*)} onEcho\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(PersistentConnection.prototype as any).echo = function(\n  data: unknown,\n  onEcho: (a: unknown) => void\n) {\n  this.sendRequest('echo', { d: data }, onEcho);\n};\n\n// RealTimeConnection properties that we use in tests.\nexport const RealTimeConnection = Connection;\n\n/**\n * @param {function(): string} newHash\n * @return {function()}\n */\nexport const hijackHash = function(newHash: () => string) {\n  const oldPut = PersistentConnection.prototype.put;\n  PersistentConnection.prototype.put = function(\n    pathString,\n    data,\n    onComplete,\n    hash\n  ) {\n    if (hash !== undefined) {\n      hash = newHash();\n    }\n    oldPut.call(this, pathString, data, onComplete, hash);\n  };\n  return function() {\n    PersistentConnection.prototype.put = oldPut;\n  };\n};\n\n/**\n * @type {function(new:RepoInfo, !string, boolean, !string, boolean): undefined}\n */\nexport const ConnectionTarget = RepoInfo;\n\n/**\n * @param {!Query} query\n * @return {!string}\n */\nexport const queryIdentifier = function(query: Query) {\n  return query.queryIdentifier();\n};\n\n/**\n * Forces the RepoManager to create Repos that use ReadonlyRestClient instead of PersistentConnection.\n *\n * @param {boolean} forceRestClient\n */\nexport const forceRestClient = function(forceRestClient: boolean) {\n  RepoManager.getInstance().forceRestClient(forceRestClient);\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"],"sourceRoot":""}